<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='width=device-width, initial-scale=1' name='viewport'>
<meta content='IE=edge,chrome=1' http-equiv='X-UA-Compatible'>
<meta content='a free, open source, and cross-platform media player' name='description'>
<meta content='mpv, mplayer, download, media player, player download, encoder, video, video player, multimedia, multicast, Windows, Linux, Unix, BSD, Mac, macOS, OS X, OSX, Streaming, DVD, Matroska, MPEG, MPEG2, MPEG4, H264, DivX, MKV, m2ts, open source, free software, floss, free' name='keywords'>
<link href='/images/favicon-5d3b2a52.png' rel='icon' type='image/png'>
<title>mpv.io</title>
<link href="/stylesheets/all-26e0a54e.css" rel="stylesheet" />
<script src="/javascripts/all-58be2b4c.js"></script>
</head>
<body class='manual manual_master manual_master_index'>
<div class='navbar navbar-inverse navbar-static-top' role='navigation'>
<div class='container'>
<div class='navbar-header'>
<a class='hidden-xs navbar-brand' href='/'>
<img width="40" height="40" src="/images/mpv-logo-128-0baae5aa.png" alt="Mpv logo 128" />
<span class='title'>mpv</span>
<i class='fa fa-home'></i>
</a>
</div>
<div class='pull-right'>
<ul class='nav navbar-nav'>
<li>
<a href="/installation"><i class='fa fa-cloud-download'></i>
Installation
</a></li>
<!-- %li{nav_class(guides_path)} -->
<!-- = link_to guides_path do -->
<!-- %i.fa.fa-book -->
<!-- Guides -->
<li class='selected'>
<a href="/manual"><i class='fa fa-book'></i>
Reference
</a></li>
<li>
<a href="/bug-reports"><i class='fa fa-bug'></i>
Bug Reports
</a></li>
<li>
<a href="/community"><i class='fa fa-comments'></i>
Community
</a></li>
</ul>
</div>
</div>
</div>

<div class='main-content'>
<div class='container'>
<div class='row'>
<div class='col-lg-4 manual-navigation visible-lg'>
<div class='sticky' data-navigation-source='#manual' data-sticky-offset='20'></div>
</div>
<div class='col-lg-8 manual-container' id='manual'>
<div class="section" id="synopsis">
<h1>SYNOPSIS</h1>
<div class="line-block">
<div class="line"><strong>mpv</strong> [options] [file|URL|PLAYLIST|-]</div>
<div class="line"><strong>mpv</strong> [options] files</div>
</div>
</div>
<div class="section" id="description">
<h1>DESCRIPTION</h1>
<p><strong>mpv</strong> is a media player based on MPlayer and mplayer2. It supports a wide variety of video
file formats, audio and video codecs, and subtitle types. Special input URL
types are available to read input from a variety of sources other than disk
files. Depending on platform, a variety of different video and audio output
methods are supported.</p>
<p>Usage examples to get you started quickly can be found at the end of this man
page.</p>
</div>
<div class="section" id="interactive-control">
<h1>INTERACTIVE CONTROL</h1>
<p>mpv has a fully configurable, command-driven control layer which allows you
to control mpv using keyboard, mouse, or remote control (there is no
LIRC support - configure remotes as input devices instead).</p>
<p>See the <tt class="docutils literal"><span class="pre">--input-</span></tt> options for ways to customize it.</p>
<p>The following listings are not necessarily complete. See <tt class="docutils literal">etc/input.conf</tt>
in the mpv source files for a list of default bindings. User <tt class="docutils literal">input.conf</tt>
files and Lua scripts can define additional key bindings.</p>
<p>See <a class="reference internal" href="#command-interface">COMMAND INTERFACE</a> and <a class="reference internal" href="#key-names">Key names</a> sections for more details on
configuring keybindings.</p>
<p>See also <tt class="docutils literal"><span class="pre">--input-test</span></tt> for interactive binding details by key, and the
<a class="reference internal" href="#stats">stats</a> built-in script for key bindings list (including print to terminal).</p>
<div class="section" id="keyboard-control">
<h2>Keyboard Control</h2>
<dl class="docutils">
<dt>LEFT and RIGHT</dt>
<dd>Seek backward/forward 5 seconds. Shift+arrow does a 1 second exact seek
(see <tt class="docutils literal"><span class="pre">--hr-seek</span></tt>).</dd>
<dt>UP and DOWN</dt>
<dd>Seek forward/backward 1 minute. Shift+arrow does a 5 second exact seek (see
<tt class="docutils literal"><span class="pre">--hr-seek</span></tt>).</dd>
<dt>Ctrl+LEFT and Ctrl+RIGHT</dt>
<dd>Seek to the previous/next subtitle. Subject to some restrictions and
might not always work; see <tt class="docutils literal"><span class="pre">sub-seek</span></tt> command.</dd>
<dt>Ctrl+Shift+LEFT and Ctrl+Shift+RIGHT</dt>
<dd>Adjust subtitle delay so that the next or previous subtitle is displayed
now. This is especially useful to sync subtitles to audio.</dd>
<dt>[ and ]</dt>
<dd>Decrease/increase current playback speed by 10%.</dd>
<dt>{ and }</dt>
<dd>Halve/double current playback speed.</dd>
<dt>BACKSPACE</dt>
<dd>Reset playback speed to normal.</dd>
<dt>Shift+BACKSPACE</dt>
<dd>Undo the last seek. This works only if the playlist entry was not changed.
Hitting it a second time will go back to the original position.
See <tt class="docutils literal"><span class="pre">revert-seek</span></tt> command for details.</dd>
<dt>Shift+Ctrl+BACKSPACE</dt>
<dd>Mark the current position. This will then be used by <tt class="docutils literal">Shift+BACKSPACE</tt>
as revert position (once you seek back, the marker will be reset). You can
use this to seek around in the file and then return to the exact position
where you left off.</dd>
<dt>&lt; and &gt;</dt>
<dd>Go backward/forward in the playlist.</dd>
<dt>ENTER</dt>
<dd>Go forward in the playlist.</dd>
<dt>p and SPACE</dt>
<dd>Pause (pressing again unpauses).</dd>
<dt>.</dt>
<dd>Step forward. Pressing once will pause, every consecutive press will
play one frame and then go into pause mode again.</dd>
</dl>
<dl class="docutils">
<dt>,</dt>
<dd>Step backward. Pressing once will pause, every consecutive press will
play one frame in reverse and then go into pause mode again.</dd>
<dt>q</dt>
<dd>Stop playing and quit.</dd>
<dt>Q</dt>
<dd>Like <tt class="docutils literal">q</tt>, but store the current playback position. Playing the same file
later will resume at the old playback position if possible. See
<a class="reference internal" href="#resuming-playback">RESUMING PLAYBACK</a>.</dd>
<dt>/ and *</dt>
<dd>Decrease/increase volume.</dd>
<dt>KP_DIVIDE and KP_MULTIPLY</dt>
<dd>Decrease/increase volume.</dd>
<dt>9 and 0</dt>
<dd>Decrease/increase volume.</dd>
<dt>m</dt>
<dd>Mute sound.</dd>
<dt>_</dt>
<dd>Cycle through the available video tracks.</dd>
<dt>#</dt>
<dd>Cycle through the available audio tracks.</dd>
<dt>E</dt>
<dd>Cycle through the available Editions.</dd>
<dt>f</dt>
<dd>Toggle fullscreen (see also <tt class="docutils literal"><span class="pre">--fs</span></tt>).</dd>
<dt>ESC</dt>
<dd>Exit fullscreen mode.</dd>
<dt>T</dt>
<dd>Toggle stay-on-top (see also <tt class="docutils literal"><span class="pre">--ontop</span></tt>).</dd>
<dt>w and W</dt>
<dd>Decrease/increase pan-and-scan range. The <tt class="docutils literal">e</tt> key does the same as
<tt class="docutils literal">W</tt> currently, but use is discouraged.</dd>
<dt>o and P</dt>
<dd>Show progression bar, elapsed time and total duration on the OSD.</dd>
<dt>O</dt>
<dd>Toggle OSD states between normal and playback time/duration.</dd>
<dt>v</dt>
<dd>Toggle subtitle visibility.</dd>
<dt>j and J</dt>
<dd>Cycle through the available subtitles.</dd>
<dt>z and Z</dt>
<dd>Adjust subtitle delay by +/- 0.1 seconds. The <tt class="docutils literal">x</tt> key does the same as
<tt class="docutils literal">Z</tt> currently, but use is discouraged.</dd>
<dt>l</dt>
<dd>Set/clear A-B loop points. See <tt class="docutils literal"><span class="pre">ab-loop</span></tt> command for details.</dd>
<dt>L</dt>
<dd>Toggle infinite looping.</dd>
<dt>Ctrl++ and Ctrl+-</dt>
<dd>Adjust audio delay (A/V sync) by +/- 0.1 seconds.</dd>
<dt>Shift+g and Shift+f</dt>
<dd>Adjust subtitle font size by +/- 10%.</dd>
<dt>u</dt>
<dd>Switch between applying only <tt class="docutils literal"><span class="pre">--sub-ass-*</span></tt> overrides (default) to SSA/ASS
subtitles, and overriding them almost completely with the normal subtitle
style. See <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt> for more info.</dd>
<dt>V</dt>
<dd>Cycle through which video data gets used for ASS rendering.
See <tt class="docutils literal"><span class="pre">--sub-ass-use-video-data</span></tt> for more info.</dd>
<dt>r and R</dt>
<dd>Move subtitles up/down. The <tt class="docutils literal">t</tt> key does the same as <tt class="docutils literal">R</tt> currently, but
use is discouraged.</dd>
<dt>s</dt>
<dd>Take a screenshot.</dd>
<dt>S</dt>
<dd>Take a screenshot, without subtitles. (Whether this works depends on VO
driver support.)</dd>
<dt>Ctrl+s</dt>
<dd>Take a screenshot, as the window shows it (with subtitles, OSD, and scaled
video).</dd>
<dt>PGUP and PGDWN</dt>
<dd>Seek to the beginning of the previous/next chapter. In most cases,
&quot;previous&quot; will actually go to the beginning of the current chapter; see
<tt class="docutils literal"><span class="pre">--chapter-seek-threshold</span></tt>.</dd>
<dt>Shift+PGUP and Shift+PGDWN</dt>
<dd>Seek backward or forward by 10 minutes. (This used to be mapped to
PGUP/PGDWN without Shift.)</dd>
<dt>b</dt>
<dd>Activate/deactivate debanding.</dd>
<dt>d</dt>
<dd>Cycle the deinterlacing filter.</dd>
<dt>A</dt>
<dd>Cycle aspect ratio override.</dd>
<dt>Ctrl+h</dt>
<dd>Toggle hardware video decoding on/off.</dd>
<dt>Alt+LEFT, Alt+RIGHT, Alt+UP, Alt+DOWN</dt>
<dd>Move the video rectangle (panning).</dd>
<dt>Alt++ and Alt+-</dt>
<dd>Change video zoom.</dd>
<dt>Alt+BACKSPACE</dt>
<dd>Reset the pan/zoom settings.</dd>
<dt>F8</dt>
<dd>Show the playlist and the current position in it.</dd>
<dt>F9</dt>
<dd>Show the list of audio and subtitle streams.</dd>
<dt>i and I</dt>
<dd>Show/toggle an overlay displaying statistics about the currently playing
file such as codec, framerate, number of dropped frames and so on. See
<a class="reference internal" href="#stats">STATS</a> for more information.</dd>
<dt>DEL</dt>
<dd>Cycle OSC visibility between never / auto (mouse-move) / always</dd>
<dt>`</dt>
<dd>Show the console. (ESC closes it again. See <a class="reference internal" href="#console">CONSOLE</a>.)</dd>
</dl>
<p>(The following keys are valid only when using a video output that supports the
corresponding adjustment.)</p>
<dl class="docutils">
<dt>1 and 2</dt>
<dd>Adjust contrast.</dd>
<dt>3 and 4</dt>
<dd>Adjust brightness.</dd>
<dt>5 and 6</dt>
<dd>Adjust gamma.</dd>
<dt>7 and 8</dt>
<dd>Adjust saturation.</dd>
<dt>Alt+0 (and Command+0 on macOS)</dt>
<dd>Resize video window to half its original size.</dd>
<dt>Alt+1 (and Command+1 on macOS)</dt>
<dd>Resize video window to its original size.</dd>
<dt>Alt+2 (and Command+2 on macOS)</dt>
<dd>Resize video window to double its original size.</dd>
<dt>Command + f (macOS only)</dt>
<dd>Toggle fullscreen (see also <tt class="docutils literal"><span class="pre">--fs</span></tt>).</dd>
</dl>
<p>(The following keybindings open a selector in the console that lets you choose
from a list of items by typing part of the desired item and/or by navigating
them with keybindings: <tt class="docutils literal">Down</tt> and <tt class="docutils literal">Ctrl+n</tt> go down, <tt class="docutils literal">Up</tt> and <tt class="docutils literal">Ctrl+p</tt> go
up, <tt class="docutils literal">Page down</tt> and <tt class="docutils literal">Ctrl+f</tt> scroll down one page, and <tt class="docutils literal">Page up</tt> and
<tt class="docutils literal">Ctrl+b</tt> scroll up one page.)</p>
<dl class="docutils">
<dt>g-p</dt>
<dd>Select a playlist entry.</dd>
<dt>g-s</dt>
<dd>Select a subtitle track.</dd>
<dt>g-S</dt>
<dd>Select a secondary subtitle track.</dd>
<dt>g-a</dt>
<dd>Select an audio track.</dd>
<dt>g-v</dt>
<dd>Select a video track.</dd>
<dt>g-t</dt>
<dd>Select a track of any type.</dd>
<dt>g-c</dt>
<dd>Select a chapter.</dd>
<dt>g-l</dt>
<dd>Select a subtitle line to seek to. This currently requires <tt class="docutils literal">ffmpeg</tt> in
<tt class="docutils literal">PATH</tt>, or in the same folder as mpv on Windows.</dd>
<dt>g-d</dt>
<dd>Select an audio device.</dd>
<dt>g-b</dt>
<dd>Select a defined input binding.</dd>
<dt>g-r</dt>
<dd>Show the values of all properties.</dd>
</dl>
<p>(The following keys are valid if you have a keyboard with multimedia keys.)</p>
<dl class="docutils">
<dt>PAUSE</dt>
<dd>Pause.</dd>
<dt>STOP</dt>
<dd>Stop playing and quit.</dd>
<dt>PREVIOUS and NEXT</dt>
<dd>Seek backward/forward 1 minute.</dd>
<dt>ZOOMIN and ZOOMOUT</dt>
<dd>Change video zoom.</dd>
</dl>
<p>If you miss some older key bindings, look at <tt class="docutils literal"><span class="pre">etc/restore-old-bindings.conf</span></tt>
in the mpv git repository.</p>
</div>
<div class="section" id="mouse-control">
<h2>Mouse Control</h2>
<dl class="docutils">
<dt>Left double click</dt>
<dd>Toggle fullscreen on/off.</dd>
<dt>Right click</dt>
<dd>Toggle pause on/off.</dd>
<dt>Forward/Back button</dt>
<dd>Skip to next/previous entry in playlist.</dd>
<dt>Wheel up/down</dt>
<dd>Decrease/increase volume.</dd>
<dt>Wheel left/right</dt>
<dd>Seek forward/backward 10 seconds.</dd>
<dt>Ctrl+Wheel up/down</dt>
<dd>Change video zoom.</dd>
</dl>
</div>
<div class="section" id="context-menu">
<h2>Context Menu</h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This feature is experimental. It may not work with all VOs. A libass based
fallback may be implemented in the future.</p>
</div>
<p>Context Menu is a menu that pops up on the video window on user interaction
(mouse right click, etc.).</p>
<p>To use this feature, you need to fill the <tt class="docutils literal"><span class="pre">menu-data</span></tt> property with menu
definition data, and add a keybinding to run the <tt class="docutils literal"><span class="pre">context-menu</span></tt> command,
which can be done with a user script.</p>
</div>
</div>
<div class="section" id="usage">
<h1>USAGE</h1>
<p>Command line arguments starting with <tt class="docutils literal">-</tt> are interpreted as options,
everything else as filenames or URLs. All options except <em>flag</em> options (or
choice options which include <tt class="docutils literal">yes</tt>) require a parameter in the form
<tt class="docutils literal"><span class="pre">--option=value</span></tt>.</p>
<p>One exception is the lone <tt class="docutils literal">-</tt> (without anything else), which means media data
will be read from stdin. Also, <tt class="docutils literal"><span class="pre">--</span></tt> (without anything else) will make the
player interpret all following arguments as filenames, even if they start with
<tt class="docutils literal">-</tt>. (To play a file named <tt class="docutils literal">-</tt>, you need to use <tt class="docutils literal">./-</tt>.)</p>
<p>Every <em>flag</em> option has a <em>no-flag</em> counterpart, e.g. the opposite of the
<tt class="docutils literal"><span class="pre">--fs</span></tt> option is <tt class="docutils literal"><span class="pre">--no-fs</span></tt>. <tt class="docutils literal"><span class="pre">--fs=yes</span></tt> is same as <tt class="docutils literal"><span class="pre">--fs</span></tt>, <tt class="docutils literal"><span class="pre">--fs=no</span></tt>
is the same as <tt class="docutils literal"><span class="pre">--no-fs</span></tt>.</p>
<p>If an option is marked as <em>(XXX only)</em>, it will only work in combination with
the <em>XXX</em> option or if <em>XXX</em> is compiled in.</p>
<div class="section" id="legacy-option-syntax">
<h2>Legacy option syntax</h2>
<p>The <tt class="docutils literal"><span class="pre">--option=value</span></tt> syntax is not strictly enforced, and the alternative
legacy syntax <tt class="docutils literal"><span class="pre">-option</span> value</tt> and <tt class="docutils literal"><span class="pre">-option=value</span></tt> will also work. This is
mostly  for compatibility with MPlayer. Using these should be avoided. Their
semantics can change any time in the future.</p>
<p>For example, the alternative syntax will consider an argument following the
option a filename. <tt class="docutils literal">mpv <span class="pre">-fs</span> no</tt> will attempt to play a file named <tt class="docutils literal">no</tt>,
because <tt class="docutils literal"><span class="pre">--fs</span></tt> is a flag option that requires no parameter. If an option
changes and its parameter becomes optional, then a command line using the
alternative syntax will break.</p>
<p>Until mpv 0.31.0, there was no difference whether an option started with <tt class="docutils literal"><span class="pre">--</span></tt>
or a single <tt class="docutils literal">-</tt>. Newer mpv releases strictly expect that you pass the option
value after a <tt class="docutils literal">=</tt>. For example, before <tt class="docutils literal">mpv <span class="pre">--log-file</span> f.txt</tt> would write
a log to <tt class="docutils literal">f.txt</tt>, but now this command line fails, as <tt class="docutils literal"><span class="pre">--log-file</span></tt> expects
an option value, and <tt class="docutils literal">f.txt</tt> is simply considered a normal file to be played
(as in <tt class="docutils literal">mpv f.txt</tt>).</p>
<p>The future plan is that <tt class="docutils literal"><span class="pre">-option</span> value</tt> will not work anymore, and options
with a single <tt class="docutils literal">-</tt> behave the same as <tt class="docutils literal"><span class="pre">--</span></tt> options.</p>
</div>
<div class="section" id="escaping-spaces-and-other-special-characters">
<h2>Escaping spaces and other special characters</h2>
<p>Keep in mind that the shell will partially parse and mangle the arguments you
pass to mpv. For example, you might need to quote or escape options and
filenames:</p>
<blockquote>
<tt class="docutils literal">mpv &quot;filename with spaces.mkv&quot; <span class="pre">--title=&quot;window</span> title&quot;</tt></blockquote>
<p>It gets more complicated if the suboption parser is involved. The suboption
parser puts several options into a single string, and passes them to a
component at once, instead of using multiple options on the level of the
command line.</p>
<p>The suboption parser can quote strings with <tt class="docutils literal">&quot;</tt> and <tt class="docutils literal"><span class="pre">[...]</span></tt>.
Additionally, there is a special form of quoting with <tt class="docutils literal">%n%</tt> described below.</p>
<p>For example, assume the hypothetical <tt class="docutils literal">foo</tt> filter can take multiple options:</p>
<blockquote>
<tt class="docutils literal">mpv test.mkv <span class="pre">--vf=foo:option1=value1:option2:option3=value3,bar</span></tt></blockquote>
<p>This passes <tt class="docutils literal">option1</tt> and <tt class="docutils literal">option3</tt> to the <tt class="docutils literal">foo</tt> filter, with <tt class="docutils literal">option2</tt>
as flag (implicitly <tt class="docutils literal">option2=yes</tt>), and adds a <tt class="docutils literal">bar</tt> filter after that. If
an option contains spaces or characters like <tt class="docutils literal">,</tt> or <tt class="docutils literal">:</tt>, you need to quote
them:</p>
<blockquote>
<tt class="docutils literal">mpv <span class="pre">'--vf=foo:option1=&quot;option</span> value with <span class="pre">spaces&quot;,bar'</span></tt></blockquote>
<p>Shells may actually strip some quotes from the string passed to the commandline,
so the example quotes the string twice, ensuring that mpv receives the <tt class="docutils literal">&quot;</tt>
quotes.</p>
<p>The <tt class="docutils literal"><span class="pre">[...]</span></tt> form of quotes wraps everything between <tt class="docutils literal">[</tt> and <tt class="docutils literal">]</tt>. It's
useful with shells that don't interpret these characters in the middle of
an argument (like bash). These quotes are balanced (since mpv 0.9.0): the <tt class="docutils literal">[</tt>
and <tt class="docutils literal">]</tt> nest, and the quote terminates on the last <tt class="docutils literal">]</tt> that has no matching
<tt class="docutils literal">[</tt> within the string. (For example, <tt class="docutils literal">[a[b]c]</tt> results in <tt class="docutils literal">a[b]c</tt>.)</p>
<p>The fixed-length quoting syntax is intended for use with external
scripts and programs.</p>
<p>It is started with <tt class="docutils literal">%</tt> and has the following format:</p>
<pre class="literal-block">
%n%string_of_length_n
</pre>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<p><tt class="docutils literal">mpv <span class="pre">'--vf=foo:option1=%11%quoted</span> text' test.avi</tt></p>
<p>Or in a script:</p>
<p class="last"><tt class="docutils literal">mpv <span class="pre">--vf=foo:option1=%`expr</span> length <span class="pre">&quot;$NAME&quot;`%&quot;$NAME&quot;</span> test.avi</tt></p>
</div>
<p>Note: where applicable with JSON-IPC, <tt class="docutils literal">%n%</tt> is the length in UTF-8 bytes,
after decoding the JSON data.</p>
<p>Suboptions passed to the client API are also subject to escaping. Using
<tt class="docutils literal">mpv_set_option_string()</tt> is exactly like passing <tt class="docutils literal"><span class="pre">--name=data</span></tt> to the
command line (but without shell processing of the string). Some options
support passing values in a more structured way instead of flat strings, and
can avoid the suboption parsing mess. For example, <tt class="docutils literal"><span class="pre">--vf</span></tt> supports
<tt class="docutils literal">MPV_FORMAT_NODE</tt>, which lets you pass suboptions as a nested data structure
of maps and arrays.</p>
</div>
<div class="section" id="paths">
<h2>Paths</h2>
<p>Some care must be taken when passing arbitrary paths and filenames to mpv. For
example, paths starting with <tt class="docutils literal">-</tt> will be interpreted as options. Likewise,
if a path contains the sequence <tt class="docutils literal">://</tt>, the string before that might be
interpreted as protocol prefix, even though <tt class="docutils literal">://</tt> can be part of a legal
UNIX path. To avoid problems with arbitrary paths, you should be sure that
absolute paths passed to mpv start with <tt class="docutils literal">/</tt>, and prefix relative paths with
<tt class="docutils literal">./</tt>.</p>
<p>Using the <tt class="docutils literal"><span class="pre">file://</span></tt> pseudo-protocol is discouraged, because it involves
strange URL unescaping rules.</p>
<p>The name <tt class="docutils literal">-</tt> itself is interpreted as stdin, and will cause mpv to disable
console controls. (Which makes it suitable for playing data piped to stdin.)</p>
<p>The special argument <tt class="docutils literal"><span class="pre">--</span></tt> can be used to stop mpv from interpreting the
following arguments as options.</p>
<p>When using the client API, you should strictly avoid using <tt class="docutils literal">mpv_command_string</tt>
for invoking the <tt class="docutils literal">loadfile</tt> command, and instead prefer e.g. <tt class="docutils literal">mpv_command</tt>
to avoid the need for filename escaping.</p>
<p>For paths passed to suboptions, the situation is further complicated by the
need to escape special characters. To work this around, the path can be
additionally wrapped in the fixed-length syntax, e.g. <tt class="docutils literal">%n%string_of_length_n</tt>
(see above).</p>
<p>Some mpv options interpret paths starting with <tt class="docutils literal">~</tt>.
Currently, the prefix <tt class="docutils literal">~~home/</tt> expands to the mpv configuration directory
(usually <tt class="docutils literal"><span class="pre">~/.config/mpv/</span></tt>).
<tt class="docutils literal">~/</tt> expands to the user's home directory. (The trailing <tt class="docutils literal">/</tt> is always
required.) The following paths are currently recognized:</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Name</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal">~~/</tt></td>
<td>If the subpath exists in any of the mpv's config directories
the path of the existing file/dir is returned. Otherwise this
is equivalent to <tt class="docutils literal">~~home/</tt>.
Note that if --no-config is used <tt class="docutils literal"><span class="pre">~~/foobar</span></tt> will resolve to
<tt class="docutils literal">foobar</tt> which can be unexpected.</td>
</tr>
<tr><td><tt class="docutils literal">~/</tt></td>
<td>user home directory root (similar to shell, <tt class="docutils literal">$HOME</tt>)</td>
</tr>
<tr><td><tt class="docutils literal">~~home/</tt></td>
<td>mpv config dir (for example <tt class="docutils literal"><span class="pre">~/.config/mpv/</span></tt>)</td>
</tr>
<tr><td><tt class="docutils literal">~~global/</tt></td>
<td>the global config path, if available (not on win32)</td>
</tr>
<tr><td><tt class="docutils literal">~~osxbundle/</tt></td>
<td>the macOS bundle resource path (macOS only)</td>
</tr>
<tr><td><tt class="docutils literal">~~desktop/</tt></td>
<td>the path to the desktop (win32, macOS)</td>
</tr>
<tr><td><tt class="docutils literal">~~exe_dir/</tt></td>
<td>win32 only: the path to the directory containing the exe (for
config file purposes; <tt class="docutils literal">$MPV_HOME</tt> overrides it)</td>
</tr>
<tr><td><tt class="docutils literal">~~cache/</tt></td>
<td>the path to application cache data (<tt class="docutils literal"><span class="pre">~/.cache/mpv/</span></tt>)
On some platforms, this will be the same as <tt class="docutils literal">~~home/</tt>.</td>
</tr>
<tr><td><tt class="docutils literal">~~state/</tt></td>
<td>the path to application state data (<tt class="docutils literal"><span class="pre">~/.local/state/mpv/</span></tt>)
On some platforms, this will be the same as <tt class="docutils literal">~~home/</tt>.</td>
</tr>
<tr><td><tt class="docutils literal">~~old_home/</tt></td>
<td>do not use</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="per-file-options">
<h2>Per-File Options</h2>
<p>When playing multiple files, any option given on the command line usually
affects all files. Example:</p>
<pre class="literal-block">
mpv --a file1.mkv --b file2.mkv --c
</pre>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">File</th>
<th class="head">Active options</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>file1.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--c</span></tt></td>
</tr>
<tr><td>file2.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--c</span></tt></td>
</tr>
</tbody>
</table>
<p>(This is different from MPlayer and mplayer2.)</p>
<p>Also, if any option is changed at runtime (via input commands), they are not
reset when a new file is played.</p>
<p>Sometimes, it is useful to change options per-file. This can be achieved by
adding the special per-file markers <tt class="docutils literal"><span class="pre">--{</span></tt> and <tt class="docutils literal"><span class="pre">--}</span></tt>. (Note that you must
escape these on some shells.) Example:</p>
<pre class="literal-block">
mpv --a file1.mkv --b --\{ --c file2.mkv --d file3.mkv --e --\} file4.mkv --f
</pre>
<table border="1" class="docutils">
<colgroup>
<col width="36%" />
<col width="64%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">File</th>
<th class="head">Active options</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>file1.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--f</span></tt></td>
</tr>
<tr><td>file2.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--f</span> <span class="pre">--c</span> <span class="pre">--d</span> <span class="pre">--e</span></tt></td>
</tr>
<tr><td>file3.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--f</span> <span class="pre">--c</span> <span class="pre">--d</span> <span class="pre">--e</span></tt></td>
</tr>
<tr><td>file4.mkv</td>
<td><tt class="docutils literal"><span class="pre">--a</span> <span class="pre">--b</span> <span class="pre">--f</span></tt></td>
</tr>
</tbody>
</table>
<p>Additionally, any file-local option changed at runtime is reset when the current
file stops playing. If option <tt class="docutils literal"><span class="pre">--c</span></tt> is changed during playback of
<tt class="docutils literal">file2.mkv</tt>, it is reset when advancing to <tt class="docutils literal">file3.mkv</tt>. This only affects
file-local options. The option <tt class="docutils literal"><span class="pre">--a</span></tt> is never reset here.</p>
</div>
<div class="section" id="list-options">
<h2>List Options</h2>
<p>Some options which store lists of option values can have action suffixes. For
example, the <tt class="docutils literal"><span class="pre">--display-tags</span></tt> option takes a <tt class="docutils literal">,</tt>-separated list of tags, but
the option also allows you to append a single tag with <tt class="docutils literal"><span class="pre">--display-tags-append</span></tt>,
and the tag name can for example contain a literal <tt class="docutils literal">,</tt> without the need for
escaping.</p>
<div class="section" id="string-list-and-path-list-options">
<h3>String list and path list options</h3>
<p>String lists are separated by <tt class="docutils literal">,</tt>. The strings are not parsed or interpreted
by the option system itself. However, most path or file list options use <tt class="docutils literal">:</tt>
(Unix) or <tt class="docutils literal">;</tt> (Windows) as separator, instead of <tt class="docutils literal">,</tt>.</p>
<p>They support the following operations:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Suffix</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>-set</td>
<td>Set a list of items (using the list separator, escaped with backslash)</td>
</tr>
<tr><td>-append</td>
<td>Append single item (does not interpret escapes)</td>
</tr>
<tr><td>-add</td>
<td>Append 1 or more items (same syntax as -set)</td>
</tr>
<tr><td>-pre</td>
<td>Prepend 1 or more items (same syntax as -set)</td>
</tr>
<tr><td>-clr</td>
<td>Clear the option (remove all items)</td>
</tr>
<tr><td>-remove</td>
<td>Delete item if present (does not interpret escapes)</td>
</tr>
<tr><td>-toggle</td>
<td>Append an item, or remove it if it already exists (no escapes)</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal"><span class="pre">-append</span></tt> is meant as a simple way to append a single item without having
to escape the argument (you may still need to escape on the shell level).</p>
</div>
<div class="section" id="key-value-list-options">
<h3>Key/value list options</h3>
<p>A key/value list is a list of key/value string pairs. In programming languages,
this type of data structure is often called a map or a dictionary. The order
normally does not matter, although in some cases the order might matter.</p>
<p>They support the following operations:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Suffix</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>-set</td>
<td>Set a list of items (using <tt class="docutils literal">,</tt> as separator)</td>
</tr>
<tr><td>-append</td>
<td>Append a single item (escapes for the key, no escapes for the value)</td>
</tr>
<tr><td>-add</td>
<td>Append 1 or more items (same syntax as -set)</td>
</tr>
<tr><td>-remove</td>
<td>Delete item by key if present (does not interpret escapes)</td>
</tr>
</tbody>
</table>
<p>Keys are unique within the list. If an already present key is set, the existing
key is removed before the new value is appended.</p>
<p>If you want to pass a value without interpreting it for escapes or <tt class="docutils literal">,</tt>, it is
recommended to use the <tt class="docutils literal"><span class="pre">-append</span></tt> variant. When using libmpv, prefer using
<tt class="docutils literal">MPV_FORMAT_NODE_MAP</tt>; when using a scripting backend or the JSON IPC, use an
appropriate structured data type.</p>
<p>Prior to mpv 0.33, <tt class="docutils literal">:</tt> was also recognized as separator by <tt class="docutils literal"><span class="pre">-set</span></tt>.</p>
</div>
<div class="section" id="object-settings-list-options">
<h3>Object settings list options</h3>
<p>This is a very complex option type for some options, such as <tt class="docutils literal"><span class="pre">--af</span></tt> and <tt class="docutils literal"><span class="pre">--vf</span></tt>.
They often require complicated escaping. See <a class="reference internal" href="#video-filters">VIDEO FILTERS</a> for details.</p>
<p>They support the following operations:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Suffix</th>
<th class="head">Meaning</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>-set</td>
<td>Set a list of items (using <tt class="docutils literal">,</tt> as separator)</td>
</tr>
<tr><td>-append</td>
<td>Append single item</td>
</tr>
<tr><td>-add</td>
<td>Append 1 or more items (same syntax as -set)</td>
</tr>
<tr><td>-pre</td>
<td>Prepend 1 or more items (same syntax as -set)</td>
</tr>
<tr><td>-clr</td>
<td>Clear the option (remove all items)</td>
</tr>
<tr><td>-remove</td>
<td>Delete item if present</td>
</tr>
<tr><td>-toggle</td>
<td>Append an item, or remove it if it already exists</td>
</tr>
<tr><td>-help</td>
<td>Pseudo operation that prints a help text to the terminal</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="general">
<h3>General</h3>
<p>Without suffix, the operation used is normally <tt class="docutils literal"><span class="pre">-set</span></tt>.</p>
<p>Although some operations allow specifying multiple items, using this is strongly
discouraged and deprecated, except for <tt class="docutils literal"><span class="pre">-set</span></tt>. There is a chance that
operations like <tt class="docutils literal"><span class="pre">-add</span></tt> and <tt class="docutils literal"><span class="pre">-pre</span></tt> will work like <tt class="docutils literal"><span class="pre">-append</span></tt> and accept a
single, unescaped item only (so the <tt class="docutils literal">,</tt> separator will not be interpreted and
is passed on as part of the value).</p>
<p>Some options (like <tt class="docutils literal"><span class="pre">--sub-file</span></tt>, <tt class="docutils literal"><span class="pre">--audio-file</span></tt>, <tt class="docutils literal"><span class="pre">--glsl-shader</span></tt>) are
aliases for the proper option with <tt class="docutils literal"><span class="pre">-append</span></tt> action. For example,
<tt class="docutils literal"><span class="pre">--sub-file</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--sub-files-append</span></tt>.</p>
<p>Options of this type can be changed at runtime using the <tt class="docutils literal"><span class="pre">change-list</span></tt>
command, which takes the suffix (without the <tt class="docutils literal">-</tt>) as separate operation
parameter.</p>
<p>An object settings list can hold up to 100 elements.</p>
</div>
</div>
</div>
<div class="section" id="configuration-files">
<h1>CONFIGURATION FILES</h1>
<div class="section" id="location-and-syntax">
<h2>Location and Syntax</h2>
<p>You can put all of the options in configuration files which will be read every
time mpv is run. The system-wide configuration file 'mpv.conf' is in your
configuration directory (e.g. <tt class="docutils literal">/etc/mpv</tt> or <tt class="docutils literal">/usr/local/etc/mpv</tt>), the
user-specific one is <tt class="docutils literal"><span class="pre">~/.config/mpv/mpv.conf</span></tt>. For details and platform
specifics (in particular Windows paths) see the <a class="reference internal" href="#files">FILES</a> section.</p>
<p>User-specific options override system-wide options and options given on the
command line override both. The syntax of the configuration files is
<tt class="docutils literal">option=value</tt>. Everything after a <em>#</em> is considered a comment. Options that
work without values can be enabled by setting them to <em>yes</em> and disabled by
setting them to <em>no</em>, and if the value is omitted, <em>yes</em> is implied. Even
suboptions can be specified in this way.</p>
<div class="admonition admonition-example-configuration-file">
<p class="first admonition-title">Example configuration file</p>
<pre class="last literal-block">
# Don't allow new windows to be larger than the screen.
autofit-larger=100%x100%
# Enable hardware decoding if available, =yes is implied.
hwdec
# Spaces don't have to be escaped.
osd-playing-msg=File: ${filename}
</pre>
</div>
</div>
<div class="section" id="escaping-special-characters">
<h2>Escaping special characters</h2>
<p>This is done like with command line options. A config entry can be quoted with
<tt class="docutils literal">&quot;</tt>, <tt class="docutils literal">'</tt>, as well as with the fixed-length syntax (<tt class="docutils literal">%n%</tt>) mentioned
before. This is like passing the exact contents of the quoted string as a
command line option. C-style escapes are currently _not_ interpreted on this
level, although some options do this manually (this is a mess and should
probably be changed at some point). The shell is not involved here, so option
values only need to be quoted to escape <tt class="docutils literal">#</tt> anywhere in the value, <tt class="docutils literal">&quot;</tt>,
<tt class="docutils literal">'</tt> or <tt class="docutils literal">%</tt> at the beginning of the value, and leading and trailing
whitespace.</p>
</div>
<div class="section" id="putting-command-line-options-into-the-configuration-file">
<h2>Putting Command Line Options into the Configuration File</h2>
<p>Almost all command line options can be put into the configuration file. Here
is a small guide:</p>
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Option</th>
<th class="head">Configuration file entry</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="docutils literal"><span class="pre">--flag</span></tt></td>
<td><tt class="docutils literal">flag</tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">-opt</span> val</tt></td>
<td><tt class="docutils literal">opt=val</tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">--opt=val</span></tt></td>
<td><tt class="docutils literal">opt=val</tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">-opt</span> &quot;has spaces&quot;</tt></td>
<td><tt class="docutils literal">opt=has spaces</tt></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="file-specific-configuration-files">
<h2>File-specific Configuration Files</h2>
<p>You can also write file-specific configuration files. If you wish to have a
configuration file for a file called 'video.avi', create a file named
'video.avi.conf' with the file-specific options in it and put it in
<tt class="docutils literal"><span class="pre">~/.config/mpv/</span></tt>. You can also put the configuration file in the same directory
as the file to be played. Both require you to set the <tt class="docutils literal"><span class="pre">--use-filedir-conf</span></tt>
option (either on the command line or in your global config file). If a
file-specific configuration file is found in the same directory, no
file-specific configuration is loaded from <tt class="docutils literal"><span class="pre">~/.config/mpv</span></tt>. In addition, the
<tt class="docutils literal"><span class="pre">--use-filedir-conf</span></tt> option enables directory-specific configuration files.
For this, mpv first tries to load a mpv.conf from the same directory
as the file played and then tries to load any file-specific configuration.</p>
</div>
<div class="section" id="profiles">
<h2>Profiles</h2>
<p>To ease working with different configurations, profiles can be defined in the
configuration files. A profile starts with its name in square brackets,
e.g. <tt class="docutils literal"><span class="pre">[my-profile]</span></tt>. All following options will be part of the profile. A
description (shown by <tt class="docutils literal"><span class="pre">--profile=help</span></tt>) can be defined with the
<tt class="docutils literal"><span class="pre">profile-desc</span></tt> option. To end the profile, start another one or use the
profile name <tt class="docutils literal">default</tt> to continue with normal options.</p>
<p>You can list profiles with <tt class="docutils literal"><span class="pre">--profile=help</span></tt>, and show the contents of a
profile with <tt class="docutils literal"><span class="pre">--show-profile=&lt;name&gt;</span></tt> (replace <tt class="docutils literal">&lt;name&gt;</tt> with the profile
name). You can apply profiles on start with the <tt class="docutils literal"><span class="pre">--profile=&lt;name&gt;</span></tt> option,
or at runtime with the <tt class="docutils literal"><span class="pre">apply-profile</span> &lt;name&gt;</tt> command.</p>
<div class="admonition admonition-example-mpv-config-file-with-profiles">
<p class="first admonition-title">Example mpv config file with profiles</p>
<pre class="last literal-block">
# normal top-level option
fullscreen=yes

# a profile that can be enabled with --profile=big-cache
[big-cache]
cache=yes
demuxer-max-bytes=512MiB
demuxer-readahead-secs=20

[network]
profile-desc=&quot;profile for content over network&quot;
force-window=immediate
# you can also include other profiles
profile=big-cache

[reduce-judder]
video-sync=display-resample
interpolation=yes

# using a profile again extends it
[network]
demuxer-max-back-bytes=512MiB
# reference a builtin profile
profile=fast
</pre>
</div>
</div>
<div class="section" id="runtime-profiles">
<h2>Runtime profiles</h2>
<p>Profiles can be set at runtime with <tt class="docutils literal"><span class="pre">apply-profile</span></tt> command. Since this
operation is &quot;destructive&quot; (every item in a profile is simply set as an
option, overwriting the previous value), you can't just enable and disable
profiles again.</p>
<p>As a partial remedy, there is a way to make profiles save old option values
before overwriting them with the profile values, and then restoring the old
values at a later point using <tt class="docutils literal"><span class="pre">apply-profile</span> <span class="pre">&lt;profile-name&gt;</span> restore</tt>.</p>
<p>This can be enabled with the <tt class="docutils literal"><span class="pre">profile-restore</span></tt> option, which takes one of
the following options:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">default</tt></dt>
<dd>Does nothing, and nothing can be restored (default).</dd>
<dt><tt class="docutils literal">copy</tt></dt>
<dd><p class="first">When applying a profile, copy the old values of all profile options to a
backup before setting them from the profile. These options are reset to
their old values using the backup when restoring.</p>
<p>Every profile has its own list of backed up values. If the backup
already exists (e.g. if <tt class="docutils literal"><span class="pre">apply-profile</span> name</tt> was called more than
once in a row), the existing backup is no changed. The restore operation
will remove the backup.</p>
<p>It's important to know that restoring does not &quot;undo&quot; setting an option,
but simply copies the old option value. Consider for example <tt class="docutils literal"><span class="pre">vf-add</span></tt>,
appends an entry to <tt class="docutils literal">vf</tt>. This mechanism will simply copy the entire
<tt class="docutils literal">vf</tt> list, and does _not_ execute the inverse of <tt class="docutils literal"><span class="pre">vf-add</span></tt> (that
would be <tt class="docutils literal"><span class="pre">vf-remove</span></tt>) on restoring.</p>
<p class="last">Note that if a profile contains recursive profiles (via the <tt class="docutils literal">profile</tt>
option), the options in these recursive profiles are treated as if they
were part of this profile. The referenced profile's backup list is not
used when creating or using the backup. Restoring a profile does not
restore referenced profiles, only the options of referenced profiles (as
if they were part of the main profile).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">copy-equal</span></tt></dt>
<dd>Similar to <tt class="docutils literal">copy</tt>, but restore an option only if it has the same value
as the value effectively set by the profile. This tries to deal with
the situation when the user does not want the option to be reset after
interactively changing it.</dd>
</dl>
</blockquote>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<pre class="literal-block">
[something]
profile-restore=copy-equal
vf-add=rotate=PI/2  # rotate by 90 degrees
</pre>
<p>Then running these commands will result in behavior as commented:</p>
<pre class="last literal-block">
set vf vflip
apply-profile something
vf add hflip
apply-profile something
# vf == vflip,rotate=PI/2,hflip,rotate=PI/2
apply-profile something restore
# vf == vflip
</pre>
</div>
</div>
<div class="section" id="conditional-auto-profiles">
<h2>Conditional auto profiles</h2>
<p>Profiles which have the <tt class="docutils literal"><span class="pre">profile-cond</span></tt> option set are applied automatically
if the associated condition matches (unless auto profiles are disabled). The
option takes a string, which is interpreted as Lua expression. If the
expression evaluates as truthy, the profile is applied. If the expression
errors or evaluates as falsy, the profile is not applied. This Lua code
execution is not sandboxed.</p>
<p>Any variables in condition expressions can reference properties. If an
identifier is not already defined by Lua or mpv, it is interpreted as property.
For example, <tt class="docutils literal">pause</tt> would return the current pause status. You cannot
reference properties with <tt class="docutils literal">-</tt> this way since that would denote a subtraction,
but if the variable name contains any <tt class="docutils literal">_</tt> characters, they are turned into
<tt class="docutils literal">-</tt>. For example, <tt class="docutils literal">playback_time</tt> would return the property
<tt class="docutils literal"><span class="pre">playback-time</span></tt>.</p>
<p>A more robust way to access properties is using <tt class="docutils literal">p.property_name</tt> or
<tt class="docutils literal"><span class="pre">get(&quot;property-name&quot;,</span> default_value)</tt>. The automatic variable to property
magic will break if a new identifier with the same name is introduced (for
example, if a function named <tt class="docutils literal">pause()</tt> were added, <tt class="docutils literal">pause</tt> would return a
function value instead of the value of the <tt class="docutils literal">pause</tt> property).</p>
<p>Note that if a property is not available, it will return <tt class="docutils literal">nil</tt>, which can
cause errors if used in expressions. These are logged in verbose mode, and the
expression is considered to be false.</p>
<p>Whenever a property referenced by a profile condition changes, the condition
is re-evaluated. If the return value of the condition changes from falsy or
error to truthy, the profile is applied.</p>
<p>This mechanism tries to &quot;unapply&quot; profiles once the condition changes from
truthy to falsy or error. If you want to use this, you need to set
<tt class="docutils literal"><span class="pre">profile-restore</span></tt> for the profile. Another possibility it to create another
profile with an inverse condition to undo the other profile.</p>
<p>Recursive profiles can be used. But it is discouraged to reference other
conditional profiles in a conditional profile, since this can lead to tricky
and unintuitive behavior.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<p>Make only HD video look funny:</p>
<pre class="literal-block">
[something]
profile-desc=HD video sucks
profile-cond=width &gt;= 1280
hue=-50
</pre>
<p>Make only videos containing &quot;youtube&quot; or &quot;youtu.be&quot; in their path brighter:</p>
<pre class="literal-block">
[youtube]
profile-cond=path:find('youtu%.?be')
gamma=20
</pre>
<p>If you want the profile to be reverted if the condition goes to false again,
you can set <tt class="docutils literal"><span class="pre">profile-restore</span></tt>:</p>
<pre class="literal-block">
[something]
profile-desc=Mess up video when entering fullscreen
profile-cond=fullscreen
profile-restore=copy
vf-add=rotate=PI/2  # rotate by 90 degrees
</pre>
<p>This appends the <tt class="docutils literal">rotate</tt> filter to the video filter chain when entering
fullscreen. When leaving fullscreen, the <tt class="docutils literal">vf</tt> option is set to the value
it had before entering fullscreen. Note that this would also remove any
other filters that were added during fullscreen mode by the user. Avoiding
this is trickier, and could for example be solved by adding a second profile
with an inverse condition and operation:</p>
<pre class="last literal-block">
[something]
profile-cond=fullscreen
vf-add=&#64;rot:rotate=PI/2

[something-inv]
profile-cond=not fullscreen
vf-remove=&#64;rot
</pre>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Every time an involved property changes, the condition is evaluated again.
If your condition uses <tt class="docutils literal">p.playback_time</tt> for example, the condition is
re-evaluated approximately on every video frame. This is probably slow.</p>
</div>
<p>This feature is managed by an internal Lua script. Conditions are executed as
Lua code within this script. Its environment contains at least the following
things:</p>
<dl class="docutils">
<dt><tt class="docutils literal">(function environment table)</tt></dt>
<dd><p class="first">Every Lua function has an environment table. This is used for identifier
access. There is no named Lua symbol for it; it is implicit.</p>
<p>The environment does &quot;magic&quot; accesses to mpv properties. If an identifier
is not already defined in <tt class="docutils literal">_G</tt>, it retrieves the mpv property of the same
name. Any occurrences of <tt class="docutils literal">_</tt> in the name are replaced with <tt class="docutils literal">-</tt> before
reading the property. The returned value is as retrieved by
<tt class="docutils literal">mp.get_property_native(name)</tt>. Internally, a cache of property values,
updated by observing the property is used instead, so properties that are
not observable will be stuck at the initial value forever.</p>
<p>If you want to access properties, that actually contain <tt class="docutils literal">_</tt> in the name,
use <tt class="docutils literal">get()</tt> (which does not perform transliteration).</p>
<p class="last">Internally, the environment table has a <tt class="docutils literal">__index</tt> meta method set, which
performs the access logic.</p>
</dd>
<dt><tt class="docutils literal">p</tt></dt>
<dd>A &quot;magic&quot; table similar to the environment table. Unlike the latter, this
does not prefer accessing variables defined in <tt class="docutils literal">_G</tt> - it always accesses
properties.</dd>
<dt><tt class="docutils literal">get(name [, def])</tt></dt>
<dd><p class="first">Read a property and return its value. If the property value is <tt class="docutils literal">nil</tt> (e.g.
if the property does not exist), <tt class="docutils literal">def</tt> is returned.</p>
<p>This is superficially similar to <tt class="docutils literal">mp.get_property_native(name)</tt>. An
important difference is that this accesses the property cache, and enables
the change detection logic (which is essential to the dynamic runtime
behavior of auto profiles). Also, it does not return an error value as
second return value.</p>
<p class="last">The &quot;magic&quot; tables mentioned above use this function as backend. It does not
perform the <tt class="docutils literal">_</tt> transliteration.</p>
</dd>
</dl>
<p>In addition, the same environment as in a blank mpv Lua script is present. For
example, <tt class="docutils literal">math</tt> is defined and gives access to the Lua standard math library.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This feature is subject to change indefinitely. You might be forced to
adjust your profiles on mpv updates.</p>
</div>
</div>
<div class="section" id="legacy-auto-profiles">
<h2>Legacy auto profiles</h2>
<p>Some profiles are loaded automatically using a legacy mechanism. The following
example demonstrates this:</p>
<div class="admonition admonition-auto-profile-loading">
<p class="first admonition-title">Auto profile loading</p>
<pre class="last literal-block">
[extension.mkv]
profile-desc=&quot;profile for .mkv files&quot;
vf=vflip
</pre>
</div>
<p>The profile name follows the schema <tt class="docutils literal">type.name</tt>, where type can be
<tt class="docutils literal">protocol</tt> for the input/output protocol in use (see <tt class="docutils literal"><span class="pre">--list-protocols</span></tt>),
and <tt class="docutils literal">extension</tt> for the extension of the path of the currently played file
(<em>not</em> the file format).</p>
<p>This feature is very limited, and is considered soft-deprecated. Use conditional
auto profiles.</p>
</div>
</div>
<div class="section" id="using-mpv-from-other-programs-or-scripts">
<h1>Using mpv from other programs or scripts</h1>
<p>There are three choices for using mpv from other programs or scripts:</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Calling it as UNIX process. If you do this, <em>do not parse terminal output</em>.
The terminal output is intended for humans, and may change any time. In
addition, terminal behavior itself may change any time. Compatibility
cannot be guaranteed.</p>
<p>Your code should work even if you pass <tt class="docutils literal"><span class="pre">--terminal=no</span></tt>. Do not attempt
to simulate user input by sending terminal control codes to mpv's stdin.
If you need interactive control, using <tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt> or
<tt class="docutils literal"><span class="pre">--input-ipc-client</span></tt> is recommended. This gives you access to the
<a class="reference internal" href="#json-ipc">JSON IPC</a>  over unix domain sockets (or named pipes on Windows).</p>
<p>Depending on what you do, passing <tt class="docutils literal"><span class="pre">--no-config</span></tt> or <tt class="docutils literal"><span class="pre">--config-dir</span></tt> may
be a good idea to avoid conflicts with the normal mpv user configuration
intended for CLI playback.</p>
<p>Using <tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt> or <tt class="docutils literal"><span class="pre">--input-ipc-client</span></tt> is also suitable for
purposes like remote control (however, the IPC protocol itself is not
&quot;secure&quot; and not intended to be so).</p>
</li>
<li><p class="first">Using libmpv. This is generally recommended when mpv is used as playback
backend for a completely different application. The provided C API is
very close to CLI mechanisms and the scripting API.</p>
<p>Note that even though libmpv has different defaults, it can be configured
to work exactly like the CLI player (except command line parsing is
unavailable).</p>
<p>See <a class="reference internal" href="#embedding-into-other-programs-libmpv">EMBEDDING INTO OTHER PROGRAMS (LIBMPV)</a>.</p>
</li>
<li><p class="first">As a user script (<a class="reference internal" href="#lua-scripting">LUA SCRIPTING</a>, <a class="reference internal" href="#javascript">JAVASCRIPT</a>, <a class="reference internal" href="#c-plugins">C PLUGINS</a>). This is
recommended when the goal is to &quot;enhance&quot; the CLI player. Scripts get
access to the entire client API of mpv.</p>
<p>This is the standard way to create third-party extensions for the player.</p>
</li>
</ol>
</blockquote>
<p>All these access the client API, which is the sum of the various mechanisms
provided by the player core, as documented here: <a class="reference internal" href="#options">OPTIONS</a>,
<a class="reference internal" href="#list-of-input-commands">List of Input Commands</a>, <a class="reference internal" href="#properties">Properties</a>, <a class="reference internal" href="#list-of-events">List of events</a> (also see C API),
<a class="reference internal" href="#hooks">Hooks</a>.</p>
</div>
<div class="section" id="taking-screenshots">
<h1>TAKING SCREENSHOTS</h1>
<p>Screenshots of the currently played file can be taken using the 'screenshot'
input mode command, which is by default bound to the <tt class="docutils literal">s</tt> key. Files named
<tt class="docutils literal"><span class="pre">mpv-shotNNNN.jpg</span></tt> will be saved in the working directory, using the first
available number - no files will be overwritten. In pseudo-GUI mode, the
screenshot will be saved somewhere else. See <a class="reference internal" href="#pseudo-gui-mode">PSEUDO GUI MODE</a>.</p>
<p>A screenshot will usually contain the unscaled video contents at the end of the
video filter chain and subtitles. By default, <tt class="docutils literal">S</tt> takes screenshots without
subtitles, while <tt class="docutils literal">s</tt> includes subtitles.</p>
<p>Unlike with MPlayer, the <tt class="docutils literal">screenshot</tt> video filter is not required. This
filter was never required in mpv, and has been removed.</p>
</div>
<div class="section" id="terminal-status-line">
<h1>TERMINAL STATUS LINE</h1>
<p>During playback, mpv shows the playback status on the terminal. It looks like
something like this:</p>
<blockquote>
<tt class="docutils literal">AV: 00:03:12 / 00:24:25 (13%) <span class="pre">A-V:</span> <span class="pre">-0.000</span></tt></blockquote>
<p>The status line can be overridden with the <tt class="docutils literal"><span class="pre">--term-status-msg</span></tt> option.</p>
<p>The following is a list of things that can show up in the status line. Input
properties, that can be used to get the same information manually, are also
listed.</p>
<ul class="simple">
<li><tt class="docutils literal">AV:</tt> or <tt class="docutils literal">V:</tt> (video only) or <tt class="docutils literal">A:</tt> (audio only)</li>
<li>The current time position in <tt class="docutils literal">HH:MM:SS</tt> format (<tt class="docutils literal"><span class="pre">playback-time</span></tt> property)</li>
<li>The total file duration (absent if unknown) (<tt class="docutils literal">duration</tt> property)</li>
<li>Playback speed, e.g. <tt class="docutils literal">x2.0</tt>. Only visible if the speed is not normal. This
is the user-requested speed, and not the actual speed  (usually they should
be the same, unless playback is too slow). (<tt class="docutils literal">speed</tt> property.)</li>
<li>Playback percentage, e.g. <tt class="docutils literal">(13%)</tt>. How much of the file has been played.
Normally calculated out of playback position and duration, but can fallback
to other methods (like byte position) if these are not available.
(<tt class="docutils literal"><span class="pre">percent-pos</span></tt> property.)</li>
<li>The audio/video sync as <tt class="docutils literal"><span class="pre">A-V:</span>&nbsp; 0.000</tt>. This is the difference between
audio and video time. Normally it should be 0 or close to 0. If it's growing,
it might indicate a playback problem. (<tt class="docutils literal">avsync</tt> property.)</li>
<li>Total A/V sync change, e.g. <tt class="docutils literal">ct: <span class="pre">-0.417</span></tt>. Normally invisible. Can show up
if there is audio &quot;missing&quot;, or not enough frames can be dropped. Usually
this will indicate a problem. (<tt class="docutils literal"><span class="pre">total-avsync-change</span></tt> property.)</li>
<li>Encoding state in <tt class="docutils literal"><span class="pre">{...}</span></tt>, only shown in encoding mode.</li>
<li>Display sync state. If display sync is active (<tt class="docutils literal"><span class="pre">display-sync-active</span></tt>
property), this shows <tt class="docutils literal">DS: 2.500/13</tt>, where the first number is average
number of vsyncs per video frame (e.g. 2.5 when playing 24Hz videos on 60Hz
screens), which might jitter if the ratio doesn't round off, or there are
mistimed frames (<tt class="docutils literal"><span class="pre">vsync-ratio</span></tt>), and the second number of estimated number
of vsyncs which took too long (<tt class="docutils literal"><span class="pre">vo-delayed-frame-count</span></tt> property). The
latter is a heuristic, as it's generally not possible to determine this with
certainty.</li>
<li>Dropped frames, e.g. <tt class="docutils literal">Dropped: 4</tt>. Shows up only if the count is not 0. Can
grow if the video framerate is higher than that of the display, or if video
rendering is too slow. May also be incremented on &quot;hiccups&quot; and when the video
frame couldn't be displayed on time. (<tt class="docutils literal"><span class="pre">frame-drop-count</span></tt> property.)
If the decoder drops frames, the number of decoder-dropped frames is appended
to the display as well, e.g.: <tt class="docutils literal">Dropped: 4/34</tt>. This happens only if
decoder frame dropping is enabled with the <tt class="docutils literal"><span class="pre">--framedrop</span></tt> options.
(<tt class="docutils literal"><span class="pre">decoder-frame-drop-count</span></tt> property.)</li>
<li>Cache state, e.g. <tt class="docutils literal">Cache:&nbsp; 2s/134KB</tt>. Visible if the stream cache is enabled.
The first value shows the amount of video buffered in the demuxer in seconds,
the second value shows the estimated size of the buffered amount in kilobytes.
(<tt class="docutils literal"><span class="pre">demuxer-cache-duration</span></tt> and <tt class="docutils literal"><span class="pre">demuxer-cache-state</span></tt> properties.)</li>
</ul>
</div>
<div class="section" id="low-latency-playback">
<h1>LOW LATENCY PLAYBACK</h1>
<p>mpv is optimized for normal video playback, meaning it actually tries to buffer
as much data as it seems to make sense. This will increase latency. Reducing
latency is possible only by specifically disabling features which increase
latency.</p>
<p>The builtin <tt class="docutils literal"><span class="pre">low-latency</span></tt> profile tries to apply some of the options which can
reduce latency. You can use  <tt class="docutils literal"><span class="pre">--profile=low-latency</span></tt> to apply all of them. You
can list the contents with <tt class="docutils literal"><span class="pre">--show-profile=low-latency</span></tt> (some of the options
are quite obscure, and may change every mpv release).</p>
<p>Be aware that some of the options can reduce playback quality.</p>
<p>Most latency is actually caused by inconvenient timing behavior. You can disable
this with <tt class="docutils literal"><span class="pre">--untimed</span></tt>, but it will likely break, unless the stream has no
audio, and the input feeds data to the player at a constant rate.</p>
<p>Another common problem is with MJPEG streams. These do not signal the correct
framerate. Using <tt class="docutils literal"><span class="pre">--untimed</span></tt> or <tt class="docutils literal"><span class="pre">--correct-pts=no</span> <span class="pre">--container-fps-override=60</span></tt>
might help.</p>
<p>For livestreams, data can build up due to pausing the stream, due to slightly
lower playback rate, or &quot;buffering&quot; pauses. If the demuxer cache is enabled,
these can be skipped manually. The experimental <tt class="docutils literal"><span class="pre">drop-buffers</span></tt> command can
be used to discard any buffered data, though it's very disruptive.</p>
<p>In some cases, manually tuning TCP buffer sizes and such can help to reduce
latency.</p>
<p>Additional options that can be tried:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">--opengl-glfinish=yes</span></tt>, can reduce buffering in the graphics driver</li>
<li><tt class="docutils literal"><span class="pre">--opengl-swapinterval=0</span></tt>, same</li>
<li><tt class="docutils literal"><span class="pre">--vo=xv</span></tt>, same</li>
<li>without audio <tt class="docutils literal"><span class="pre">--framedrop=no</span> <span class="pre">--speed=1.01</span></tt> may help for live sources
(results can be mixed)</li>
</ul>
</div>
<div class="section" id="resuming-playback">
<h1>RESUMING PLAYBACK</h1>
<p>mpv is capable of storing the playback position of the currently playing file
and resume from there the next time that file is played. This is done with the
commands <tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> (bound to Shift+Q by default) and
<tt class="docutils literal"><span class="pre">write-watch-later-config</span></tt>, and with the <tt class="docutils literal"><span class="pre">--save-position-on-quit</span></tt> option.</p>
<p>The difference between always quitting with a key bound to <tt class="docutils literal"><span class="pre">quit-watch-later</span></tt>
and using <tt class="docutils literal"><span class="pre">--save-position-on-quit</span></tt> is that the latter will save the playback
position even when mpv is closed with a method other than a keybinding, such as
clicking the close button in the window title bar. However if mpv is terminated
abruptly and doesn't have the time to save, then the position will not be saved.
For example, if you shutdown your system without closing mpv beforehand.</p>
<p>mpv also stores options other than the playback position when they have been
modified after playback began, for example the volume and selected audio/subtitles,
and restores their values the next time the file is played. Which options are
saved can be configured with the <tt class="docutils literal"><span class="pre">--watch-later-options</span></tt> option.</p>
<p>When playing multiple playlist entries, mpv checks if one them has a resume
config file associated, and if it finds one it restarts playback from it. For
example, if you use <tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> on the 5th episode of a show, and
later play all the episodes, mpv will automatically resume playback from
episode 5.</p>
<p>More options to configure this functionality are listed in <a class="reference internal" href="#watch-later">Watch Later</a>.</p>
</div>
<div class="section" id="protocols">
<h1>PROTOCOLS</h1>
<p><tt class="docutils literal"><span class="pre">http://...</span></tt>, <tt class="docutils literal"><span class="pre">https://</span></tt>, ...</p>
<blockquote>
<p>Many network protocols are supported, but the protocol prefix must always
be specified. mpv will never attempt to guess whether a filename is
actually a network address. A protocol prefix is always required.</p>
<p>Note that not all prefixes are documented here. Undocumented prefixes are
either aliases to documented protocols, or are just redirections to
protocols implemented and documented in FFmpeg.</p>
<p><tt class="docutils literal">data:</tt> is supported, but needs to be in the format <tt class="docutils literal"><span class="pre">data://</span></tt>.
This is done to avoid ambiguity with filenames. You
can also prefix it with <tt class="docutils literal"><span class="pre">lavf://</span></tt> or <tt class="docutils literal"><span class="pre">ffmpeg://</span></tt>.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">ytdl://...</span></tt></p>
<blockquote>
<p>By default, the youtube-dl hook script only looks at http(s) URLs. Prefixing
an URL with <tt class="docutils literal"><span class="pre">ytdl://</span></tt> forces it to be always processed by the script. This
can also be used to invoke special youtube-dl functionality like playing a
video by ID or invoking search.</p>
<p>Keep in mind that you can't pass youtube-dl command line options by this,
and you have to use <tt class="docutils literal"><span class="pre">--ytdl-raw-options</span></tt> instead.</p>
</blockquote>
<p><tt class="docutils literal">-</tt></p>
<blockquote>
Play data from stdin.</blockquote>
<p><tt class="docutils literal"><span class="pre">smb://PATH</span></tt></p>
<blockquote>
Play a path from  Samba share. (Requires FFmpeg support.)</blockquote>
<p><tt class="docutils literal"><span class="pre">bd://[title][/device]</span></tt> <tt class="docutils literal"><span class="pre">--bluray-device=PATH</span></tt></p>
<blockquote>
<p>Play a Blu-ray disc. Since libbluray 1.0.1, you can read from ISO files
by passing them to <tt class="docutils literal"><span class="pre">--bluray-device</span></tt>.</p>
<p><tt class="docutils literal">title</tt> can be: <tt class="docutils literal">longest</tt> or <tt class="docutils literal">first</tt> (selects the default
playlist); <tt class="docutils literal"><span class="pre">mpls/&lt;number&gt;</span></tt> (selects &lt;number&gt;.mpls playlist);
<tt class="docutils literal">&lt;number&gt;</tt> (select playlist with the same index). mpv will list
the available playlists on loading.</p>
<p><tt class="docutils literal"><span class="pre">bluray://</span></tt> is an alias.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">dvd://[title][/device]</span></tt> <tt class="docutils literal"><span class="pre">--dvd-device=PATH</span></tt></p>
<blockquote>
<p>Play a DVD. DVD menus are not supported. If no title is given, the longest
title is auto-selected. Without <tt class="docutils literal"><span class="pre">--dvd-device</span></tt>, it will probably try
to open an actual optical drive, if available and implemented for the OS.</p>
<p><tt class="docutils literal"><span class="pre">dvdnav://</span></tt> is an old alias for <tt class="docutils literal"><span class="pre">dvd://</span></tt> and does exactly the same
thing.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">dvb://[cardnumber&#64;]channel</span></tt> <tt class="docutils literal"><span class="pre">--dvbin-...</span></tt></p>
<blockquote>
Digital TV via DVB. (Linux only.)</blockquote>
<p><tt class="docutils literal"><span class="pre">mf://[&#64;listfile|filemask|glob|printf-format]</span></tt> <tt class="docutils literal"><span class="pre">--mf-...</span></tt></p>
<blockquote>
<p>Play a series of images as video.</p>
<p>If the URL path begins with <tt class="docutils literal">&#64;</tt>, it is interpreted as the path to a file
containing a list of image paths separated by newlines. If the URL path
contains <tt class="docutils literal">,</tt>, it is interpreted as a list of image paths separated by
<tt class="docutils literal">,</tt>. If the URL path does not contain <tt class="docutils literal">%</tt> and if on POSIX platforms, is
interpreted as a glob, and <tt class="docutils literal">*</tt> is automatically appended if it was not
specified. Otherwise, the printf sequences <tt class="docutils literal"><span class="pre">%[.][NUM]d</span></tt>, where <tt class="docutils literal">NUM</tt> is
one, two, or three decimal digits, and <tt class="docutils literal">%%</tt> and are interpreted. For
example, <tt class="docutils literal"><span class="pre">mf://image-%d.jpg</span></tt> plays files like <tt class="docutils literal"><span class="pre">image-1.jpg</span></tt>,
<tt class="docutils literal"><span class="pre">image-2.jpg</span></tt> and <tt class="docutils literal"><span class="pre">image-10.jpg</span></tt>, provided that there are no big gaps
between the files.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">cdda://[device]</span></tt> <tt class="docutils literal"><span class="pre">--cdrom-device=PATH</span></tt> <tt class="docutils literal"><span class="pre">--cdda-...</span></tt></p>
<blockquote>
Play CD.</blockquote>
<p><tt class="docutils literal"><span class="pre">lavf://...</span></tt></p>
<blockquote>
Access any FFmpeg libavformat protocol. Basically, this passed the
string after the <tt class="docutils literal">//</tt> directly to libavformat.</blockquote>
<p><tt class="docutils literal"><span class="pre">av://type:options</span></tt></p>
<blockquote>
<p>This is intended for using libavdevice inputs. <tt class="docutils literal">type</tt> is the libavdevice
demuxer name, and <tt class="docutils literal">options</tt> is the (pseudo-)filename passed to the
demuxer.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<pre class="literal-block">
mpv av://v4l2:/dev/video0 --profile=low-latency --untimed
</pre>
<p class="last">This plays video from the first v4l input with nearly the lowest latency
possible. It's a good replacement for the removed <tt class="docutils literal"><span class="pre">tv://</span></tt> input.
Using <tt class="docutils literal"><span class="pre">--untimed</span></tt> is a hack to output a captured frame immediately,
instead of respecting the input framerate. (There may be better ways to
handle this in the future.)</p>
</div>
<p><tt class="docutils literal"><span class="pre">avdevice://</span></tt> is an alias.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">file://PATH</span></tt></p>
<blockquote>
A local path as URL. Might be useful in some special use-cases. Note that
<tt class="docutils literal">PATH</tt> itself should start with a third <tt class="docutils literal">/</tt> to make the path an
absolute path.</blockquote>
<p><tt class="docutils literal"><span class="pre">appending://PATH</span></tt></p>
<blockquote>
<p>Play a local file, but assume it's being appended to. This is useful for
example for files that are currently being downloaded to disk. This will
block playback, and stop playback only if no new data was appended after
a timeout of about 2 seconds.</p>
<p>Using this is still a bit of a bad idea, because there is no way to detect
if a file is actually being appended, or if it's still written. If you're
trying to play the  output of some program, consider using a pipe
(<tt class="docutils literal">something | mpv -</tt>). If it really has to be a file on disk, use tail to
make it wait forever, e.g. <tt class="docutils literal">tail <span class="pre">-f</span> <span class="pre">-c</span> +0 file.mkv | mpv -</tt>.</p>
</blockquote>
<p><tt class="docutils literal"><span class="pre">fd://123</span></tt></p>
<blockquote>
Read data from the given file descriptor (for example 123). This is similar
to piping data to stdin via <tt class="docutils literal">-</tt>, but can use an arbitrary file descriptor.
mpv may modify some file descriptor properties when the stream layer &quot;opens&quot;
it.</blockquote>
<p><tt class="docutils literal"><span class="pre">fdclose://123</span></tt></p>
<blockquote>
Like <tt class="docutils literal"><span class="pre">fd://</span></tt>, but the file descriptor is closed after use. When using this
you need to ensure that the same fd URL will only be used once.</blockquote>
<p><tt class="docutils literal"><span class="pre">edl://[edl</span> specification as in <span class="pre">edl-mpv.rst]</span></tt></p>
<blockquote>
Stitch together parts of multiple files and play them.</blockquote>
<p><tt class="docutils literal"><span class="pre">slice://start[-end]&#64;URL</span></tt></p>
<blockquote>
<p>Read a slice of a stream.</p>
<p><tt class="docutils literal">start</tt> and <tt class="docutils literal">end</tt> represent a byte range and accept
suffixes such as <tt class="docutils literal">KiB</tt> and <tt class="docutils literal">MiB</tt>. <tt class="docutils literal">end</tt> is optional.</p>
<p>if <tt class="docutils literal">end</tt> starts with <tt class="docutils literal">+</tt>, it is considered as offset from <tt class="docutils literal">start</tt>.</p>
<p>Only works with seekable streams.</p>
<p>Examples:</p>
<pre class="literal-block">
mpv slice://1g-2g&#64;cap.ts

This starts reading from cap.ts after seeking 1 GiB, then
reads until reaching 2 GiB or end of file.

mpv slice://1g-+2g&#64;cap.ts

This starts reading from cap.ts after seeking 1 GiB, then
reads until reaching 3 GiB or end of file.

mpv slice://100m&#64;appending://cap.ts

This starts reading from cap.ts after seeking 100MiB, then
reads until end of file.
</pre>
</blockquote>
<p><tt class="docutils literal"><span class="pre">null://</span></tt></p>
<blockquote>
Simulate an empty file. If opened for writing, it will discard all data.
The <tt class="docutils literal">null</tt> demuxer will specifically pass autoprobing if this protocol
is used (while it's not automatically invoked for empty files).</blockquote>
<p><tt class="docutils literal"><span class="pre">memory://data</span></tt></p>
<blockquote>
Use the <tt class="docutils literal">data</tt> part as source data.</blockquote>
<p><tt class="docutils literal"><span class="pre">hex://data</span></tt></p>
<blockquote>
Like <tt class="docutils literal"><span class="pre">memory://</span></tt>, but the string is interpreted as hexdump.</blockquote>
</div>
<div class="section" id="pseudo-gui-mode">
<h1>PSEUDO GUI MODE</h1>
<p>mpv has no official GUI, other than the OSC (<a class="reference internal" href="#on-screen-controller">ON SCREEN CONTROLLER</a>), which
is not a full GUI and is not meant to be. However, to compensate for the lack
of expected GUI behavior, mpv will in some cases start with some settings
changed to behave slightly more like a GUI mode.</p>
<p>Currently this happens only in the following cases:</p>
<ul class="simple">
<li>if started using the <tt class="docutils literal">mpv.desktop</tt> file on Linux (e.g. started from menus
or file associations provided by desktop environments)</li>
<li>if started from explorer.exe on Windows (technically, if it was started on
Windows, and all of the stdout/stderr/stdin handles are unset)</li>
<li>started out of the bundle on macOS</li>
<li>if you manually use <tt class="docutils literal"><span class="pre">--player-operation-mode=pseudo-gui</span></tt> on the command line</li>
</ul>
<p>This mode applies options from the builtin profile <tt class="docutils literal"><span class="pre">builtin-pseudo-gui</span></tt>, but
only if these haven't been set in the user's config file or on the command line,
which is the main difference to using <tt class="docutils literal"><span class="pre">--profile=builtin-pseudo-gui</span></tt>.</p>
<p>The profile is currently defined as follows:</p>
<pre class="literal-block">
[builtin-pseudo-gui]
terminal=no
force-window=yes
idle=once
screenshot-directory=~~desktop/
</pre>
<p>The <tt class="docutils literal"><span class="pre">pseudo-gui</span></tt> profile exists for compatibility. The options in the
<tt class="docutils literal"><span class="pre">pseudo-gui</span></tt> profile are applied unconditionally. In addition, the profile
makes sure to enable the pseudo-GUI mode, so that <tt class="docutils literal"><span class="pre">--profile=pseudo-gui</span></tt>
works like in older mpv releases:</p>
<pre class="literal-block">
[pseudo-gui]
player-operation-mode=pseudo-gui
</pre>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Currently, you can extend the <tt class="docutils literal"><span class="pre">pseudo-gui</span></tt> profile in the config file the
normal way. This is deprecated. In future mpv releases, the behavior might
change, and not apply your additional settings, and/or use a different
profile name.</p>
</div>
</div>
<div class="section" id="options">
<h1>OPTIONS</h1>
<div class="section" id="track-selection">
<h2>Track Selection</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--alang=&lt;languagecode[,languagecode,...]&gt;</span></tt></dt>
<dd><p class="first">Specify a prioritized list of audio languages to use, as IETF language tags.
Equivalent ISO 639-1 two-letter and ISO 639-2 three-letter codes are treated
the same. The first tag in the list that matches track's language in the file
will be used. A track that matches more subtags will be preferred over one
that matches fewer. See also <tt class="docutils literal"><span class="pre">--aid</span></tt>.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal">mpv <span class="pre">dvd://1</span> <span class="pre">--alang=hu,en</span></tt> chooses the Hungarian language track
on a DVD and falls back on English if Hungarian is not available.</li>
<li><tt class="docutils literal">mpv <span class="pre">--alang=jpn</span> example.mkv</tt> plays a Matroska file with Japanese
audio.</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--slang=&lt;languagecode[,languagecode,...]&gt;</span></tt></dt>
<dd><p class="first">Equivalent to <tt class="docutils literal"><span class="pre">--alang</span></tt>, for subtitle tracks.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal">mpv <span class="pre">dvd://1</span> <span class="pre">--slang=hu,en</span></tt> chooses the Hungarian subtitle track on
a DVD and falls back on English if Hungarian is not available.</li>
<li><tt class="docutils literal">mpv <span class="pre">--slang=jpn</span> example.mkv</tt> plays a Matroska file with Japanese
subtitles.</li>
<li><tt class="docutils literal">mpv <span class="pre">--slang=pt-BR</span> example.mkv</tt> plays a Matroska file with Brazilian
Portuguese subtitles if available, and otherwise any Portuguese subtitles.</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vlang=&lt;...&gt;</span></tt></dt>
<dd><p class="first">Equivalent to <tt class="docutils literal"><span class="pre">--alang</span></tt> and <tt class="docutils literal"><span class="pre">--slang</span></tt>, for video tracks.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--aid=&lt;ID|auto|no&gt;</span></tt></dt>
<dd><p class="first">Select audio track. <tt class="docutils literal">auto</tt> selects the default, <tt class="docutils literal">no</tt> disables audio.
See also <tt class="docutils literal"><span class="pre">--alang</span></tt>. mpv normally prints available audio tracks on the
terminal when starting playback of a file.</p>
<p><tt class="docutils literal"><span class="pre">--audio</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--aid</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">--aid=no</span></tt> or <tt class="docutils literal"><span class="pre">--audio=no</span></tt> disables audio playback.
(The latter variant does not work with the client API.)</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p>The track selection options (<tt class="docutils literal"><span class="pre">--aid</span></tt> but also <tt class="docutils literal"><span class="pre">--sid</span></tt> and the
others) sometimes expose behavior that may appear strange. Also, the
behavior tends to change around with each mpv release.</p>
<p>The track selection properties will return the option value outside of
playback (as expected), but during playback, the affective track
selection is returned. For example, with <tt class="docutils literal"><span class="pre">--aid=auto</span></tt>, the <tt class="docutils literal">aid</tt>
property will suddenly return <tt class="docutils literal">2</tt> after playback initialization
(assuming the file has at least 2 audio tracks, and the second is the
default).</p>
<p>At mpv 0.32.0 (and some releases before), if you passed a track value
for which a corresponding track didn't exist (e.g. <tt class="docutils literal"><span class="pre">--aid=2</span></tt> and there
was only 1 audio track), the <tt class="docutils literal">aid</tt> property returned <tt class="docutils literal">no</tt>. However if
another audio track was added during playback, and you tried to set the
<tt class="docutils literal">aid</tt> property to <tt class="docutils literal">2</tt>, nothing happened, because the <tt class="docutils literal">aid</tt> option
still had the value <tt class="docutils literal">2</tt>, and writing the same value has no effect.</p>
<p>With mpv 0.33.0, the behavior was changed. Now track selection options
are reset to <tt class="docutils literal">auto</tt> at playback initialization, if the option had
tries to select a track that does not exist. The same is done if the
track exists, but fails to initialize. The consequence is that unlike
before mpv 0.33.0, the user's track selection parameters are clobbered
in certain situations.</p>
<p>Also since mpv 0.33.0, trying to select a track by number will strictly
select this track. Before this change, trying to select a track which
did not exist would fall back to track default selection at playback
initialization. The new behavior is more consistent.</p>
<p>Setting a track selection property at runtime, and then playing a new
file might reset the track selection to defaults, if the fingerprint
of the track list of the new file is different.</p>
<p>Be aware of tricky combinations of all of all of the above: for example,
<tt class="docutils literal">mpv <span class="pre">--aid=2</span> file_with_2_audio_tracks.mkv file_with_1_audio_track.mkv</tt>
would first play the correct track, and the second file without audio.
If you then go back the first file, its first audio track will be played,
and the second file is played with audio. If you do the same thing again
but instead of using <tt class="docutils literal"><span class="pre">--aid=2</span></tt> you run <tt class="docutils literal">set aid 2</tt> while the file is
playing, then changing to the second file will play its audio track.
This is because runtime selection enables the fingerprint heuristic.</p>
<p class="last">Most likely this is not the end.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sid=&lt;ID|auto|no&gt;</span></tt></dt>
<dd><p class="first">Display the subtitle stream specified by <tt class="docutils literal">&lt;ID&gt;</tt>. <tt class="docutils literal">auto</tt> selects
the default, <tt class="docutils literal">no</tt> disables subtitles.</p>
<p><tt class="docutils literal"><span class="pre">--sub</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--sid</span></tt>.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sid=no</span></tt> or <tt class="docutils literal"><span class="pre">--sub=no</span></tt> disables subtitle decoding.
(The latter variant does not work with the client API.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vid=&lt;ID|auto|no&gt;</span></tt></dt>
<dd><p class="first">Select video channel. <tt class="docutils literal">auto</tt> selects the default, <tt class="docutils literal">no</tt> disables video.</p>
<p><tt class="docutils literal"><span class="pre">--video</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--vid</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">--vid=no</span></tt> or <tt class="docutils literal"><span class="pre">--video=no</span></tt> disables video playback.
(The latter variant does not work with the client API.)</p>
<p class="last">If video is disabled, mpv will try to download the audio only if media is
streamed with youtube-dl, because it saves bandwidth. This is done by
setting the ytdl_format to &quot;bestaudio/best&quot; in the ytdl_hook.lua script.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--edition=&lt;ID|auto&gt;</span></tt></dt>
<dd>(Matroska files only)
Specify the edition (set of chapters) to use, where 0 is the first. If set
to <tt class="docutils literal">auto</tt> (the default), mpv will choose the first edition declared as a
default, or if there is no default, the first edition defined.</dd>
<dt><tt class="docutils literal"><span class="pre">--track-auto-selection=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable the default track auto-selection (default: yes). Enabling this will
make the player select streams according to <tt class="docutils literal"><span class="pre">--aid</span></tt>, <tt class="docutils literal"><span class="pre">--alang</span></tt>, and
others. If it is disabled, no tracks are selected. In addition, the player
will not exit if no tracks are selected, and wait instead (this wait mode
is similar to pausing, but the pause option is not set).</p>
<p class="last">This is useful with <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt>: you can start playback in this
mode, and then set select tracks at runtime by setting the filter graph.
Note that if <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt> is set before playback is started, the
referenced tracks are always selected.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--subs-with-matching-audio=&lt;yes|forced|no&gt;</span></tt></dt>
<dd>When autoselecting a subtitle track, select it even if the selected audio
stream matches you preferred subtitle language (default: yes). If this
option is set to <tt class="docutils literal">no</tt>, then no subtitle track that matches the audio
language will ever be autoselected by mpv regardless of <tt class="docutils literal"><span class="pre">--slang</span></tt> or
<tt class="docutils literal"><span class="pre">subs-fallback</span></tt>. If set to <tt class="docutils literal">forced</tt>, then only forced subtitles
will be selected.</dd>
<dt><tt class="docutils literal"><span class="pre">--subs-match-os-language=&lt;yes|no&gt;</span></tt></dt>
<dd>When autoselecting a subtitle track, select the track that matches the language of your OS
if the audio stream is in a different language if suitable (default track or a forced track
under the right conditions). Note that if <tt class="docutils literal"><span class="pre">--slang</span></tt> is set, this will be completely ignored
(default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--subs-fallback=&lt;yes|default|no&gt;</span></tt></dt>
<dd>When autoselecting a subtitle track, if no tracks match your preferred languages,
select a full track even if it doesn't match your preferred subtitle language (default: default).
Setting this to <cite>default</cite> means that only streams flagged as <cite>default</cite> will be selected.</dd>
<dt><tt class="docutils literal"><span class="pre">--subs-fallback-forced=&lt;yes|no|always&gt;</span></tt></dt>
<dd>When autoselecting a subtitle track, the default value of <cite>yes</cite> will prefer using a forced
subtitle track if the subtitle language matches the audio language and matches your list of
preferred languages. The special value <cite>always</cite> will only select forced subtitle tracks and
never fallback on a non-forced track. Conversely, <cite>no</cite> will never select a forced subtitle
track.</dd>
</dl>
</div>
<div class="section" id="playback-control">
<h2>Playback Control</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--start=&lt;relative</span> time&gt;</tt></dt>
<dd><p class="first">Seek to given time position.</p>
<p>The general format for times is <tt class="docutils literal"><span class="pre">[+|-][[hh:]mm:]ss[.ms]</span></tt>. If the time is
prefixed with <tt class="docutils literal">-</tt>, the time is considered relative from the end of the
file (as signaled by the demuxer/the file). A <tt class="docutils literal">+</tt> is usually ignored (but
see below).</p>
<p>The following alternative time specifications are recognized:</p>
<p><tt class="docutils literal">pp%</tt> seeks to percent position pp (0-100).</p>
<p><tt class="docutils literal">#c</tt> seeks to chapter number c. (Chapters start from 1.)</p>
<p><tt class="docutils literal">none</tt> resets any previously set option (useful for libmpv).</p>
<p>If <tt class="docutils literal"><span class="pre">--rebase-start-time=no</span></tt> is given, then prefixing times with <tt class="docutils literal">+</tt>
makes the time relative to the start of the file. A timestamp without
prefix is considered an absolute time, i.e. should seek to a frame with a
timestamp as the file contains it. As a bug, but also a hidden feature,
putting 1 or more spaces before the <tt class="docutils literal">+</tt> or <tt class="docutils literal">-</tt> always interprets the
time as absolute, which can be used to seek to negative timestamps (useful
for debugging at most).</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--start=+56</span></tt>, <tt class="docutils literal"><span class="pre">--start=00:56</span></tt></dt>
<dd>Seeks to the start time + 56 seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">--start=-56</span></tt>, <tt class="docutils literal"><span class="pre">--start=-00:56</span></tt></dt>
<dd>Seeks to the end time - 56 seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">--start=01:10:00</span></tt></dt>
<dd>Seeks to 1 hour 10 min.</dd>
<dt><tt class="docutils literal"><span class="pre">--start=50%</span></tt></dt>
<dd>Seeks to the middle of the file.</dd>
<dt><tt class="docutils literal"><span class="pre">--start=30</span> <span class="pre">--end=40</span></tt></dt>
<dd>Seeks to 30 seconds, plays 10 seconds, and exits.</dd>
<dt><tt class="docutils literal"><span class="pre">--start=-3:20</span> <span class="pre">--length=10</span></tt></dt>
<dd>Seeks to 3 minutes and 20 seconds before the end of the file, plays
10 seconds, and exits.</dd>
<dt><tt class="docutils literal"><span class="pre">--start='#2'</span> <span class="pre">--end='#4'</span></tt></dt>
<dd>Plays chapters 2 and 3, and exits.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--end=&lt;relative</span> time&gt;</tt></dt>
<dd>Stop at given time. Use <tt class="docutils literal"><span class="pre">--length</span></tt> if the time should be relative
to <tt class="docutils literal"><span class="pre">--start</span></tt>. See <tt class="docutils literal"><span class="pre">--start</span></tt> for valid option values and examples.</dd>
<dt><tt class="docutils literal"><span class="pre">--length=&lt;relative</span> time&gt;</tt></dt>
<dd><p class="first">Stop after a given time relative to the start time.
See <tt class="docutils literal"><span class="pre">--start</span></tt> for valid option values and examples.</p>
<p>If both <tt class="docutils literal"><span class="pre">--end</span></tt> and <tt class="docutils literal"><span class="pre">--length</span></tt> are provided, playback will stop when it
reaches either of the two endpoints.</p>
<p class="last">Obscurity note: this does not work correctly if <tt class="docutils literal"><span class="pre">--rebase-start-time=no</span></tt>,
and the specified time is not an &quot;absolute&quot; time, as defined in the
<tt class="docutils literal"><span class="pre">--start</span></tt> option description.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--rebase-start-time=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether to move the file start time to <tt class="docutils literal">00:00:00</tt> (default: yes). This
is less awkward for files which start at a random timestamp, such as
transport streams. On the other hand, if there are timestamp resets, the
resulting behavior can be rather weird. For this reason, and in case you
are actually interested in the real timestamps, this behavior can be
disabled with <tt class="docutils literal">no</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--speed=&lt;0.01-100&gt;</span></tt></dt>
<dd><p class="first">Slow down or speed up playback by the factor given as parameter.</p>
<p class="last">If <tt class="docutils literal"><span class="pre">--audio-pitch-correction</span></tt> (on by default) is used, playing with a
speed higher than normal automatically inserts the <tt class="docutils literal">scaletempo2</tt> audio
filter.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=&lt;0.01-100&gt;</span></tt></dt>
<dd><p class="first">Raise or lower the audio's pitch by the factor given as parameter. Does not
affect playback speed. Playing with an altered pitch automatically inserts
the <tt class="docutils literal">scaletempo2</tt> audio filter.</p>
<p>Since pitch change is achieved by combining pitch-preserving speed change and
resampling, the range of pitch change is effectively limited by the
<tt class="docutils literal"><span class="pre">min-speed</span></tt> and <tt class="docutils literal"><span class="pre">max-speed</span></tt> parameters of <tt class="docutils literal">scaletempo2</tt>: for example,
a <tt class="docutils literal"><span class="pre">min-speed</span></tt> of 0.25 limits the highest pitch factor to 4 (1/0.25).</p>
<p>In a standard 12-tone scale system, octaves are separated by a factor of 2
whereas semitones are represented by a factor of 2^(1/12). This means
pitches can easily be shifted up or down with a simple multiplier.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--pitch=2</span></tt></dt>
<dd>Shifts the pitch up a full octave.</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=0.5</span></tt></dt>
<dd>Shifts the pitch down an octave.</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=1.498307</span></tt> (2^(7/12))</dt>
<dd>Shifts the pitch up a perfect fifth.</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=0.667420</span></tt> (2^(-7/12))</dt>
<dd>Shifts the pitch down a perfect fifth.</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=1.059463</span></tt> (2^(1/12))</dt>
<dd>Shifts the pitch up a semitone.</dd>
<dt><tt class="docutils literal"><span class="pre">--pitch=0.943874</span></tt> (2^(-1/12))</dt>
<dd>Shifts the pitch down a semitone.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--pause</span></tt></dt>
<dd>Start the player in paused state.</dd>
<dt><tt class="docutils literal"><span class="pre">--shuffle</span></tt></dt>
<dd>Play files in random order.</dd>
<dt><tt class="docutils literal"><span class="pre">--playlist-start=&lt;auto|index&gt;</span></tt></dt>
<dd><p class="first">Set which file on the internal playlist to start playback with. The index
is an integer, with 0 meaning the first file. The value <tt class="docutils literal">auto</tt> means that
the selection of the entry to play is left to the playback resume mechanism
(default). If an entry with the given index doesn't exist, the behavior is
unspecified and might change in future mpv versions. The same applies if
the playlist contains further playlists (don't expect any reasonable
behavior). Passing a playlist file to mpv should work with this option,
though. E.g. <tt class="docutils literal">mpv playlist.m3u <span class="pre">--playlist-start=123</span></tt> will work as expected,
as long as <tt class="docutils literal">playlist.m3u</tt> does not link to further playlists.</p>
<p class="last">The value <tt class="docutils literal">no</tt> is a deprecated alias for <tt class="docutils literal">auto</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--playlist=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Play files according to a playlist file. Supports some common formats. If
no format is detected, it will be treated as list of files, separated by
newline characters. You may need this option to load plaintext files as
a playlist. Note that XML playlist formats are not supported.</p>
<p>This option forces <tt class="docutils literal"><span class="pre">--demuxer=playlist</span></tt> to interpret the playlist file.
Some playlist formats, notably CUE and optical disc formats, need to use
different demuxers and will not work with this option. They still can be
played directly, without using this option.</p>
<p>You can play playlists directly, without this option. Before mpv version
0.31.0, this option disabled any security mechanisms that might be in
place, but since 0.31.0 it uses the same security mechanisms as playing a
playlist file directly. If you trust the playlist file, you can disable
any security checks with <tt class="docutils literal"><span class="pre">--load-unsafe-playlists</span></tt>. Because playlists
can load other playlist entries, consider applying this option only to the
playlist itself and not its entries, using something along these lines:</p>
<blockquote>
<tt class="docutils literal">mpv <span class="pre">--{</span> <span class="pre">--playlist=filename</span> <span class="pre">--load-unsafe-playlists</span> <span class="pre">--}</span></tt></blockquote>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p>The way older versions of mpv played playlist files via <tt class="docutils literal"><span class="pre">--playlist</span></tt>
was not safe against maliciously constructed files. Such files may
trigger harmful actions. This has been the case for all versions of
mpv prior to 0.31.0, and all MPlayer versions, but unfortunately this
fact was not well documented earlier, and some people have even
misguidedly recommended the use of <tt class="docutils literal"><span class="pre">--playlist</span></tt> with untrusted
sources. Do NOT use <tt class="docutils literal"><span class="pre">--playlist</span></tt> with random internet sources or
files you do not trust if you are not sure your mpv is at least 0.31.0.</p>
<p class="last">In particular, playlists can contain entries using protocols other than
local files, such as special protocols like <tt class="docutils literal"><span class="pre">avdevice://</span></tt> (which are
inherently unsafe).</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--chapter-merge-threshold=&lt;number&gt;</span></tt></dt>
<dd>Threshold for merging almost consecutive ordered chapter parts in
milliseconds (default: 100). Some Matroska files with ordered chapters
have inaccurate chapter end timestamps, causing a small gap between the
end of one chapter and the start of the next one when they should match.
If the end of one playback part is less than the given threshold away from
the start of the next one then keep playing video normally over the
chapter change instead of doing a seek.</dd>
<dt><tt class="docutils literal"><span class="pre">--chapter-seek-threshold=&lt;seconds&gt;</span></tt></dt>
<dd>Distance in seconds from the beginning of a chapter within which a backward
chapter seek will go to the previous chapter (default: 5.0). Past this
threshold, a backward chapter seek will go to the beginning of the current
chapter instead. A negative value means always go back to the previous
chapter.</dd>
<dt><tt class="docutils literal"><span class="pre">--hr-seek=&lt;no|absolute|yes|default&gt;</span></tt></dt>
<dd><p class="first">Select when to use precise seeks that are not limited to keyframes. Such
seeks require decoding video from the previous keyframe up to the target
position and so can take some time depending on decoding performance. For
some video formats, precise seeks are disabled. This option selects the
default choice to use for seeks; it is possible to explicitly override that
default in the definition of key bindings and in input commands.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Never use precise seeks.</td>
</tr>
<tr class="field"><th class="field-name">absolute:</th><td class="field-body">Use precise seeks if the seek is to an absolute position in the
file, such as a chapter seek, but not for relative seeks like
the default behavior of arrow keys.</td>
</tr>
<tr class="field"><th class="field-name">default:</th><td class="field-body">Like <tt class="docutils literal">absolute</tt>, but enable hr-seeks in audio-only cases. The
exact behavior is implementation specific and may change with
new releases (default).</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Use precise seeks whenever possible.</td>
</tr>
<tr class="field"><th class="field-name">always:</th><td class="field-body">Same as <tt class="docutils literal">yes</tt> (for compatibility).</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hr-seek-demuxer-offset=&lt;seconds&gt;</span></tt></dt>
<dd>This option exists to work around failures to do precise seeks (as in
<tt class="docutils literal"><span class="pre">--hr-seek</span></tt>) caused by bugs or limitations in the demuxers for some file
formats. Some demuxers fail to seek to a keyframe before the given target
position, going to a later position instead. The value of this option is
subtracted from the time stamp given to the demuxer. Thus, if you set this
option to 1.5 and try to do a precise seek to 60 seconds, the demuxer is
told to seek to time 58.5, which hopefully reduces the chance that it
erroneously goes to some time later than 60 seconds. The downside of
setting this option is that precise seeks become slower, as video between
the earlier demuxer position and the real target may be unnecessarily
decoded.</dd>
<dt><tt class="docutils literal"><span class="pre">--hr-seek-framedrop=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Allow the video decoder to drop frames during seek, if these frames are
before the seek target. If this is enabled, precise seeking can be faster,
but if you're using video filters which modify timestamps or add new
frames, it can lead to precise seeking skipping the target frame. This
e.g. can break frame backstepping when deinterlacing is enabled.</p>
<p class="last">Default: <tt class="docutils literal">yes</tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--index=&lt;mode&gt;</span></tt></dt>
<dd><p class="first">Controls how to seek in files. Note that if the index is missing from a
file, it will be built on the fly by default, so you don't need to change
this. But it might help with some broken files.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">default:</th><td class="field-body">use an index if the file has one, or build it if missing</td>
</tr>
<tr class="field"><th class="field-name">recreate:</th><td class="field-body">don't read or use the file's index</td>
</tr>
</tbody>
</table>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This option only works if the underlying media supports seeking
(i.e. not with stdin, pipe, etc).</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--load-unsafe-playlists</span></tt></dt>
<dd><p class="first">Load URLs from playlists which are considered unsafe (default: no). This
includes special protocols and anything that doesn't refer to normal files.
Local files and HTTP links on the other hand are always considered safe.</p>
<p class="last">In addition, if a playlist is loaded while this is set, the added playlist
entries are not marked as originating from network or potentially unsafe
location. (Instead, the behavior is as if the playlist entries were provided
directly to mpv command line or <tt class="docutils literal">loadfile</tt> command.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--access-references=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Follow any references in the file being opened (default: yes). Disabling
this is helpful if the file is automatically scanned (e.g. thumbnail
generation). If the thumbnail scanner for example encounters a playlist
file, which contains network URLs, and the scanner should not open these,
enabling this option will prevent it. This option also disables ordered
chapters, mov reference files, opening of archives, and a number of other
features.</p>
<p>On older FFmpeg versions, this will not work in some cases. Some FFmpeg
demuxers might not respect this option.</p>
<p>This option does not prevent opening of paired subtitle files and such. Use
<tt class="docutils literal"><span class="pre">--autoload-files=no</span></tt> to prevent this.</p>
<p class="last">This option does not always work if you open non-files (for example using
<tt class="docutils literal"><span class="pre">dvd://directory</span></tt> would open a whole bunch of files in the given
directory). Prefixing the filename with <tt class="docutils literal">./</tt> if it doesn't start with
a <tt class="docutils literal">/</tt> will avoid this.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--loop-playlist=&lt;N|inf|force|no&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--loop-playlist</span></tt></dt>
<dd><p class="first">Loops playback <tt class="docutils literal">N</tt> times. A value of <tt class="docutils literal">1</tt> plays it one time (default),
<tt class="docutils literal">2</tt> two times, etc. <tt class="docutils literal">inf</tt> means forever. <tt class="docutils literal">no</tt> is the same as <tt class="docutils literal">1</tt> and
disables looping. If several files are specified on command line, the
entire playlist is looped. <tt class="docutils literal"><span class="pre">--loop-playlist</span></tt> is the same as
<tt class="docutils literal"><span class="pre">--loop-playlist=inf</span></tt>.</p>
<p class="last">The <tt class="docutils literal">force</tt> mode is like <tt class="docutils literal">inf</tt>, but does not skip playlist entries
which have been marked as failing. This means the player might waste CPU
time trying to loop a file that doesn't exist. But it might be useful for
playing webradios under very bad network conditions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--loop-file=&lt;N|inf|no&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--loop=&lt;N|inf|no&gt;</span></tt></dt>
<dd><p class="first">Loop a single file N times. <tt class="docutils literal">inf</tt> means forever, <tt class="docutils literal">no</tt> means normal
playback. For compatibility, <tt class="docutils literal"><span class="pre">--loop-file</span></tt> and <tt class="docutils literal"><span class="pre">--loop-file=yes</span></tt> are
also accepted, and are the same as <tt class="docutils literal"><span class="pre">--loop-file=inf</span></tt>.</p>
<p>The difference to <tt class="docutils literal"><span class="pre">--loop-playlist</span></tt> is that this doesn't loop the playlist,
just the file itself. If the playlist contains only a single file, the
difference between the two option is that this option performs a seek on
loop, instead of reloading the file.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">--loop-file</span></tt> counts the number of times it causes the player to
seek to the beginning of the file, not the number of full playthroughs. This
means <tt class="docutils literal"><span class="pre">--loop-file=1</span></tt> will end up playing the file twice. Contrast with
<tt class="docutils literal"><span class="pre">--loop-playlist</span></tt>, which counts the number of full playthroughs.</p>
</div>
<p class="last"><tt class="docutils literal"><span class="pre">--loop</span></tt> is an alias for this option.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ab-loop-a=&lt;time&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--ab-loop-b=&lt;time&gt;</span></tt></dt>
<dd><p class="first">Set loop points. If playback passes the <tt class="docutils literal">b</tt> timestamp, it will seek to
the <tt class="docutils literal">a</tt> timestamp. Seeking past the <tt class="docutils literal">b</tt> point doesn't loop (this is
intentional).</p>
<p>If <tt class="docutils literal">a</tt> is after <tt class="docutils literal">b</tt>, the behavior is as if the points were given in
the right order, and the player will seek to <tt class="docutils literal">b</tt> after crossing through
<tt class="docutils literal">a</tt>. This is different from old behavior, where looping was disabled (and
as a bug, looped back to <tt class="docutils literal">a</tt> on the end of the file).</p>
<p>If either options are set to <tt class="docutils literal">no</tt> (or unset), looping is disabled. This
is different from old behavior, where an unset <tt class="docutils literal">a</tt> implied the start of
the file, and an unset <tt class="docutils literal">b</tt> the end of the file.</p>
<p class="last">The loop-points can be adjusted at runtime with the corresponding
properties. See also <tt class="docutils literal"><span class="pre">ab-loop</span></tt> command.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ab-loop-count=&lt;N|inf&gt;</span></tt></dt>
<dd>Run A-B loops only N times, then ignore the A-B loop points (default: inf).
<tt class="docutils literal">inf</tt> means that looping goes on forever. If this option is set to 0, A-B
looping is ignored, and even the <tt class="docutils literal"><span class="pre">ab-loop</span></tt> command will not enable looping
again (the command will show <tt class="docutils literal">(disabled)</tt> on the OSD message if both loop
points are set, but <tt class="docutils literal"><span class="pre">ab-loop-count</span></tt> is 0).</dd>
<dt><tt class="docutils literal"><span class="pre">--ordered-chapters=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable support for Matroska ordered chapters. mpv will load and
search for video segments from other files, and will also respect any
chapter order specified for the main file (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--ordered-chapters-files=&lt;playlist-file&gt;</span></tt></dt>
<dd><p class="first">Loads the given file as playlist, and tries to use the files contained in
it as reference files when opening a Matroska file that uses ordered
chapters. This overrides the normal mechanism for loading referenced
files by scanning the same directory the main file is located in.</p>
<p>Useful for loading ordered chapter files that are not located on the local
filesystem, or if the referenced files are in different directories.</p>
<p class="last">Note: a playlist can be as simple as a text file containing filenames
separated by newlines.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--chapters-file=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Load chapters from this file, instead of using the chapter metadata found
in the main file.</p>
<p class="last">This accepts a media file (like mkv) or even a pseudo-format like ffmetadata
and uses its chapters to replace the current file's chapters. This doesn't
work with OGM or XML chapters directly.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sstep=&lt;sec&gt;</span></tt></dt>
<dd><p class="first">Skip &lt;sec&gt; seconds after every frame.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Without <tt class="docutils literal"><span class="pre">--hr-seek</span></tt>, skipping will snap to keyframes.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stop-playback-on-init-failure=&lt;yes|no&gt;</span></tt></dt>
<dd>Stop playback if either audio or video fails to initialize (default: no).
With <tt class="docutils literal">no</tt>, playback will continue in video-only or audio-only mode if one
of them fails. This doesn't affect playback of audio-only or video-only
files.</dd>
<dt><tt class="docutils literal"><span class="pre">--play-direction=&lt;forward|+|backward|-&gt;</span></tt></dt>
<dd><p class="first">Control the playback direction (default: forward). Setting <tt class="docutils literal">backward</tt>
will attempt to play the file in reverse direction, with decreasing
playback time. If this is set on playback starts, playback will start from
the end of the file. If this is changed at during playback, a hr-seek will
be issued to change the direction.</p>
<p><tt class="docutils literal">+</tt> and <tt class="docutils literal">-</tt> are aliases for <tt class="docutils literal">forward</tt> and <tt class="docutils literal">backward</tt>.</p>
<p>The rest of this option description pertains to the <tt class="docutils literal">backward</tt> mode.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Backward playback is extremely fragile. It may not always work, is much
slower than forward playback, and breaks certain other features. How
well it works depends mainly on the file being played. Generally, it
will show good results (or results at all) only if the stars align.</p>
</div>
<p>mpv, as well as most media formats, were designed for forward playback
only. Backward playback is bolted on top of mpv, and tries to make a medium
effort to make backward playback work. Depending on your use-case, another
tool may work much better.</p>
<p>Backward playback is not exactly a 1st class feature. Implementation
tradeoffs were made, that are bad for backward playback, but in turn do not
cause disadvantages for normal playback. Various possible optimizations are
not implemented in order to keep the complexity down. Normally, a media
player is highly pipelined (future data is prepared in separate threads, so
it is available in realtime when the next stage needs it), but backward
playback will essentially stall the pipeline at various random points.</p>
<p>For example, for intra-only codecs are trivially backward playable, and
tools built around them may make efficient use of them (consider video
editors or camera viewers). mpv won't be efficient in this case, because it
uses its generic backward playback algorithm, that on top of it is not very
optimized.</p>
<p>If you just want to quickly go backward through the video and just show
&quot;keyframes&quot;, just use forward playback, and hold down the left cursor key
(which on CLI with default config sends many small relative seek commands).</p>
<p>The implementation consists of mostly 3 parts:</p>
<ul class="simple">
<li>Backward demuxing. This relies on the demuxer cache, so the demuxer cache
should (or must, didn't test it) be enabled, and its size will affect
performance. If the cache is too small or too large, quadratic runtime
behavior may result.</li>
<li>Backward decoding. The decoder library used (libavcodec) does not support
this. It is emulated by feeding bits of data in forward, putting the
result in a queue, returning the queue data to the VO in reverse, and
then starting over at an earlier position. This can require buffering an
extreme amount of decoded data, and also completely breaks pipelining.</li>
<li>Backward output. This is relatively simple, because the decoder returns
the frames in the needed order. However, this may cause various problems
because filters see audio and video going backward.</li>
</ul>
<p>Known problems:</p>
<ul class="simple">
<li>It's fragile. If anything doesn't work, random non-useful behavior may
occur. In simple cases, the player will just play nonsense and artifacts.
In other cases, it may get stuck or heat the CPU. (Exceeding memory usage
significantly beyond the user-set limits would be a bug, though.)</li>
<li>Performance and resource usage isn't good. In part this is inherent to
backward playback of normal media formats, and in parts due to
implementation choices and tradeoffs.</li>
<li>This is extremely reliant on good demuxer behavior. Although backward
demuxing requires no special demuxer support, it is required that the
demuxer performs seeks reliably, fulfills some specific requirements
about packet metadata, and has deterministic behavior.</li>
<li>Starting playback exactly from the end may or may not work, depending on
seeking behavior and file duration detection.</li>
<li>Some container formats, audio, and video codecs are not supported due to
their behavior. There is no list, and the player usually does not detect
them. Certain live streams (including TV captures) may exhibit problems
in particular, as well as some lossy audio codecs. h264 intra-refresh is
known not to work due to problems with libavcodec. WAV and some other raw
audio formats tend to have problems - there are hacks for dealing with
them, which may or may not work.</li>
<li>Backward demuxing of subtitles is not supported. Subtitle display still
works for some external text subtitle formats. (These are fully read into
memory, and only backward display is needed.) Text subtitles that are
cached in the subtitle renderer also have a chance to be displayed
correctly.</li>
<li>Some features dealing with playback of broken or hard to deal with files
will not work fully (such as timestamp correction).</li>
<li>If demuxer low level seeks (i.e. seeking the actual demuxer instead of
just within the demuxer cache) are performed by backward playback, the
created seek ranges may not join, because not enough overlap is achieved.</li>
<li>Trying to use this with hardware video decoding will probably exhaust all
your GPU memory and then crash a thing or two. Or it will fail because
<tt class="docutils literal"><span class="pre">--hwdec-extra-frames</span></tt> will certainly be set too low.</li>
<li>Stream recording is broken. <tt class="docutils literal"><span class="pre">--stream-record</span></tt> may keep working if you
backward play within a cached region only.</li>
<li>Relative seeks may behave weird. Small seeks backward (towards smaller
time, i.e. <tt class="docutils literal">seek <span class="pre">-1</span></tt>) may not really seek properly, and audio will
remain muted for a while. Using hr-seek is recommended, which should have
none of these problems.</li>
<li>Some things are just weird. For example, while seek commands manipulate
playback time in the expected way (provided they work correctly), the
framestep commands are transposed. Backstepping will perform very
expensive work to step forward by 1 frame.</li>
</ul>
<p>Tuning:</p>
<ul class="last simple">
<li>Remove all <tt class="docutils literal"><span class="pre">--vf</span></tt>/<tt class="docutils literal"><span class="pre">--af</span></tt> filters you have set. Disable hardware
decoding. Disable functions like SPDIF passthrough.</li>
<li>Increasing <tt class="docutils literal"><span class="pre">--video-reversal-buffer</span></tt> might help if reversal queue
overflow is reported, which may happen in high bitrate video, or video
with large GOP. Hardware decoding mostly ignores this, and you need to
increase <tt class="docutils literal"><span class="pre">--hwdec-extra-frames</span></tt> instead (until you get playback without
logged errors).</li>
<li>The demuxer cache is essential for backward demuxing. Make sure to set
<tt class="docutils literal"><span class="pre">--cache=yes</span></tt>. The cache size might matter. If it's too small, a queue
overflow will be logged, and backward playback cannot continue, or it
performs too many low level seeks. If it's too large, implementation
tradeoffs may cause general performance issues. Use
<tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt> to potentially increase the amount of packets the
demuxer layer can queue for reverse demuxing (basically it's the
<tt class="docutils literal"><span class="pre">--video-reversal-buffer</span></tt> equivalent for the demuxer layer).</li>
<li>Setting <tt class="docutils literal"><span class="pre">--vd-queue-enable=yes</span></tt> can help a lot to make playback smooth
(once it works).</li>
<li><tt class="docutils literal"><span class="pre">--demuxer-backward-playback-step</span></tt> also factors into how many seeks may
be performed, and whether backward demuxing could break due to queue
overflow. If it's set too high, the backstep operation needs to search
through more packets all the time, even if the cache is large enough.</li>
<li>Setting <tt class="docutils literal"><span class="pre">--demuxer-cache-wait</span></tt> may be useful to cache the entire file
into the demuxer cache. Set <tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt> to a large size to
make sure it can read the entire cache; <tt class="docutils literal"><span class="pre">--demuxer-max-back-bytes</span></tt>
should also be set to a large size to prevent that tries to trim the
cache.</li>
<li>If audio artifacts are audible, even though the AO does not underrun,
increasing <tt class="docutils literal"><span class="pre">--audio-backward-overlap</span></tt> might help in some cases.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-reversal-buffer=&lt;bytesize&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--audio-reversal-buffer=&lt;bytesize&gt;</span></tt></dt>
<dd><p class="first">For backward decoding. Backward decoding decodes forward in steps, and then
reverses the decoder output. These options control the approximate maximum
amount of bytes that can be buffered. The main use of this is to avoid
unbounded resource usage; during normal backward playback, it's not supposed
to hit the limit, and if it does, it will drop frames and complain about it.</p>
<p>Use this option if you get reversal queue overflow errors during backward
playback. Increase the size until the warning disappears. Usually, the video
buffer will overflow first, especially if it's high resolution video.</p>
<p>This does not work correctly if video hardware decoding is used. The video
frame size will not include the referenced GPU and driver memory. Some
hardware decoders may also be limited by <tt class="docutils literal"><span class="pre">--hwdec-extra-frames</span></tt>.</p>
<p>How large the queue size needs to be depends entirely on the way the media
was encoded. Audio typically requires a very small buffer, while video can
require excessively large buffers.</p>
<p>(Technically, this allows the last frame to exceed the limit. Also, this
does not account for other buffered frames, such as inside the decoder or
the video output.)</p>
<p>This does not affect demuxer cache behavior at all.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range. <tt class="docutils literal">&lt;bytesize&gt;</tt> options
accept suffixes such as <tt class="docutils literal">KiB</tt> and <tt class="docutils literal">MiB</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-backward-overlap=&lt;auto|number&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--audio-backward-overlap=&lt;auto|number&gt;</span></tt></dt>
<dd><p class="first">Number of overlapping keyframe ranges to use for backward decoding (default:
auto) (&quot;keyframe&quot; to be understood as in the mpv/ffmpeg specific meaning).
Backward decoding works by forward decoding in small steps. Some codecs
cannot restart decoding from any packet (even if it's marked as seek point),
which becomes noticeable with backward decoding (in theory this is a problem
with seeking too, but <tt class="docutils literal"><span class="pre">--hr-seek-demuxer-offset</span></tt> can fix it for seeking).
In particular, MDCT based audio codecs are affected.</p>
<p>The solution is to feed a previous packet to the decoder each time, and then
discard the output. This option controls how many packets to feed. The
<tt class="docutils literal">auto</tt> choice is currently hardcoded to 0 for video, and uses 1 for lossy
audio, 0 for lossless audio. For some specific lossy audio codecs, this is
set to 2.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--video-backward-overlap</span></tt> can potentially handle intra-refresh video,
depending on the exact conditions. You may have to use the
<tt class="docutils literal"><span class="pre">--vd-lavc-show-all</span></tt> option as well.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-backward-batch=&lt;number&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--audio-backward-batch=&lt;number&gt;</span></tt></dt>
<dd><p class="first">Number of keyframe ranges to decode at once when backward decoding (default:
1 for video, 10 for audio). Another pointless tuning parameter nobody should
use. This should affect performance only. In theory, setting a number higher
than 1 for audio will reduce overhead due to less frequent backstep
operations and less redundant decoding work due to fewer decoded overlap
frames (see <tt class="docutils literal"><span class="pre">--audio-backward-overlap</span></tt>). On the other hand, it requires
a larger reversal buffer, and could make playback less smooth due to
breaking pipelining (e.g. by decoding a lot, and then doing nothing for a
while).</p>
<p class="last">It probably never makes sense to set <tt class="docutils literal"><span class="pre">--video-backward-batch</span></tt>. But in
theory, it could help with intra-only video codecs by reducing backstep
operations.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-backward-playback-step=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Number of seconds the demuxer should seek back to get new packets during
backward playback (default: 60). This is useful for tuning backward
playback, see <tt class="docutils literal"><span class="pre">--play-direction</span></tt> for details.</p>
<p>Setting this to a very low value or 0 may make the player think seeking is
broken, or may make it perform multiple seeks.</p>
<p class="last">Setting this to a high value may lead to quadratic runtime behavior.</p>
</dd>
</dl>
</div>
<div class="section" id="program-behavior">
<h2>Program Behavior</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--help</span></tt>, <tt class="docutils literal"><span class="pre">--h</span></tt></dt>
<dd><p class="first">Show short summary of options.</p>
<p class="last">You can also pass a string to this option, which will list all top-level
options which contain the string in the name, e.g. <tt class="docutils literal"><span class="pre">--h=scale</span></tt> for all
options that contain the word <tt class="docutils literal">scale</tt>. The special string <tt class="docutils literal">*</tt> lists
all top-level options.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">-v</span></tt></dt>
<dd>Increment verbosity level, one level for each <tt class="docutils literal"><span class="pre">-v</span></tt> found on the command
line.</dd>
<dt><tt class="docutils literal"><span class="pre">--version,</span> <span class="pre">-V</span></tt></dt>
<dd>Print version string and exit.</dd>
<dt><tt class="docutils literal"><span class="pre">--no-config</span></tt></dt>
<dd><p class="first">Do not load default configuration or any user files. This prevents loading of
both the user-level and system-wide <tt class="docutils literal">mpv.conf</tt> and <tt class="docutils literal">input.conf</tt> files. Other
user files are blocked as well, such as resume playback files and cache files.
This option only takes effect when used as a command line flag.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Files explicitly requested by command line options, like
<tt class="docutils literal"><span class="pre">--include</span></tt> or <tt class="docutils literal"><span class="pre">--use-filedir-conf</span></tt>, will still be loaded.</p>
</div>
<p class="last">See also: <tt class="docutils literal"><span class="pre">--config-dir</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--list-options</span></tt></dt>
<dd>Prints all available options.</dd>
<dt><tt class="docutils literal"><span class="pre">--list-properties</span></tt></dt>
<dd>Print a list of the available properties.</dd>
<dt><tt class="docutils literal"><span class="pre">--list-protocols</span></tt></dt>
<dd>Print a list of the supported protocols.</dd>
<dt><tt class="docutils literal"><span class="pre">--log-file=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Opens the given path for writing, and print log messages to it. Existing
files will be truncated. The log level is at least <tt class="docutils literal"><span class="pre">-v</span> <span class="pre">-v</span></tt>, but
can be raised via <tt class="docutils literal"><span class="pre">--msg-level</span></tt> (the option cannot lower it below the
forced minimum log level).</p>
<p class="last">A special case is the macOS bundle, it will create a log file at
<tt class="docutils literal">~/Library/Logs/mpv.log</tt> by default.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--config-dir=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Force a different configuration directory. If this is set, the given
directory is used to load configuration files, and all other configuration
directories are ignored. This means the global mpv configuration directory
as well as per-user directories are ignored, and overrides through
environment variables (<tt class="docutils literal">MPV_HOME</tt>) are also ignored.</p>
<p>Note that the cache and state paths (<tt class="docutils literal"><span class="pre">~~/cache</span></tt>, <tt class="docutils literal"><span class="pre">~~/state</span></tt>) are not
considered &quot;configuration&quot; and keep their auto-detection logic.</p>
<p class="last">Note that the <tt class="docutils literal"><span class="pre">--no-config</span></tt> option takes precedence over this option.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dump-stats=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Write certain statistics to the given file. The file is truncated on
opening. The file will contain raw samples, each with a timestamp. To
make this file into a readable, the script <tt class="docutils literal"><span class="pre">TOOLS/stats-conv.py</span></tt> can be
used (which currently displays it as a graph).</p>
<p class="last">This option is useful for debugging only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--idle=&lt;no|yes|once&gt;</span></tt></dt>
<dd><p class="first">Makes mpv wait idly instead of quitting when there is no file to play.
Mostly useful in input mode, where mpv can be controlled through input
commands. (Default: <tt class="docutils literal">no</tt>)</p>
<p class="last"><tt class="docutils literal">once</tt> will only idle at start and let the player close once the
first playlist has finished playing back.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--include=&lt;configuration-file&gt;</span></tt></dt>
<dd>Specify configuration file to be parsed after the default ones.</dd>
<dt><tt class="docutils literal"><span class="pre">--load-scripts=&lt;yes|no&gt;</span></tt></dt>
<dd>If set to <tt class="docutils literal">no</tt>, don't auto-load scripts from the <tt class="docutils literal">scripts</tt>
configuration subdirectory (usually <tt class="docutils literal"><span class="pre">~/.config/mpv/scripts/</span></tt>).
(Default: <tt class="docutils literal">yes</tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--script=&lt;filename&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--scripts=file1.lua:file2.lua:...</span></tt></dt>
<dd><p class="first">Load a Lua script. The second option allows you to load multiple scripts by
separating them with the path separator (<tt class="docutils literal">:</tt> on Unix, <tt class="docutils literal">;</tt> on Windows).</p>
<p class="last"><tt class="docutils literal"><span class="pre">--scripts</span></tt> is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--script-opts=key1=value1,key2=value2,...</span></tt></dt>
<dd><p class="first">Set options for scripts. A script can query an option by key. If an
option is used and what semantics the option value has depends entirely on
the loaded scripts. Values not claimed by any scripts are ignored.</p>
<p class="last">This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--merge-files</span></tt></dt>
<dd>Pretend that all files passed to mpv are concatenated into a single, big
file. This uses timeline/EDL support internally.</dd>
<dt><tt class="docutils literal"><span class="pre">--profile=&lt;profile1,profile2,...&gt;</span></tt></dt>
<dd>Use the given profile(s), <tt class="docutils literal"><span class="pre">--profile=help</span></tt> displays a list of the
defined profiles.</dd>
<dt><tt class="docutils literal"><span class="pre">--reset-on-next-file=&lt;all|option1,option2,...&gt;</span></tt></dt>
<dd><p class="first">Normally, mpv will try to keep all settings when playing the next file on
the playlist, even if they were changed by the user during playback. (This
behavior is the opposite of MPlayer's, which tries to reset all settings
when starting next file.)</p>
<p>Default: Do not reset anything.</p>
<p>This can be changed with this option. It accepts a list of options, and
mpv will reset the value of these options on playback start to the initial
value. The initial value is either the default value, or as set by the
config file or command line.</p>
<p>The special name <tt class="docutils literal">all</tt> resets as many options as possible.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--reset-on-next-file=pause</span></tt>
Reset pause mode when switching to the next file.</li>
<li><tt class="docutils literal"><span class="pre">--reset-on-next-file=fullscreen,speed</span></tt>
Reset fullscreen and playback speed settings if they were changed
during playback.</li>
<li><tt class="docutils literal"><span class="pre">--reset-on-next-file=all</span></tt>
Try to reset all settings that were changed during playback.</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--show-profile=&lt;profile&gt;</span></tt></dt>
<dd>Show the description and content of a profile. Lists all profiles if no
parameter is provided.</dd>
<dt><tt class="docutils literal"><span class="pre">--use-filedir-conf</span></tt></dt>
<dd><p class="first">Look for a file-specific configuration file in the same directory as the
file that is being played. See <a class="reference internal" href="#file-specific-configuration-files">File-specific Configuration Files</a>.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">May be dangerous if playing from untrusted media.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ytdl=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable the youtube-dl hook-script. It will look at the input URL, and will
play the video located on the website. This works with many streaming sites,
not just the one that the script is named after. This requires a recent
version of youtube-dl to be installed on the system (default: yes).</p>
<p>If the script can't do anything with an URL, it will do nothing.</p>
<p>This accepts a set of options, which can be passed to it with the
<tt class="docutils literal"><span class="pre">--script-opts</span></tt> option (using <tt class="docutils literal">ytdl_hook-</tt> as prefix):</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">try_ytdl_first=&lt;yes|no&gt;</span></tt></dt>
<dd>If 'yes' will try parsing the URL with youtube-dl first, instead of the
default where it's only after mpv failed to open it. This mostly depends
on whether most of your URLs need youtube-dl parsing.</dd>
<dt><tt class="docutils literal"><span class="pre">exclude=&lt;URL1|URL2|...</span></tt></dt>
<dd><p class="first">A <tt class="docutils literal">|</tt>-separated list of URL patterns which mpv should not use with
youtube-dl. The patterns are matched after the <tt class="docutils literal"><span class="pre">http(s)://</span></tt> part of
the URL.</p>
<p><tt class="docutils literal">^</tt> matches the beginning of the URL, <tt class="docutils literal">$</tt> matches its end, and you
should use <tt class="docutils literal">%</tt> before any of the characters <tt class="docutils literal"><span class="pre">^$()%|,.[]*+-?</span></tt> to
match that character.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--script-opts=ytdl_hook-exclude='^youtube%.com'</span></tt>
will exclude any URL that starts with <tt class="docutils literal"><span class="pre">http://youtube.com</span></tt> or
<tt class="docutils literal"><span class="pre">https://youtube.com</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">--script-opts=ytdl_hook-exclude='%.mkv$|%.mp4$'</span></tt>
will exclude any URL that ends with <tt class="docutils literal">.mkv</tt> or <tt class="docutils literal">.mp4</tt>.</li>
</ul>
</div>
<p class="last">See more lua patterns here: <a class="reference external" href="https://www.lua.org/manual/5.1/manual.html#5.4.1">https://www.lua.org/manual/5.1/manual.html#5.4.1</a></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">all_formats=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">If 'yes' will attempt to add all formats found reported by youtube-dl
(default: no). Each format is added as a separate track. In addition,
they are delay-loaded, and actually opened only when a track is selected
(this should keep load times as low as without this option).</p>
<p>It adds average bitrate metadata, if available, which means you can use
<tt class="docutils literal"><span class="pre">--hls-bitrate</span></tt> to decide which track to select. (HLS used to be the
only format whose alternative quality streams were exposed in a similar
way, thus the option name.)</p>
<p>Tracks which represent formats that were selected by youtube-dl as
default will have the default flag set. This means mpv should generally
still select formats chosen with <tt class="docutils literal"><span class="pre">--ytdl-format</span></tt> by default.</p>
<p>Although this mechanism makes it possible to switch streams at runtime,
it's not suitable for this purpose for various technical reasons. (It's
slow, which can't be really fixed.) In general, this option is not
useful, and was only added to show that it's possible.</p>
<p>There are two cases that must be considered when doing quality/bandwidth
selection:</p>
<blockquote>
<ol class="arabic">
<li><p class="first">Completely separate audio and video streams (DASH-like). Each of
these streams contain either only audio or video, so you can
mix and combine audio/video bandwidths without restriction. This
intuitively matches best with the concept of selecting quality
by track (what <tt class="docutils literal">all_formats</tt> is supposed to do).</p>
</li>
<li><p class="first">Separate sets of muxed audio and video streams. Each version of
the media contains both an audio and video stream, and they are
interleaved. In order not to waste bandwidth, you should only
select one of these versions (if, for example, you select an
audio stream, then video will be downloaded, even if you selected
video from a different stream).</p>
<p>mpv will still represent them as separate tracks, but will set
the title of each track to <tt class="docutils literal"><span class="pre">muxed-N</span></tt>, where <tt class="docutils literal">N</tt> is replaced
with the youtube-dl format ID of the originating stream.</p>
</li>
</ol>
</blockquote>
<p class="last">Some sites will mix 1. and 2., but we assume that they do so for
compatibility reasons, and there is no reason to use them at all.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">force_all_formats=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">If set to 'yes', and <tt class="docutils literal">all_formats</tt> is also set to 'yes', this will
try to represent all youtube-dl reported formats as tracks, even if
mpv would normally use the direct URL reported by it (default: yes).</p>
<p>It appears this normally makes a difference if youtube-dl works on a
master HLS playlist.</p>
<p class="last">If this is set to 'no', this specific kind of stream is treated like
<tt class="docutils literal">all_formats</tt> is set to 'no', and the stream selection as done by
youtube-dl (via <tt class="docutils literal"><span class="pre">--ytdl-format</span></tt>) is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">thumbnails=&lt;all|best|none&gt;</span></tt></dt>
<dd><p class="first">Add thumbnails as video tracks (default: none).</p>
<p class="last">Thumbnails get downloaded when they are added as tracks, so 'all' can
have a noticable impact on how long it takes to open the video when
there are a lot of thumbnails.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">use_manifests=&lt;yes|no&gt;</span></tt></dt>
<dd>Make mpv use the master manifest URL for formats like HLS and DASH,
if available, allowing for video/audio selection in runtime (default:
no). It's disabled (&quot;no&quot;) by default for performance reasons.</dd>
<dt><tt class="docutils literal"><span class="pre">ytdl_path=youtube-dl</span></tt></dt>
<dd>Configure paths to youtube-dl's executable or a compatible fork's. The
paths should be separated by : on Unix and ; on Windows. mpv looks in
order for the configured paths in PATH and in mpv's config directory.
The defaults are &quot;yt-dlp&quot;, &quot;yt-dlp_x86&quot; and &quot;youtube-dl&quot;. On Windows
the suffix extension is not necessary, but only &quot;.exe&quot; is acceptable.</dd>
</dl>
<div class="admonition admonition-why-do-the-option-names-mix-and last">
<p class="first admonition-title">Why do the option names mix <tt class="docutils literal">_</tt> and <tt class="docutils literal">-</tt>?</p>
<p class="last">I have no idea.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ytdl-format=&lt;ytdl|best|worst|mp4|webm|...&gt;</span></tt></dt>
<dd><p class="first">Video format/quality that is directly passed to youtube-dl. The possible
values are specific to the website and the video, for a given url the
available formats can be found with the command
<tt class="docutils literal"><span class="pre">youtube-dl</span> <span class="pre">--list-formats</span> URL</tt>. See youtube-dl's documentation for
available aliases.
(Default: <tt class="docutils literal">bestvideo+bestaudio/best</tt>)</p>
<p class="last">The <tt class="docutils literal">ytdl</tt> value does not pass a <tt class="docutils literal"><span class="pre">--format</span></tt> option to youtube-dl at all,
and thus does not override its default. Note that sometimes youtube-dl
returns a format that mpv cannot use, and in these cases the mpv default
may work better.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ytdl-raw-options=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Pass arbitrary options to youtube-dl. Parameter and argument should be
passed as a key-value pair. Options without argument must include <tt class="docutils literal">=</tt>.</p>
<p>There is no sanity checking so it's possible to break things (i.e.
passing invalid parameters to youtube-dl).</p>
<p>A proxy URL can be passed for youtube-dl to use it in parsing the website.
This is useful for geo-restricted URLs. After youtube-dl parsing, some
URLs also require a proxy for playback, so this can pass that proxy
information to mpv. Take note that SOCKS proxies aren't supported and
https URLs also bypass the proxy. This is a limitation in FFmpeg.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--ytdl-raw-options=username=user,password=pass</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--ytdl-raw-options=force-ipv6=</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--ytdl-raw-options=proxy=[http://127.0.0.1:3128]</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--ytdl-raw-options-append=proxy=http://127.0.0.1:3128</span></tt></li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--js-memory-report=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable memory reporting for javascript scripts in the stats overlay.
This is disabled by default because it has an overhead and increases
memory usage. This option will only work if it is enabled before mpv is
started.</dd>
<dt><tt class="docutils literal"><span class="pre">--load-stats-overlay=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable the builtin script that shows useful playback information on a key
binding (default: yes). By default, the <tt class="docutils literal">i</tt> key is used (<tt class="docutils literal">I</tt> to make
the overlay permanent).</dd>
<dt><tt class="docutils literal"><span class="pre">--load-osd-console=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable the built-in script that shows a console on a key binding and lets
you enter commands (default: yes). The <tt class="docutils literal">`</tt> key is used to show the
console by default, and <tt class="docutils literal">ESC</tt> to hide it again.</dd>
<dt><tt class="docutils literal"><span class="pre">--load-auto-profiles=&lt;yes|no|auto&gt;</span></tt></dt>
<dd>Enable the builtin script that does auto profiles (default: auto). See
<a class="reference internal" href="#conditional-auto-profiles">Conditional auto profiles</a> for details. <tt class="docutils literal">auto</tt> will load the script,
but immediately unload it if there are no conditional profiles.</dd>
<dt><tt class="docutils literal"><span class="pre">--load-select=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable the builtin script that lets you select from lists of items (default:
yes). By default, its keybindings start with the <tt class="docutils literal">g</tt> key.</dd>
<dt><tt class="docutils literal"><span class="pre">--player-operation-mode=&lt;cplayer|pseudo-gui&gt;</span></tt></dt>
<dd>For enabling &quot;pseudo GUI mode&quot;, which means that the defaults for some
options are changed. This option should not normally be used directly, but
only by mpv internally, or mpv-provided scripts, config files, or .desktop
files. See <a class="reference internal" href="#pseudo-gui-mode">PSEUDO GUI MODE</a> for details.</dd>
</dl>
</div>
<div class="section" id="watch-later">
<h2>Watch Later</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--save-position-on-quit</span></tt></dt>
<dd><p class="first">Always save the current playback position on quit. When this file is
played again later, the player will seek to the old playback position on
start. This does not happen if playback of a file is stopped in any other
way than quitting. For example, going to the next file in the playlist
will not save the position, and start playback at beginning the next time
the file is played.</p>
<p>This behavior is disabled by default, but is always available when quitting
the player with Shift+Q.</p>
<p class="last">See <a class="reference internal" href="#resuming-playback">RESUMING PLAYBACK</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--watch-later-dir=&lt;path&gt;</span></tt></dt>
<dd><p class="first">The directory in which to store the &quot;watch later&quot; temporary files.</p>
<p><tt class="docutils literal"><span class="pre">--watch-later-directory</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--watch-later-dir</span></tt>.</p>
<p class="last">If this option is unset, the files will be stored in a subdirectory
named &quot;watch_later&quot; underneath the local state directory
(usually <tt class="docutils literal"><span class="pre">~/.local/state/mpv/</span></tt>).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--resume-playback=&lt;yes|no&gt;</span></tt></dt>
<dd>Restore playback position from the <tt class="docutils literal">watch_later</tt> configuration
subdirectory, usually <tt class="docutils literal"><span class="pre">~/.config/mpv/watch_later/</span></tt> (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--resume-playback-check-mtime=&lt;yes|no&gt;</span></tt></dt>
<dd>Only restore the playback position from the <tt class="docutils literal">watch_later</tt> configuration
subdirectory (usually <tt class="docutils literal"><span class="pre">~/.config/mpv/watch_later/</span></tt>) if the file's
modification time is the same as at the time of saving. This may prevent
skipping forward in files with the same name which have different content.
(Default: <tt class="docutils literal">no</tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--watch-later-options=option1,option2,...</span></tt></dt>
<dd><p class="first">The options that are saved in &quot;watch later&quot; files if they have been changed
since when mpv started. These values will be restored the next time the
files are played. Note that the playback position is saved via the <tt class="docutils literal">start</tt>
option.</p>
<p>When removing options, existing watch later data won't be modified and will
still be applied fully, but new watch later data won't contain these
options.</p>
<p>See <tt class="docutils literal"><span class="pre">--help=watch-later-options</span></tt> for the list of the properties that are
restored by default.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--watch-later-options-remove=sid</span></tt>
The subtitle track selection will not be restored.</li>
<li><tt class="docutils literal"><span class="pre">--watch-later-options-remove=volume</span></tt>
<tt class="docutils literal"><span class="pre">--watch-later-options-remove=mute</span></tt>
The volume and mute state won't be saved to watch later files.</li>
<li><tt class="docutils literal"><span class="pre">--watch-later-options=start</span></tt>
No option will be saved to watch later files, except the playback
position.</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--write-filename-in-watch-later-config</span></tt></dt>
<dd><p class="first">Prepend the watch later config files with the name of the file they refer
to. This is simply written as comment on the top of the file.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This option may expose privacy-sensitive information and is thus
disabled by default.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ignore-path-in-watch-later-config</span></tt></dt>
<dd>Ignore path (i.e. use filename only) when using watch later feature.
(Default: disabled)</dd>
</dl>
</div>
<div class="section" id="video">
<h2>Video</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vo=&lt;driver&gt;</span></tt></dt>
<dd>Specify the video output backend to be used. See <a class="reference internal" href="#video-output-drivers">VIDEO OUTPUT DRIVERS</a> for
details and descriptions of available drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd=&lt;...&gt;</span></tt></dt>
<dd><p class="first">Specify a priority list of video decoders to be used, according to their
family and name. See <tt class="docutils literal"><span class="pre">--ad</span></tt> for further details. Both of these options
use the same syntax and semantics; the only difference is that they
operate on different codec lists.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--vd=help</span></tt> for a full list of available decoders.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vf=&lt;filter1[=parameter1:parameter2:...],filter2,...&gt;</span></tt></dt>
<dd>Specify a list of video filters to apply to the video stream. See
<a class="reference internal" href="#video-filters">VIDEO FILTERS</a> for details and descriptions of the available filters.
The option variants <tt class="docutils literal"><span class="pre">--vf-add</span></tt>, <tt class="docutils literal"><span class="pre">--vf-pre</span></tt>, and <tt class="docutils literal"><span class="pre">--vf-clr</span></tt> exist
to modify a previously specified list, but you should not need these for
typical use.</dd>
<dt><tt class="docutils literal"><span class="pre">--untimed</span></tt></dt>
<dd>Do not sleep when outputting video frames. Useful for benchmarks when used
with <tt class="docutils literal"><span class="pre">--audio=no</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--framedrop=&lt;mode&gt;</span></tt></dt>
<dd><p class="first">Skip displaying some frames to maintain A/V sync on slow systems, or
playing high framerate video on video outputs that have an upper framerate
limit.</p>
<p>The argument selects the drop methods, and can be one of the following:</p>
<dl class="docutils">
<dt>&lt;no&gt;</dt>
<dd>Disable any frame dropping. Not recommended, for testing only.</dd>
<dt>&lt;vo&gt;</dt>
<dd><p class="first">Drop late frames on video output (default). This still decodes and
filters all frames, but doesn't render them on the VO. Drops are
indicated in the terminal status line as <tt class="docutils literal">Dropped:</tt> field.</p>
<p>In audio sync. mode, this drops frames that are outdated at the time of
display. If the decoder is too slow, in theory all frames would have to
be dropped (because all frames are too late) - to avoid this, frame
dropping stops  if the effective framerate is below 10 FPS.</p>
<p>In display-sync. modes (see <tt class="docutils literal"><span class="pre">--video-sync</span></tt>), this affects only how
A/V drops or repeats frames. If this mode is disabled, A/V desync will
in theory not affect video scheduling anymore (much like the
<tt class="docutils literal"><span class="pre">display-resample-desync</span></tt> mode). However, even if disabled, frames
will still be skipped (i.e. dropped) according to the ratio between
video and display frequencies.</p>
<p class="last">This is the recommended mode, and the default.</p>
</dd>
<dt>&lt;decoder&gt;</dt>
<dd><p class="first">Old, decoder-based framedrop mode. (This is the same as <tt class="docutils literal"><span class="pre">--framedrop=yes</span></tt>
in mpv 0.5.x and before.) This tells the decoder to skip frames (unless
they are needed to decode future frames). May help with slow systems,
but can produce unwatchable choppy output, or even freeze the display
completely.</p>
<p>This uses a heuristic which may not make sense, and in  general cannot
achieve good results, because the decoder's frame dropping cannot be
controlled in a predictable manner. Not recommended.</p>
<p>Even if you want to use this, prefer <tt class="docutils literal">decoder+vo</tt> for better results.</p>
<p class="last">The <tt class="docutils literal"><span class="pre">--vd-lavc-framedrop</span></tt> option controls what frames to drop.</p>
</dd>
<dt>&lt;decoder+vo&gt;</dt>
<dd>Enable both modes. Not recommended. Better than just <tt class="docutils literal">decoder</tt> mode.</dd>
</dl>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">--vo=vdpau</span></tt> has its own code for the <tt class="docutils literal">vo</tt> framedrop mode. Slight
differences to other VOs are possible.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-latency-hacks=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable some things which tend to reduce video latency by 1 or 2 frames
(default: no). Note that this option might be removed without notice once
the player's timing code does not inherently need to do these things
anymore. Using this option is known to break other options such as
interpolation, so it is not recommended to enable this.</p>
<p>This does:</p>
<ul class="last simple">
<li>Use the demuxer reported FPS for frame dropping. This avoids the
player needing to decode 1 frame in advance, lowering total latency in
effect. This also means that if the demuxer reported FPS is wrong, or
the video filter chain changes FPS (e.g. deinterlacing), then it could
drop too many or not enough frames.</li>
<li>Disable waiting for the first video frame. Normally the player waits for
the first video frame to be fully rendered before starting playback
properly. Some VOs will lazily initialize stuff when rendering the first
frame, so if this is not done, there is some likeliness that the VO has
to drop some frames if rendering the first frame takes longer than needed.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">--display-fps-override=&lt;fps&gt;</span></tt></dt>
<dd><p class="first">Set the display FPS used with the <tt class="docutils literal"><span class="pre">--video-sync=display-*</span></tt> modes. By
default, a detected value is used. Keep in mind that setting an incorrect
value (even if slightly incorrect) can ruin video playback. On multi-monitor
systems, there is a chance that the detected value is from the wrong
monitor.</p>
<p class="last">Set this option only if you have reason to believe the automatically
determined value is wrong.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hwdec=&lt;api1,api2,...|no|auto|auto-safe|auto-copy&gt;</span></tt></dt>
<dd><p class="first">Specify the hardware video decoding API that should be used if possible.
Whether hardware decoding is actually done depends on the video codec. If
hardware decoding is not possible, mpv will fall back on software decoding.</p>
<p>Hardware decoding is not enabled by default, to keep the out-of-the-box
configuration as reliable as possible. However, when using modern hardware,
hardware video decoding should work correctly, offering reduced CPU usage,
and possibly lower power consumption. On older systems, it may be necessary
to use hardware decoding due to insufficient CPU resources; and even on
modern systems, sufficiently complex content (eg: 4K60 AV1) may require it.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Use the <tt class="docutils literal">Ctrl+h</tt> shortcut to toggle hardware decoding at runtime. It
toggles this option between <tt class="docutils literal"><span class="pre">auto-safe</span></tt> and <tt class="docutils literal">no</tt>.</p>
<p>If you decide you want to use hardware decoding by default, the general
recommendation is to try out decoding with the command line option, and
prove to yourself that it works as desired for the content you care
about. After that, you can add it to your config file.</p>
<p>When testing, you should start by using <tt class="docutils literal"><span class="pre">hwdec=auto-safe</span></tt> as it will
limit itself to choosing from hwdecs that are actively supported by the
development team. If that doesn't result in working hardware decoding,
you can try <tt class="docutils literal">hwdec=auto</tt> to have it attempt to load every possible
hwdec, but if <tt class="docutils literal"><span class="pre">auto-safe</span></tt> didn't work, you will probably need to know
exactly which hwdec matches your hardware and read up on that entry
below.</p>
<p>If <tt class="docutils literal"><span class="pre">auto-safe</span></tt> or <tt class="docutils literal">auto</tt> produced the desired results, we recommend
just sticking with that and only setting a specific hwdec in your config
file if it is really necessary.</p>
<p class="last">If you use the Ubuntu package, keep in mind that their
<tt class="docutils literal">/etc/mpv/mpv.conf</tt> contains <tt class="docutils literal">hwdec=vaapi</tt>, which is less than
ideal as it may not be the right choice for your system, and it may end
up using an inefficient wrapper library under the covers. We recommend
removing this line or deleting the file altogether.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Even if enabled, hardware decoding is still only white-listed for some
codecs. See <tt class="docutils literal"><span class="pre">--hwdec-codecs</span></tt> to enable hardware decoding in more cases.</p>
</div>
<div class="admonition admonition-which-method-to-choose">
<p class="first admonition-title">Which method to choose?</p>
<ul class="last simple">
<li>If you only want to enable hardware decoding at runtime, don't set the
parameter, or put <tt class="docutils literal">hwdec=no</tt> into your <tt class="docutils literal">mpv.conf</tt> (relevant on
distros which force-enable it by default, such as on Ubuntu). Use the
<tt class="docutils literal">Ctrl+h</tt> default binding to enable it at runtime.</li>
<li>If you're not sure, but want hardware decoding always enabled by
default, put <tt class="docutils literal"><span class="pre">hwdec=auto-safe</span></tt> into your <tt class="docutils literal">mpv.conf</tt>, and
acknowledge that this may cause problems.</li>
<li>If you want to test available hardware decoding methods, pass
<tt class="docutils literal"><span class="pre">--hwdec=auto</span> <span class="pre">--hwdec-codecs=all</span></tt> and look at the terminal output.</li>
<li>If you're a developer, or want to perform elaborate tests, you may
need any of the other possible option values.</li>
</ul>
</div>
<p>This option accepts a comma delimited list of <tt class="docutils literal">api</tt> types, along with certain
special values:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">always use software decoding (default)</td>
</tr>
<tr class="field"><th class="field-name">auto-safe:</th><td class="field-body">enable any whitelisted hw decoder (see below)</td>
</tr>
<tr class="field"><th class="field-name">auto:</th><td class="field-body">forcibly enable any hw decoder found (see below)</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">exactly the same as <tt class="docutils literal"><span class="pre">auto-safe</span></tt></td>
</tr>
<tr class="field"><th class="field-name">auto-copy:</th><td class="field-body">enable best hw decoder with copy-back (see below)</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Special values can be mixed with api names. eg: <tt class="docutils literal">vaapi,auto</tt> will try
and use the <tt class="docutils literal">vaapi</tt> hwdec, and if that fails, will run through the
normal <tt class="docutils literal">auto</tt> logic.</p>
</div>
<p>Actively supported hwdecs:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">d3d11va:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> with <tt class="docutils literal"><span class="pre">--gpu-context=d3d11</span></tt> or
<tt class="docutils literal"><span class="pre">--gpu-context=angle</span></tt> (Windows 8+ only)</td>
</tr>
<tr class="field"><th class="field-name">d3d11va-copy:</th><td class="field-body">copies video back to system RAM (Windows 8+ only)</td>
</tr>
<tr class="field"><th class="field-name">videotoolbox:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> (macOS 10.8 and up),
or <tt class="docutils literal"><span class="pre">--vo=libmpv</span></tt> (iOS 9.0 and up)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">videotoolbox-copy:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">copies video back into system RAM (macOS 10.8 or iOS 9.0 and up)</td>
</tr>
<tr class="field"><th class="field-name">vaapi:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>, <tt class="docutils literal"><span class="pre">--vo=vaapi</span></tt> or <tt class="docutils literal"><span class="pre">--vo=dmabuf-wayland</span></tt> (Linux only)</td>
</tr>
<tr class="field"><th class="field-name">vaapi-copy:</th><td class="field-body">copies video back into system RAM (Linux with some GPUs or Windows)</td>
</tr>
<tr class="field"><th class="field-name">nvdec:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> (Any platform CUDA is available)</td>
</tr>
<tr class="field"><th class="field-name">nvdec-copy:</th><td class="field-body">copies video back to system RAM (Any platform CUDA is available)</td>
</tr>
<tr class="field"><th class="field-name">drm:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> (Linux only)</td>
</tr>
<tr class="field"><th class="field-name">drm-copy:</th><td class="field-body">copies video back to system RAM (Linux only)</td>
</tr>
<tr class="field"><th class="field-name">vulkan:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> (Any platform with Vulkan Video Decoding)</td>
</tr>
<tr class="field"><th class="field-name">vulkan-copy:</th><td class="field-body">copies video back to system RAM (Any platform with Vulkan Video Decoding)</td>
</tr>
</tbody>
</table>
<p>Other hwdecs (only use if you know you have to):</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">dxva2:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> with <tt class="docutils literal"><span class="pre">--gpu-context=d3d11</span></tt>,
<tt class="docutils literal"><span class="pre">--gpu-context=angle</span></tt> or <tt class="docutils literal"><span class="pre">--gpu-context=dxinterop</span></tt>
(Windows only)</td>
</tr>
<tr class="field"><th class="field-name">dxva2-copy:</th><td class="field-body">copies video back to system RAM (Windows only)</td>
</tr>
<tr class="field"><th class="field-name">vdpau:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> with <tt class="docutils literal"><span class="pre">--gpu-context=x11</span></tt>, or
<tt class="docutils literal"><span class="pre">--vo=vdpau</span></tt> (Linux only)</td>
</tr>
<tr class="field"><th class="field-name">vdpau-copy:</th><td class="field-body">copies video back into system RAM (Linux with some GPUs only)</td>
</tr>
<tr class="field"><th class="field-name">mediacodec:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span> <span class="pre">--gpu-context=android</span></tt>
or <tt class="docutils literal"><span class="pre">--vo=mediacodec_embed</span></tt> (Android only)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">mediacodec-copy:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">copies video back to system RAM (Android only)</td>
</tr>
<tr class="field"><th class="field-name">cuda:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> (Any platform CUDA is available)</td>
</tr>
<tr class="field"><th class="field-name">cuda-copy:</th><td class="field-body">copies video back to system RAM (Any platform CUDA is available)</td>
</tr>
<tr class="field"><th class="field-name">crystalhd:</th><td class="field-body">copies video back to system RAM (Any platform supported by hardware)</td>
</tr>
<tr class="field"><th class="field-name">rkmpp:</th><td class="field-body">requires <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> (some RockChip devices only)</td>
</tr>
</tbody>
</table>
<p><tt class="docutils literal">auto</tt> tries to automatically enable hardware decoding using the first
available method. This still depends what VO you are using. See the list
above, for which <tt class="docutils literal"><span class="pre">--vo</span></tt> and <tt class="docutils literal"><span class="pre">gpu-context</span></tt> is required for a given
hwdec. It will go down the list of available hwdecs until one is
successfully initialised. If all of them fail, it will fallback to software
decoding.</p>
<p><tt class="docutils literal"><span class="pre">auto-safe</span></tt> is similar to <tt class="docutils literal">auto</tt>, but allows only whitelisted methods
that are considered &quot;safe&quot;. This is supposed to be a reasonable way to
enable hardware decdoding by default in a config file (even though you
shouldn't do that anyway; prefer runtime enabling with <tt class="docutils literal">Ctrl+h</tt>). Unlike
<tt class="docutils literal">auto</tt>, this will not try to enable unknown or known-to-be-bad methods. In
addition, this may disable hardware decoding in other situations when it's
known to cause problems, but currently this mechanism is quite primitive.
(As an example for something that still causes problems: certain
combinations of HEVC and Intel chips on Windows tend to cause mpv to crash,
most likely due to driver bugs.)</p>
<p><tt class="docutils literal"><span class="pre">auto-copy-safe</span></tt> selects the union of methods selected with <tt class="docutils literal"><span class="pre">auto-safe</span></tt>
and <tt class="docutils literal"><span class="pre">auto-copy</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">auto-copy</span></tt> selects only modes that copy the video data back to system
memory after decoding. This selects modes like <tt class="docutils literal"><span class="pre">vaapi-copy</span></tt> (and so on).
If none of these work, hardware decoding is disabled. This mode is usually
guaranteed to incur no additional quality loss compared to software
decoding (assuming modern codecs and an error free video stream), and will
allow CPU processing with video filters. This mode works with all video
filters and VOs.</p>
<p>Because these copy the decoded video back to system RAM, they're often less
efficient than the direct modes, and may not help too much over software
decoding if you are short on CPU resources.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Most non-copy methods only work with the OpenGL GPU backend. Currently,
only the <tt class="docutils literal">vaapi</tt>, <tt class="docutils literal">nvdec</tt>, <tt class="docutils literal">cuda</tt> and <tt class="docutils literal">vulkan</tt> methods work with
Vulkan.</p>
</div>
<p>The <tt class="docutils literal">vaapi</tt> mode, if used with <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>, requires Mesa 11, and most
likely works with Intel and AMD GPUs only. It also requires the opengl EGL
backend.</p>
<p><tt class="docutils literal">nvdec</tt> and <tt class="docutils literal"><span class="pre">nvdec-copy</span></tt> are the newest, and recommended method to do
hardware decoding on Nvidia GPUs.</p>
<p><tt class="docutils literal">cuda</tt> and <tt class="docutils literal"><span class="pre">cuda-copy</span></tt> are an older implementation of hardware decoding
on Nvidia GPUs that uses Nvidia's bitstream parsers rather than FFmpeg's.
This can lead to feature deficiencies, such as incorrect playback of HDR
content, and <tt class="docutils literal">nvdec</tt>/<tt class="docutils literal"><span class="pre">nvdec-copy</span></tt> should always be preferred unless you
specifically need Nvidia's deinterlacing algorithms. To use this
deinterlacing you must pass the option:
<tt class="docutils literal"><span class="pre">vd-lavc-o=deint=[weave|bob|adaptive]</span></tt>.
Pass <tt class="docutils literal">weave</tt> (or leave the option unset) to not attempt any
deinterlacing.</p>
<div class="admonition admonition-quality-reduction-with-hardware-decoding last">
<p class="first admonition-title">Quality reduction with hardware decoding</p>
<p>In theory, hardware decoding does not reduce video quality (at least
for the codecs h264 and HEVC). However, due to restrictions in video
output APIs, as well as bugs in the actual hardware decoders, there can
be some loss, or even blatantly incorrect results. This has largely
ceased to be a problem with modern hardware, but there is a lot of
hardware out there, so caveat emptor. Known problems are discussed
below, but the list cannot be considered exhaustive, as even hwdecs that
work well on certain hardware generations may be problematic on other
ones.</p>
<p>In some cases, RGB conversion is forced, which means the RGB conversion
is performed by the hardware decoding API, instead of the shaders
used by <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>. This means certain colorspaces may not display
correctly, and certain filtering (such as debanding) cannot be applied
in an ideal way. This will also usually force the use of low quality
chroma scalers instead of the one specified by <tt class="docutils literal"><span class="pre">--cscale</span></tt>. In other
cases, hardware decoding can also reduce the bit depth of the decoded
image, which can introduce banding or precision loss for 10-bit files.</p>
<p><tt class="docutils literal">vdpau</tt> always does RGB conversion in hardware, which does not
support newer colorspaces like BT.2020 correctly. However, <tt class="docutils literal">vdpau</tt>
doesn't support 10 bit or HDR encodings, so these limitations are
unlikely to be relevant.</p>
<p><tt class="docutils literal">dxva2</tt> is not safe. It appears to always use BT.601 for forced RGB
conversion, but actual behavior depends on the GPU drivers. Some drivers
appear to convert to limited range RGB, which gives a faded appearance.
In addition to driver-specific behavior, global system settings might
affect this additionally. This can give incorrect results even with
completely ordinary video sources.</p>
<p><tt class="docutils literal">mediacodec</tt> is not safe. It forces RGB conversion (not with <tt class="docutils literal"><span class="pre">-copy</span></tt>)
and how well it handles non-standard colorspaces is not known.
In the rare cases where 10-bit is supported the bit depth of the output
will be reduced to 8.</p>
<p><tt class="docutils literal">cuda</tt> should usually be safe, but depending on how a file/stream
has been mixed, it has been reported to corrupt the timestamps causing
glitched, flashing frames. It can also sometimes cause massive
framedrops for unknown reasons. Caution is advised, and <tt class="docutils literal">nvdec</tt>
should always be preferred.</p>
<p><tt class="docutils literal">crystalhd</tt> is not safe. It always converts to 4:2:2 YUV, which
may be lossy, depending on how chroma sub-sampling is done during
conversion. It also discards the top left pixel of each frame for
some reason.</p>
<p class="last">If you run into any weird decoding issues, frame glitches or
discoloration, and you have <tt class="docutils literal"><span class="pre">--hwdec</span></tt> turned on, the first thing you
should try is disabling it.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-hwdec-interop=&lt;auto|all|no|name&gt;</span></tt></dt>
<dd><p class="first">This option is for troubleshooting hwdec interop issues. Since it's a
debugging option, its semantics may change at any time.</p>
<p>This is useful for the <tt class="docutils literal">gpu</tt> and <tt class="docutils literal">libmpv</tt> VOs for selecting which
hwdec interop context to use exactly. Effectively it also can be used
to block loading of certain backends.</p>
<p>If set to <tt class="docutils literal">auto</tt> (default), the behavior depends on the VO: for <tt class="docutils literal">gpu</tt>,
it does nothing, and the interop context is loaded on demand (when the
decoder probes for <tt class="docutils literal"><span class="pre">--hwdec</span></tt> support). For <tt class="docutils literal">libmpv</tt>, which has
has no on-demand loading, this is equivalent to <tt class="docutils literal">all</tt>.</p>
<p>The empty string is equivalent to <tt class="docutils literal">auto</tt>.</p>
<p>If set to <tt class="docutils literal">all</tt>, it attempts to load all interop contexts at GL context
creation time.</p>
<p>Other than that, a specific backend can be set, and the list of them can
be queried with <tt class="docutils literal">help</tt> (mpv CLI only).</p>
<p class="last">Runtime changes to this are ignored (the current option value is used
whenever the renderer is created).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hwdec-extra-frames=&lt;N&gt;</span></tt></dt>
<dd><p class="first">Number of GPU frames hardware decoding should preallocate (default: see
<tt class="docutils literal"><span class="pre">--list-options</span></tt> output). If this is too low, frame allocation may fail
during decoding, and video frames might get dropped and/or corrupted.
Setting it too high simply wastes GPU memory and has no advantages.</p>
<p>This value is used only for hardware decoding APIs which require
preallocating surfaces (known examples include <tt class="docutils literal">d3d11va</tt> and <tt class="docutils literal">vaapi</tt>).
For other APIs, frames are allocated as needed. The details depend on the
libavcodec implementations of the hardware decoders.</p>
<p class="last">The required number of surfaces depends on dynamic runtime situations. The
default is a fixed value that is thought to be sufficient for most uses. But
in certain situations, it may not be enough.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hwdec-image-format=&lt;name&gt;</span></tt></dt>
<dd><p class="first">Set the internal pixel format used by hardware decoding via <tt class="docutils literal"><span class="pre">--hwdec</span></tt>
(default <tt class="docutils literal">no</tt>). The special value <tt class="docutils literal">no</tt> selects an implementation
specific standard format. Most decoder implementations support only one
format, and will fail to initialize if the format is not supported.</p>
<p class="last">Some implementations might support multiple formats. In particular,
videotoolbox is known to require <tt class="docutils literal">uyvy422</tt> for good performance on some
older hardware. d3d11va can always use <tt class="docutils literal">yuv420p</tt>, which uses an opaque
format, with likely no advantages.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cuda-decode-device=&lt;auto|0..&gt;</span></tt></dt>
<dd><p class="first">Choose the GPU device used for decoding when using the <tt class="docutils literal">cuda</tt> or
<tt class="docutils literal">nvdec</tt> hwdecs with the OpenGL GPU backend, and with the <tt class="docutils literal"><span class="pre">cuda-copy</span></tt>
or <tt class="docutils literal"><span class="pre">nvdec-copy</span></tt> hwdecs in all cases.</p>
<p>For the OpenGL GPU backend, the default device used for decoding is the one
being used to provide <tt class="docutils literal">gpu</tt> output (and in the vast majority of cases,
only one GPU will be present).</p>
<p>For the <tt class="docutils literal">copy</tt> hwdecs, the default device will be the first device
enumerated by the CUDA libraries - however that is done.</p>
<p class="last">For the Vulkan GPU backend, decoding must always happen on the display
device, and this option has no effect.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vaapi-device=&lt;device</span> file|adapter name&gt;</tt></dt>
<dd><p class="first">Choose the DRM device for <tt class="docutils literal"><span class="pre">vaapi-copy</span></tt>. This should be the path to a
DRM device file. (Default: <tt class="docutils literal">/dev/dri/renderD128</tt>)</p>
<p class="last">On Windows this takes adapter name as an input. Will pick the default adapter
if unset. Alternatives are listed when the name &quot;help&quot; is given.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--panscan=&lt;0.0-1.0&gt;</span></tt></dt>
<dd><p class="first">Enables pan-and-scan functionality (cropping the sides of e.g. a 16:9
video to make it fit a 4:3 display without black bands). The range
controls how much of the image is cropped. May not work with all video
output drivers.</p>
<p class="last">This option has no effect if <tt class="docutils literal"><span class="pre">--video-unscaled</span></tt> option is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-aspect-override=&lt;ratio|no&gt;</span></tt></dt>
<dd><p class="first">Override video aspect ratio, in case aspect information is incorrect or
missing in the file being played.</p>
<p>These values have special meaning:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">0:</th><td class="field-body">disable aspect ratio handling, pretend the video has square pixels</td>
</tr>
<tr class="field"><th class="field-name">no:</th><td class="field-body">same as <tt class="docutils literal">0</tt></td>
</tr>
<tr class="field"><th class="field-name">-1:</th><td class="field-body">use the video stream or container aspect (default)</td>
</tr>
</tbody>
</table>
<p>But note that handling of these special values might change in the future.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--video-aspect-override=4:3</span></tt>  or <tt class="docutils literal"><span class="pre">--video-aspect-override=1.3333</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--video-aspect-override=16:9</span></tt> or <tt class="docutils literal"><span class="pre">--video-aspect-override=1.7777</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--no-video-aspect-override</span></tt> or <tt class="docutils literal"><span class="pre">--video-aspect-override=no</span></tt></li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-aspect-method=&lt;bitstream|container&gt;</span></tt></dt>
<dd><p class="first">This sets the default video aspect determination method (if the aspect is
_not_ overridden by the user with <tt class="docutils literal"><span class="pre">--video-aspect-override</span></tt> or others).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">container:</th><td class="field-body">Strictly prefer the container aspect ratio. This is apparently
the default behavior with VLC, at least with Matroska. Note that
if the container has no aspect ratio set, the behavior is the
same as with bitstream.</td>
</tr>
<tr class="field"><th class="field-name">bitstream:</th><td class="field-body">Strictly prefer the bitstream aspect ratio, unless the bitstream
aspect ratio is not set. This is apparently the default behavior
with XBMC/kodi, at least with Matroska.</td>
</tr>
</tbody>
</table>
<p>The current default for mpv is <tt class="docutils literal">container</tt>.</p>
<p class="last">Normally you should not set this. Try the various choices if you encounter
video that has the wrong aspect ratio in mpv, but seems to be correct in
other players.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-unscaled=&lt;no|yes|downscale-big&gt;</span></tt></dt>
<dd><p class="first">Disable scaling of the video. If the window is larger than the video,
black bars are added. Otherwise, the video is cropped, unless the option
is set to <tt class="docutils literal"><span class="pre">downscale-big</span></tt>, in which case the video is fit to window. The
video still can be influenced by the other <tt class="docutils literal"><span class="pre">--video-...</span></tt> options. This
option disables the effect of <tt class="docutils literal"><span class="pre">--panscan</span></tt>.</p>
<p>Note that the scaler algorithm may still be used, even if the video isn't
scaled. For example, this can influence chroma conversion. The video will
also still be scaled in one dimension if the source uses non-square pixels
(e.g. anamorphic widescreen DVDs).</p>
<p class="last">This option is disabled if <tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-pan-x=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-pan-y=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Moves the displayed video rectangle by the given value in the X or Y
direction. The unit is in fractions of the size of the scaled video (the
full size, even if parts of the video are not visible due to panscan or
other options).</p>
<p>For example, displaying a video fullscreen on a 1920x1080 screen with
<tt class="docutils literal"><span class="pre">--video-pan-x=-0.1</span></tt> would move the video 192 pixels to the left and
<tt class="docutils literal"><span class="pre">--video-pan-y=-0.1</span></tt> would move the video 108 pixels up.</p>
<p class="last">This option is disabled if <tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-rotate=&lt;0-359|no&gt;</span></tt></dt>
<dd><p class="first">Rotate the video clockwise, in degrees. If <tt class="docutils literal">no</tt> is given, the video is
never rotated, even if the file has rotation metadata. (The rotation value
is added to the rotation metadata, which means the value <tt class="docutils literal">0</tt> would rotate
the video according to the rotation metadata.)</p>
<p class="last">When using hardware decoding without copy-back, only 90° steps work, while
software decoding and hardware decoding methods that copy the video back to
system memory support all values between 0 and 359.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-crop=&lt;[W[xH]][+x+y]&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-crop=&lt;x:y&gt;</span></tt></dt>
<dd>Crop the video by starting at the x, y offset for w, h pixels. The crop is
applied to the source video rectangle (before anamorphic stretch) by the VO.
A crop rectangle that is not within the video rectangle will be ignored.
This works with hwdec, unlike the equivalent 'lavfi-crop'. When offset is
omitted, the central area will be cropped. Setting the crop to empty one
<tt class="docutils literal"><span class="pre">--video-crop=0x0+0+0</span></tt> overrides container crop and disables cropping.
Setting the crop to <tt class="docutils literal"><span class="pre">--video-crop=&quot;&quot;</span></tt> disables manual cropping and restores
the container crop if it's specified.</dd>
<dt><tt class="docutils literal"><span class="pre">--video-zoom=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Adjust the video display scale factor by the given value. The parameter is
given log 2. For example, <tt class="docutils literal"><span class="pre">--video-zoom=0</span></tt> is unscaled,
<tt class="docutils literal"><span class="pre">--video-zoom=1</span></tt> is twice the size, <tt class="docutils literal"><span class="pre">--video-zoom=-2</span></tt> is one fourth of
the size, and so on.</p>
<p class="last">This option is disabled if <tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-scale-x=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-scale-y=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Multiply the video display size with the given value (default: 1.0). If a
non-default value is used, this will be different from the window size, so
video will be either cut off, or black bars are added.</p>
<p class="last">This value is multiplied with the value derived from <tt class="docutils literal"><span class="pre">--video-zoom</span></tt> and
the normal video aspect ratio. This option is disabled if
<tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-align-x=&lt;-1-1&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-align-y=&lt;-1-1&gt;</span></tt></dt>
<dd><p class="first">Moves the video rectangle within the black borders, which are usually added
to pad the video to screen if video and screen aspect ratios are different.
<tt class="docutils literal"><span class="pre">--video-align-y=-1</span></tt> would move the video to the top of the screen
(leaving a border only on the bottom), a value of <tt class="docutils literal">0</tt> centers it
(default), and a value of <tt class="docutils literal">1</tt> would put the video at the bottom of the
screen.</p>
<p>If video and screen aspect match perfectly, these options do nothing.</p>
<p class="last">This option is disabled if <tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-margin-ratio-left=&lt;val&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-margin-ratio-right=&lt;val&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-margin-ratio-top=&lt;val&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--video-margin-ratio-bottom=&lt;val&gt;</span></tt></dt>
<dd><p class="first">Set extra video margins on each border (default: 0). Each value is a ratio
of the window size, using a range 0.0-1.0. For example, setting the option
<tt class="docutils literal"><span class="pre">--video-margin-ratio-right=0.2</span></tt> at a window size of 1000 pixels will add
a 200 pixels border on the right side of the window.</p>
<p>The video is &quot;boxed&quot; by these margins. The window size is not changed. In
particular it does not enlarge the window, and the margins will cause the
video to be downscaled by default. This may or may not change in the future.</p>
<p>The margins are applied after 90° video rotation, but before any other video
transformations.</p>
<p>This option is disabled if <tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> is used.</p>
<p>Subtitles still may use the margins, depending on <tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt> and
similar options.</p>
<p class="last">These options were created for the OSC. Some odd decisions, such as making
the margin values a ratio (instead of pixels), were made for the sake of
the OSC. It's possible that these options may be replaced by ones that are
more generally useful. The behavior of these options may change to fit
OSC requirements better, too.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--correct-pts=&lt;yes|no&gt;</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">--correct-pts=no</span></tt> switches mpv to a mode where video timing is
determined using a fixed framerate value (either using the
<tt class="docutils literal"><span class="pre">--container-fps-override</span></tt> option, or using file information). Sometimes,
files with very broken timestamps can be played somewhat well in this mode.
Note that video filters, subtitle rendering, seeking (including hr-seeks and
backstepping), and audio synchronization can be completely broken in this mode.</dd>
<dt><tt class="docutils literal"><span class="pre">--container-fps-override=&lt;float&gt;</span></tt></dt>
<dd><p class="first">Override video framerate. Useful if the original value is wrong or missing.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Works in <tt class="docutils literal"><span class="pre">--correct-pts=no</span></tt> mode only.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--deinterlace=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Enable or disable deinterlacing (default: no).
Interlaced video shows ugly comb-like artifacts, which are visible on
fast movement. Enabling this typically inserts the bwdif video filter in
order to deinterlace the video, or lets the video output apply deinterlacing
if supported.</p>
<p>When using <tt class="docutils literal">auto</tt>, mpv will insert a deinterlacing filter if ffmpeg
detects that the video frame is interlaced. Be aware that there can be false
positives in certain cases, such as when files are encoded as interlaced
despite the video not actually being so. This is why <tt class="docutils literal">auto</tt> is not the
default value.</p>
<p class="last">Keep in mind that using this filter <strong>will</strong> conflict with any manually
inserted deinterlacing filters, and that this will make video look worse if
it's not actually interlaced.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--deinterlace-field-parity=&lt;tff|bff|auto&gt;</span></tt></dt>
<dd><p class="first">Specify the field parity/order when deinterlacing (default: auto).
Each frame of an interlaced video is divided into two fields, which are
then separately transmitted. Top field represents even lines while bottom
field represents odd lines. When deinterlacing the deinterlacer needs to
know the correct temporal order of the fields else the video will appear
jittery.</p>
<p class="last"><tt class="docutils literal">auto</tt> will automatically try to detect the field order of the video,
<tt class="docutils literal">tff</tt> forces top field first while <tt class="docutils literal">bff</tt> forces bottom field first.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--frames=&lt;number&gt;</span></tt></dt>
<dd><p class="first">Play/convert only first <tt class="docutils literal">&lt;number&gt;</tt> video frames, then quit.</p>
<p><tt class="docutils literal"><span class="pre">--frames=0</span></tt> loads the file, but immediately quits before initializing
playback. (Might be useful for scripts which just want to determine some
file properties.)</p>
<p class="last">For audio-only playback, any value greater than 0 will quit playback
immediately after initialization. The value 0 works as with video.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-output-levels=&lt;outputlevels&gt;</span></tt></dt>
<dd><p class="first">RGB color levels used with YUV to RGB conversion. Normally, output devices
such as PC monitors use full range color levels. However, some TVs and
video monitors expect studio RGB levels. Providing full range output to a
device expecting studio level input results in crushed blacks and whites,
the reverse in dim gray blacks and dim whites.</p>
<p>Not all VOs support this option. Some will silently ignore it.</p>
<p>Available color ranges are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">automatic selection (equals to full range) (default)</td>
</tr>
<tr class="field"><th class="field-name">limited:</th><td class="field-body">limited range (16-235 per component), studio levels</td>
</tr>
<tr class="field"><th class="field-name">full:</th><td class="field-body">full range (0-255 per component), PC levels</td>
</tr>
</tbody>
</table>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">It is advisable to use your graphics driver's color range option
instead, if available.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hwdec-codecs=&lt;codec1,codec2,...|all&gt;</span></tt></dt>
<dd><p class="first">Allow hardware decoding for a given list of codecs only. The special value
<tt class="docutils literal">all</tt> always allows all codecs.</p>
<p>You can get the list of allowed codecs with <tt class="docutils literal">mpv <span class="pre">--vd=help</span></tt>. Remove the
prefix, e.g. instead of <tt class="docutils literal">lavc:h264</tt> use <tt class="docutils literal">h264</tt>.</p>
<p>By default, this is set to <tt class="docutils literal">h264,vc1,hevc,vp8,vp9,av1,prores</tt>. Note that
the hardware acceleration special codecs like <tt class="docutils literal">h264_vdpau</tt> are not
relevant anymore, and in fact have been removed from FFmpeg in this form.</p>
<p>This is usually only needed with broken GPUs, where a codec is reported
as supported, but decoding causes more problems than it solves.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On some broken drivers (e.g. NVIDIA on Linux), probing for codecs which
the GPU does not support can unnecessarily slow down video playback
initialization. To alleviate this, explicitly specify a list which
only includes the codecs supported on the setup.</p>
</div>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt><tt class="docutils literal">mpv <span class="pre">--hwdec=vdpau</span> <span class="pre">--hwdec-codecs=h264,mpeg2video</span></tt></dt>
<dd>Enable vdpau decoding for h264 and mpeg2 only.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-check-hw-profile=&lt;yes|no&gt;</span></tt></dt>
<dd>Check hardware decoder profile (default: yes). If <tt class="docutils literal">no</tt> is set, the
highest profile of the hardware decoder is unconditionally selected, and
decoding is forced even if the profile of the video is higher than that.
The result is most likely broken decoding, but may also help if the
detected or reported profiles are somehow incorrect.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-software-fallback=&lt;yes|no|N&gt;</span></tt></dt>
<dd><p class="first">Fallback to software decoding if the hardware-accelerated decoder fails
(default: 3). If this is a number, then fallback will be triggered if
N frames fail to decode in a row. 1 is equivalent to <tt class="docutils literal">yes</tt>.</p>
<p class="last">Setting this to a higher number might break the playback start fallback: if
a fallback happens, parts of the file will be skipped, approximately by to
the number of packets that could not be decoded. Values below an unspecified
count will not have this problem, because mpv retains the packets.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-film-grain=&lt;auto|cpu|gpu&gt;</span></tt></dt>
<dd><p class="first">Enables film grain application on the GPU. If video decoding is done on
the CPU, doing film grain application on the GPU can speed up decoding.
This option can also help hardware decoding, as it can reduce the number
of frame copies done.</p>
<p class="last">By default, it's set to <tt class="docutils literal">auto</tt>, so if the VO supports film grain
application, then it will be treated as <tt class="docutils literal">gpu</tt>. If the VO does not
support this, then it will be treated as <tt class="docutils literal">cpu</tt>, regardless of the setting.
Currently, only <tt class="docutils literal"><span class="pre">gpu-next</span></tt> supports film grain application.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-dr=&lt;auto|yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable direct rendering (default: auto). If this is set to <tt class="docutils literal">yes</tt>, the
video will be decoded directly to GPU video memory (or staging buffers).
This can speed up video upload, and may help with large resolutions or
slow hardware. This works only with the following VOs:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal">gpu</tt>: requires at least OpenGL 4.4 or Vulkan.</li>
<li><tt class="docutils literal">libmpv</tt>: The libmpv render API has optional support.</li>
</ul>
</blockquote>
<p>The <tt class="docutils literal">auto</tt> option will try to guess whether DR can improve performance
on your particular hardware. Currently this enables it on AMD or NVIDIA
if using OpenGL or unconditionally if using Vulkan.</p>
<p class="last">Using video filters of any kind that write to the image data (or output
newly allocated frames) will silently disable the DR code path.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-bitexact</span></tt></dt>
<dd>Only use bit-exact algorithms in all decoding steps (for codec testing).</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-fast</span></tt> (MPEG-1/2 and H.264 only)</dt>
<dd>Enable optimizations which do not comply with the format specification and
potentially cause problems, like simpler dequantization, simpler motion
compensation, assuming use of the default quantization matrix, assuming YUV
4:2:0 and skipping a few checks to detect damaged bitstreams.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-o=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Pass AVOptions to libavcodec decoder. Note, a patch to make the <tt class="docutils literal">o=</tt>
unneeded and pass all unknown options through the AVOption system is
welcome. A full list of AVOptions can be found in the FFmpeg manual.</p>
<p>Some options which used to be direct options can be set with this
mechanism, like <tt class="docutils literal">bug</tt>, <tt class="docutils literal">gray</tt>, <tt class="docutils literal">idct</tt>, <tt class="docutils literal">ec</tt>, <tt class="docutils literal">vismv</tt>,
<tt class="docutils literal">skip_top</tt> (was <tt class="docutils literal">st</tt>), <tt class="docutils literal">skip_bottom</tt> (was <tt class="docutils literal">sb</tt>), <tt class="docutils literal">debug</tt>.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal"><span class="pre">--vd-lavc-o=debug=pict</span></tt></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-show-all=&lt;yes|no&gt;</span></tt></dt>
<dd>Show even broken/corrupt frames (default: no). If this option is set to
no, libavcodec won't output frames that were either decoded before an
initial keyframe was decoded, or frames that are recognized as corrupted.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-skiploopfilter=&lt;skipvalue&gt;</span></tt> (H.264, HEVC only)</dt>
<dd><p class="first">Skips the loop filter (AKA deblocking) during decoding. Since
the filtered frame is supposed to be used as reference for decoding
dependent frames, this has a worse effect on quality than not doing
deblocking on e.g. MPEG-2 video. But at least for high bitrate HDTV,
this provides a big speedup with little visible quality loss.
Codecs other than H.264 or HEVC may have partial support for this option
(often only <tt class="docutils literal">all</tt> and <tt class="docutils literal">none</tt>).</p>
<p><tt class="docutils literal">&lt;skipvalue&gt;</tt> can be one of the following:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">none:</th><td class="field-body">Never skip.</td>
</tr>
<tr class="field"><th class="field-name">default:</th><td class="field-body">Skip useless processing steps (e.g. 0 size packets in AVI).</td>
</tr>
<tr class="field"><th class="field-name">nonref:</th><td class="field-body">Skip frames that are not referenced (i.e. not used for
decoding other frames, the error cannot &quot;build up&quot;).</td>
</tr>
<tr class="field"><th class="field-name">bidir:</th><td class="field-body">Skip B-Frames.</td>
</tr>
<tr class="field"><th class="field-name">nonkey:</th><td class="field-body">Skip all frames except keyframes.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Skip all frames.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-skipidct=&lt;skipvalue&gt;</span></tt> (MPEG-1/2/4 only)</dt>
<dd>Skips the IDCT step. This degrades quality a lot in almost all cases
(see skiploopfilter for available skip values).</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-skipframe=&lt;skipvalue&gt;</span></tt></dt>
<dd>Skips decoding of frames completely. Big speedup, but jerky motion and
sometimes bad artifacts (see skiploopfilter for available skip values).</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-framedrop=&lt;skipvalue&gt;</span></tt></dt>
<dd>Set framedropping mode used with <tt class="docutils literal"><span class="pre">--framedrop</span></tt> (see skiploopfilter for
available skip values).</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-threads=&lt;N&gt;</span></tt></dt>
<dd>Number of threads to use for decoding. Whether threading is actually
supported depends on codec (default: 0). 0 means autodetect number of cores
on the machine and use that, up to the maximum of 16. You can set more than
16 threads manually.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-lavc-assume-old-x264=&lt;yes|no&gt;</span></tt></dt>
<dd>Assume the video was encoded by an old, buggy x264 version (default: no).
Normally, this is autodetected by libavcodec. But if the bitstream contains
no x264 version info (or it was somehow skipped), and the stream was in fact
encoded by an old x264 version (build 150 or earlier), and if the stream
uses 4:4:4 chroma, then libavcodec will by default show corrupted video.
This option sets the libavcodec <tt class="docutils literal">x264_build</tt> option to <tt class="docutils literal">150</tt>, which
means that if the stream contains no version info, or was not encoded by
x264 at all, it assumes it was encoded by the old version. Enabling this
option is pretty safe if you want your broken files to work, but in theory
this can break on streams not encoded by x264, or if a stream encoded by a
newer x264 version contains no version info.</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-apply-cropping</span></tt></dt>
<dd>Certain video codecs support cropping, meaning that only a sub-rectangle of
the decoded frame is intended for display. This option controls how cropping
is handled by libavcodec. Cropping during decoding has certain limitations
with regards to alignment and hardware decoding. If this option is enabled,
decoder will apply the crop, else VO will handle it. Enabled by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--swapchain-depth=&lt;N&gt;</span></tt></dt>
<dd>Allow up to N in-flight frames. This essentially controls the frame
latency. Increasing the swapchain depth can improve pipelining and prevent
missed vsyncs, but increases visible latency. This option only mandates an
upper limit, the implementation can use a lower latency than requested
internally. A setting of 1 means that the VO will wait for every frame to
become visible before starting to render the next frame. (Default: 3)</dd>
</dl>
</div>
<div class="section" id="audio">
<h2>Audio</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-pitch-correction=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">If this is enabled (default), playing with a speed different from normal
automatically inserts the <tt class="docutils literal">scaletempo2</tt> audio filter. You can insert
filters besides <tt class="docutils literal">scaletempo2</tt> and modify their params using
<cite>Conditional auto profiles</cite>:</p>
<pre class="literal-block">
[af_insert]
profile-cond=speed ~= 1
profile-restore=copy
af-add=scaletempo2=search-interval=50 # Insert filter and params here.
</pre>
<p class="last">Filters set this way replace the <tt class="docutils literal">scaletempo2</tt> default, instead of
overlapping with it. If there are multiple audio filters inserted that can do
pitch correction, then only the last one in the filter chain is used.
For details on the specifics of each available filter, see the audio filter
section.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-device=&lt;name&gt;</span></tt></dt>
<dd><p class="first">Use the given audio device. This consists of the audio output name, e.g.
<tt class="docutils literal">alsa</tt>, followed by <tt class="docutils literal">/</tt>, followed by the audio output specific device
name. The default value for this option is <tt class="docutils literal">auto</tt>, which tries every audio
output in preference order with the default device.</p>
<p>You can list audio devices with <tt class="docutils literal"><span class="pre">--audio-device=help</span></tt>. This outputs the
device name in quotes, followed by a description. The device name is what
you have to pass to the <tt class="docutils literal"><span class="pre">--audio-device</span></tt> option. The list of audio devices
can be retrieved by API by using the <tt class="docutils literal"><span class="pre">audio-device-list</span></tt> property.</p>
<p>While the option normally takes one of the strings as indicated by the
methods above, you can also force the device for most AOs by building it
manually. For example <tt class="docutils literal">name/foobar</tt> forces the AO <tt class="docutils literal">name</tt> to use the
device <tt class="docutils literal">foobar</tt>. However, the <tt class="docutils literal"><span class="pre">--ao</span></tt> option will strictly force a
specific AO. To avoid confusion, don't use <tt class="docutils literal"><span class="pre">--ao</span></tt> and <tt class="docutils literal"><span class="pre">--audio-device</span></tt>
together.</p>
<div class="admonition admonition-example-for-alsa last">
<p class="first admonition-title">Example for ALSA</p>
<p>MPlayer and mplayer2 required you to replace any ',' with '.' and
any ':' with '=' in the ALSA device name. For example, to use the
device named <tt class="docutils literal">dmix:default</tt>, you had to do:</p>
<blockquote>
<tt class="docutils literal"><span class="pre">-ao</span> alsa:device=dmix=default</tt></blockquote>
<p>In mpv you could instead use:</p>
<blockquote class="last">
<tt class="docutils literal"><span class="pre">--audio-device=alsa/dmix:default</span></tt></blockquote>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-exclusive=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable exclusive output mode. In this mode, the system is usually locked
out, and only mpv will be able to output audio.</p>
<p class="last">This only works for some audio outputs, such as <tt class="docutils literal">wasapi</tt>, <tt class="docutils literal">coreaudio</tt>
and <tt class="docutils literal">pipewire</tt>. Other audio outputs silently ignore this option.
They either have no concept of exclusive mode, or the mpv side of the
implementation is missing.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-fallback-to-null=&lt;yes|no&gt;</span></tt></dt>
<dd>If no audio device can be opened, behave as if <tt class="docutils literal"><span class="pre">--ao=null</span></tt> was given. This
is useful in combination with <tt class="docutils literal"><span class="pre">--audio-device</span></tt>: instead of causing an
error if the selected device does not exist, the client API user (or a
Lua script) could let playback continue normally, and check the
<tt class="docutils literal"><span class="pre">current-ao</span></tt> and <tt class="docutils literal"><span class="pre">audio-device-list</span></tt> properties to make high-level
decisions about how to continue.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao=&lt;driver&gt;</span></tt></dt>
<dd>Specify the audio output drivers to be used. See <a class="reference internal" href="#audio-output-drivers">AUDIO OUTPUT DRIVERS</a> for
details and descriptions of available drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--af=&lt;filter1[=parameter1:parameter2:...],filter2,...&gt;</span></tt></dt>
<dd>Specify a list of audio filters to apply to the audio stream. See
<a class="reference internal" href="#audio-filters">AUDIO FILTERS</a> for details and descriptions of the available filters.
The option variants <tt class="docutils literal"><span class="pre">--af-add</span></tt>, <tt class="docutils literal"><span class="pre">--af-pre</span></tt>, and <tt class="docutils literal"><span class="pre">--af-clr</span></tt> exist
to modify a previously specified list, but you should not need these for
typical use.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-spdif=&lt;codecs&gt;</span></tt></dt>
<dd><p class="first">List of codecs for which compressed audio passthrough should be used. This
works for both classic S/PDIF and HDMI.</p>
<p>Possible codecs are <tt class="docutils literal">ac3</tt>, <tt class="docutils literal">dts</tt>, <tt class="docutils literal"><span class="pre">dts-hd</span></tt>, <tt class="docutils literal">eac3</tt>, <tt class="docutils literal">truehd</tt>.
Multiple codecs can be specified by separating them with <tt class="docutils literal">,</tt>. <tt class="docutils literal">dts</tt>
refers to low bitrate DTS core, while <tt class="docutils literal"><span class="pre">dts-hd</span></tt> refers to DTS MA (receiver
and OS support varies). If both <tt class="docutils literal">dts</tt> and <tt class="docutils literal"><span class="pre">dts-hd</span></tt> are specified, it
behaves equivalent to specifying <tt class="docutils literal"><span class="pre">dts-hd</span></tt> only.</p>
<p>In earlier mpv versions you could use <tt class="docutils literal"><span class="pre">--ad</span></tt> to force the spdif wrapper.
This does not work anymore.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">There is not much reason to use this. HDMI supports uncompressed
multichannel PCM, and mpv supports lossless DTS-HD decoding via
FFmpeg's new DCA decoder (based on libdcadec).</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ad=&lt;decoder1,decoder2,...[-]&gt;</span></tt></dt>
<dd><p class="first">Specify a priority list of audio decoders to be used, according to their
decoder name. When determining which decoder to use, the first decoder that
matches the audio format is selected. If that is unavailable, the next
decoder is used. Finally, it tries all other decoders that are not
explicitly selected or rejected by the option.</p>
<p><tt class="docutils literal">-</tt> at the end of the list suppresses fallback on other available
decoders not on the <tt class="docutils literal"><span class="pre">--ad</span></tt> list. <tt class="docutils literal">+</tt> in front of an entry forces the
decoder. Both of these should not normally be used, because they break
normal decoder auto-selection! Both of these methods are deprecated.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--ad=mp3float</span></tt></dt>
<dd>Prefer the FFmpeg <tt class="docutils literal">mp3float</tt> decoder over all other MP3
decoders.</dd>
<dt><tt class="docutils literal"><span class="pre">--ad=help</span></tt></dt>
<dd>List all available decoders.</dd>
</dl>
</div>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Enabling compressed audio passthrough (AC3 and DTS via SPDIF/HDMI) with
this option is not possible. Use <tt class="docutils literal"><span class="pre">--audio-spdif</span></tt> instead.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--volume=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Set the startup volume. 0 means silence, 100 means no volume reduction or
amplification. Negative values can be passed for compatibility, but are
treated as 0.</p>
<p class="last">Since mpv 0.18.1, this always controls the internal mixer (aka software
volume).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--volume-max=&lt;100.0-1000.0&gt;</span></tt></dt>
<dd>Set the maximum amplification level in percent (default: 130). A value of
130 will allow you to adjust the volume up to about double the normal level.</dd>
<dt><tt class="docutils literal"><span class="pre">--volume-gain=&lt;db&gt;</span></tt></dt>
<dd>Set the volume gain in dB. This is applied on top of other volume and gain
settings.</dd>
<dt><tt class="docutils literal"><span class="pre">--volume-gain-max=&lt;0.0-150.0&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--volume-gain-min=&lt;-150.0-0.0&gt;</span></tt></dt>
<dd>Set the volume gain range in dB (default: -96 dB min, 12 dB max).</dd>
<dt><tt class="docutils literal"><span class="pre">--replaygain=&lt;no|track|album&gt;</span></tt></dt>
<dd>Adjust volume gain according to replaygain values stored in the file
metadata. With <tt class="docutils literal"><span class="pre">--replaygain=no</span></tt> (the default), perform no adjustment.
With <tt class="docutils literal"><span class="pre">--replaygain=track</span></tt>, apply track gain. With <tt class="docutils literal"><span class="pre">--replaygain=album</span></tt>,
apply album gain if present and fall back to track gain otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">--replaygain-preamp=&lt;db&gt;</span></tt></dt>
<dd>Pre-amplification gain in dB to apply to the selected replaygain gain
(default: 0).</dd>
<dt><tt class="docutils literal"><span class="pre">--replaygain-clip=&lt;yes|no&gt;</span></tt></dt>
<dd>Allow the volume gain to clip (default: no). If this option is not
enabled, mpv automatically will prevent clipping by lowering the gain.</dd>
<dt><tt class="docutils literal"><span class="pre">--replaygain-fallback=&lt;db&gt;</span></tt></dt>
<dd>Gain in dB to apply if the file has no replay gain tags. This option
is always applied if the replaygain logic is somehow inactive. If this
is applied, no other replaygain options are applied.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-delay=&lt;sec&gt;</span></tt></dt>
<dd>Audio delay in seconds (positive or negative float value). Positive values
delay the audio, and negative values delay the video.</dd>
<dt><tt class="docutils literal"><span class="pre">--mute=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Set startup audio mute status (default: no).</p>
<p class="last">See also: <tt class="docutils literal"><span class="pre">--volume</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-demuxer=&lt;[+]name&gt;</span></tt></dt>
<dd>Use this audio demuxer type when using <tt class="docutils literal"><span class="pre">--audio-file</span></tt>. Use a '+' before
the name to force it; this will skip some checks. Give the demuxer name as
printed by <tt class="docutils literal"><span class="pre">--audio-demuxer=help</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--ad-lavc-ac3drc=&lt;level&gt;</span></tt></dt>
<dd><p class="first">Select the Dynamic Range Compression level for AC-3 audio streams.
<tt class="docutils literal">&lt;level&gt;</tt> is a float value ranging from 0 to 1, where 0 means no
compression (which is the default) and 1 means full compression (make loud
passages more silent and vice versa). Values up to 6 are also accepted, but
are purely experimental. This option only shows an effect if the AC-3 stream
contains the required range compression information.</p>
<p class="last">The standard mandates that DRC is enabled by default, but mpv (and some
other players) ignore this for the sake of better audio quality.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ad-lavc-downmix=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether to request audio channel downmixing from the decoder (default: no).
Some decoders, like AC-3, AAC and DTS, can remix audio on decoding. The
requested number of output channels is set with the <tt class="docutils literal"><span class="pre">--audio-channels</span></tt> option.
Useful for playing surround audio on a stereo system.</dd>
<dt><tt class="docutils literal"><span class="pre">--ad-lavc-threads=&lt;0-16&gt;</span></tt></dt>
<dd>Number of threads to use for decoding. Whether threading is actually
supported depends on codec. As of this writing, it's supported for some
lossless codecs only. 0 means autodetect number of cores on the
machine and use that, up to the maximum of 16 (default: 1).</dd>
<dt><tt class="docutils literal"><span class="pre">--ad-lavc-o=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Pass AVOptions to libavcodec decoder. Note, a patch to make the o=
unneeded and pass all unknown options through the AVOption system is
welcome. A full list of AVOptions can be found in the FFmpeg manual.</p>
<p class="last">This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ad-spdif-dtshd=&lt;yes|no&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dtshd=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">If DTS is passed through, use DTS-HD.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This and enabling passthrough via <tt class="docutils literal"><span class="pre">--ad</span></tt> are deprecated in favor of
using <tt class="docutils literal"><span class="pre">--audio-spdif=dts-hd</span></tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-channels=&lt;auto-safe|auto|layouts&gt;</span></tt></dt>
<dd><p class="first">Control which audio channels are output (e.g. surround vs. stereo). There
are the following possibilities:</p>
<ul>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-channels=auto-safe</span></tt></dt>
<dd><p class="first">Use the system's preferred channel layout. If there is none (such
as when accessing a hardware device instead of the system mixer),
force stereo. Some audio outputs might simply accept any layout and
do downmixing on their own.</p>
<p class="last">This is the default.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-channels=auto</span></tt></dt>
<dd><p class="first last">Send the audio device whatever it accepts, preferring the audio's
original channel layout. Can cause issues with HDMI (see the warning
below).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-channels=layout1,layout2,...</span></tt></dt>
<dd><p class="first">List of <tt class="docutils literal">,</tt>-separated channel layouts which should be allowed.
Technically, this only adjusts the filter chain output to the best
matching layout in the list, and passes the result to the audio API.
It's possible that the audio API will select a different channel
layout.</p>
<p class="last">Using this mode is recommended for direct hardware output, especially
over HDMI (see HDMI warning below).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-channels=&lt;stereo|mono&gt;</span></tt></dt>
<dd><p class="first last">Force a downmix to stereo or mono. These are special-cases of the
previous item. (See paragraphs below for implications.)</p>
</dd>
</dl>
</li>
</ul>
<p>If a list of layouts is given, each item can be either an explicit channel
layout name (like <tt class="docutils literal">5.1</tt>), or a channel number. Channel numbers refer to
default layouts, e.g. 2 channels refer to stereo, 6 refers to 5.1.</p>
<p>See <tt class="docutils literal"><span class="pre">--audio-channels=help</span></tt> output for defined default layouts. This also
lists speaker names, which can be used to express arbitrary channel
layouts (e.g. <tt class="docutils literal"><span class="pre">fl-fr-lfe</span></tt> is 2.1).</p>
<p>If the list of channel layouts has only 1 item, the decoder is asked to
produce according output. This sometimes triggers decoder-downmix, which
might be different from the normal mpv downmix. (Only some decoders support
remixing audio, like AC-3, AAC or DTS. You can use <tt class="docutils literal"><span class="pre">--ad-lavc-downmix=no</span></tt>
to make the decoder always output its native layout.) One consequence is
that <tt class="docutils literal"><span class="pre">--audio-channels=stereo</span></tt> triggers decoder downmix, while <tt class="docutils literal">auto</tt>
or <tt class="docutils literal"><span class="pre">auto-safe</span></tt> never will, even if they end up selecting stereo. This
happens because the decision whether to use decoder downmix happens long
before the audio device is opened.</p>
<p>If the channel layout of the media file (i.e. the decoder) and the AO's
channel layout don't match, mpv will attempt to insert a conversion filter.
You may need to change the channel layout of the system mixer to achieve
your desired output as mpv does not have control over it. Another
work-around for this on some AOs is to use <tt class="docutils literal"><span class="pre">--audio-exclusive=yes</span></tt> to
circumvent the system mixer entirely.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p>Using <tt class="docutils literal">auto</tt> can cause issues when using audio over HDMI. The OS will
typically report all channel layouts that _can_ go over HDMI, even if
the receiver does not support them. If a receiver gets an unsupported
channel layout, random things can happen, such as dropping the
additional channels, or adding noise.</p>
<p class="last">You are recommended to set an explicit whitelist of the layouts you
want. For example, most A/V receivers connected via HDMI and that can
do 7.1 would  be served by: <tt class="docutils literal"><span class="pre">--audio-channels=7.1,5.1,stereo</span></tt></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-display=&lt;no|embedded-first|external-first&gt;</span></tt></dt>
<dd><p class="first">Determines whether to display cover art when playing audio files and with
what priority. It will display the first image found, and additional images
are available as video tracks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Disable display of video entirely when playing audio
files.</td>
</tr>
<tr class="field"><th class="field-name">embedded-first:</th><td class="field-body">Display embedded images and external cover art, giving
priority to embedded images (default).</td>
</tr>
<tr class="field"><th class="field-name">external-first:</th><td class="field-body">Display embedded images and external cover art, giving
priority to external files.</td>
</tr>
</tbody>
</table>
<p class="last">This option has no influence on files with normal video tracks.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-files=&lt;files&gt;</span></tt></dt>
<dd><p class="first">Play audio from an external file while viewing a video.</p>
<p class="last">This is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-file=&lt;file&gt;</span></tt></dt>
<dd>CLI/config file only alias for <tt class="docutils literal"><span class="pre">--audio-files-append</span></tt>. Each use of this
option will add a new audio track. The details are similar to how
<tt class="docutils literal"><span class="pre">--sub-file</span></tt> works.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-format=&lt;format&gt;</span></tt></dt>
<dd>Select the sample format used for output from the audio filter layer to
the sound card. The values that <tt class="docutils literal">&lt;format&gt;</tt> can adopt are listed below in
the description of the <tt class="docutils literal">format</tt> audio filter.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-samplerate=&lt;Hz&gt;</span></tt></dt>
<dd>Select the output sample rate to be used (of course sound cards have
limits on this). If the sample frequency selected is different from that
of the current media, the internal swresample audio filter will be inserted
into the audio filter layer to compensate for the difference.</dd>
<dt><tt class="docutils literal"><span class="pre">--gapless-audio=&lt;no|yes|weak&gt;</span></tt></dt>
<dd><p class="first">Try to play consecutive audio files with no silence or disruption at the
point of file change. Default: <tt class="docutils literal">weak</tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Disable gapless audio.</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">The audio device is opened using parameters chosen for the first
file played and is then kept open for gapless playback. This
means that if the first file for example has a low sample rate, then
the following files may get resampled to the same low sample rate,
resulting in reduced sound quality. If you play files with different
parameters, consider using options such as <tt class="docutils literal"><span class="pre">--audio-samplerate</span></tt>
and <tt class="docutils literal"><span class="pre">--audio-format</span></tt> to explicitly select what the shared output
format will be.</td>
</tr>
<tr class="field"><th class="field-name">weak:</th><td class="field-body">Normally, the audio device is kept open (using the format it was
first initialized with). If the audio format the decoder output
changes, the audio device is closed and reopened. This means that
you will normally get gapless audio with files that were encoded
using the same settings, but might not be gapless in other cases.
The exact conditions under which the audio device is kept open is
an implementation detail, and can change from version to version.
Currently, the device is kept even if the sample format changes,
but the sample formats are convertible.
If video is still going on when there is still audio, trying to use
gapless is also explicitly given up.</td>
</tr>
</tbody>
</table>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This feature is implemented in a simple manner and relies on audio
output device buffering to continue playback while moving from one file
to another. If playback of the new file starts slowly, for example
because it is played from a remote network location or because you have
specified cache settings that require time for the initial cache fill,
then the buffered audio may run out before playback of the new file
can start.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--initial-audio-sync=&lt;yes|no&gt;</span></tt></dt>
<dd>When starting a video file or after events such as seeking, mpv will by
default modify the audio stream to make it start from the same timestamp
as video, by either inserting silence at the start or cutting away the
first samples. Disabling this option makes the player behave like older
mpv versions did: video and audio are both started immediately even if
their start timestamps differ, and then video timing is gradually adjusted
if necessary to reach correct synchronization later.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-file-auto=&lt;no|exact|fuzzy|all&gt;</span></tt></dt>
<dd><p class="first">Load additional audio files matching the video filename. The parameter
specifies how external audio files are matched.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Don't automatically load external audio files (default).</td>
</tr>
<tr class="field"><th class="field-name">exact:</th><td class="field-body">Load the media filename with audio file extension.</td>
</tr>
<tr class="field"><th class="field-name">fuzzy:</th><td class="field-body">Load all audio files containing the media filename.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Load all audio files in the current and <tt class="docutils literal"><span class="pre">--audio-file-paths</span></tt>
directories.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-exts=ext1,ext2,...</span></tt></dt>
<dd><p class="first">Audio file extentions to try to match when using <tt class="docutils literal"><span class="pre">--audio-file-auto</span></tt>,
<tt class="docutils literal"><span class="pre">--autocreate-playlist</span></tt> or <tt class="docutils literal"><span class="pre">--directory-filter-types</span></tt>.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.
Use <tt class="docutils literal"><span class="pre">--help=audio-exts</span></tt> to see default extensions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-file-paths=&lt;path1:path2:...&gt;</span></tt></dt>
<dd><p class="first">Equivalent to <tt class="docutils literal"><span class="pre">--sub-file-paths</span></tt> option, but for auto-loaded audio files.</p>
<p class="last">This is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-client-name=&lt;name&gt;</span></tt></dt>
<dd>The application name the player reports to the audio API. Can be useful
if you want to force a different audio profile (e.g. with PulseAudio),
or to set your own application name when using libmpv.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-buffer=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Set the audio output minimum buffer. The audio device might actually create
a larger buffer if it pleases. If the device creates a smaller buffer,
additional audio is buffered in an additional software buffer.</p>
<p>Making this larger may make soft-volume and other filters react slower,
introduce additional issues on playback speed change, and block the
player on audio format changes. A smaller buffer might lead to audio
dropouts.</p>
<p>This option should be used for testing only. If a non-default value helps
significantly, the mpv developers should be contacted.</p>
<p class="last">Default: 0.2 (200 ms).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-stream-silence=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Cash-grab consumer audio hardware (such as A/V receivers) often ignore
initial audio sent over HDMI. This can happen every time audio over HDMI
is stopped and resumed. In order to compensate for this, you can enable
this option to not to stop and restart audio on seeks, and fill the gaps
with silence. Likewise, when pausing playback, audio is not stopped, and
silence is played while paused. Note that if no audio track is selected,
the audio device will still be closed immediately.</p>
<p>Not all AOs support this.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This modifies certain subtle player behavior, like A/V-sync and underrun
handling. Enabling this option is strongly discouraged.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-wait-open=&lt;secs&gt;</span></tt></dt>
<dd>This makes sense for use with <tt class="docutils literal"><span class="pre">--audio-stream-silence=yes</span></tt>. If this option
is given, the player will wait for the given amount of seconds after opening
the audio device before sending actual audio data to it. Useful if your
expensive hardware discards the first 1 or 2 seconds of audio data sent to
it. If <tt class="docutils literal"><span class="pre">--audio-stream-silence=yes</span></tt> is not set, this option will likely
just waste time.</dd>
</dl>
</div>
<div class="section" id="subtitles">
<h2>Subtitles</h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Changing styling and position does not work with all subtitles. Image-based
subtitles (DVD, Bluray/PGS, DVB) cannot changed for fundamental reasons.
Subtitles in ASS format are normally not changed intentionally, but
overriding them can be controlled with <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt>.</p>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--sub-demuxer=&lt;[+]name&gt;</span></tt></dt>
<dd>Force subtitle demuxer type for <tt class="docutils literal"><span class="pre">--sub-file</span></tt>. Give the demuxer name as
printed by <tt class="docutils literal"><span class="pre">--sub-demuxer=help</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-lavc-o=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Pass AVOptions to libavcodec decoder. Note, a patch to make the o=
unneeded and pass all unknown options through the AVOption system is
welcome. A full list of AVOptions can be found in the FFmpeg manual.</p>
<p class="last">This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-delay=&lt;sec&gt;</span></tt></dt>
<dd>Delays primary subtitles by <tt class="docutils literal">&lt;sec&gt;</tt> seconds. Can be negative.</dd>
<dt><tt class="docutils literal"><span class="pre">--secondary-sub-delay=&lt;sec&gt;</span></tt></dt>
<dd>Delays secondary subtitles by <tt class="docutils literal">&lt;sec&gt;</tt> seconds. Can be negative.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-files=&lt;file-list&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--sub-file=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Add a subtitle file to the list of external subtitles.</p>
<p>If you use <tt class="docutils literal"><span class="pre">--sub-file</span></tt> only once, this subtitle file is displayed by
default.</p>
<p>If <tt class="docutils literal"><span class="pre">--sub-file</span></tt> is used multiple times, the subtitle to use can be
switched at runtime by cycling subtitle tracks. It's possible to show
two subtitles at once: use <tt class="docutils literal"><span class="pre">--sid</span></tt> to select the first subtitle index,
and <tt class="docutils literal"><span class="pre">--secondary-sid</span></tt> to select the second index. (The index is printed
on the terminal output after the <tt class="docutils literal"><span class="pre">--sid=</span></tt> in the list of streams.)</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sub-files</span></tt> is a path list option (see <a class="reference internal" href="#list-options">List Options</a>  for details), and
can take multiple file names separated by <tt class="docutils literal">:</tt> (Unix) or <tt class="docutils literal">;</tt> (Windows),
while  <tt class="docutils literal"><span class="pre">--sub-file</span></tt> takes a single filename, but can be used multiple
times to add multiple files. Technically, <tt class="docutils literal"><span class="pre">--sub-file</span></tt> is a CLI/config
file only alias for  <tt class="docutils literal"><span class="pre">--sub-files-append</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--secondary-sid=&lt;ID|auto|no&gt;</span></tt></dt>
<dd><p class="first">Select a secondary subtitle stream. This is similar to <tt class="docutils literal"><span class="pre">--sid</span></tt>. If a
secondary subtitle is selected, it will be rendered as toptitle (i.e. on
the top of the screen) alongside the normal subtitle by default, and
provides a way to render two subtitles at once.</p>
<p>There are some caveats associated with this feature. For example, bitmap
subtitles will always be rendered in their usual position, so selecting a
bitmap subtitle as secondary subtitle will result in overlapping subtitles.
Secondary subtitles are never shown on the terminal if video is disabled.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Styling and interpretation of any formatting tags is disabled for the
secondary subtitle. Internally, the same mechanism as <tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt>
is used to strip the styling.</p>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">If the main subtitle stream contains formatting tags which display the
subtitle at the top of the screen, it will overlap with the secondary
subtitle. To prevent this, you could use <tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt> to disable
styling in the main subtitle stream.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-scale=&lt;0-100&gt;</span></tt></dt>
<dd><p class="first">Factor for the text subtitle font size (default: 1).</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This affects ASS subtitles as well, and may lead to incorrect subtitle
rendering. Use with care, or use <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> instead.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-scale-by-window=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Whether to scale subtitles with the window size (default: yes). If this is
disabled while <tt class="docutils literal"><span class="pre">--sub-scale-with-window</span></tt> is set to yes, changing the window
size won't change the subtitle font size.</p>
<p class="last">Affects plain text subtitles only (or ASS if <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt> is set
high enough).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-scale-with-window=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Make the subtitle font size relative to the window (default: yes). If this is
disabled while <tt class="docutils literal"><span class="pre">--sub-scale-by-window</span></tt> is set to yes, the subtitle font
size is scaled relative to the video size instead.</p>
<p>Affects plain text subtitles only (or ASS if <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt> is set
high enough).</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">By default, the subtitle font size is scaled with the window size.
To make the font size constant, set only <tt class="docutils literal"><span class="pre">--sub-scale-by-window</span></tt> to no.
To make the font size scale with video size instead, set only
<tt class="docutils literal"><span class="pre">--sub-scale-with-window</span></tt> to no.
It's not meaningful to set both options to no.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-scale-with-window=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Like <tt class="docutils literal"><span class="pre">--sub-scale-with-window</span></tt>, but affects subtitles in ASS format only.
Like <tt class="docutils literal"><span class="pre">--sub-scale</span></tt>, this can break ASS subtitles.</p>
<p class="last">Default: no.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--embeddedfonts=&lt;yes|no&gt;</span></tt></dt>
<dd>Use fonts embedded in Matroska container files and ASS scripts (default:
yes). These fonts can be used for SSA/ASS subtitle rendering.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-pos=&lt;0-150&gt;</span></tt></dt>
<dd><p class="first">Specify the position of subtitles on the screen. The value is the vertical
position of the subtitle in % of the screen height. 100 is the original
position, which is often not the absolute bottom of the screen, but with
some margin between the bottom and the subtitle. Values above 100 move the
subtitle further down.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p>Text subtitles (as opposed to image subtitles) may be cut off if the
value of the option is above 100. This is a libass restriction.</p>
<p>This affects ASS subtitles as well, and may lead to incorrect subtitle
rendering in addition to the problem above.</p>
<p class="last">Using <tt class="docutils literal"><span class="pre">--sub-margin-y</span></tt> can achieve this in a better way.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--secondary-sub-pos=&lt;0-150&gt;</span></tt></dt>
<dd>Specify the position of secondary subtitles on the screen. This is similar
to <tt class="docutils literal"><span class="pre">--sub-pos</span></tt> but for secondary subtitles.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-speed=&lt;0.1-10.0&gt;</span></tt></dt>
<dd><p class="first">Multiply the subtitle event timestamps with the given value. Can be used
to fix the playback speed for frame-based subtitle formats. Affects text
subtitles only.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sub-speed=25/23.976</span></tt> plays frame based subtitles which have been
loaded assuming a framerate of 23.976 at 25 FPS.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-style-overrides=&lt;[Style.]Param=Value[,...]&gt;</span></tt></dt>
<dd><p class="first">Override some style or script info parameters.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--sub-ass-style-overrides=FontName=Arial,Default.Bold=1</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--sub-ass-style-overrides=PlayResY=768</span></tt></li>
</ul>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Using this option may lead to incorrect subtitle rendering.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-hinting=&lt;none|light|normal|native&gt;</span></tt></dt>
<dd><p class="first">Set font hinting type. &lt;type&gt; can be:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">none:</th><td class="field-body">no hinting (default)</td>
</tr>
<tr class="field"><th class="field-name">light:</th><td class="field-body">FreeType autohinter, light mode</td>
</tr>
<tr class="field"><th class="field-name">normal:</th><td class="field-body">FreeType autohinter, normal mode</td>
</tr>
<tr class="field"><th class="field-name">native:</th><td class="field-body">font native hinter</td>
</tr>
</tbody>
</table>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Enabling hinting can lead to mispositioned text (in situations it's
supposed to match up video background), or reduce the smoothness
of animations with some badly authored ASS scripts. It is recommended
to not use this option, unless really needed.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-line-spacing=&lt;value&gt;</span></tt></dt>
<dd>Set line spacing value for SSA/ASS renderer.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-shaper=&lt;simple|complex&gt;</span></tt></dt>
<dd><p class="first">Set the text layout engine used by libass.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">simple:</th><td class="field-body">uses Fribidi only, fast, doesn't render some languages correctly</td>
</tr>
<tr class="field"><th class="field-name">complex:</th><td class="field-body">uses HarfBuzz, slower, wider language support</td>
</tr>
</tbody>
</table>
<p class="last"><tt class="docutils literal">complex</tt> is the default. If libass hasn't been compiled against HarfBuzz,
libass silently reverts to <tt class="docutils literal">simple</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-styles=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Load all SSA/ASS styles found in the specified file and use them for
rendering text subtitles. The syntax of the file is exactly like the <tt class="docutils literal">[V4
Styles]</tt> / <tt class="docutils literal">[V4+ Styles]</tt> section of SSA/ASS.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Using this option may lead to incorrect subtitle rendering.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-override=&lt;no|yes|scale|force|strip&gt;</span></tt></dt>
<dd><p class="first">Control whether user style overrides should be applied. Note that all of
these overrides try to be somewhat smart about figuring out whether or not
a subtitle is considered a &quot;sign&quot;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Render subtitles as specified by the subtitle scripts, without
overrides.</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Apply all the <tt class="docutils literal"><span class="pre">--sub-ass-*</span></tt> style override options. Changing the
default for any of these options can lead to incorrect subtitle
rendering.</td>
</tr>
<tr class="field"><th class="field-name">scale:</th><td class="field-body">Like <tt class="docutils literal">yes</tt>, but also apply <tt class="docutils literal"><span class="pre">--sub-scale</span></tt> (default).</td>
</tr>
<tr class="field"><th class="field-name">force:</th><td class="field-body">Like <tt class="docutils literal">yes</tt>, but also force all <tt class="docutils literal"><span class="pre">--sub-*</span></tt> options. Can break
rendering easily.</td>
</tr>
<tr class="field"><th class="field-name">strip:</th><td class="field-body">Radically strip all ASS tags and styles from the subtitle. This
is equivalent to the old <tt class="docutils literal"><span class="pre">--no-ass</span></tt> / <tt class="docutils literal"><span class="pre">--no-sub-ass</span></tt> options.</td>
</tr>
</tbody>
</table>
<p class="last">This also controls some bitmap subtitle overrides, as well as HTML tags in
formats like SRT, despite the name of the option.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--secondary-sub-ass-override=&lt;no|yes|scale|force|strip&gt;</span></tt></dt>
<dd><p class="first">Control whether user secondary substyle overrides should be applied. This
works exactly like <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt>.</p>
<p class="last">Default: strip.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-force-margins</span></tt></dt>
<dd><p class="first">Enables placing toptitles and subtitles in black borders when they are
available, if the subtitles are in the ASS format.</p>
<p class="last">Default: no.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt></dt>
<dd><p class="first">Enables placing toptitles and subtitles in black borders when they are
available, if the subtitles are in a plain text format  (or ASS if
<tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt> is set high enough).</p>
<p class="last">Default: yes.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-use-video-data=&lt;none|aspect-ratio|all&gt;</span></tt></dt>
<dd><p class="first">Controls which information about the video stream is passed to libass.
Any option but <tt class="docutils literal">all</tt> is incompatible with standard ASS as defined by VSFilter,
whose behavior most subtitle scripts and renderers target, including libass.
Video stream properties are needed to accurately emulate VSFilter semantics and
withholding them will likely result in broken subtitle rendering for most files.
It's thus recommended to only change this selectively if required on a per-file basis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">none:</th><td class="field-body">Don't forward any video stream information.</td>
</tr>
<tr class="field"><th class="field-name">aspect-ratio:</th><td class="field-body">Only forward aspect ratio; fallbacks are used for other properties.
This makes behaviour consistent across different video resolutions.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Forward all available information, notably including storage resolution.</td>
</tr>
</tbody>
</table>
<p>For certain kinds of broken ASS files which got repurposed across
several video resolutions without either setting <tt class="docutils literal">LayoutRes</tt> headers
or adjusting affected effects, it may be desirable to withhold storage resolution
information from libass to ensure consistent rendering across resolutions.
Among others this affects 3D rotations and blurs.
When encountering such files, try setting <tt class="docutils literal"><span class="pre">aspect-ratio</span></tt>.</p>
<p>Even more broken files on anamorphic video might also exhibit stretching
unless aspect ratio information is also faked, in this case you can try
using <tt class="docutils literal">none</tt>. This has never an effect on non-anamorphic video.</p>
<p class="last">Default: <tt class="docutils literal">all</tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-video-aspect-override=&lt;no|ratio&gt;</span></tt></dt>
<dd><p class="first">Allows passing any arbitrary aspect ratio to libass instead of the video’s
actual aspect ratio. Zero or negative aspect ratios are identical to <tt class="docutils literal">no</tt>.</p>
<p class="last">This has no effect if <tt class="docutils literal"><span class="pre">sub-ass-use-video-data</span></tt> is set to <tt class="docutils literal">none</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-vsfilter-bidi-compat=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Set implicit bidi detection to <tt class="docutils literal">ltr</tt> instead of <tt class="docutils literal">auto</tt> to match ASS'
default. This also disables libass' incompatible extensions. This currently
includes bracket pair matching according to the revised Unicode
Bidirectional Algorithm introduced in Unicode 6.3, and also affects how BiDi
runs are split and processed, as well as soft linewrapping of unicode text.</p>
<p class="last">This affects plaintext (non-ASS) subtitles only. Default: no.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-vsfilter-color-compat=&lt;basic|full|force-601|no&gt;</span></tt></dt>
<dd><p class="first">Mangle colors like (xy-)vsfilter do (default: basic). Historically, VSFilter
was not color space aware. This was no problem as long as the color space
used for SD video (BT.601) was used. But when everything switched to HD
(BT.709), VSFilter was still converting RGB colors to BT.601, rendered
them into the video frame, and handled the frame to the video output, which
would use BT.709 for conversion to RGB. The result were mangled subtitle
colors. Later on, bad hacks were added on top of the ASS format to control
how colors are to be mangled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">basic:</th><td class="field-body">Handle only BT.601-&gt;BT.709 mangling, if the subtitles seem to
indicate that this is required (default).</td>
</tr>
<tr class="field"><th class="field-name">full:</th><td class="field-body">Handle the full <tt class="docutils literal">YCbCr Matrix</tt> header with all video color spaces
supported by libass and mpv. This might lead to bad breakages in
corner cases and is not strictly needed for compatibility
(hopefully), which is why this is not default.</td>
</tr>
<tr class="field"><th class="field-name">force-601:</th><td class="field-body">Force BT.601-&gt;BT.709 mangling, regardless of subtitle headers
or video color space.</td>
</tr>
<tr class="field"><th class="field-name">no:</th><td class="field-body">Disable color mangling completely. All colors are RGB.</td>
</tr>
</tbody>
</table>
<p class="last">Choosing anything other than <tt class="docutils literal">no</tt> will make the subtitle color depend on
the video color space, and it's for example in theory not possible to reuse
a subtitle script with another video file. The <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt>
option doesn't affect how this option is interpreted.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stretch-dvd-subs=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Stretch DVD subtitles when playing anamorphic videos for better looking
fonts on badly mastered DVDs. This switch has no effect when the
video is stored with square pixels - which for DVD input cannot be the case
though.</p>
<p>Many studios tend to use bitmap fonts designed for square pixels when
authoring DVDs, causing the fonts to look stretched on playback on DVD
players. This option fixes them, however at the price of possibly
misaligning some subtitles (e.g. sign translations).</p>
<p class="last">Disabled by default.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stretch-image-subs-to-screen=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Stretch DVD and other image subtitles to the screen, ignoring the video
margins. This has a similar effect as <tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt> for text
subtitles, except that the text itself will be stretched, not only just
repositioned. (At least in general it is unavoidable, as an image bitmap
can in theory consist of a single bitmap covering the whole screen, and
the player won't know where exactly the text parts are located.)</p>
<p>This option does not display subtitles correctly. Use with care.</p>
<p class="last">Disabled by default.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--image-subs-video-resolution=&lt;yes|no&gt;</span></tt></dt>
<dd>Override the image subtitle resolution with the video resolution
(default: no). Normally, the subtitle canvas is fit into the video canvas
(e.g. letterboxed). Setting this option uses the video size as subtitle
canvas size. Can be useful to test broken subtitles, which often happen
when the video was trancoded, while attempting to keep the old subtitles.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Render ASS subtitles natively (default: yes).</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This has been deprecated by <tt class="docutils literal"><span class="pre">--sub-ass-override=strip</span></tt>. You also
may need <tt class="docutils literal"><span class="pre">--embeddedfonts=no</span></tt> to get the same behavior. Also,
using <tt class="docutils literal"><span class="pre">--sub-ass-override=style</span></tt> should give better results
without breaking subtitles too much.</p>
</div>
<p>If <tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt> is specified, all tags and style declarations are
stripped and ignored on display. The subtitle renderer uses the font style
as specified by the <tt class="docutils literal"><span class="pre">--sub-</span></tt> options instead.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Using <tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt> may lead to incorrect or completely broken
rendering of ASS/SSA subtitles. It can sometimes be useful to forcibly
override the styling of ASS subtitles, but should be avoided in general.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-auto=&lt;no|exact|fuzzy|all&gt;</span></tt></dt>
<dd><p class="first">Load additional subtitle files matching the video filename. The parameter
specifies how external subtitle files are matched. <tt class="docutils literal">exact</tt> is enabled by
default.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Don't automatically load external subtitle files.</td>
</tr>
<tr class="field"><th class="field-name">exact:</th><td class="field-body">Load the media filename with subtitle file extension and possibly
language suffixes (default).</td>
</tr>
<tr class="field"><th class="field-name">fuzzy:</th><td class="field-body">Load all subs containing the media filename.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Load all subs in the current and <tt class="docutils literal"><span class="pre">--sub-file-paths</span></tt> directories.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-auto-exts=ext1,ext2,...</span></tt></dt>
<dd><p class="first">Subtitle extentions to try and match when using <tt class="docutils literal"><span class="pre">--sub-auto</span></tt>. Note that
modifying this list will also affect what mpv recognizes as subtitles when
using drag and drop.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-codepage=&lt;codepage&gt;</span></tt></dt>
<dd><p class="first">You can use this option to specify the subtitle codepage. uchardet will be
used to guess the charset. (If mpv was not compiled with uchardet, then
<tt class="docutils literal"><span class="pre">utf-8</span></tt> is the effective default.)</p>
<p>The default value for this option is <tt class="docutils literal">auto</tt>, which enables autodetection.</p>
<p>The following steps are taken to determine the final codepage, in order:</p>
<ul class="simple">
<li>if the specific codepage has a <tt class="docutils literal">+</tt>, use that codepage</li>
<li>if the data looks like UTF-8, assume it is UTF-8</li>
<li>if <tt class="docutils literal"><span class="pre">--sub-codepage</span></tt> is set to a specific codepage, use that</li>
<li>run uchardet, and if successful, use that</li>
<li>otherwise, use <tt class="docutils literal"><span class="pre">UTF-8-BROKEN</span></tt></li>
</ul>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--sub-codepage=latin2</span></tt> Use Latin 2 if input is not UTF-8.</li>
<li><tt class="docutils literal"><span class="pre">--sub-codepage=+cp1250</span></tt> Always force recoding to cp1250.</li>
</ul>
</div>
<p>The pseudo codepage <tt class="docutils literal"><span class="pre">UTF-8-BROKEN</span></tt> is used internally. If it's set,
subtitles are interpreted as UTF-8 with &quot;Latin 1&quot; as fallback for bytes
which are not valid UTF-8 sequences. iconv is never involved in this mode.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This works for text subtitle files only. Other types of subtitles (in
particular subtitles in mkv files) are always assumed to be UTF-8.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-stretch-durations=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Stretch a subtitle duration so it ends when the next one starts.
Should help with subtitles which erroneously have zero durations.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Only applies to text subtitles.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-fix-timing=&lt;yes|no&gt;</span></tt></dt>
<dd>Adjust subtitle timing is to remove minor gaps or overlaps between
subtitles (if the difference is smaller than 210 ms, the gap or overlap
is removed).</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-forced-events-only=&lt;yes|no&gt;</span></tt></dt>
<dd>Enabling this displays only forced events within subtitle streams. Only
some bitmap subtitle formats (such as DVD or PGS) are capable of having a
mixture of forced and unforced events within the stream. Enabling this on
text subtitles will cause no subtitles to be displayed (default: <tt class="docutils literal">no</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-fps=&lt;rate&gt;</span></tt></dt>
<dd><p class="first">Specify the framerate of the subtitle file (default: video fps). Affects
text subtitles only.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal">&lt;rate&gt;</tt> &gt; video fps speeds the subtitles up for frame-based
subtitle files and slows them down for time-based ones.</p>
</div>
<p class="last">See also: <tt class="docutils literal"><span class="pre">--sub-speed</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-gauss=&lt;0.0-3.0&gt;</span></tt></dt>
<dd><p class="first">Apply Gaussian blur to image subtitles (default: 0). This can help to make
pixelated DVD/Vobsubs look nicer. A value other than 0 also switches to
software subtitle scaling. Might be slow.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Never applied to text subtitles.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-gray</span></tt></dt>
<dd><p class="first">Convert image subtitles to grayscale. Can help to make yellow DVD/Vobsubs
look nicer.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Never applied to text subtitles.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-file-paths=&lt;path-list&gt;</span></tt></dt>
<dd><p class="first">Specify extra directories to search for subtitles matching the video.
Multiple directories can be separated by &quot;:&quot; (&quot;;&quot; on Windows).
Paths can be relative or absolute. Relative paths are interpreted relative
to video file directory.
If the file is a URL, only absolute paths and <tt class="docutils literal">sub</tt> configuration
subdirectory will be scanned.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<p>Assuming that <tt class="docutils literal">/path/to/video/video.avi</tt> is played and
<tt class="docutils literal"><span class="pre">--sub-file-paths=sub:subtitles</span></tt> is specified, mpv
searches for subtitle files in these directories:</p>
<ul class="last simple">
<li><tt class="docutils literal">/path/to/video/</tt></li>
<li><tt class="docutils literal">/path/to/video/sub/</tt></li>
<li><tt class="docutils literal">/path/to/video/subtitles/</tt></li>
<li>the <tt class="docutils literal">sub</tt> configuration subdirectory (usually <tt class="docutils literal"><span class="pre">~/.config/mpv/sub/</span></tt>)</li>
</ul>
</div>
<p class="last">This is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-visibility=&lt;yes|no&gt;</span></tt></dt>
<dd>Can be used to disable display of subtitles, but still select and decode
them.</dd>
<dt><tt class="docutils literal"><span class="pre">--secondary-sub-visibility=&lt;yes|no&gt;</span></tt></dt>
<dd>Can be used to disable display of secondary subtitles, but still select and
decode them.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-clear-on-seek</span></tt></dt>
<dd>(Obscure, rarely useful.) Can be used to play broken mkv files with
duplicate ReadOrder fields. ReadOrder is the first field in a
Matroska-style ASS subtitle packets. It should be unique, and libass
uses it for fast elimination of duplicates. This option disables caching
of subtitles across seeks, so after a seek libass can't eliminate subtitle
packets with the same ReadOrder as earlier packets. Note that enabling this
option can result in broken subtitle behavior if you are not actually
playing one of the aforementioned broken mkv files.</dd>
<dt><tt class="docutils literal"><span class="pre">--teletext-page=&lt;-1-999&gt;</span></tt></dt>
<dd><p class="first">Select a teletext page number to decode.</p>
<p>This works for <tt class="docutils literal">dvb_teletext</tt> subtitle streams, and if FFmpeg has been
compiled with support for it.</p>
<p>Values <tt class="docutils literal"><span class="pre">1-999</span></tt> are for individual pages. Special value <tt class="docutils literal">0</tt> (default)
matches all subtitle pages. Special value <tt class="docutils literal"><span class="pre">-1</span></tt> matches all pages.</p>
<p>Note that page <tt class="docutils literal">100</tt> is the default start page of actual teletext. It is
also the former default value of this option.</p>
<p>See the <tt class="docutils literal"><span class="pre">libzvbi-teletext</span></tt> section in FFmpeg documentation for details.</p>
<p class="last">Default: 0</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-past-video-end</span></tt></dt>
<dd><p class="first">After the last frame of video, if this option is enabled, subtitles will
continue to update based on audio timestamps. Otherwise, the subtitles
for the last video frame will stay onscreen.</p>
<p class="last">Default: disabled</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-font=&lt;name&gt;</span></tt></dt>
<dd><p class="first">Specify font to use for subtitles that do not themselves
specify a particular font. The default is <tt class="docutils literal"><span class="pre">sans-serif</span></tt>.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--sub-font='Bitstream</span> Vera Sans'</tt></li>
<li><tt class="docutils literal"><span class="pre">--sub-font='Comic</span> Sans MS'</tt></li>
</ul>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p>The <tt class="docutils literal"><span class="pre">--sub-font</span></tt> option (and many other style related <tt class="docutils literal"><span class="pre">--sub-</span></tt>
options) are ignored when ASS-subtitles are rendered, unless
<tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt> is specified.</p>
<p class="last">This used to support fontconfig patterns. Starting with libass 0.13.0,
this stopped working.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-font-size=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Specify the sub font size. The unit is the size in scaled pixels at a
window height of 720. The actual pixel size is scaled with the window
height: if the window height is larger or smaller than 720, the actual size
of the text increases or decreases as well.</p>
<p class="last">Default: 55.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-blur=&lt;0..20.0&gt;</span></tt></dt>
<dd>Gaussian blur factor applied to the sub font border.
0 means no blur applied (default).</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-bold=&lt;yes|no&gt;</span></tt></dt>
<dd>Format text on bold.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-italic=&lt;yes|no&gt;</span></tt></dt>
<dd>Format text on italic.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-outline-color=&lt;color&gt;</span></tt></dt>
<dd><p class="first">See <tt class="docutils literal"><span class="pre">--sub-color</span></tt>. Color used for the sub font outline.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sub-border-color</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--sub-outline-color</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-back-color=&lt;color&gt;</span></tt></dt>
<dd><p class="first">See <tt class="docutils literal"><span class="pre">--sub-color</span></tt>. Color used for sub text background.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sub-shadow-color</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--sub-back-color</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-outline-size=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Size of the sub font outline in scaled pixels (see <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt>
for details). A value of 0 disables outlines.</p>
<p><tt class="docutils literal"><span class="pre">--sub-border-size</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--sub-outline-size</span></tt>.</p>
<p class="last">Default: 3.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-border-style=&lt;outline-and-shadow|opaque-box|background-box&gt;</span></tt></dt>
<dd><p class="first">The style of the border.</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">outline-and-shadow</span></tt>: draw outline and shadow.
The size of the outline is determined by <tt class="docutils literal"><span class="pre">--sub-outline-size</span></tt>,
and the offset of the shadow is determined by <tt class="docutils literal"><span class="pre">--sub-shadow-offset</span></tt>.
The outline is colored by <tt class="docutils literal"><span class="pre">--sub-outline-color</span></tt>,
and the shadow is colored by <tt class="docutils literal"><span class="pre">--sub-back-color</span></tt>.
This corresponds to <tt class="docutils literal">BorderStyle=1</tt> in the ASS spec.</li>
<li><tt class="docutils literal"><span class="pre">opaque-box</span></tt>: draw outline and shadow as opaque boxes that tightly wrap each lines of text.
The margin of the outline opaque box is determined by <tt class="docutils literal"><span class="pre">--sub-outline-size</span></tt>,
and the offset of the shadow opaque box is determined by <tt class="docutils literal"><span class="pre">--sub-shadow-offset</span></tt>.
The outline opaque box is colored by <tt class="docutils literal"><span class="pre">--sub-outline-color</span></tt>,
and the shadow opaque box is colored by <tt class="docutils literal"><span class="pre">--sub-back-color</span></tt>.
Despite its name, the opaque box can be semi-transparent.
This corresponds to <tt class="docutils literal">BorderStyle=3</tt> in the ASS spec.</li>
<li><tt class="docutils literal"><span class="pre">background-box</span></tt>: draw a background box that bounds all lines of text.
The background box is colored by <tt class="docutils literal"><span class="pre">--sub-back-color</span></tt>,
and the margin of the background box is determined by <tt class="docutils literal"><span class="pre">--sub-shadow-offset</span></tt>.
The behavior of the outline is the same as the <tt class="docutils literal"><span class="pre">outline-and-shadow</span></tt> style.
This corresponds to <tt class="docutils literal">BorderStyle=4</tt>, which is a libass-specific extension.</li>
</ul>
<p class="last">Default: <tt class="docutils literal"><span class="pre">outline-and-shadow</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-color=&lt;color&gt;</span></tt></dt>
<dd><p class="first">Specify the color used for unstyled text subtitles.</p>
<p>The color is specified in the form <tt class="docutils literal">r/g/b</tt>, where each color component
is specified as number in the range 0.0 to 1.0. It's also possible to
specify the transparency by using <tt class="docutils literal">r/g/b/a</tt>, where the alpha value 0
means fully transparent, and 1.0 means opaque. If the alpha component is
not given, the color is 100% opaque.</p>
<p>Passing a single number to the option sets the sub to gray, and the form
<tt class="docutils literal">gray/a</tt> lets you specify alpha additionally.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--sub-color=1.0/0.0/0.0</span></tt> set sub to opaque red</li>
<li><tt class="docutils literal"><span class="pre">--sub-color=1.0/0.0/0.0/0.75</span></tt> set sub to opaque red with 75% alpha</li>
<li><tt class="docutils literal"><span class="pre">--sub-color=0.5/0.75</span></tt> set sub to 50% gray with 75% alpha</li>
</ul>
</div>
<p>Alternatively, the color can be specified as a RGB hex triplet in the form
<tt class="docutils literal">#RRGGBB</tt>, where each 2-digit group expresses a color value in the
range 0 (<tt class="docutils literal">00</tt>) to 255 (<tt class="docutils literal">FF</tt>). For example, <tt class="docutils literal">#FF0000</tt> is red.
Alpha is given with <tt class="docutils literal">#AARRGGBB</tt>.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--sub-color='#FF0000'</span></tt> set sub to opaque red</li>
<li><tt class="docutils literal"><span class="pre">--sub-color='#C0808080'</span></tt> set sub to 50% gray with 75% alpha</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-margin-x=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Left and right screen margin for the subs in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details).</p>
<p>This option specifies the distance of the sub to the left, as well as at
which distance from the right border long sub text will be broken.</p>
<p class="last">Default: 25.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-margin-y=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Top and bottom screen margin for the subs in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details).</p>
<p>This option specifies the vertical margins of unstyled text subtitles.
If you just want to raise the vertical subtitle position, use <tt class="docutils literal"><span class="pre">--sub-pos</span></tt>.</p>
<p class="last">Default: 22.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-align-x=&lt;left|center|right&gt;</span></tt></dt>
<dd><p class="first">Control to which corner of the screen text subtitles should be
aligned to (default: <tt class="docutils literal">center</tt>).</p>
<p class="last">Never applied to ASS subtitles, except in <tt class="docutils literal"><span class="pre">--sub-ass=no</span></tt> mode. Likewise,
this does not apply to image subtitles.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-align-y=&lt;top|center|bottom&gt;</span></tt></dt>
<dd>Vertical position (default: <tt class="docutils literal">bottom</tt>).
Details see <tt class="docutils literal"><span class="pre">--sub-align-x</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-justify=&lt;auto|left|center|right&gt;</span></tt></dt>
<dd>Control how multi line subs are justified irrespective of where they
are aligned (default: <tt class="docutils literal">auto</tt> which justifies as defined by
<tt class="docutils literal"><span class="pre">--sub-align-x</span></tt>).
Left justification is recommended to make the subs easier to read
as it is easier for the eyes.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-ass-justify=&lt;yes|no&gt;</span></tt></dt>
<dd>Applies justification as defined by <tt class="docutils literal"><span class="pre">--sub-justify</span></tt> on ASS subtitles
if <tt class="docutils literal"><span class="pre">--sub-ass-override</span></tt> is not set to <tt class="docutils literal">no</tt>.
Default: <tt class="docutils literal">no</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-shadow-offset=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Displacement of the sub text shadow in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details). A value of 0 disables shadows.</p>
<p class="last">Default: 0.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-spacing=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Horizontal sub font spacing in scaled pixels (see <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt>
for details). This value is added to the normal letter spacing. Negative
values are allowed.</p>
<p class="last">Default: 0.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-sdh=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Applies filter removing subtitle additions for the deaf or hard-of-hearing (SDH).
This is intended for English, but may in part work for other languages too.
The intention is that it can be always enabled so may not remove
all parts added.</p>
<p>It removes speaker labels (like MAN:) and any text enclosed within symbols like
parentheses or brackets as specified by the <tt class="docutils literal"><span class="pre">--sub-filter-sdh-enclosures</span></tt> option.
Note that parenthesis (full width parenthesis and the normal variant) are a special
case and only upper case text is removed. For more filtering, you can use the
<tt class="docutils literal"><span class="pre">--sub-filter-sdh-harder</span></tt> option.</p>
<p class="last">Default: <tt class="docutils literal">no</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-sdh-harder=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Do harder SDH filtering (if enabled by <tt class="docutils literal"><span class="pre">--sub-filter-sdh</span></tt>).
Will also remove speaker labels and text within parentheses using both
lower and upper case letters.</p>
<p class="last">Default: <tt class="docutils literal">no</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-sdh-enclosures=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Specify a string of characters that <tt class="docutils literal"><span class="pre">--sub-filter-sdh</span></tt> will use to potentially
remove text. Text that is enclosed within characters specified by this string will
be removed. Note that bracket characters with known pairs (such as <tt class="docutils literal">(</tt> or <tt class="docutils literal">[</tt>)
will be mapped internally to their matching right hand character, so you only need
to specify left hand characters.</p>
<p class="last">Default: <tt class="docutils literal">([（</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-regex-...=...</span></tt></dt>
<dd><p class="first">Set a list of regular expressions to match on text subtitles, and remove any
lines that match (default: empty). This is a string list option. See
<a class="reference internal" href="#list-options">List Options</a> for details. Normally, you should use
<tt class="docutils literal"><span class="pre">--sub-filter-regex-append=&lt;regex&gt;</span></tt>, where each option use will append a
new regular expression, without having to fight escaping problems.</p>
<p>List items are matched in order. If a regular expression matches, the
process is stopped, and the subtitle line is discarded. The text matched
against is, by default, the <tt class="docutils literal">Text</tt> field of ASS events (if the
subtitle format is different, it is always converted). This may include
formatting tags. Matching is case-insensitive, but how this is done depends
on the libc, and most likely works in ASCII only. It does not work on
bitmap/image subtitles. Unavailable on inferior OSes (requires POSIX regex
support).</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal"><span class="pre">--sub-filter-regex-append=opensubtitles\.org</span></tt> filters some ads.</p>
</div>
<p>Technically, using a list for matching is redundant, since you could just
use a single combined regular expression. But it helps with diagnosis,
ease of use, and temporarily disabling or enabling individual filters.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This is experimental. The semantics most likely will change, and if you
use this, you should be prepared to update the option later. Ideas
include replacing the regexes with a very primitive and small subset of
sed, or some method to control case-sensitivity.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-jsre-...=...</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">--sub-filter-regex</span></tt> but with JavaScript regular expressions.
Shares/affected-by all <tt class="docutils literal"><span class="pre">--sub-filter-regex-*</span></tt> control options (see below),
and also experimental. Requires only JavaScript support.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-regex-plain=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether to first convert the ASS &quot;Text&quot; field to plain-text (default: no).
This strips ASS tags and applies ASS directives, like <tt class="docutils literal">\N</tt> to new-line.
If the result is multi-line then the regexp anchors <tt class="docutils literal">^</tt> and <tt class="docutils literal">$</tt> match
each line, but still any match discards all lines.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-regex-warn=&lt;yes|no&gt;</span></tt></dt>
<dd>Log dropped lines with warning log level, instead of verbose (default: no).
Helpful for testing.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-filter-regex-enable=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether to enable regex filtering (default: yes). Note that if no regexes
are added to the <tt class="docutils literal"><span class="pre">--sub-filter-regex</span></tt> list, setting this option to <tt class="docutils literal">yes</tt>
has no effect. It's meant to easily disable or enable filtering
temporarily.</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-create-cc-track=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">For every video stream, create a closed captions track (default: no). The
only purpose is to make the track available for selection at the start of
playback, instead of creating it lazily. This applies only to
<tt class="docutils literal">ATSC A53 Part 4 Closed Captions</tt> (displayed by mpv as subtitle tracks
using the codec <tt class="docutils literal">eia_608</tt>). The CC track is marked &quot;default&quot; and selected
according to the normal subtitle track selection rules. You can then use
<tt class="docutils literal"><span class="pre">--sid</span></tt> to explicitly select the correct track too.</p>
<p class="last">If the video stream contains no closed captions, or if no video is being
decoded, the CC track will remain empty and will not show any text.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-font-provider=&lt;auto|none|fontconfig&gt;</span></tt></dt>
<dd><p class="first">Which libass font provider backend to use (default: auto). <tt class="docutils literal">auto</tt> will
attempt to use the native font provider: fontconfig on Linux, CoreText on
macOS, DirectWrite on Windows. <tt class="docutils literal">fontconfig</tt> forces fontconfig, if libass
was built with support (if not, it behaves like <tt class="docutils literal">none</tt>).</p>
<p class="last">The <tt class="docutils literal">none</tt> font provider effectively disables system fonts. It will still
attempt to use embedded fonts (unless <tt class="docutils literal"><span class="pre">--embeddedfonts=no</span></tt> is set; this is
the same behavior as with all other font providers), <tt class="docutils literal">subfont.ttf</tt> if
provided, and fonts in  the <tt class="docutils literal">fonts</tt> sub-directory if provided. (The
fallback is more strict than that of other font providers, and if a font
name does not match, it may prefer not to render any text that uses the
missing font.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sub-fonts-dir=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Font files in this directory are used by mpv/libass for subtitles. Useful
if you do not want to install fonts to your system. Note that files in this
directory are loaded into memory before being used by mpv. If you have a
lot of fonts, consider using fonts.conf (see <a class="reference internal" href="#files">FILES</a> section) to include
additional mpv user settings.</p>
<p class="last">If this option is not specified, <tt class="docutils literal"><span class="pre">~~/fonts</span></tt> will be used by default.</p>
</dd>
</dl>
</div>
<div class="section" id="window">
<h2>Window</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--title=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Set the window title. This is used for the video window, and if possible,
also sets the audio stream title.</p>
<p>Properties are expanded. (See <a class="reference internal" href="#property-expansion">Property Expansion</a>.)</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">There is a danger of this causing significant CPU usage, depending on
the properties used. Changing the window title is often a slow
operation, and if the title changes every frame, playback can be ruined.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screen=&lt;default|0-32&gt;</span></tt></dt>
<dd><p class="first">In multi-monitor configurations (i.e. a single desktop that spans across
multiple displays), this option tells mpv which screen to display the
video on.</p>
<div class="admonition admonition-note-x11">
<p class="first admonition-title">Note (X11)</p>
<p class="last">This option does not work properly with all window managers. In these
cases, you can try to use <tt class="docutils literal"><span class="pre">--geometry</span></tt> to position the window
explicitly. It's also possible that the window manager provides native
features to control which screens application windows should use.</p>
</div>
<div class="admonition admonition-note-wayland">
<p class="first admonition-title">Note (Wayland)</p>
<p class="last">This option does not actually work on wayland since window placement is
not allowed. However setting this option does influence mpv's initial
guess at finding an output which may be useful for options like
<tt class="docutils literal"><span class="pre">--geometry</span></tt> or <tt class="docutils literal"><span class="pre">--autofit</span></tt> which depend on the monitor resolution.</p>
</div>
<p class="last">See also <tt class="docutils literal"><span class="pre">--fs-screen</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screen-name=&lt;string&gt;</span></tt></dt>
<dd>In multi-monitor configurations, this option tells mpv which screen to
display the video on based on the screen name from the video backend. The
same caveats in the <tt class="docutils literal"><span class="pre">--screen</span></tt> option also apply here. This option is
ignored and does nothing if <tt class="docutils literal"><span class="pre">--screen</span></tt> is explicitly set.</dd>
<dt><tt class="docutils literal"><span class="pre">--fullscreen</span></tt>, <tt class="docutils literal"><span class="pre">--fs</span></tt></dt>
<dd>Fullscreen playback.</dd>
<dt><tt class="docutils literal"><span class="pre">--fs-screen=&lt;all|current|0-32&gt;</span></tt></dt>
<dd><p class="first">In multi-monitor configurations (i.e. a single desktop that spans across
multiple displays), this option tells mpv which screen to go fullscreen to.
If <tt class="docutils literal">current</tt> is used mpv will fallback on what the user provided with
the <tt class="docutils literal">screen</tt> option.</p>
<div class="admonition admonition-note-x11">
<p class="first admonition-title">Note (X11)</p>
<p class="last">This option works properly only with window managers which
understand the EWMH <tt class="docutils literal">_NET_WM_FULLSCREEN_MONITORS</tt> hint.</p>
</div>
<div class="admonition admonition-note-macos">
<p class="first admonition-title">Note (macOS)</p>
<p class="last"><tt class="docutils literal">all</tt> does not work on macOS and will behave like <tt class="docutils literal">current</tt>.</p>
</div>
<p class="last">See also <tt class="docutils literal"><span class="pre">--screen</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--fs-screen-name=&lt;string&gt;</span></tt></dt>
<dd>In multi-monitor configurations, this option tells mpv which screen to go
fullscreen to based on the screen name from the video backend. The same
caveats in the <tt class="docutils literal"><span class="pre">--fs-screen</span></tt> option also apply here. This option is
ignored and does nothing if <tt class="docutils literal"><span class="pre">--fs-screen</span></tt> is explicitly set.</dd>
<dt><tt class="docutils literal"><span class="pre">--keep-open=&lt;yes|no|always&gt;</span></tt></dt>
<dd><p class="first">Do not terminate when playing or seeking beyond the end of the file, and
there is no next file to be played (and <tt class="docutils literal"><span class="pre">--loop</span></tt> is not used).
Instead, pause the player. When trying to seek beyond end of the file, the
player will attempt to seek to the last frame.</p>
<p>Normally, this will act like <tt class="docutils literal">set pause yes</tt> on EOF, unless the
<tt class="docutils literal"><span class="pre">--keep-open-pause=no</span></tt> option is set.</p>
<p>The following arguments can be given:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">If the current file ends, go to the next file or terminate.
(Default.)</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Don't terminate if the current file is the last playlist entry.
Equivalent to <tt class="docutils literal"><span class="pre">--keep-open</span></tt> without arguments.</td>
</tr>
<tr class="field"><th class="field-name">always:</th><td class="field-body">Like <tt class="docutils literal">yes</tt>, but also applies to files before the last playlist
entry. This means playback will never automatically advance to
the next file.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>This option is not respected when using <tt class="docutils literal"><span class="pre">--frames</span></tt>. Explicitly
skipping to the next file if the binding uses <tt class="docutils literal">force</tt> will terminate
playback as well.</p>
<p class="last">Also, if errors or unusual circumstances happen, the player can quit
anyway.</p>
</div>
<p class="last">Since mpv 0.6.0, this doesn't pause if there is a next file in the playlist,
or the playlist is looped. Approximately, this will pause when the player
would normally exit, but in practice there are corner cases in which this
is not the case (e.g. <tt class="docutils literal">mpv <span class="pre">--keep-open</span> file.mkv /dev/null</tt> will play
file.mkv normally, then fail to open <tt class="docutils literal">/dev/null</tt>, then exit). (In
mpv 0.8.0, <tt class="docutils literal">always</tt> was introduced, which restores the old behavior.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--keep-open-pause=&lt;yes|no&gt;</span></tt></dt>
<dd>If set to <tt class="docutils literal">no</tt>, instead of pausing when <tt class="docutils literal"><span class="pre">--keep-open</span></tt> is active, just
stop at end of file and continue playing forward when you seek backwards
until end where it stops again. Default: <tt class="docutils literal">yes</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--image-display-duration=&lt;seconds|inf&gt;</span></tt></dt>
<dd><p class="first">If the current file is an image, play the image for the given amount of
seconds (default: 1). <tt class="docutils literal">inf</tt> means the file is kept open forever (until
the user stops playback manually).</p>
<p>Unlike <tt class="docutils literal"><span class="pre">--keep-open</span></tt>, the player is not paused, but simply continues
playback until the time has elapsed. (It should not use any resources
during &quot;playback&quot;.)</p>
<p>This affects image files, which are defined as having only 1 video frame
and no audio. The player may recognize certain non-images as images, for
example if <tt class="docutils literal"><span class="pre">--length</span></tt> is used to reduce the length to 1 frame, or if
you seek to the last frame.</p>
<p>This option does not affect the framerate used for <tt class="docutils literal"><span class="pre">mf://</span></tt> or
<tt class="docutils literal"><span class="pre">--merge-files</span></tt>. For that, use <tt class="docutils literal"><span class="pre">--mf-fps</span></tt> instead.</p>
<p class="last">When viewing images, the playback time is not tracked on the command line
output, and the image frame is not duplicated when encoding. To force the
player into &quot;dumb mode&quot; and actually count out seconds, or to duplicate the
image when encoding, you need to use <tt class="docutils literal"><span class="pre">--demuxer=lavf</span>
<span class="pre">--demuxer-lavf-o=loop=1</span></tt>, and use <tt class="docutils literal"><span class="pre">--length</span></tt> or <tt class="docutils literal"><span class="pre">--frames</span></tt> to stop
after a particular time.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--force-window=&lt;yes|no|immediate&gt;</span></tt></dt>
<dd><p class="first">Create a video output window even if there is no video. This can be useful
when pretending that mpv is a GUI application. Currently, the window
always has the size 960x540, and is subject to <tt class="docutils literal"><span class="pre">--geometry</span></tt>,
<tt class="docutils literal"><span class="pre">--autofit</span></tt>, and similar options.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">The window is created only after initialization (to make sure default
window placement still works if the video size is different from the
<tt class="docutils literal"><span class="pre">--force-window</span></tt> default window size). This can be a problem if
initialization doesn't work perfectly, such as when opening URLs with
bad network connection, or opening broken video files. The <tt class="docutils literal">immediate</tt>
mode can be used to create the window always on program start, but this
may cause other issues.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--taskbar-progress=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Enable/disable playback progress rendering in taskbar (Windows 7 and above).</p>
<p class="last">Enabled by default.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--snap-window</span></tt></dt>
<dd>(Windows only) Snap the player window to screen edges.</dd>
<dt><tt class="docutils literal"><span class="pre">--drag-and-drop=&lt;no|auto|replace|append|insert-next&gt;</span></tt></dt>
<dd>Controls the default behavior of drag and drop on platforms that support
this. <tt class="docutils literal">auto</tt> will obey what the underlying os/platform gives mpv.
Typically, holding shift during the drag and drop will append the item to
the playlist. Otherwise, it will completely replace it. <tt class="docutils literal">replace</tt>,
<tt class="docutils literal">append</tt>, and <tt class="docutils literal"><span class="pre">insert-next</span></tt> always force replacing, appending to, and
inserting next into the playlist respectively. <tt class="docutils literal">no</tt> disables all drag and
drop behavior.</dd>
<dt><tt class="docutils literal"><span class="pre">--ontop</span></tt></dt>
<dd><p class="first">Makes the player window stay on top of other windows.</p>
<p class="last">On Windows, if combined with fullscreen mode, this causes mpv to be
treated as exclusive fullscreen window that bypasses the Desktop Window
Manager.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ontop-level=&lt;window|system|desktop|level&gt;</span></tt></dt>
<dd><p class="first">(macOS only)
Sets the level of an ontop window (default: window).</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">window:</th><td class="field-body">On top of all other windows.</td>
</tr>
<tr class="field"><th class="field-name">system:</th><td class="field-body">On top of system elements like Taskbar, Menubar and Dock.</td>
</tr>
<tr class="field"><th class="field-name">desktop:</th><td class="field-body">On top of the Desktop behind windows and Desktop icons.</td>
</tr>
<tr class="field"><th class="field-name">level:</th><td class="field-body">A level as integer.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--focus-on=&lt;never|open|all&gt;</span></tt>,</dt>
<dd><p class="first">(macOS only)
Focus the video window and make it the front most window on specific events (default: open).</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">never:</th><td class="field-body">Never focus the window on open or new file load events.</td>
</tr>
<tr class="field"><th class="field-name">open:</th><td class="field-body">Focus the window on creation, eg when a vo is initialised.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Focus the window on open and new file load event.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-corners=&lt;default|donotround|round|roundsmall&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Set the preference for window corner rounding.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">default:</th><td class="field-body">Let the system decide whether or not to round window corners</td>
</tr>
<tr class="field"><th class="field-name">donotround:</th><td class="field-body">Never round window corners</td>
</tr>
<tr class="field"><th class="field-name">round:</th><td class="field-body">Round the corners if appropriate</td>
</tr>
<tr class="field"><th class="field-name">roundsmall:</th><td class="field-body">Round the corners if appropriate, with a small radius</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--border=&lt;yes|no&gt;</span></tt></dt>
<dd>Play video with window border and decorations. Since this is on by
default, use <tt class="docutils literal"><span class="pre">--no-border</span></tt> to disable the standard window decorations.</dd>
<dt><tt class="docutils literal"><span class="pre">--title-bar=&lt;yes|no&gt;</span></tt></dt>
<dd>(Windows and X11 only)
Play video with the window title bar. Since this is on by default,
use <tt class="docutils literal"><span class="pre">--title-bar=no</span></tt> to hide the title bar. The <tt class="docutils literal"><span class="pre">--border</span></tt> option takes
precedence.</dd>
<dt><tt class="docutils literal"><span class="pre">--on-all-workspaces</span></tt></dt>
<dd>(X11 and macOS only)
Show the video window on all virtual desktops.</dd>
<dt><tt class="docutils literal"><span class="pre">--geometry=&lt;[W[xH]][+-x+-y][/WS]&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--geometry=&lt;x:y&gt;</span></tt></dt>
<dd><p class="first">Adjust the initial window position or size. <tt class="docutils literal">W</tt> and <tt class="docutils literal">H</tt> set the window
size in pixels. <tt class="docutils literal">x</tt> and <tt class="docutils literal">y</tt> set the window position, measured in pixels
from the top-left corner of the screen to the top-left corner of the image
being displayed. If a percentage sign (<tt class="docutils literal">%</tt>) is given after the argument,
it turns the value into a percentage of the screen size in that direction.
Positions are specified similar to the standard X11 <tt class="docutils literal"><span class="pre">--geometry</span></tt> option
format, in which e.g. +10-50 means &quot;place 10 pixels from the left border and
50 pixels from the lower border&quot; and &quot;--20+-10&quot; means &quot;place 20 pixels
beyond the right and 10 pixels beyond the top border&quot;. A trailing <tt class="docutils literal">/</tt>
followed by an integer denotes on which workspace (virtual desktop) the
window should appear (X11 only).</p>
<p>If an external window is specified using the <tt class="docutils literal"><span class="pre">--wid</span></tt> option, this
option is ignored.</p>
<p>The coordinates are relative to the screen given with <tt class="docutils literal"><span class="pre">--screen</span></tt> for the
video output drivers that fully support <tt class="docutils literal"><span class="pre">--screen</span></tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Generally only supported by GUI VOs. Ignored for encoding.</p>
</div>
<div class="admonition admonition-note-macos">
<p class="first admonition-title">Note (macOS)</p>
<p class="last">On macOS, the origin of the screen coordinate system is located on the
bottom-left corner. For instance, <tt class="docutils literal">0:0</tt> will place the window at the
bottom-left of the screen.</p>
</div>
<div class="admonition admonition-note-x11">
<p class="first admonition-title">Note (X11)</p>
<p class="last">This option does not work properly with all window managers.</p>
</div>
<div class="admonition admonition-note-wayland">
<p class="first admonition-title">Note (Wayland)</p>
<p class="last">Wayland does not allow a client to position itself so this option will
only affect the window size.</p>
</div>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal">50:40</tt></dt>
<dd>Places the window at x=50, y=40.</dd>
<dt><tt class="docutils literal"><span class="pre">50%:50%</span></tt></dt>
<dd>Places the window in the middle of the screen.</dd>
<dt><tt class="docutils literal"><span class="pre">100%:100%</span></tt></dt>
<dd>Places the window at the bottom right corner of the screen.</dd>
<dt><tt class="docutils literal">50%</tt></dt>
<dd>Sets the window width to half the screen width. Window height is set
so that the window has the video aspect ratio.</dd>
<dt><tt class="docutils literal">50%x50%</tt></dt>
<dd>Forces the window width and height to half the screen width and
height. Will show black borders to compensate for the video aspect
ratio (with most VOs and with <tt class="docutils literal"><span class="pre">--keepaspect=yes</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">50%+10+10/2</span></tt></dt>
<dd>Sets the window to half the screen widths, and positions it 10
pixels below/left of the top left corner of the screen, on the
second workspace.</dd>
</dl>
</div>
<p class="last">See also <tt class="docutils literal"><span class="pre">--autofit</span></tt> and <tt class="docutils literal"><span class="pre">--autofit-larger</span></tt> for fitting the window into
a given size without changing aspect ratio.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--autofit=&lt;[W[xH]]&gt;</span></tt></dt>
<dd><p class="first">Set the initial window size to a maximum size specified by <tt class="docutils literal">WxH</tt>, without
changing the window's aspect ratio. The size is measured in pixels, or if
a number is followed by a percentage sign (<tt class="docutils literal">%</tt>), in percents of the
screen size.</p>
<p>This option never changes the aspect ratio of the window. If the aspect
ratio mismatches, the window's size is reduced until it fits into the
specified size.</p>
<p>Window position is not taken into account, nor is it modified by this
option (the window manager still may place the window differently depending
on size). Use <tt class="docutils literal"><span class="pre">--geometry</span></tt> to change the window position. Its effects
are applied after this option.</p>
<p>See <tt class="docutils literal"><span class="pre">--geometry</span></tt> for details how this is handled with multi-monitor
setups.</p>
<p>Use <tt class="docutils literal"><span class="pre">--autofit-larger</span></tt> instead if you just want to limit the maximum size
of the window, rather than always forcing a window size.</p>
<p>Use <tt class="docutils literal"><span class="pre">--geometry</span></tt> if you want to force both window width and height to a
specific size.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Generally only supported by GUI VOs. Ignored for encoding.</p>
</div>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal">70%</tt></dt>
<dd>Make the window width 70% of the screen size, keeping aspect ratio.</dd>
<dt><tt class="docutils literal">1000</tt></dt>
<dd>Set the window width to 1000 pixels, keeping aspect ratio.</dd>
<dt><tt class="docutils literal">70%x60%</tt></dt>
<dd>Make the window as large as possible, without being wider than 70%
of the screen width, or higher than 60% of the screen height.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--autofit-larger=&lt;[W[xH]]&gt;</span></tt></dt>
<dd><p class="first">This option behaves exactly like <tt class="docutils literal"><span class="pre">--autofit</span></tt>, except that it sets the
maximum size of the window.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt><tt class="docutils literal">90%x80%</tt></dt>
<dd>If the video is larger than 90% of the screen width or 80% of the
screen height, make the window smaller until either its width is 90%
of the screen, or its height is 80% of the screen.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--autofit-smaller=&lt;[W[xH]]&gt;</span></tt></dt>
<dd><p class="first">This option behaves exactly like <tt class="docutils literal"><span class="pre">--autofit</span></tt>, except that it sets the
minimum size of the window (just as <tt class="docutils literal"><span class="pre">--autofit-larger</span></tt> sets the maximum).</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt><tt class="docutils literal">500x500</tt></dt>
<dd>Make the window at least 500 pixels wide and 500 pixels high
(depending on the video aspect ratio, the width or height will be
larger than 500 in order to keep the aspect ratio the same).</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-scale=&lt;factor&gt;</span></tt></dt>
<dd><p class="first">Resize the video window to a multiple (or fraction) of the video size. This
option is applied before <tt class="docutils literal"><span class="pre">--autofit</span></tt> and other options are applied (so
they override this option). Changing this option while the window is
maximized can unmaximize the window depending on the OS and window manager.
If the window does not unmaximize, the multiplier will be applied if the user
unmaximizes the window later.</p>
<p class="last">For example, <tt class="docutils literal"><span class="pre">--window-scale=0.5</span></tt> would show the window at half the
video size.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-minimized=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Whether the video window is minimized or not. Setting this will minimize,
or unminimize, the video window if the current VO supports it. Note that
some VOs may support minimization while not supporting unminimization
(eg: Wayland).</p>
<p class="last">Whether this option and <tt class="docutils literal"><span class="pre">--window-maximized</span></tt> work on program start or
at runtime, and whether they're (at runtime) updated to reflect the actual
window state, heavily depends on the VO and the windowing system. Some VOs
simply do not implement them or parts of them, while other VOs may be
restricted by the windowing systems (especially Wayland).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-maximized=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether the video window is maximized or not. Setting this will maximize,
or unmaximize, the video window if the current VO supports it. See
<tt class="docutils literal"><span class="pre">--window-minimized</span></tt> for further remarks.</dd>
<dt><tt class="docutils literal"><span class="pre">--cursor-autohide=&lt;number|no|always&gt;</span></tt></dt>
<dd>Make mouse cursor automatically hide after given number of milliseconds
(default: 1000 ms). <tt class="docutils literal">no</tt> will disable cursor autohide. <tt class="docutils literal">always</tt>
means the cursor will stay hidden.</dd>
<dt><tt class="docutils literal"><span class="pre">--cursor-autohide-fs-only</span></tt></dt>
<dd>If this option is given, the cursor is always visible in windowed mode. In
fullscreen mode, the cursor is shown or hidden according to
<tt class="docutils literal"><span class="pre">--cursor-autohide</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--force-rgba-osd-rendering</span></tt></dt>
<dd>Change how some video outputs render the OSD and text subtitles. This
does not change appearance of the subtitles and only has performance
implications. For VOs which support native ASS rendering (like <tt class="docutils literal">gpu</tt>,
<tt class="docutils literal">vdpau</tt>, <tt class="docutils literal">direct3d</tt>), this can be slightly faster or slower,
depending on GPU drivers and hardware. For other VOs, this just makes
rendering slower.</dd>
<dt><tt class="docutils literal"><span class="pre">--force-render</span></tt></dt>
<dd>Forces mpv to always render frames regardless of the visibility of the
window. Currently only affects X11 and Wayland VOs since they are the
only ones that have this optimization (i.e. everything else always renders
regardless of visibility).</dd>
<dt><tt class="docutils literal"><span class="pre">--force-window-position</span></tt></dt>
<dd>Forcefully move mpv's video output window to default location whenever
there is a change in video parameters, video stream or file. This used to
be the default behavior. Currently only affects X11 and SDL VOs.</dd>
<dt><tt class="docutils literal"><span class="pre">--auto-window-resize=&lt;yes|no&gt;</span></tt></dt>
<dd>By default, mpv will automatically resize itself if the video's size changes
(i.e. advancing forward in a playlist). Setting this to <tt class="docutils literal">no</tt> disables this
behavior so the window size never changes automatically. This option does
not have any impact on the <tt class="docutils literal"><span class="pre">--autofit</span></tt> or <tt class="docutils literal"><span class="pre">--geometry</span></tt> options.</dd>
<dt><tt class="docutils literal"><span class="pre">--keepaspect=&lt;yes|no&gt;</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">--keepaspect=no</span></tt> will always stretch the video to window size, and will
disable the window manager hints that force the window aspect ratio.
(Ignored in fullscreen mode.)</dd>
<dt><tt class="docutils literal"><span class="pre">--keepaspect-window=&lt;yes|no&gt;</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">--keepaspect-window=yes</span></tt> (the default) will lock the window size to the
video aspect. <tt class="docutils literal"><span class="pre">--keepaspect-window=no</span></tt> disables this behavior, and will
instead add black bars if window aspect and video aspect mismatch. Whether
this actually works depends on the VO backend.
(Ignored in fullscreen mode.)</dd>
<dt><tt class="docutils literal"><span class="pre">--monitoraspect=&lt;ratio&gt;</span></tt></dt>
<dd><p class="first">Set the aspect ratio of your monitor or TV screen. A value of 0 disables a
previous setting (e.g. in the config file). Overrides the
<tt class="docutils literal"><span class="pre">--monitorpixelaspect</span></tt> setting if enabled.</p>
<p>See also <tt class="docutils literal"><span class="pre">--monitorpixelaspect</span></tt> and <tt class="docutils literal"><span class="pre">--video-aspect-override</span></tt>.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--monitoraspect=4:3</span></tt>  or <tt class="docutils literal"><span class="pre">--monitoraspect=1.3333</span></tt></li>
<li><tt class="docutils literal"><span class="pre">--monitoraspect=16:9</span></tt> or <tt class="docutils literal"><span class="pre">--monitoraspect=1.7777</span></tt></li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hidpi-window-scale=&lt;yes|no&gt;</span></tt></dt>
<dd>Scale the window size according to the backing DPI scale factor from the OS
(default: no). For example, if the OS DPI scaling is set to 200%, mpv's window
size will be multiplied by 2.</dd>
<dt><tt class="docutils literal"><span class="pre">--native-fs=&lt;yes|no&gt;</span></tt></dt>
<dd>(macOS only)
Uses the native fullscreen mechanism of the OS (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--show-in-taskbar=&lt;yes|no&gt;</span></tt></dt>
<dd>(Windows and X11 only)
Show mpv in the taskbar (default: yes). If set to no, mpv will no longer
appear in taskbars and tasklists in supported window managers, and may be
excluded from Alt+Tab window switching.</dd>
<dt><tt class="docutils literal"><span class="pre">--monitorpixelaspect=&lt;ratio&gt;</span></tt></dt>
<dd>Set the aspect of a single pixel of your monitor or TV screen (default:
1). A value of 1 means square pixels (correct for (almost?) all LCDs). See
also <tt class="docutils literal"><span class="pre">--monitoraspect</span></tt> and <tt class="docutils literal"><span class="pre">--video-aspect-override</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--stop-screensaver=&lt;yes|no|always&gt;</span></tt></dt>
<dd><p class="first">Turns off the screensaver (or screen blanker and similar mechanisms) at
startup and turns it on again on exit (default: yes). When using <tt class="docutils literal">yes</tt>,
the screensaver will re-enable when playback is not active. <tt class="docutils literal">always</tt> will
always disable the screensaver. Note that stopping the screensaver is only
possible if a video output is available (i.e. there is an open mpv window).
This is not supported on all video outputs, platforms, or desktop environments.</p>
<p class="last">Before mpv 0.33.0, the X11 backend ran <tt class="docutils literal"><span class="pre">xdg-screensaver</span> reset</tt> in 10 second
intervals when not paused in order to support screensaver inhibition in some
environments. This functionality was removed in 0.33.0, but it is possible to
call the <tt class="docutils literal"><span class="pre">xdg-screensaver</span></tt> command line program from a user script instead.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--wid=&lt;ID&gt;</span></tt></dt>
<dd><p class="first">This tells mpv to attach to an existing window. If a VO is selected that
supports this option, it will use that window for video output. mpv will
scale the video to the size of this window, and will add black bars to
compensate if the aspect ratio of the video is different.</p>
<p>On X11, the ID is interpreted as a <tt class="docutils literal">Window</tt> on X11. Unlike
MPlayer/mplayer2, mpv always creates its own window, and sets the wid
window as parent. The window will always be resized to cover the parent
window fully. The value <tt class="docutils literal">0</tt> is interpreted specially, and mpv will
draw directly on the root window.</p>
<p>On win32, the ID is interpreted as <tt class="docutils literal">HWND</tt>. Pass it as value cast to
<tt class="docutils literal">uint32_t</tt> (all Windows handles are 32-bit), this is important as mpv will
not accept negative values. mpv will create its own window and set the
wid window as parent, like with X11.</p>
<p>On macOS/Cocoa, the ID is interpreted as <tt class="docutils literal">NSView*</tt>. Pass it as value cast
to <tt class="docutils literal">intptr_t</tt>. mpv will create its own sub-view. Because macOS does not
support window embedding of foreign processes, this works only with libmpv,
and will crash when used from the command line.</p>
<p class="last">On Android, the ID is interpreted as <tt class="docutils literal">android.view.Surface</tt>. Pass it as a
value cast to <tt class="docutils literal">intptr_t</tt>. Use with <tt class="docutils literal"><span class="pre">--vo=mediacodec_embed</span></tt> and
<tt class="docutils literal"><span class="pre">--hwdec=mediacodec</span></tt> for direct rendering using MediaCodec, or with
<tt class="docutils literal"><span class="pre">--vo=gpu</span> <span class="pre">--gpu-context=android</span></tt> (with or without <tt class="docutils literal"><span class="pre">--hwdec=mediacodec</span></tt>).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-dragging=&lt;yes|no&gt;</span></tt></dt>
<dd>Move the window when clicking on it and moving the mouse pointer (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--x11-name=&lt;string&gt;</span></tt></dt>
<dd>Set the window instance name for X11-based video output methods.</dd>
<dt><tt class="docutils literal"><span class="pre">--x11-netwm=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">(X11 only)
Control the use of NetWM protocol features.</p>
<p>This may or may not help with broken window managers. This provides some
functionality that was implemented by the now removed <tt class="docutils literal"><span class="pre">--fstype</span></tt> option.
Actually, it is not known to the developers to which degree this option
was needed, so feedback is welcome.</p>
<p>Specifically, <tt class="docutils literal">yes</tt> will force use of NetWM fullscreen support, even if
not advertised by the WM. This can be useful for WMs that are broken on
purpose, like XMonad. (XMonad supposedly doesn't advertise fullscreen
support, because Flash uses it. Apparently, applications which want to
use fullscreen anyway are supposed to either ignore the NetWM support hints,
or provide a workaround. Shame on XMonad for deliberately breaking X
protocols (as if X isn't bad enough already).</p>
<p>By default, NetWM support is autodetected (<tt class="docutils literal">auto</tt>).</p>
<p class="last">This option might be removed in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--x11-bypass-compositor=&lt;yes|no|fs-only|never&gt;</span></tt></dt>
<dd><p class="first">If set to <tt class="docutils literal">yes</tt>, then ask the compositor to unredirect the mpv window
(default: <tt class="docutils literal"><span class="pre">fs-only</span></tt>). This uses the <tt class="docutils literal">_NET_WM_BYPASS_COMPOSITOR</tt> hint.</p>
<p><tt class="docutils literal"><span class="pre">fs-only</span></tt> asks the window manager to disable the compositor only in
fullscreen mode.</p>
<p><tt class="docutils literal">no</tt> sets <tt class="docutils literal">_NET_WM_BYPASS_COMPOSITOR</tt> to 0, which is the default value
as declared by the EWMH specification, i.e. no change is done.</p>
<p class="last"><tt class="docutils literal">never</tt> asks the window manager to never disable the compositor.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--x11-present=&lt;no|auto|yes&gt;</span></tt></dt>
<dd><p class="first">Whether or not to use presentation statistics from X11's presentation
extension (default: <tt class="docutils literal">auto</tt>).</p>
<p>mpv asks X11 for present events which it then may use for more accurate
frame presentation. This only has an effect if <tt class="docutils literal"><span class="pre">--video-sync=display-...</span></tt>
is being used.</p>
<p>The auto option enumerates XRandr providers for autodetection. If amd, radeon,
intel, or nouveau (the standard x86 Mesa drivers) is found and nvidia is NOT
found, presentation feedback is enabled. Other drivers are not assumed to
work, so they are not enabled automatically.</p>
<p class="last"><tt class="docutils literal">yes</tt> or <tt class="docutils literal">no</tt> can still be passed regardless to enable/disable this
mechanism in case there is good/bad behavior with whatever your combination
of hardware/drivers/etc. happens to be.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--x11-wid-title=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether or not to set the window title when mpv is embedded on X11 (default:
<tt class="docutils literal">no</tt>).</dd>
</dl>
</div>
<div class="section" id="disc-devices">
<h2>Disc Devices</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--cdda-device=&lt;path&gt;</span></tt></dt>
<dd>Specify the CD device for CDDA playback (default: <tt class="docutils literal">/dev/cdrom</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--dvd-device=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Specify the DVD device or .iso filename (default: <tt class="docutils literal">/dev/dvd</tt>). You can
also specify a directory that contains files previously copied directly
from a DVD (with e.g. vobcopy).</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal">mpv <span class="pre">dvd://</span> <span class="pre">--dvd-device=/path/to/dvd/</span></tt></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--bluray-device=&lt;path&gt;</span></tt></dt>
<dd><p class="first">(Blu-ray only)
Specify the Blu-ray disc location. Must be a directory with Blu-ray
structure.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal">mpv <span class="pre">bd://</span> <span class="pre">--bluray-device=/path/to/bd/</span></tt></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-...</span></tt></dt>
<dd>These options can be used to tune the CD Audio reading feature of mpv.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-speed=&lt;value&gt;</span></tt></dt>
<dd>Set CD spin speed.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-paranoia=&lt;0-2&gt;</span></tt></dt>
<dd><p class="first">Set paranoia level. Values other than 0 seem to break playback of
anything but the first track.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">0:</th><td class="field-body">disable checking (default)</td>
</tr>
<tr class="field"><th class="field-name">1:</th><td class="field-body">overlap checking only</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">full data correction and verification</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-sector-size=&lt;value&gt;</span></tt></dt>
<dd>Set atomic read size.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-overlap=&lt;value&gt;</span></tt></dt>
<dd>Force minimum overlap search during verification to &lt;value&gt; sectors.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-toc-offset=&lt;value&gt;</span></tt></dt>
<dd>Add <tt class="docutils literal">&lt;value&gt;</tt> sectors to the values reported when addressing tracks.
May be negative.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-skip=&lt;yes|no&gt;</span></tt></dt>
<dd>(Never) accept imperfect data reconstruction.</dd>
<dt><tt class="docutils literal"><span class="pre">--cdda-cdtext=&lt;yes|no&gt;</span></tt></dt>
<dd>Print CD text. This is disabled by default, because it ruins performance
with CD-ROM drives for unknown reasons.</dd>
<dt><tt class="docutils literal"><span class="pre">--dvd-speed=&lt;speed&gt;</span></tt></dt>
<dd><p class="first">Try to limit DVD speed (default: 0, no change). DVD base speed is 1385
kB/s, so an 8x drive can read at speeds up to 11080 kB/s. Slower speeds
make the drive more quiet. For watching DVDs, 2700 kB/s should be quiet and
fast enough. mpv resets the speed to the drive default value on close.
Values of at least 100 mean speed in kB/s. Values less than 100 mean
multiples of 1385 kB/s, i.e. <tt class="docutils literal"><span class="pre">--dvd-speed=8</span></tt> selects 11080 kB/s.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">You need write access to the DVD device to change the speed.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dvd-angle=&lt;ID&gt;</span></tt></dt>
<dd>Some DVDs contain scenes that can be viewed from multiple angles.
This option tells mpv which angle to use (default: 1).</dd>
</dl>
</div>
<div class="section" id="equalizer">
<h2>Equalizer</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--brightness=&lt;-100-100&gt;</span></tt></dt>
<dd>Adjust the brightness of the video signal (default: 0). Not supported by
all video output drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--contrast=&lt;-100-100&gt;</span></tt></dt>
<dd>Adjust the contrast of the video signal (default: 0). Not supported by all
video output drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--saturation=&lt;-100-100&gt;</span></tt></dt>
<dd>Adjust the saturation of the video signal (default: 0). You can get
grayscale output with this option. Not supported by all video output
drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--gamma=&lt;-100-100&gt;</span></tt></dt>
<dd>Adjust the gamma of the video signal (default: 0). Not supported by all
video output drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--hue=&lt;-100-100&gt;</span></tt></dt>
<dd>Adjust the hue of the video signal (default: 0). You can get a colored
negative of the image with this option. Not supported by all video output
drivers.</dd>
</dl>
</div>
<div class="section" id="demuxer">
<h2>Demuxer</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--demuxer=&lt;[+]name&gt;</span></tt></dt>
<dd>Force demuxer type. Use a '+' before the name to force it; this will skip
some checks. Give the demuxer name as printed by <tt class="docutils literal"><span class="pre">--demuxer=help</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-analyzeduration=&lt;value&gt;</span></tt></dt>
<dd>Maximum length in seconds to analyze the stream properties.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-probe-info=&lt;yes|no|auto|nostreams&gt;</span></tt></dt>
<dd><p class="first">Whether to probe stream information (default: auto). Technically, this
controls whether libavformat's <tt class="docutils literal">avformat_find_stream_info()</tt> function
is called. Usually it's safer to call it, but it can also make startup
slower.</p>
<p>The <tt class="docutils literal">auto</tt> choice (the default) tries to skip this for a few know-safe
whitelisted formats, while calling it for everything else.</p>
<p class="last">The <tt class="docutils literal">nostreams</tt> choice only calls it if and only if the file seems to
contain no streams after opening (helpful in cases when calling the function
is needed to detect streams at all, such as with FLV files).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-probescore=&lt;1-100&gt;</span></tt></dt>
<dd>Minimum required libavformat probe score. Lower values will require
less data to be loaded (makes streams start faster), but makes file
format detection less reliable. Can be used to force auto-detected
libavformat demuxers, even if libavformat considers the detection not
reliable enough. (Default: 26.)</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-allow-mimetype=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Allow deriving the format from the HTTP MIME type (default: yes). Set
this to no in case playing things from HTTP mysteriously fails, even
though the same files work from local disk.</p>
<p class="last">This is default in order to reduce latency when opening HTTP streams.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-format=&lt;name&gt;</span></tt></dt>
<dd>Force a specific libavformat demuxer.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-hacks=&lt;yes|no&gt;</span></tt></dt>
<dd>By default, some formats will be handled differently from other formats
by explicitly checking for them. Most of these compensate for weird or
imperfect behavior from libavformat demuxers. Passing <tt class="docutils literal">no</tt> disables
these. For debugging and testing only.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-o=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Pass AVOptions to libavformat demuxer.</p>
<p>Note, a patch to make the <em>o=</em> unneeded and pass all unknown options
through the AVOption system is welcome. A full list of AVOptions can
be found in the FFmpeg manual. Note that some options may conflict
with mpv options.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal"><span class="pre">--demuxer-lavf-o=fflags=+ignidx</span></tt></p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-probesize=&lt;value&gt;</span></tt></dt>
<dd>Maximum amount of data to probe during the detection phase. In the
case of MPEG-TS this value identifies the maximum number of TS packets
to scan.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-buffersize=&lt;value&gt;</span></tt></dt>
<dd>Size of the stream read buffer allocated for libavformat in bytes
(default: 32768). Lowering the size could lower latency. Note that
libavformat might reallocate the buffer internally, or not fully use all
of it.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-linearize-timestamps=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Attempt to linearize timestamp resets in demuxed streams (default: auto).
This was tested only for single audio streams. It's unknown whether it
works correctly for video (but likely won't). Note that the implementation
is slightly incorrect either way, and will introduce a discontinuity by
about 1 codec frame size.</p>
<p class="last">The <tt class="docutils literal">auto</tt> mode enables this for OGG audio stream. This covers the common
and annoying case of OGG web radio streams. Some of these will reset
timestamps to 0 every time a new song begins. This breaks the mpv seekable
cache, which can't deal with timestamp resets. Note that FFmpeg/libavformat's
seeking API can't deal with this either; it's likely that if this option
breaks this even more, while if it's disabled, you can at least seek within
the first song in the stream. Well, you won't get anything useful either
way if the seek is outside of mpv's cache.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-lavf-propagate-opts=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Propagate FFmpeg-level options to recursively opened connections (default:
yes). This is needed because FFmpeg will apply these settings to nested
AVIO contexts automatically. On the other hand, this could break in certain
situations - it's the FFmpeg API, you just can't win.</p>
<p>This affects in particular the <tt class="docutils literal"><span class="pre">--timeout</span></tt> option and anything passed
with <tt class="docutils literal"><span class="pre">--demuxer-lavf-o</span></tt>.</p>
<p class="last">If this option is deemed unnecessary at some point in the future, it will
be removed without notice.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll=&lt;yes|index|no&gt;</span></tt></dt>
<dd><p class="first">Try harder to show embedded soft subtitles when seeking somewhere. Normally,
it can happen that the subtitle at the seek target is not shown due to how
some container file formats are designed. The subtitles appear only if
seeking before or exactly to the position a subtitle first appears. To
make this worse, subtitles are often timed to appear a very small amount
before the associated video frame, so that seeking to the video frame
typically does not demux the subtitle at that position.</p>
<p>Enabling this option makes the demuxer start reading data a bit before the
seek target, so that subtitles appear correctly. Note that this makes
seeking slower, and is not guaranteed to always work. It only works if the
subtitle is close enough to the seek target.</p>
<p>Works with the internal Matroska demuxer only. Always enabled for absolute
and hr-seeks, and this option changes behavior with relative or imprecise
seeks only.</p>
<p>You can use the <tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll-secs</span></tt> option to specify
how much data the demuxer should pre-read at most in order to find subtitle
packets that may overlap. Setting this to 0 will effectively disable this
preroll mechanism. Setting a very large value can make seeking very slow,
and an extremely large value would completely reread the entire file from
start to seek target on every seek - seeking can become slower towards the
end of the file. The details are messy, and the value is actually rounded
down to the cluster with the previous video keyframe.</p>
<p>Some files, especially files muxed with newer mkvmerge versions, have
information embedded that can be used to determine what subtitle packets
overlap with a seek target. In these cases, mpv will reduce the amount
of data read to a minimum. (Although it will still read <em>all</em> data between
the cluster that contains the first wanted subtitle packet, and the seek
target.) If the <tt class="docutils literal">index</tt> choice (which is the default) is specified, then
prerolling will be done only if this information is actually available. If
this method is used, the maximum amount of data to skip can be additionally
controlled by <tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll-secs-index</span></tt> (it still uses
the value of the option without <tt class="docutils literal"><span class="pre">-index</span></tt> if that is higher).</p>
<p class="last">See also <tt class="docutils literal"><span class="pre">--hr-seek-demuxer-offset</span></tt> option. This option can achieve a
similar effect, but only if hr-seek is active. It works with any demuxer,
but makes seeking much slower, as it has to decode audio and video data
instead of just skipping over it.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll-secs=&lt;value&gt;</span></tt></dt>
<dd>See <tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll-secs-index=&lt;value&gt;</span></tt></dt>
<dd>See <tt class="docutils literal"><span class="pre">--demuxer-mkv-subtitle-preroll</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-mkv-probe-start-time=&lt;yes|no&gt;</span></tt></dt>
<dd>Check the start time of Matroska files (default: yes). This simply reads the
first cluster timestamps and assumes it is the start time. Technically, this
also reads the first timestamp, which may increase latency by one frame
(which may be relevant for live streams).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-mkv-probe-video-duration=&lt;yes|no|full&gt;</span></tt></dt>
<dd><p class="first">When opening the file, seek to the end of it, and check what timestamp the
last video packet has, and report that as file duration. This is strictly
for compatibility with Haali only. In this mode, it's possible that opening
will be slower (especially when playing over http), or that behavior with
broken files is much worse. So don't use this option.</p>
<p class="last">The <tt class="docutils literal">yes</tt> mode merely uses the index and reads a small number of blocks
from the end of the file. The <tt class="docutils literal">full</tt> mode actually traverses the entire
file and can make a reliable estimate even without an index present (such
as partial files).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawaudio-channels=&lt;value&gt;</span></tt></dt>
<dd>Number of channels (or channel layout) if <tt class="docutils literal"><span class="pre">--demuxer=rawaudio</span></tt> is used
(default: stereo).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawaudio-format=&lt;value&gt;</span></tt></dt>
<dd>Sample format for <tt class="docutils literal"><span class="pre">--demuxer=rawaudio</span></tt> (default: s16le).
Use <tt class="docutils literal"><span class="pre">--demuxer-rawaudio-format=help</span></tt> to get a list of all formats.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawaudio-rate=&lt;value&gt;</span></tt></dt>
<dd>Sample rate for <tt class="docutils literal"><span class="pre">--demuxer=rawaudio</span></tt> (default: 44 kHz).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-fps=&lt;value&gt;</span></tt></dt>
<dd>Rate in frames per second for <tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt> (default: 25.0).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-w=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--demuxer-rawvideo-h=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Image dimension in pixels for <tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt>.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p>Play a raw YUV sample:</p>
<pre class="last literal-block">
mpv sample-720x576.yuv --demuxer=rawvideo \
--demuxer-rawvideo-w=720 --demuxer-rawvideo-h=576
</pre>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-format=&lt;value&gt;</span></tt></dt>
<dd>Color space (fourcc) in hex or string for <tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt>
(default: <tt class="docutils literal">YV12</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-mp-format=&lt;value&gt;</span></tt></dt>
<dd>Color space by internal video format for <tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt>. Use
<tt class="docutils literal"><span class="pre">--demuxer-rawvideo-mp-format=help</span></tt> for a list of possible formats.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-codec=&lt;value&gt;</span></tt></dt>
<dd>Set the video codec instead of selecting the rawvideo codec when using
<tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt>. This uses the same values as codec names in
<tt class="docutils literal"><span class="pre">--vd</span></tt> (but it does not accept decoder names).</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-rawvideo-size=&lt;value&gt;</span></tt></dt>
<dd>Frame size in bytes when using <tt class="docutils literal"><span class="pre">--demuxer=rawvideo</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-max-bytes=&lt;bytesize&gt;</span></tt></dt>
<dd><p class="first">This controls how much the demuxer is allowed to buffer ahead. The demuxer
will normally try to read ahead as much as necessary, or as much is
requested with <tt class="docutils literal"><span class="pre">--demuxer-readahead-secs</span></tt>. The option can be used to
restrict the maximum readahead. This limits excessive readahead in case of
broken files or desynced playback. The demuxer will stop reading additional
packets as soon as one of the limits is reached. (The limits still can be
slightly overstepped due to technical reasons.)</p>
<p>Set these limits higher if you get a packet queue overflow warning, and
you think normal playback would be possible with a larger packet queue.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range. <tt class="docutils literal">&lt;bytesize&gt;</tt> options
accept suffixes such as <tt class="docutils literal">KiB</tt> and <tt class="docutils literal">MiB</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-max-back-bytes=&lt;bytesize&gt;</span></tt></dt>
<dd><p class="first">This controls how much past data the demuxer is allowed to preserve. This
is useful only if the cache is enabled.</p>
<p>Unlike the forward cache, there is no control how many seconds are actually
cached - it will simply use as much memory this option allows. Setting this
option to 0 will strictly disable any back buffer, but this will lead to
the situation that the forward seek range starts after the current playback
position (as it removes past packets that are seek points).</p>
<p>If the end of the file is reached, the remaining unused forward buffer space
is &quot;donated&quot; to the backbuffer (unless the backbuffer size is set to 0, or
<tt class="docutils literal"><span class="pre">--demuxer-donate-buffer</span></tt> is set to <tt class="docutils literal">no</tt>).
This still limits the total cache usage to the sum of the forward and
backward cache, and effectively makes better use of the total allowed memory
budget. (The opposite does not happen: free backward buffer is never
&quot;donated&quot; to the forward buffer.)</p>
<p>Keep in mind that other buffers in the player (like decoders) will cause the
demuxer to cache &quot;future&quot; frames in the back buffer, which can skew the
impression about how much data the backbuffer contains.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-donate-buffer=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Whether to let the back buffer use part of the forward buffer (default: yes).
If set to <tt class="docutils literal">yes</tt>, the &quot;donation&quot; behavior described in the option
description for <tt class="docutils literal"><span class="pre">--demuxer-max-back-bytes</span></tt> is enabled. This means the
back buffer may use up memory up to the sum of the forward and back buffer
options, minus the active size of the forward buffer. If set to <tt class="docutils literal">no</tt>, the
options strictly limit the forward and back buffer sizes separately.</p>
<p class="last">Note that if the end of the file is reached, the buffered data stays the
same, even if you seek back within the cache. This is because the back
buffer is only reduced when new data is read.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-seekable-cache=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Debugging option to control whether seeking can use the demuxer cache
(default: auto). Normally you don't ever need to set this; the default
<tt class="docutils literal">auto</tt> does the right thing and enables cache seeking it if <tt class="docutils literal"><span class="pre">--cache</span></tt>
is set to <tt class="docutils literal">yes</tt> (or is implied <tt class="docutils literal">yes</tt> if <tt class="docutils literal"><span class="pre">--cache=auto</span></tt>).</p>
<p>If enabled, short seek offsets will not trigger a low level demuxer seek
(which means for example that slow network round trips or FFmpeg seek bugs
can be avoided). If a seek cannot happen within the cached range, a low
level seek will be triggered. Seeking outside of the cache will start a new
cached range, but can discard the old cache range if the demuxer exhibits
certain unsupported behavior.</p>
<p class="last">The special value <tt class="docutils literal">auto</tt> means <tt class="docutils literal">yes</tt> in the same situation as
<tt class="docutils literal"><span class="pre">--cache-secs</span></tt> is used (i.e. when the stream appears to be a network
stream or the stream cache is enabled).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-thread=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Run the demuxer in a separate thread, and let it prefetch a certain amount
of packets (default: yes). Having this enabled leads to smoother playback,
enables features like prefetching, and prevents that stuck network freezes
the player. On the other hand, it can add overhead, or the background
prefetching can hog CPU resources.</p>
<p class="last">Disabling this option is not recommended. Use it for debugging only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-termination-timeout=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Number of seconds the player should wait to shutdown the demuxer (default:
0.1). The player will wait up to this much time before it closes the
stream layer forcefully. Forceful closing usually means the network I/O is
given no chance to close its connections gracefully (of course the OS can
still close TCP connections properly), and might result in annoying messages
being logged, and in some cases, confused remote servers.</p>
<p class="last">This timeout is usually only applied when loading has finished properly. If
loading is aborted by the user, or in some corner cases like removing
external tracks sourced from network during playback, forceful closing is
always used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-readahead-secs=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">If <tt class="docutils literal"><span class="pre">--demuxer-thread</span></tt> is enabled, this controls how much the demuxer
should buffer ahead in seconds (default: 1). As long as no packet has
a timestamp difference higher than the readahead amount relative to the
last packet returned to the decoder, the demuxer keeps reading.</p>
<p>Note that enabling the cache (such as <tt class="docutils literal"><span class="pre">--cache=yes</span></tt>, or if the input
is considered a network stream, and <tt class="docutils literal"><span class="pre">--cache=auto</span></tt> is used), this option
is mostly ignored. (<tt class="docutils literal"><span class="pre">--cache-secs</span></tt> will override this. Technically, the
maximum of both options is used.)</p>
<p>The main purpose of this option is to limit the readhead for local playback,
since a large readahead value is not overly useful in this case.</p>
<p class="last">(This value tends to be fuzzy, because many file formats don't store linear
timestamps.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-hysteresis-secs=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Once the demuxer limit is reached (<tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt>,
<tt class="docutils literal"><span class="pre">--demuxer-readahead-secs</span></tt> or <tt class="docutils literal"><span class="pre">--cache-secs</span></tt>), this value can be used
to specify a hysteresis before the demuxer will buffer ahead again. This
specifies the maximum number of seconds from the current playback position
that needs to be remaining in the cache before the demuxer will continue
buffering ahead.</p>
<p>For example, with a value of 10 seconds specified, the demuxer will buffer
ahead up to the demuxer limit and won't start buffering ahead again until
there is only 10 seconds of content left in the cache.</p>
<p>This can provide significant power savings and reduce load by making the
demuxer only buffer ahead in chunks at a time rather than buffering ahead
nonstop to keep the cache filled.</p>
<p>If you want to save power and reduce load, configure this to a small number
that's much lower than <tt class="docutils literal"><span class="pre">--cache-secs</span></tt> or <tt class="docutils literal"><span class="pre">--demuxer-readahead-secs</span></tt>.
If it takes a long time to buffer anything at all for a given stream (like
when reading from a very slow disk is involved), then the hysteresis value
should be larger to compensate.</p>
<p class="last">The default value is 0 seconds, which disables the caching hysteresis. A
value of 10 seconds probably works well for most usecases.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--prefetch-playlist=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Prefetch next playlist entry while playback of the current entry is ending
(default: no).</p>
<p>This does not prefill the cache with the video data of the next URL.
Prefetching video data is supported only for the current playlist entry,
and depends on the demuxer cache settings (on by default). This merely
opens the URL of the next playlist entry as soon the current URL is fully
read.</p>
<p>This does <strong>not</strong> work with URLs resolved by the <tt class="docutils literal"><span class="pre">youtube-dl</span></tt> wrapper,
and it won't.</p>
<p>This can give subtly wrong results if per-file options are used, or if
options are changed in the time window between prefetching start and next
file played.</p>
<p>This can occasionally make wrong prefetching decisions. For example, it
can't predict whether you go backwards in the playlist, and assumes you
won't edit the playlist.</p>
<p class="last">Highly experimental.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--force-seekable=&lt;yes|no&gt;</span></tt></dt>
<dd>If the player thinks that the media is not seekable (e.g. playing from a
pipe, or it's an http stream with a server that doesn't support range
requests), seeking will be disabled. This option can forcibly enable it.
For seeks within the cache, there's a good chance of success.</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-cache-wait=&lt;yes|no&gt;</span></tt></dt>
<dd>Before starting playback, read data until either the end of the file was
reached, or the demuxer cache has reached maximum capacity. Only once this
is done, playback starts. This intentionally happens before the initial
seek triggered with <tt class="docutils literal"><span class="pre">--start</span></tt>. This does not change any runtime behavior
after the initial caching. This option is useless if the file cannot be
cached completely.</dd>
<dt><tt class="docutils literal"><span class="pre">--rar-list-all-volumes=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">When opening multi-volume rar files, open all volumes to create a full list
of contained files (default: no). If disabled, only the archive entries
whose headers are located within the first volume are listed (and thus
played when opening a .rar file with mpv). Doing so speeds up opening, and
the typical idiotic use-case of playing uncompressed multi-volume rar files
that contain a single media file is made faster.</p>
<p class="last">Opening is still slow, because for unknown, idiotic, and unnecessary reasons
libarchive opens all volumes anyway when playing the main file, even though
mpv iterated no archive entries yet.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--directory-mode=&lt;auto|lazy|recursive|ignore&gt;</span></tt></dt>
<dd>When opening a directory, open subdirectories lazily, recursively or not at
all. The default is <tt class="docutils literal">auto</tt>, which behaves like <tt class="docutils literal">recursive</tt> with
<tt class="docutils literal"><span class="pre">--shuffle</span></tt>, and like <tt class="docutils literal">lazy</tt> otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">--directory-filter-types=&lt;video,audio,image&gt;</span></tt></dt>
<dd><p class="first">Media file types to filter when opening directory. If the list is empty,
all files are added to the playlist. (Default: <tt class="docutils literal">video,audio,image</tt>)</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--autocreate-playlist=&lt;no|filter|same&gt;</span></tt></dt>
<dd><p class="first">When opening a local file, act as if the parent directory is opened and
create a playlist automatically.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Load a single file (default).</td>
</tr>
<tr class="field"><th class="field-name">filter:</th><td class="field-body">Create a playlist from the parent directory with files matching
<tt class="docutils literal"><span class="pre">--directory-filter-types</span></tt>.</td>
</tr>
<tr class="field"><th class="field-name">same:</th><td class="field-body">Create a playlist from the parent directory with files matching the
same category as the currently loaded file. One of the
<tt class="docutils literal"><span class="pre">*-exts</span></tt> is selected based on the input file
and only files with matching extensions are added to the playlist.
If the input file itself is not matched to any extension list,
the playlist is not autogenerated.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="input">
<h2>Input</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--native-keyrepeat=&lt;yes|no&gt;</span></tt></dt>
<dd>Use system settings for keyrepeat delay and rate, instead of
<tt class="docutils literal"><span class="pre">--input-ar-delay</span></tt> and <tt class="docutils literal"><span class="pre">--input-ar-rate</span></tt> (default: no).
Whether this applies depends on the VO backend and how it handles
keyboard input. Does not apply to terminal input.</dd>
<dt><tt class="docutils literal"><span class="pre">--native-touch=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
For platforms which send emulated mouse inputs for touch-unaware clients,
such as Windows, use system native touch events, instead of receiving them
as emulated mouse events (default: no). This is required for multi-touch
support for these platforms.</p>
<p class="last">Note that this option has no effect on other platforms: either native touch
is not supported by mpv, or the platform does not give an option to receive
emulated mouse inputs (so native touch is always enabled, e.g. Wayland).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-ar-delay</span></tt></dt>
<dd>Delay in milliseconds before we start to autorepeat a key (default: 200).
Set it to 0 to disable.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-ar-rate</span></tt></dt>
<dd>Number of key presses to generate per second on autorepeat (default: 40).</dd>
<dt><tt class="docutils literal"><span class="pre">--input-conf=&lt;filename&gt;</span></tt></dt>
<dd>Specify input configuration file other than the default location in the mpv
configuration directory (usually <tt class="docutils literal"><span class="pre">~/.config/mpv/input.conf</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--input-default-bindings=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable default-level (&quot;weak&quot;) key bindings (default: yes). These are bindings
which config files like <tt class="docutils literal">input.conf</tt> can override. It currently affects the
builtin key bindings, and keys which scripts bind using <tt class="docutils literal">mp.add_key_binding</tt>
(but not <tt class="docutils literal">mp.add_forced_key_binding</tt> because this overrides <tt class="docutils literal">input.conf</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--input-builtin-bindings=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable loading of built-in key bindings during start-up (default: yes). This
option is applied only during (lib)mpv initialization, and if disabled then it
will not be not possible to enable them later. May be useful to libmpv clients.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-builtin-dragging=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable the built-in window-dragging behavior (default: yes). Setting it to no
disables the built-in dragging behavior. Note that unlike the <tt class="docutils literal"><span class="pre">window-dragging</span></tt>
option, this option only affects VOs which support the <tt class="docutils literal"><span class="pre">begin-vo-dragging</span></tt>
command, and does not disable window dragging initialized with the command.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-cmdlist</span></tt></dt>
<dd>Prints all commands that can be bound to keys.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-commands=&lt;cmd1,cmd2,...&gt;</span></tt></dt>
<dd><p class="first">Define a list of commands for mpv to run. The syntax is the same as format
as <tt class="docutils literal">input.conf</tt> but without the key binding argument at the beginning.
When this option is set at startup, the commands will run after audio and
video playback are about to begin if applicable (in idle mode with no file,
it will run immediately). When changing values at runtime, the commands will
also run as soon as possible.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--input-commands=&quot;playlist-play-index</span> 1,set <span class="pre">ao-volume</span> 40&quot;</tt></dt>
<dd>sets the playlist index to 1 and the ao-volume to 40</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-doubleclick-time=&lt;milliseconds&gt;</span></tt></dt>
<dd>Time in milliseconds to recognize two consecutive button presses as a
double-click (default: 300).</dd>
<dt><tt class="docutils literal"><span class="pre">--input-keylist</span></tt></dt>
<dd>Prints all keys that can be bound to commands.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-key-fifo-size=&lt;2-65000&gt;</span></tt></dt>
<dd>Specify the size of the FIFO that buffers key events (default: 7). If it
is too small, some events may be lost. The main disadvantage of setting it
to a very large value is that if you hold down a key triggering some
particularly slow command then the player may be unresponsive while it
processes all the queued commands.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-test</span></tt></dt>
<dd>Input test mode. Instead of executing commands on key presses, mpv
will show the keys and the bound commands on the OSD. Has to be used
with a dummy video, and the normal ways to quit the player will not
work (key bindings that normally quit will be shown on OSD only, just
like any other binding). See <a class="reference internal" href="#input-conf">INPUT.CONF</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-terminal=&lt;yes|no&gt;</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">--input-terminal=no</span></tt> prevents the player from reading key events from
standard input. Useful when reading data from standard input. This is
automatically enabled when <tt class="docutils literal">-</tt> is found on the command line. There are
situations where you have to set it manually, e.g. if you open
<tt class="docutils literal">/dev/stdin</tt> (or the equivalent on your system), use stdin in a playlist
or intend to read from stdin later on via the loadfile or loadlist input
commands.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-ipc-server=&lt;filename&gt;</span></tt></dt>
<dd><p class="first">Enable the IPC support and create the listening socket at the given path.</p>
<p>On Linux and Unix, the given path is a regular filesystem path. On Windows,
named pipes are used, so the path refers to the pipe namespace
(<tt class="docutils literal"><span class="pre">\\.\pipe\&lt;name&gt;</span></tt>). If the <tt class="docutils literal"><span class="pre">\\.\pipe\</span></tt> prefix is missing, mpv will add
it automatically before creating the pipe, so
<tt class="docutils literal"><span class="pre">--input-ipc-server=/tmp/mpv-socket</span></tt> and
<tt class="docutils literal"><span class="pre">--input-ipc-server=\\.\pipe\tmp\mpv-socket</span></tt> are equivalent for IPC on
Windows.</p>
<p class="last">See <a class="reference internal" href="#json-ipc">JSON IPC</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-ipc-client=fd://&lt;N&gt;</span></tt></dt>
<dd><p class="first">Connect a single IPC client to the given FD. This is somewhat similar to
<tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt>, except no socket is created, and instead the passed
FD is treated like a socket connection received from <tt class="docutils literal">accept()</tt>. In
practice, you could pass either a FD created by <tt class="docutils literal">socketpair()</tt>, or a pipe.
In both cases, you must make sure that the FD is actually inherited by mpv
(do not set the POSIX <tt class="docutils literal">CLOEXEC</tt> flag).</p>
<p>The player quits when the connection is closed.</p>
<p>This is somewhat similar to the removed <tt class="docutils literal"><span class="pre">--input-file</span></tt> option, except it
supports only integer FDs, and cannot open actual paths.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<p class="last"><tt class="docutils literal"><span class="pre">--input-ipc-client=fd://123</span></tt></p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To use this option on Windows, the fd must refer to a wrapped
(created by <tt class="docutils literal">_open_osfhandle</tt>) named pipe server handle with a client
already connected. The named pipe must be created duplex with overlapped
IO and inheritable handles. The program communicates with mpv through
the client handle.</p>
</div>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Writing to the <tt class="docutils literal"><span class="pre">input-ipc-server</span></tt> option at runtime will start another
instance of an IPC client handler for the <tt class="docutils literal"><span class="pre">input-ipc-client</span></tt> option,
because initialization is bundled, and this thing is stupid. This is a
bug. Writing to <tt class="docutils literal"><span class="pre">input-ipc-client</span></tt> at runtime will start another IPC
client handler for the new value, without stopping the old one, even if
the FD value is the same (but the string is different e.g. due to
whitespace). This is not a bug.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-gamepad=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable/disable SDL2 Gamepad support. Disabled by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-cursor=&lt;yes|no&gt;</span></tt></dt>
<dd>Permit mpv to receive pointer events reported by the video output
driver. Necessary to use the OSC. Support depends on the VO in use.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-cursor-passthrough=&lt;yes|no&gt;</span></tt></dt>
<dd>Tell the backend windowing system to allow pointer events to passthrough
the mpv window. This allows windows under mpv to instead receive pointer
events as if the mpv window was never there.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-media-keys=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">On systems where mpv can choose between receiving media keys or letting
the system handle them - this option controls whether mpv should receive
them.</p>
<p class="last">Default: yes (except for libmpv). macOS and Windows only, because elsewhere
mpv doesn't have a choice - the system decides whether to send media keys
to mpv. For instance, on X11 or Wayland, system-wide media keys are not
implemented. Whether media keys work when the mpv window is focused is
implementation-defined.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-preprocess-wheel=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Preprocess <tt class="docutils literal">WHEEL_*</tt> events so that while scrolling on the horizontal
or vertical direction, the events aren't generated for another direction
even when the two directions are scrolled together (default: yes).</p>
<p>This preprocessing can be beneficial for preventing accidentally seeking
while changing the volume by scrolling on a touchpad with the default
keybind. Due to the deadzone mechanism used, disabling the preprocessing
allows for diagonal scrolling (such as panning) and potentially reduces
input latency.</p>
<p class="last">Note that disabling the preprocessing does not affect any filtering done
by the OS/driver before these events are delivered to mpv, if any.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-right-alt-gr=&lt;yes|no&gt;</span></tt></dt>
<dd>(macOS and Windows only)
Use the right Alt key as Alt Gr to produce special characters. If disabled,
count the right Alt as an Alt modifier key. Enabled by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--input-vo-keyboard=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Disable all keyboard input on for VOs which can't participate in proper
keyboard input dispatching. May not affect all VOs. Generally useful for
embedding only.</p>
<p>On X11, a sub-window with input enabled grabs all keyboard input as long
as it is 1. a child of a focused window, and 2. the mouse is inside of
the sub-window. It can steal away all keyboard input from the
application embedding the mpv window, and on the other hand, the mpv
window will receive no input if the mouse is outside of the mpv window,
even though mpv has focus. Modern toolkits work around this weird X11
behavior, but naively embedding foreign windows breaks it.</p>
<p>The only way to handle this reasonably is using the XEmbed protocol, which
was designed to solve these problems. GTK provides <tt class="docutils literal">GtkSocket</tt>, which
supports XEmbed. Qt doesn't seem to provide anything working in newer
versions.</p>
<p class="last">If the embedder supports XEmbed, input should work with default settings
and with this option disabled. Note that <tt class="docutils literal"><span class="pre">input-default-bindings</span></tt> is
disabled by default in libmpv as well - it should be enabled if you want
the mpv default key bindings.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--input-touch-emulate-mouse=&lt;yes|no&gt;</span></tt></dt>
<dd>When multi-touch support is enabled (either required by the platform,
or enabled by <tt class="docutils literal"><span class="pre">--native-touch</span></tt>), emulate mouse move and button presses
for the touch events (default: yes). This is useful for compatibility
for mouse key bindings and scripts which read mouse positions for platforms
which do not support <tt class="docutils literal"><span class="pre">--native-touch=no</span></tt> (e.g. Wayland).</dd>
<dt><tt class="docutils literal"><span class="pre">--input-dragging-deadzone=&lt;N&gt;</span></tt></dt>
<dd>Begin the built-in window dragging when the mouse moves outside a deadzone of
<tt class="docutils literal">N</tt> pixels while the mouse button is being held down (default: 3). This only
affects VOs which support the <tt class="docutils literal"><span class="pre">begin-vo-dragging</span></tt> command.</dd>
</dl>
</div>
<div class="section" id="osd">
<h2>OSD</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--osc=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether to load the on-screen-controller (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable display of the OSD bar (default: yes).</p>
<p class="last">You can configure this on a per-command basis in input.conf using <tt class="docutils literal">osd-</tt>
prefixes, see <tt class="docutils literal">Input Command Prefixes</tt>. If you want to disable the OSD
completely, use <tt class="docutils literal"><span class="pre">--osd-level=0</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-on-seek=&lt;no,bar,msg,msg-bar&gt;</span></tt></dt>
<dd><p class="first">Set what is displayed on the OSD during seeks. The default is <tt class="docutils literal">bar</tt>.</p>
<p class="last">You can configure this on a per-command basis in input.conf using <tt class="docutils literal">osd-</tt>
prefixes, see <tt class="docutils literal">Input Command Prefixes</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-duration=&lt;time&gt;</span></tt></dt>
<dd>Set the duration of the OSD messages in ms (default: 1000).</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-font=&lt;name&gt;</span></tt></dt>
<dd><p class="first">Specify font to use for OSD. The default is <tt class="docutils literal"><span class="pre">sans-serif</span></tt>.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--osd-font='Bitstream</span> Vera Sans'</tt></li>
<li><tt class="docutils literal"><span class="pre">--osd-font='Comic</span> Sans MS'</tt></li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-font-size=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Specify the OSD font size. See <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details.</p>
<p class="last">Default: 55.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-msg1=&lt;string&gt;</span></tt></dt>
<dd>Show this string as message on OSD with OSD level 1 (visible by default).
The message will be visible by default, and as long as no other message
covers it, and the OSD level isn't changed (see <tt class="docutils literal"><span class="pre">--osd-level</span></tt>).
Expands properties; see <a class="reference internal" href="#property-expansion">Property Expansion</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-msg2=&lt;string&gt;</span></tt></dt>
<dd>Similar to <tt class="docutils literal"><span class="pre">--osd-msg1</span></tt>, but for OSD level 2. If this is an empty string
(default), then the playback time is shown.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-msg3=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal"><span class="pre">--osd-msg1</span></tt>, but for OSD level 3. If this is an empty string
(default), then the playback time, duration, and some more information is
shown.</p>
<p>This is used for the <tt class="docutils literal"><span class="pre">show-progress</span></tt> command (by default mapped to <tt class="docutils literal">P</tt>),
and when seeking if enabled with <tt class="docutils literal"><span class="pre">--osd-on-seek</span></tt> or by <tt class="docutils literal">osd-</tt> prefixes
in input.conf (see <tt class="docutils literal">Input Command Prefixes</tt>).</p>
<p class="last"><tt class="docutils literal"><span class="pre">--osd-status-msg</span></tt> is a legacy equivalent (but with a minor difference).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-status-msg=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Show a custom string during playback instead of the standard status text.
This overrides the status text used for <tt class="docutils literal"><span class="pre">--osd-level=3</span></tt>, when using the
<tt class="docutils literal"><span class="pre">show-progress</span></tt> command (by default mapped to <tt class="docutils literal">P</tt>), and when seeking if
enabled with <tt class="docutils literal"><span class="pre">--osd-on-seek</span></tt> or <tt class="docutils literal">osd-</tt> prefixes in input.conf (see
<tt class="docutils literal">Input Command Prefixes</tt>). Expands properties. See <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
<p class="last">This option has been replaced with <tt class="docutils literal"><span class="pre">--osd-msg3</span></tt>. The only difference is
that this option implicitly includes <tt class="docutils literal"><span class="pre">${osd-sym-cc}</span></tt>. This option is
ignored if <tt class="docutils literal"><span class="pre">--osd-msg3</span></tt> is not empty.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-playing-msg=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Show a message on OSD when playback starts. The string is expanded for
properties, e.g. <tt class="docutils literal"><span class="pre">--osd-playing-msg='file:</span> ${filename}'</tt> will show the
message <tt class="docutils literal">file:</tt> followed by a space and the currently played filename.</p>
<p class="last">See <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-playing-msg-duration=&lt;time&gt;</span></tt></dt>
<dd>Set the duration of <tt class="docutils literal"><span class="pre">osd-playing-msg</span></tt> in ms. If this is unset,
<tt class="docutils literal"><span class="pre">osd-playing-msg</span></tt> stays on screen for the duration of <tt class="docutils literal"><span class="pre">osd-duration</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-playlist-entry=&lt;title|filename|both&gt;</span></tt></dt>
<dd><p class="first">Whether to display the media title, filename, or both. If the
<tt class="docutils literal"><span class="pre">media-title</span></tt> is not available, it will display only the <tt class="docutils literal">filename</tt>.</p>
<p class="last">Default: <tt class="docutils literal">title</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar-align-x=&lt;-1-1&gt;</span></tt></dt>
<dd>Position of the OSD bar. -1 is far left, 0 is centered, 1 is far right.
Fractional values (like 0.5) are allowed.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar-align-y=&lt;-1-1&gt;</span></tt></dt>
<dd>Position of the OSD bar. -1 is top, 0 is centered, 1 is bottom.
Fractional values (like 0.5) are allowed.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar-w=&lt;1-100&gt;</span></tt></dt>
<dd>Width of the OSD bar, in percentage of the screen width (default: 75).
A value of 50 means the bar is half the screen wide.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar-h=&lt;0.1-50&gt;</span></tt></dt>
<dd>Height of the OSD bar, in percentage of the screen height (default: 3.125).</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bar-outline-size=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Size of the outline of the OSD bar in scaled pixels (see <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt>
for details).</p>
<p><tt class="docutils literal"><span class="pre">--osd-bar-border-size</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--osd-bar-outline-size</span></tt>.</p>
<p class="last">Default: 0.5.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-blur=&lt;0..20.0&gt;</span></tt></dt>
<dd>Gaussian blur factor applied to the OSD font border.
0 means no blur applied (default).</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-bold=&lt;yes|no&gt;</span></tt></dt>
<dd>Format text on bold.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-italic=&lt;yes|no&gt;</span></tt></dt>
<dd>Format text on italic.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-outline-color=&lt;color&gt;</span></tt></dt>
<dd><p class="first">See <tt class="docutils literal"><span class="pre">--sub-color</span></tt>. Color used for the OSD font outline.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--osd-border-color</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--osd-outline-color</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-back-color=&lt;color&gt;</span></tt></dt>
<dd><p class="first">See <tt class="docutils literal"><span class="pre">--sub-color</span></tt>. Color used for OSD text background.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--osd-shadow-color</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--osd-back-color</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-outline-size=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Size of the OSD font outline in scaled pixels (see <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt>
for details). A value of 0 disables outlines.</p>
<p><tt class="docutils literal"><span class="pre">--osd-border-size</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--osd-outline-size</span></tt>.</p>
<p class="last">Default: 3.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-border-style=&lt;outline-and-shadow|opaque-box|background-box&gt;</span></tt></dt>
<dd>See <tt class="docutils literal"><span class="pre">--sub-border-style</span></tt>. Style used for OSD text border.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-color=&lt;color&gt;</span></tt></dt>
<dd>Specify the color used for OSD.
See <tt class="docutils literal"><span class="pre">--sub-color</span></tt> for details.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-fractions</span></tt></dt>
<dd>Show OSD times with fractions of seconds (in millisecond precision). Useful
to see the exact timestamp of a video frame.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-level=&lt;0-3&gt;</span></tt></dt>
<dd><p class="first">Specifies which mode the OSD should start in.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">0:</th><td class="field-body">OSD completely disabled (subtitles only)</td>
</tr>
<tr class="field"><th class="field-name">1:</th><td class="field-body">enabled (shows up only on user interaction)</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">enabled + current time visible by default</td>
</tr>
<tr class="field"><th class="field-name">3:</th><td class="field-body">enabled + <tt class="docutils literal"><span class="pre">--osd-status-msg</span></tt> (current time and status by default)</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-margin-x=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Left and right screen margin for the OSD in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details).</p>
<p>This option specifies the distance of the OSD to the left, as well as at
which distance from the right border long OSD text will be broken.</p>
<p class="last">Default: 25.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-margin-y=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Top and bottom screen margin for the OSD in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details).</p>
<p>This option specifies the vertical margins of the OSD.</p>
<p class="last">Default: 22.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-align-x=&lt;left|center|right&gt;</span></tt></dt>
<dd>Control to which corner of the screen OSD should be
aligned to (default: <tt class="docutils literal">left</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-align-y=&lt;top|center|bottom&gt;</span></tt></dt>
<dd>Vertical position (default: <tt class="docutils literal">top</tt>).
Details see <tt class="docutils literal"><span class="pre">--osd-align-x</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-scale=&lt;factor&gt;</span></tt></dt>
<dd>OSD font size multiplier, multiplied with <tt class="docutils literal"><span class="pre">--osd-font-size</span></tt> value.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-scale-by-window=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Whether to scale the OSD with the window size (default: yes). If this is
disabled, <tt class="docutils literal"><span class="pre">--osd-font-size</span></tt> and other OSD options that use scaled pixels
are always in actual pixels. The effect is that changing the window size
won't change the OSD font size.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">For scripts which draw user interface elements, it is recommended to
respect the value of this option when deciding whether the elements
are scaled with window size or not.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-shadow-offset=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Displacement of the OSD shadow in scaled pixels (see
<tt class="docutils literal"><span class="pre">--sub-font-size</span></tt> for details). A value of 0 disables shadows.</p>
<p class="last">Default: 0.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-spacing=&lt;size&gt;</span></tt></dt>
<dd><p class="first">Horizontal OSD/sub font spacing in scaled pixels (see <tt class="docutils literal"><span class="pre">--sub-font-size</span></tt>
for details). This value is added to the normal letter spacing. Negative
values are allowed.</p>
<p class="last">Default: 0.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-osd=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enabled OSD rendering on the video window (default: yes). This can be used
in situations where terminal OSD is preferred. If you just want to disable
all OSD rendering, use <tt class="docutils literal"><span class="pre">--osd-level=0</span></tt>.</p>
<p>It does not affect subtitles or overlays created by scripts (in particular,
the OSC needs to be disabled with <tt class="docutils literal"><span class="pre">--osc=no</span></tt>).</p>
<p class="last">This option is somewhat experimental and could be replaced by another
mechanism in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-font-provider=&lt;...&gt;</span></tt></dt>
<dd>See <tt class="docutils literal"><span class="pre">--sub-font-provider</span></tt> for details and accepted values. Note that
unlike subtitles, OSD never uses embedded fonts from media files.</dd>
<dt><tt class="docutils literal"><span class="pre">--osd-fonts-dir=&lt;path&gt;</span></tt></dt>
<dd>See <tt class="docutils literal"><span class="pre">--sub-fonts-dir</span></tt> for details.  Defaults to <tt class="docutils literal"><span class="pre">~~/fonts</span></tt>.</dd>
</dl>
</div>
<div class="section" id="screenshot">
<h2>Screenshot</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--screenshot-format=&lt;type&gt;</span></tt></dt>
<dd><p class="first">Set the image file type used for saving screenshots.</p>
<p>Available choices:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">png:</th><td class="field-body">PNG</td>
</tr>
<tr class="field"><th class="field-name">jpg:</th><td class="field-body">JPEG (default)</td>
</tr>
<tr class="field"><th class="field-name">jpeg:</th><td class="field-body">JPEG (alias for jpg)</td>
</tr>
<tr class="field"><th class="field-name">webp:</th><td class="field-body">WebP</td>
</tr>
<tr class="field"><th class="field-name">jxl:</th><td class="field-body">JPEG XL</td>
</tr>
<tr class="field"><th class="field-name">avif:</th><td class="field-body">AVIF</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-tag-colorspace=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Tag screenshots with the appropriate colorspace (default: yes).</p>
<p class="last">Note that not all formats support this. When it is unsupported, or when
this option is disabled, screenshots will be converted to sRGB before
being written.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-high-bit-depth=&lt;yes|no&gt;</span></tt></dt>
<dd>If possible, write screenshots with a bit depth similar to the source
video (default: yes). This is interesting in particular for PNG, as this
sometimes triggers writing 16 bit PNGs with huge file sizes. This will also
include an unused alpha channel in the resulting files if 16 bit is used.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-template=&lt;template&gt;</span></tt></dt>
<dd><p class="first">Specify the filename template used to save screenshots. The template
specifies the filename without file extension, and can contain format
specifiers, which will be substituted when taking a screenshot.
By default, the template is <tt class="docutils literal"><span class="pre">mpv-shot%n</span></tt>, which results in filenames like
<tt class="docutils literal"><span class="pre">mpv-shot0012.png</span></tt> for example.</p>
<p>The template can start with a relative or absolute path, in order to
specify a directory location where screenshots should be saved.</p>
<p>If the final screenshot filename points to an already existing file, the
file will not be overwritten. The screenshot will either not be saved, or if
the template contains <tt class="docutils literal">%n</tt>, saved using different, newly generated
filename.</p>
<p>Allowed format specifiers:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">%[#][0X]n</span></tt></dt>
<dd>A sequence number, padded with zeros to length X (default: 04). E.g.
passing the format <tt class="docutils literal">%04n</tt> will yield <tt class="docutils literal">0012</tt> on the 12th screenshot.
The number is incremented every time a screenshot is taken or if the
file already exists. The length <tt class="docutils literal">X</tt> must be in the range 0-9. With
the optional # sign, mpv will use the lowest available number. For
example, if you take three screenshots--0001, 0002, 0003--and delete
the first two, the next two screenshots will not be 0004 and 0005, but
0001 and 0002 again.</dd>
<dt><tt class="docutils literal">%f</tt></dt>
<dd>Filename of the currently played video.</dd>
<dt><tt class="docutils literal">%F</tt></dt>
<dd>Same as <tt class="docutils literal">%f</tt>, but strip the file extension, including the dot.</dd>
<dt><tt class="docutils literal">%x</tt></dt>
<dd>Directory path of the currently played video. If the video is not on
the filesystem (but e.g. <tt class="docutils literal"><span class="pre">http://</span></tt>), this expand to an empty string.</dd>
<dt><tt class="docutils literal">%X{fallback}</tt></dt>
<dd>Same as <tt class="docutils literal">%x</tt>, but if the video file is not on the filesystem, return
the fallback string inside the <tt class="docutils literal"><span class="pre">{...}</span></tt>.</dd>
<dt><tt class="docutils literal">%p</tt></dt>
<dd>Current playback time, in the same format as used in the OSD. The
result is a string of the form &quot;HH:MM:SS&quot;. For example, if the video is
at the time position 5 minutes and 34 seconds, <tt class="docutils literal">%p</tt> will be replaced
with &quot;00:05:34&quot;.</dd>
<dt><tt class="docutils literal">%P</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">%p</tt>, but extended with the playback time in milliseconds.
It is formatted as &quot;HH:MM:SS.mmm&quot;, with &quot;mmm&quot; being the millisecond
part of the playback time.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This is a simple way for getting unique per-frame timestamps. (Frame
numbers would be more intuitive, but are not easily implementable
because container formats usually use time stamps for identifying
frames.)</p>
</div>
</dd>
<dt><tt class="docutils literal">%wX</tt></dt>
<dd><p class="first">Specify the current playback time using the format string <tt class="docutils literal">X</tt>.
<tt class="docutils literal">%p</tt> is like <tt class="docutils literal"><span class="pre">%wH:%wM:%wS</span></tt>, and <tt class="docutils literal">%P</tt> is like <tt class="docutils literal"><span class="pre">%wH:%wM:%wS.%wT</span></tt>.</p>
<dl class="last docutils">
<dt>Valid format specifiers:</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal">%wH</tt></dt>
<dd>hour (padded with 0 to two digits)</dd>
<dt><tt class="docutils literal">%wh</tt></dt>
<dd>hour (not padded)</dd>
<dt><tt class="docutils literal">%wM</tt></dt>
<dd>minutes (00-59)</dd>
<dt><tt class="docutils literal">%wm</tt></dt>
<dd>total minutes (includes hours, unlike <tt class="docutils literal">%wM</tt>)</dd>
<dt><tt class="docutils literal">%wS</tt></dt>
<dd>seconds (00-59)</dd>
<dt><tt class="docutils literal">%ws</tt></dt>
<dd>total seconds (includes hours and minutes)</dd>
<dt><tt class="docutils literal">%wf</tt></dt>
<dd>like <tt class="docutils literal">%ws</tt>, but as float</dd>
<dt><tt class="docutils literal">%wT</tt></dt>
<dd>milliseconds (000-999)</dd>
</dl>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">%tX</tt></dt>
<dd>Specify the current local date/time using the format <tt class="docutils literal">X</tt>. This format
specifier uses the UNIX <tt class="docutils literal">strftime()</tt> function internally, and inserts
the result of passing &quot;%X&quot; to <tt class="docutils literal">strftime</tt>. For example, <tt class="docutils literal">%tm</tt> will
insert the number of the current month as number. You have to use
multiple <tt class="docutils literal">%tX</tt> specifiers to build a full date/time string.</dd>
<dt><tt class="docutils literal"><span class="pre">%{prop[:fallback</span> text]}</tt></dt>
<dd>Insert the value of the input property 'prop'. E.g. <tt class="docutils literal">%{filename}</tt> is
the same as <tt class="docutils literal">%f</tt>. If the property does not exist or is not available,
an error text is inserted, unless a fallback is specified.</dd>
<dt><tt class="docutils literal">%%</tt></dt>
<dd>Replaced with the <tt class="docutils literal">%</tt> character itself.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-dir=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Store screenshots in this directory. This path is joined with the filename
generated by <tt class="docutils literal"><span class="pre">--screenshot-template</span></tt>. If the template filename is already
absolute, the directory is ignored.</p>
<p><tt class="docutils literal"><span class="pre">--screenshot-directory</span></tt> is an alias for <tt class="docutils literal"><span class="pre">--screenshot-dir</span></tt>.</p>
<p>If the directory does not exist, it is created on the first screenshot. If
it is not a directory, an error is generated when trying to write a
screenshot.</p>
<p class="last">This option is not set by default, and thus will write screenshots to the
directory from which mpv was started. In pseudo-gui mode
(see <a class="reference internal" href="#pseudo-gui-mode">PSEUDO GUI MODE</a>), this is set to the desktop.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-jpeg-quality=&lt;0-100&gt;</span></tt></dt>
<dd>Set the JPEG quality level. Higher means better quality. The default is 90.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-jpeg-source-chroma=&lt;yes|no&gt;</span></tt></dt>
<dd>Write JPEG files with the same chroma subsampling as the video
(default: yes). If disabled, the libjpeg default is used.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-png-compression=&lt;0-9&gt;</span></tt></dt>
<dd>Set the PNG compression level. Higher means better compression. This will
affect the file size of the written screenshot file and the time it takes
to write a screenshot. Too high compression might occupy enough CPU time to
interrupt playback. The default is 7.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-png-filter=&lt;0-5&gt;</span></tt></dt>
<dd>Set the filter applied prior to PNG compression. 0 is none, 1 is &quot;sub&quot;, 2 is
&quot;up&quot;, 3 is &quot;average&quot;, 4 is &quot;Paeth&quot;, and 5 is &quot;mixed&quot;. This affects the level
of compression that can be achieved. For most images, &quot;mixed&quot; achieves the
best compression ratio, hence it is the default.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-webp-lossless=&lt;yes|no&gt;</span></tt></dt>
<dd>Write lossless WebP files. <tt class="docutils literal"><span class="pre">--screenshot-webp-quality</span></tt> is ignored if this
is set. The default is no.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-webp-quality=&lt;0-100&gt;</span></tt></dt>
<dd>Set the WebP quality level. Higher means better quality. The default is 75.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-webp-compression=&lt;0-6&gt;</span></tt></dt>
<dd>Set the WebP compression level. Higher means better compression, but takes
more CPU time. Note that this also affects the screenshot quality when used
with lossy WebP files. The default is 4.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-jxl-distance=&lt;0-15&gt;</span></tt></dt>
<dd>Set the JPEG XL Butteraugli distance. Lower means better quality. Lossless
is 0.0, and 1.0 is approximately equivalent to JPEG quality 90 for
photographic content. Use 0.1 for &quot;visually lossless&quot; screenshots. The
default is 1.0.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-jxl-effort=&lt;1-9&gt;</span></tt></dt>
<dd>Set the JPEG XL compression effort. Higher effort (usually) means better
compression, but takes more CPU time. The default is 4.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-avif-encoder=&lt;encoder&gt;</span></tt></dt>
<dd><p class="first">Specify the AV1 encoder to be used by libavcodec for encoding avif
screenshots.</p>
<p class="last">Default: <tt class="docutils literal"><span class="pre">libaom-av1</span></tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-avif-pixfmt=&lt;format&gt;</span></tt></dt>
<dd>Specify the pixel format for the libavcodec encoder. Defaults to empty,
which lets mpv pick one close to the source format.</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-avif-opts=key1=value1,key2=value2,...</span></tt></dt>
<dd><p class="first">Specifies libavcodec options for selected encoder. For more information,
consult the FFmpeg documentation.</p>
<p>Default: <tt class="docutils literal"><span class="pre">usage=allintra,crf=0,cpu-used=8</span></tt></p>
<p>Note: the default is only guaranteed to work with the libaom-av1 encoder.
Above options may not be valid and or optimal for other encoders.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt>&quot;<tt class="docutils literal"><span class="pre">--screenshot-avif-opts=crf=23,aq-mode=complexity</span></tt>&quot;</dt>
<dd>sets the crf to 23 and quantization (aq-mode) to complexity based.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--screenshot-sw=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Whether to use software rendering for screenshots (default: no).</p>
<p>If set to no, the screenshot will be rendered by the current VO (only vo_gpu
or vo_gpu_next currently). The advantage is that this will (probably) always
show up as in the video window, because the same code is used for rendering.
But since the renderer needs to be reinitialized, this can be slow and
interrupt playback.</p>
<p class="last">If set to yes, the software scaler is used to convert the video to RGB (or
whatever the target screenshot requires). In this case, conversion will
run in a separate thread and will probably not interrupt playback. The
software renderer may lack some capabilities, such as HDR rendering.
If <tt class="docutils literal">window</tt> mode is used, the image will also be scaled in software
which may not accurately reflect the actual visible result.</p>
</dd>
</dl>
</div>
<div class="section" id="software-scaler">
<h2>Software Scaler</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--sws-scaler=&lt;name&gt;</span></tt></dt>
<dd><p class="first">Specify the software scaler algorithm to be used with <tt class="docutils literal"><span class="pre">--vf=scale</span></tt>. This
also affects video output drivers which lack hardware acceleration,
e.g. <tt class="docutils literal">x11</tt>. See also <tt class="docutils literal"><span class="pre">--vf=scale</span></tt>.</p>
<p>To get a list of available scalers, run <tt class="docutils literal"><span class="pre">--sws-scaler=help</span></tt>.</p>
<p class="last">Default: <tt class="docutils literal">bicubic</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-lgb=&lt;0-100&gt;</span></tt></dt>
<dd>Software scaler Gaussian blur filter (luma). See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-cgb=&lt;0-100&gt;</span></tt></dt>
<dd>Software scaler Gaussian blur filter (chroma). See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-ls=&lt;-100-100&gt;</span></tt></dt>
<dd>Software scaler sharpen filter (luma). See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-cs=&lt;-100-100&gt;</span></tt></dt>
<dd>Software scaler sharpen filter (chroma). See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-chs=&lt;h&gt;</span></tt></dt>
<dd>Software scaler chroma horizontal shifting. See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-cvs=&lt;v&gt;</span></tt></dt>
<dd>Software scaler chroma vertical shifting. See <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-bitexact=&lt;yes|no&gt;</span></tt></dt>
<dd>Unknown functionality (default: no). Consult libswscale source code. The
primary purpose of this, as far as libswscale API goes), is to produce
exactly the same output for the same input on all platforms (output has the
same &quot;bits&quot; everywhere, thus &quot;bitexact&quot;). Typically disables optimizations.</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-fast=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Allow optimizations that help with performance, but reduce quality (default:
no).</p>
<p class="last">VOs like <tt class="docutils literal">drm</tt> and <tt class="docutils literal">x11</tt> will benefit a lot from using <tt class="docutils literal"><span class="pre">--sws-fast</span></tt>.
You may need to set other options, like <tt class="docutils literal"><span class="pre">--sws-scaler</span></tt>. The builtin
<tt class="docutils literal"><span class="pre">sws-fast</span></tt> profile sets this option and some others to gain performance
for reduced quality. Also see <tt class="docutils literal"><span class="pre">--sws-allow-zimg</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--sws-allow-zimg=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Allow using zimg (if the component using the internal swscale wrapper
explicitly allows so) (default: yes). In this case, zimg <em>may</em> be used, if
the internal zimg wrapper supports the input and output formats. It will
silently or noisily fall back to libswscale if one of these conditions does
not apply.</p>
<p>If zimg is used, the other <tt class="docutils literal"><span class="pre">--sws-</span></tt> options are ignored, and the
<tt class="docutils literal"><span class="pre">--zimg-</span></tt> options are used instead.</p>
<p>If the internal component using the swscale wrapper hooks up logging
correctly, a verbose priority log message will indicate whether zimg is
being used.</p>
<p>Most things which need software conversion can make use of this.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Do note that zimg <em>may</em> be slower than libswscale. Usually,
it's faster on x86 platforms, but slower on ARM (due to lack of ARM
specific optimizations). The mpv zimg wrapper uses unoptimized repacking
for some formats, for which zimg cannot be blamed.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-scaler=&lt;point|bilinear|bicubic|spline16|spline36|lanczos&gt;</span></tt></dt>
<dd>Zimg luma scaler to use (default: lanczos).</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-scaler-param-a=&lt;default|float&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--zimg-scaler-param-b=&lt;default|float&gt;</span></tt></dt>
<dd><p class="first">Set scaler parameters. By default, these are set to the special string
<tt class="docutils literal">default</tt>, which maps to a scaler-specific default value. Ignored if the
scaler is not tunable.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">lanczos</tt></dt>
<dd><tt class="docutils literal"><span class="pre">--zimg-scaler-param-a</span></tt> is the number of taps.</dd>
<dt><tt class="docutils literal">bicubic</tt></dt>
<dd>a and b are the bicubic b and c parameters.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-scaler-chroma=...</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">--zimg-scaler</span></tt>, for for chroma interpolation (default: bilinear).</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-scaler-chroma-param-a</span></tt>, <tt class="docutils literal"><span class="pre">--zimg-scaler-chroma-param-b</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">--zimg-scaler-param-a</span></tt> / <tt class="docutils literal"><span class="pre">--zimg-scaler-param-b</span></tt>, for chroma.</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-dither=&lt;no|ordered|random|error-diffusion&gt;</span></tt></dt>
<dd>Dithering (default: random).</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-threads=&lt;auto|integer&gt;</span></tt></dt>
<dd><p class="first">Set the maximum number of threads to use for scaling (default: auto).
<tt class="docutils literal">auto</tt> uses the number of logical cores on the current machine. Note that
the scaler may use less threads (or even just 1 thread) depending on stuff.
Passing a value of 1 disables threading and always scales the image in a
single operation. Higher thread counts waste resources, but make it
typically faster.</p>
<p class="last">Note that some zimg git versions had bugs that will corrupt the output if
threads are used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--zimg-fast=&lt;yes|no&gt;</span></tt></dt>
<dd>Allow optimizations that help with performance, but reduce quality (default:
yes). Currently, this may simplify gamma conversion operations.</dd>
</dl>
</div>
<div class="section" id="audio-resampler">
<h2>Audio Resampler</h2>
<p>This controls the default options of any resampling done by mpv (but not within
libavfilter, within the system audio API resampler, or any other places).</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--audio-resample-filter-size=&lt;length&gt;</span></tt></dt>
<dd>Length of the filter with respect to the lower sampling rate. (default:
16)</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-resample-phase-shift=&lt;count&gt;</span></tt></dt>
<dd>Log2 of the number of polyphase entries. (..., 10-&gt;1024, 11-&gt;2048,
12-&gt;4096, ...) (default: 10-&gt;1024)</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-resample-cutoff=&lt;cutoff&gt;</span></tt></dt>
<dd>Cutoff frequency (0.0-1.0), default set depending upon filter length.</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-resample-linear=&lt;yes|no&gt;</span></tt></dt>
<dd>If set then filters will be linearly interpolated between polyphase
entries. (default: no)</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-normalize-downmix=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable/disable normalization if surround audio is downmixed to stereo
(default: no). If this is disabled, downmix can cause clipping. If it's
enabled, the output might be too quiet. It depends on the source audio.</p>
<p class="last">If downmix happens outside of mpv for some reason, or in the decoder
(decoder downmixing), or in the audio output (system mixer), this has no
effect.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-resample-max-output-size=&lt;length&gt;</span></tt></dt>
<dd><p class="first">Limit maximum size of audio frames filtered at once, in ms (default: 40).
The output size size is limited in order to make resample speed changes
react faster. This is necessary especially if decoders or filters output
very large frame sizes (like some lossless codecs or some DRC filters).
This option does not affect the resampling algorithm in any way.</p>
<p class="last">For testing/debugging only. Can be removed or changed any time.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--audio-swresample-o=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Set AVOptions on the SwrContext or AVAudioResampleContext. These should
be documented by FFmpeg.</p>
<p class="last">This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
</dl>
</div>
<div class="section" id="terminal">
<h2>Terminal</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--quiet</span></tt></dt>
<dd><p class="first">Make console output less verbose; in particular, prevents the status line
(i.e. AV: 3.4 (00:00:03.37) / 5320.6 ...) from being displayed.
Particularly useful on slow terminals or broken ones which do not properly
handle carriage return (i.e. <tt class="docutils literal">\r</tt>).</p>
<p class="last">See also: <tt class="docutils literal"><span class="pre">--really-quiet</span></tt> and <tt class="docutils literal"><span class="pre">--msg-level</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--really-quiet</span></tt></dt>
<dd>Display even less output and status messages than with <tt class="docutils literal"><span class="pre">--quiet</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--terminal=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">--terminal=no</span></tt> disables any use of the terminal and stdin/stdout/stderr.
This completely silences any message output.</p>
<p class="last">Unlike <tt class="docutils literal"><span class="pre">--really-quiet</span></tt>, this disables input and terminal initialization
as well.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--msg-color=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable colorful console output on terminals (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--msg-level=&lt;module1=level1,module2=level2,...&gt;</span></tt></dt>
<dd><p class="first">Control verbosity directly for each module. The <tt class="docutils literal">all</tt> module changes the
verbosity of all the modules. The verbosity changes from this option are
applied in order from left to right, and each item can override a previous
one.</p>
<p>Run mpv with <tt class="docutils literal"><span class="pre">--msg-level=all=trace</span></tt> to see all messages mpv outputs. You
can use the module names printed in the output (prefixed to each line in
<tt class="docutils literal"><span class="pre">[...]</span></tt>) to limit the output to interesting modules.</p>
<p>This also affects <tt class="docutils literal"><span class="pre">--log-file</span></tt>, and in certain cases libmpv API logging.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some messages are printed before the command line is parsed and are
therefore not affected by <tt class="docutils literal"><span class="pre">--msg-level</span></tt>. To control these messages,
you have to use the <tt class="docutils literal">MPV_VERBOSE</tt> environment variable; see
<a class="reference internal" href="#environment-variables">ENVIRONMENT VARIABLES</a> for details.</p>
</div>
<p>Available levels:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">complete silence</td>
</tr>
<tr class="field"><th class="field-name">fatal:</th><td class="field-body">fatal messages only</td>
</tr>
<tr class="field"><th class="field-name">error:</th><td class="field-body">error messages</td>
</tr>
<tr class="field"><th class="field-name">warn:</th><td class="field-body">warning messages</td>
</tr>
<tr class="field"><th class="field-name">info:</th><td class="field-body">informational messages</td>
</tr>
<tr class="field"><th class="field-name">status:</th><td class="field-body">status messages (default)</td>
</tr>
<tr class="field"><th class="field-name">v:</th><td class="field-body">verbose messages</td>
</tr>
<tr class="field"><th class="field-name">debug:</th><td class="field-body">debug messages</td>
</tr>
<tr class="field"><th class="field-name">trace:</th><td class="field-body">very noisy debug messages</td>
</tr>
</tbody>
</table>
</blockquote>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<pre class="literal-block">
mpv --msg-level=ao/sndio=no
</pre>
<p>Completely silences the output of ao_sndio, which uses the log
prefix <tt class="docutils literal">[ao/sndio]</tt>.</p>
<pre class="literal-block">
mpv --msg-level=all=warn,ao/alsa=error
</pre>
<p class="last">Only show warnings or worse, and let the ao_alsa output show errors
only.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--term-osd=&lt;auto|no|force&gt;</span></tt></dt>
<dd><p class="first">Control whether OSD messages are shown on the console when no video output
is available (default: auto).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">use terminal OSD if no video output active</td>
</tr>
<tr class="field"><th class="field-name">no:</th><td class="field-body">disable terminal OSD</td>
</tr>
<tr class="field"><th class="field-name">force:</th><td class="field-body">use terminal OSD even if video output active</td>
</tr>
</tbody>
</table>
<p class="last">The <tt class="docutils literal">auto</tt> mode also enables terminal OSD if <tt class="docutils literal"><span class="pre">--video-osd=no</span></tt> was set.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--term-osd-bar=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable printing a progress bar under the status line on the terminal.
(Disabled by default.)</dd>
<dt><tt class="docutils literal"><span class="pre">--term-osd-bar-chars=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Customize the <tt class="docutils literal"><span class="pre">--term-osd-bar</span></tt> feature. The string is expected to
consist of 5 characters (start, left space, position indicator,
right space, end). You can use Unicode characters, but note that double-
width characters will not be treated correctly.</p>
<p class="last">Default: <tt class="docutils literal"><span class="pre">[-+-]</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--term-playing-msg=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Print out a string after starting playback. The string is expanded for
properties, e.g. <tt class="docutils literal"><span class="pre">--term-playing-msg='file:</span> ${filename}'</tt> will print the string
<tt class="docutils literal">file:</tt> followed by a space and the currently played filename.</p>
<p class="last">See <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--term-status-msg=&lt;string&gt;</span></tt></dt>
<dd>Print out a custom string during playback instead of the standard status
line. Expands properties. See <a class="reference internal" href="#property-expansion">Property Expansion</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">--term-title=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Set the terminal title. Currently, this simply concatenates the escape
sequence setting the window title with the provided (property expanded)
string. This will mess up if the expanded string contain bytes that end the
escape sequence, or if the terminal does not understand the sequence. The
latter probably includes the regrettable win32.</p>
<p class="last">Expands properties. See <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--msg-module</span></tt></dt>
<dd>Prepend module name to each console message.</dd>
<dt><tt class="docutils literal"><span class="pre">--msg-time</span></tt></dt>
<dd>Prepend timing information to each console message. The time is in
seconds since the player process was started (technically, slightly
later actually), using a monotonic time source depending on the OS. This
is <tt class="docutils literal">CLOCK_MONOTONIC</tt> on sane UNIX variants.</dd>
</dl>
</div>
<div class="section" id="cache">
<h2>Cache</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--cache=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Decide whether to use network cache settings (default: auto).</p>
<p>If enabled, use up to <tt class="docutils literal"><span class="pre">--cache-secs</span></tt> for the cache size (but still limited
to <tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt>), and make the cached data seekable (if possible).
If disabled, <tt class="docutils literal"><span class="pre">--cache-pause</span></tt> and related are implicitly disabled.</p>
<p>The <tt class="docutils literal">auto</tt> choice enables this depending on whether the stream is thought
to involve network accesses or other slow media (this is an imperfect
heuristic).</p>
<p class="last">Before mpv 0.30.0, this used to accept a number, which specified the size
of the cache in kilobytes. Use e.g. <tt class="docutils literal"><span class="pre">--cache</span> <span class="pre">--demuxer-max-bytes=123k</span></tt>
instead.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cache-secs=&lt;seconds&gt;</span></tt></dt>
<dd>How many seconds of audio/video to prefetch if the cache is active. This
overrides the <tt class="docutils literal"><span class="pre">--demuxer-readahead-secs</span></tt> option if and only if the cache
is enabled and the value is larger. The default value is set to something
very high, so the actually achieved readahead will usually be limited by
the value of the <tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt> option. Setting this option is
usually only useful for limiting readahead.</dd>
<dt><tt class="docutils literal"><span class="pre">--cache-on-disk=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Write packet data to a temporary file, instead of keeping them in memory.
This makes sense only with <tt class="docutils literal"><span class="pre">--cache</span></tt>. If the normal cache is disabled,
this option is ignored.</p>
<p>The cache file is append-only. Even if the player appears to prune data, the
file space freed by it is not reused. The cache file is deleted when
playback is closed.</p>
<p>Note that packet metadata is still kept in memory. <tt class="docutils literal"><span class="pre">--demuxer-max-bytes</span></tt>
and related options are applied to metadata <em>only</em>. The size of this
metadata  varies, but 50 MB per hour of media is typical. The cache
statistics will report this metadats size, instead of the size of the cache
file. If the metadata hits the size limits, the metadata is pruned (but not
the cache file).</p>
<p>When the media is closed, the cache file is deleted. A cache file is
generally worthless after the media is closed, and it's hard to retrieve
any media data from it (it's not supported by design).</p>
<p class="last">If the option is enabled at runtime, the cache file is created, but old data
will remain in the memory cache. If the option is disabled at runtime, old
data remains in the disk cache, and the cache file is not closed until the
media is closed. If the option is disabled and enabled again, it will
continue to use the cache file that was opened first.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-cache-dir=&lt;path&gt;</span></tt></dt>
<dd><p class="first">Directory where to create temporary files. Cache is stored in the system's
cache directory (usually <tt class="docutils literal"><span class="pre">~/.cache/mpv</span></tt>) if this is unset.</p>
<p class="last">Currently, this is used for <tt class="docutils literal"><span class="pre">--cache-on-disk</span></tt> only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cache-pause=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether the player should automatically pause when the cache runs out of
data and stalls decoding/playback (default: yes). If enabled, it will
pause and unpause once more data is available, aka &quot;buffering&quot;.</dd>
<dt><tt class="docutils literal"><span class="pre">--cache-pause-wait=&lt;seconds&gt;</span></tt></dt>
<dd>Number of seconds the packet cache should have buffered before starting
playback again if &quot;buffering&quot; was entered (default: 1). This can be used
to control how long the player rebuffers if <tt class="docutils literal"><span class="pre">--cache-pause</span></tt> is enabled,
and the demuxer underruns. If the given time is higher than the maximum
set with <tt class="docutils literal"><span class="pre">--cache-secs</span></tt> or  <tt class="docutils literal"><span class="pre">--demuxer-readahead-secs</span></tt>, or prefetching
ends before that for some other reason (like file end or maximum configured
cache size reached), playback resumes earlier.</dd>
<dt><tt class="docutils literal"><span class="pre">--cache-pause-initial=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enter &quot;buffering&quot; mode before starting playback (default: no). This can be
used to ensure playback starts smoothly, in exchange for waiting some time
to prefetch network data (as controlled by <tt class="docutils literal"><span class="pre">--cache-pause-wait</span></tt>). For
example, some common behavior is that playback starts, but network caches
immediately underrun when trying to decode more data as playback progresses.</p>
<p>Another thing that can happen is that the network prefetching is so CPU
demanding (due to demuxing in the background) that playback drops frames
at first. In these cases, it helps enabling this option, and setting
<tt class="docutils literal"><span class="pre">--cache-secs</span></tt> and <tt class="docutils literal"><span class="pre">--cache-pause-wait</span></tt> to roughly the same value.</p>
<p class="last">This option also triggers when playback is restarted after seeking.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--demuxer-cache-unlink-files=&lt;immediate|whendone|no&gt;</span></tt></dt>
<dd><p class="first">Whether or when to unlink cache files (default: immediate). This affects
cache files which are inherently temporary, and which make no sense to
remain on disk after the player terminates. This is a debugging option.</p>
<dl class="docutils">
<dt><tt class="docutils literal">immediate</tt></dt>
<dd>Unlink cache file after they were created. The cache files won't be
visible anymore, even though they're in use. This ensures they are
guaranteed to be removed from disk when the player terminates, even if
it crashes.</dd>
<dt><tt class="docutils literal">whendone</tt></dt>
<dd>Delete cache files after they are closed.</dd>
<dt><tt class="docutils literal">no</tt></dt>
<dd>Don't delete cache files. They will consume disk space without having a
use.</dd>
</dl>
<p class="last">Currently, this is used for <tt class="docutils literal"><span class="pre">--cache-on-disk</span></tt> only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stream-buffer-size=&lt;bytesize&gt;</span></tt></dt>
<dd><p class="first">Size of the low level stream byte buffer (default: 128KB). This is used as
buffer between demuxer and low level I/O (e.g. sockets). Generally, this
can be very small, and the main purpose is similar to the internal buffer
FILE in the C standard library will have.</p>
<p>Half of the buffer is always used for guaranteed seek back, which is
important for unseekable input.</p>
<p>There are known cases where this can help performance to set a large buffer:</p>
<blockquote>
<ol class="arabic simple">
<li>mp4 files. libavformat may trigger many small seeks in both
directions, depending on how the file was muxed.</li>
<li>Certain network filesystems, which do not have a cache, and where
small reads can be inefficient.</li>
</ol>
</blockquote>
<p>In other cases, setting this to a large value can reduce performance.</p>
<p>Usually, read accesses are at half the buffer size, but it may happen that
accesses are done alternating with smaller and larger sizes (this is due to
the internal ring buffer wrap-around).</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range. <tt class="docutils literal">&lt;bytesize&gt;</tt> options
accept suffixes such as <tt class="docutils literal">KiB</tt> and <tt class="docutils literal">MiB</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-queue-enable=&lt;yes|no&gt;,</span> <span class="pre">--ad-queue-enable</span></tt></dt>
<dd><p class="first">Enable running the video/audio decoder on a separate thread (default: no).
If enabled, the decoder is run on a separate thread, and a frame queue is
put between decoder and higher level playback logic. The size of the frame
queue is defined by the other options below.</p>
<p>This is probably quite pointless. libavcodec already has multithreaded
decoding (enabled by default), which makes this largely unnecessary. It
might help in some corner cases with high bandwidth video that is slow to
decode (in these cases libavcodec would block the playback logic, while
using a decoding thread would distribute the decoding time evenly without
affecting the playback logic). In other situations, it will simply make
seeking slower and use significantly more memory.</p>
<p>The queue size is restricted by the other <tt class="docutils literal"><span class="pre">--vd-queue-...</span></tt> options. The
final queue size is the minimum as indicated by the option with the lowest
limit. Each decoder/track has its own queue that may use the full configured
queue size.</p>
<p>Most queue options can be changed at runtime. <tt class="docutils literal"><span class="pre">--vd-queue-enable</span></tt> itself
(and the audio equivalent) update only if decoding is completely
reinitialized. However, setting <tt class="docutils literal"><span class="pre">--vd-queue-max-samples=1</span></tt> should almost
lead to the same behavior as <tt class="docutils literal"><span class="pre">--vd-queue-enable=no</span></tt>, so that value can
be used for effectively runtime enabling/disabling the queue.</p>
<p class="last">This should not be used with hardware decoding. It is possible to enable
this for audio, but it makes even less sense.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-queue-max-bytes=&lt;bytesize&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--ad-queue-max-bytes</span></tt></dt>
<dd><p class="first">Maximum approximate allowed size of the queue. If exceeded, decoding will
be stopped. The maximum size can be exceeded by about 1 frame.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range. <tt class="docutils literal">&lt;bytesize&gt;</tt> options
accept suffixes such as <tt class="docutils literal">KiB</tt> and <tt class="docutils literal">MiB</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-queue-max-samples=&lt;int&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--ad-queue-max-samples</span></tt></dt>
<dd><p class="first">Maximum number of frames (video) or samples (audio) of the queue. The audio
size may be exceeded by about 1 frame.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vd-queue-max-secs=&lt;seconds&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--ad-queue-max-secs</span></tt></dt>
<dd><p class="first">Maximum number of seconds of media in the queue. The special value 0 means
no limit is set. The queue size may be exceeded by about 2 frames. Timestamp
resets may lead to random queue size usage.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--list-options</span></tt> for defaults and value range.</p>
</dd>
</dl>
</div>
<div class="section" id="network">
<h2>Network</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--user-agent=&lt;string&gt;</span></tt></dt>
<dd>Use <tt class="docutils literal">&lt;string&gt;</tt> as user agent for HTTP streaming.</dd>
<dt><tt class="docutils literal"><span class="pre">--cookies=&lt;yes|no&gt;</span></tt></dt>
<dd>Support cookies when making HTTP requests. Disabled by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--cookies-file=&lt;filename&gt;</span></tt></dt>
<dd>Read HTTP cookies from &lt;filename&gt;. The file is assumed to be in Netscape
format.</dd>
<dt><tt class="docutils literal"><span class="pre">--http-header-fields=&lt;field1,field2&gt;</span></tt></dt>
<dd><p class="first">Set custom HTTP fields when accessing HTTP stream.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<pre class="literal-block">
mpv --http-header-fields='Field1: value1','Field2: value2' \
http://localhost:1234
</pre>
<p>Will generate HTTP request:</p>
<pre class="last literal-block">
GET / HTTP/1.0
Host: localhost:1234
User-Agent: MPlayer
Icy-MetaData: 1
Field1: value1
Field2: value2
Connection: close
</pre>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--http-proxy=&lt;proxy&gt;</span></tt></dt>
<dd>URL of the HTTP/HTTPS proxy. If this is set, the <tt class="docutils literal">http_proxy</tt> environment
is ignored. The <tt class="docutils literal">no_proxy</tt> environment variable is still respected. This
option is silently ignored if it does not start with <tt class="docutils literal"><span class="pre">http://</span></tt>. Proxies
are not used for https URLs. Setting this option does not try to make the
ytdl script use the proxy.</dd>
<dt><tt class="docutils literal"><span class="pre">--tls-ca-file=&lt;filename&gt;</span></tt></dt>
<dd>Certificate authority database file for use with TLS. (Silently fails with
older FFmpeg versions.)</dd>
<dt><tt class="docutils literal"><span class="pre">--tls-verify</span></tt></dt>
<dd>Verify peer certificates when using TLS (e.g. with <tt class="docutils literal"><span class="pre">https://...</span></tt>).
(Silently fails with older FFmpeg versions.)</dd>
<dt><tt class="docutils literal"><span class="pre">--tls-cert-file</span></tt></dt>
<dd>A file containing a certificate to use in the handshake with the
peer.</dd>
<dt><tt class="docutils literal"><span class="pre">--tls-key-file</span></tt></dt>
<dd>A file containing the private key for the certificate.</dd>
<dt><tt class="docutils literal"><span class="pre">--referrer=&lt;string&gt;</span></tt></dt>
<dd>Specify a referrer path or URL for HTTP requests.</dd>
<dt><tt class="docutils literal"><span class="pre">--network-timeout=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Specify the network timeout in seconds (default: 60 seconds). This affects
at least HTTP. The special value 0 uses the FFmpeg defaults. If a
protocol is used which does not support timeouts, this option is silently
ignored.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This breaks the RTSP protocol, because of inconsistent FFmpeg API
regarding its internal timeout option. Not only does the RTSP timeout
option accept different units (seconds instead of microseconds, causing
mpv to pass it huge values), it will also overflow FFmpeg internal
calculations. The worst is that merely setting the option will put RTSP
into listening mode, which breaks any client uses. At time of this
writing, the fix was not made effective yet. For this reason, this
option is ignored (or should be ignored) on RTSP URLs. You can still
set the timeout option directly with <tt class="docutils literal"><span class="pre">--demuxer-lavf-o</span></tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--rtsp-transport=&lt;lavf|udp|udp_multicast|tcp|http&gt;</span></tt></dt>
<dd>Select RTSP transport method (default: tcp). This selects the underlying
network transport when playing <tt class="docutils literal"><span class="pre">rtsp://...</span></tt> URLs. The value <tt class="docutils literal">lavf</tt>
leaves the decision to libavformat.</dd>
<dt><tt class="docutils literal"><span class="pre">--hls-bitrate=&lt;no|min|max|&lt;rate&gt;&gt;</span></tt></dt>
<dd><p class="first">If HLS streams are played, this option controls what streams are selected
by default. The option allows the following parameters:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Don't do anything special. Typically, this will simply pick the
first audio/video streams it can find.</td>
</tr>
<tr class="field"><th class="field-name">min:</th><td class="field-body">Pick the streams with the lowest bitrate.</td>
</tr>
<tr class="field"><th class="field-name">max:</th><td class="field-body">Same, but highest bitrate. (Default.)</td>
</tr>
</tbody>
</table>
<p>Additionally, if the option is a number, the stream with the highest rate
equal or below the option value is selected.</p>
<p class="last">The bitrate as used is sent by the server, and there's no guarantee it's
actually meaningful.</p>
</dd>
</dl>
</div>
<div class="section" id="dvb">
<h2>DVB</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--dvbin-prog=&lt;string&gt;</span></tt></dt>
<dd>This defines the program to tune to. Usually, you may specify this
by using a stream URI like <tt class="docutils literal"><span class="pre">&quot;dvb://ZDF</span> HD&quot;</tt>, but you can tune to a
different channel by writing to this property at runtime.
Also see <tt class="docutils literal"><span class="pre">dvbin-channel-switch-offset</span></tt> for more useful channel
switching functionality.</dd>
<dt><tt class="docutils literal"><span class="pre">--dvbin-card=&lt;0-15&gt;</span></tt></dt>
<dd>Specifies using card number 0-15 (default: 0).</dd>
<dt><tt class="docutils literal"><span class="pre">--dvbin-file=&lt;filename&gt;</span></tt></dt>
<dd>Instructs mpv to read the channels list from <tt class="docutils literal">&lt;filename&gt;</tt>. The default is
in the mpv configuration directory (usually <tt class="docutils literal"><span class="pre">~/.config/mpv</span></tt>) with the
filename <tt class="docutils literal"><span class="pre">channels.conf.{sat,ter,cbl,atsc,isdbt}</span></tt> (based on your card
type) or <tt class="docutils literal">channels.conf</tt> as a last resort.
Please note that using specific file name with card type is recommended,
since the legacy channel format is not fully standardized
so autodetection of the delivery system may fail otherwise.
For DVB-S/2 cards, a VDR 1.7.x format channel list is recommended
as it allows tuning to DVB-S2 channels, enabling subtitles and
decoding the PMT (which largely improves the demuxing).
Classic mplayer format channel lists are still supported (without
these improvements), and for other card types, only limited VDR
format channel list support is implemented (patches welcome).
For channels with dynamic PID switching or incomplete
<tt class="docutils literal">channels.conf</tt>, <tt class="docutils literal"><span class="pre">--dvbin-full-transponder</span></tt> or the magic PID
<tt class="docutils literal">8192</tt> are recommended.</dd>
<dt><tt class="docutils literal"><span class="pre">--dvbin-timeout=&lt;1-30&gt;</span></tt></dt>
<dd>Maximum number of seconds to wait when trying to tune a frequency before
giving up (default: 30).</dd>
<dt><tt class="docutils literal"><span class="pre">--dvbin-full-transponder=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Apply no filters on program PIDs, only tune to frequency and pass full
transponder to demuxer.
The player frontend selects the streams from the full TS in this case,
so the program which is shown initially may not match the chosen channel.
Switching between the programs is possible by cycling the <tt class="docutils literal">program</tt>
property.
This is useful to record multiple programs on a single transponder,
or to work around issues in the <tt class="docutils literal">channels.conf</tt>.
It is also recommended to use this for channels which switch PIDs
on-the-fly, e.g. for regional news.</p>
<p class="last">Default: <tt class="docutils literal">no</tt></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dvbin-channel-switch-offset=&lt;integer&gt;</span></tt></dt>
<dd><p class="first">This value is not meant for setting via configuration, but used in channel
switching. An <tt class="docutils literal">input.conf</tt> can <tt class="docutils literal">cycle</tt> this value <tt class="docutils literal">up</tt> and <tt class="docutils literal">down</tt>
to perform channel switching. This number effectively gives the offset
to the initially tuned to channel in the channel list.</p>
<p class="last">An example <tt class="docutils literal">input.conf</tt> could contain:
<tt class="docutils literal">H cycle <span class="pre">dvbin-channel-switch-offset</span> up</tt>, <tt class="docutils literal">K cycle <span class="pre">dvbin-channel-switch-offset</span> down</tt></p>
</dd>
</dl>
</div>
<div class="section" id="gpu-renderer-options">
<h2>GPU renderer options</h2>
<p>The following video options are currently all specific to <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>,
<tt class="docutils literal"><span class="pre">--vo=libmpv</span></tt> and <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>, which are the only VOs that implement
them.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--scale=&lt;filter&gt;</span></tt></dt>
<dd><p class="first">The filter function to use when upscaling video.</p>
<dl class="docutils">
<dt><tt class="docutils literal">bilinear</tt></dt>
<dd>Bilinear hardware texture filtering (fastest, very low quality). This is
the default when using the <tt class="docutils literal">fast</tt> profile.</dd>
<dt><tt class="docutils literal">lanczos</tt></dt>
<dd><p class="first">Lanczos scaling. Provides good balance between quality and performance.
This is the default for <tt class="docutils literal">scale</tt>. The number of taps can be controlled
with <tt class="docutils literal"><span class="pre">scale-radius</span></tt>, but is best left unchanged.</p>
<p class="last">(This filter is an alias for <tt class="docutils literal">sinc</tt>-windowed <tt class="docutils literal">sinc</tt>)</p>
</dd>
<dt><tt class="docutils literal">ewa_lanczos</tt></dt>
<dd><p class="first">Elliptic weighted average Lanczos scaling. Also known as Jinc.
Relatively slow, but very good quality. The radius can be controlled
with <tt class="docutils literal"><span class="pre">scale-radius</span></tt>. Increasing the radius makes the filter sharper
but adds more ringing.</p>
<p class="last">(This filter is an alias for <tt class="docutils literal">jinc</tt>-windowed <tt class="docutils literal">jinc</tt>)</p>
</dd>
<dt><tt class="docutils literal">ewa_lanczossharp</tt></dt>
<dd>A slightly sharpened version of <tt class="docutils literal">ewa_lanczos</tt>. This is the default
when using the <tt class="docutils literal"><span class="pre">high-quality</span></tt> profile.</dd>
<dt><tt class="docutils literal">ewa_lanczos4sharpest</tt></dt>
<dd>Very sharp scaler, but also slightly slower than <tt class="docutils literal">ewa_lanczossharp</tt>.
Prone to ringing, so it's recommended to combine this with an
anti-ringing shader. On <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>, setting this filter enables
built-in anti-ringing, so no extra action needs to be taken.</dd>
<dt><tt class="docutils literal">mitchell</tt></dt>
<dd>Mitchell-Netravali. Piecewise cubic filter with a support of radius 2.0.
Provides a balanced compromise of all scaling artifacts. This filter has
both <tt class="docutils literal">B</tt> and <tt class="docutils literal">C</tt> set to <tt class="docutils literal">1/3</tt>. The <tt class="docutils literal">B</tt> and <tt class="docutils literal">C</tt> parameters can
be controlled with <tt class="docutils literal"><span class="pre">--scale-param1</span></tt> and <tt class="docutils literal"><span class="pre">--scale-param2</span></tt>.</dd>
<dt><tt class="docutils literal">hermite</tt></dt>
<dd>Hermite spline. Similar to <tt class="docutils literal">bicubic</tt> but with <tt class="docutils literal">B</tt> set to <tt class="docutils literal">0.0</tt>.
This filter has the special property of having a support of radius 1.0,
making it very fast in comparison, but prone to blocking. This is the
default for <tt class="docutils literal"><span class="pre">--dscale</span></tt>.</dd>
<dt><tt class="docutils literal">catmull_rom</tt></dt>
<dd>Catmull-Rom spline. Similar to <tt class="docutils literal">mitchell</tt>, but with <tt class="docutils literal">B</tt> and <tt class="docutils literal">C</tt>
set to <tt class="docutils literal">0.0</tt> and <tt class="docutils literal">0.5</tt> respectively. This filter is sharper than
<tt class="docutils literal">mitchell</tt>, but prone to ringing.</dd>
<dt><tt class="docutils literal">oversample</tt></dt>
<dd>A version of nearest neighbour that (naively) oversamples pixels, so
that pixels overlapping edges get linearly interpolated instead of
rounded. This essentially removes the small imperfections and judder
artifacts caused by nearest-neighbour interpolation, in exchange for
adding some blur. This can also be used for frame mixing, where it
is commonly known as &quot;smoothmotion&quot; (see <tt class="docutils literal"><span class="pre">--tscale</span></tt>).</dd>
<dt><tt class="docutils literal">linear</tt></dt>
<dd>A <tt class="docutils literal"><span class="pre">--tscale</span></tt> filter.</dd>
</dl>
<p>There are some more filters, but most are not as useful. For a complete
list, pass <tt class="docutils literal">help</tt> as value, e.g.:</p>
<pre class="last literal-block">
mpv --scale=help
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cscale=&lt;filter&gt;</span></tt></dt>
<dd>As <tt class="docutils literal"><span class="pre">--scale</span></tt>, but for interpolating chroma information. If the image is
not subsampled, this option is ignored entirely. If this option is unset,
the filter implied by <tt class="docutils literal"><span class="pre">--scale</span></tt> will be applied.</dd>
<dt><tt class="docutils literal"><span class="pre">--dscale=&lt;filter&gt;</span></tt></dt>
<dd>Like <tt class="docutils literal"><span class="pre">--scale</span></tt>, but apply these filters on downscaling instead.</dd>
<dt><tt class="docutils literal"><span class="pre">--tscale=&lt;filter&gt;</span></tt></dt>
<dd><p class="first">The filter used for interpolating the temporal axis (frames). This is only
used if <tt class="docutils literal"><span class="pre">--interpolation</span></tt> is enabled. The only valid choices for
<tt class="docutils literal"><span class="pre">--tscale</span></tt> are separable convolution filters (use <tt class="docutils literal"><span class="pre">--tscale=help</span></tt> to
get a list). The default is <tt class="docutils literal">oversample</tt>.</p>
<p class="last">Common <tt class="docutils literal"><span class="pre">--tscale</span></tt> choices include <tt class="docutils literal">oversample</tt>, <tt class="docutils literal">linear</tt>,
<tt class="docutils literal">catmull_rom</tt>, <tt class="docutils literal">mitchell</tt>, <tt class="docutils literal">gaussian</tt>, or <tt class="docutils literal">bicubic</tt>. These are
listed in increasing order of smoothness/blurriness, with <tt class="docutils literal">bicubic</tt>
being the smoothest/blurriest and <tt class="docutils literal">oversample</tt> being the sharpest/least
smooth.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-param1=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--scale-param2=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-param1=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-param2=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-param1=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-param2=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-param1=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-param2=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Set filter parameters. By default, these are set to the special string
<tt class="docutils literal">default</tt>, which maps to a scaler-specific default value. Ignored if the
filter is not tunable. Currently, this affects the following filter
parameters:</p>
<dl class="last docutils">
<dt>bicubic</dt>
<dd>Spline parameters (<tt class="docutils literal">B</tt> and <tt class="docutils literal">C</tt>). Defaults to B=1 and C=0.</dd>
<dt>gaussian</dt>
<dd>Scale parameter (<tt class="docutils literal">t</tt>). Increasing this makes the result blurrier.
Defaults to 1.</dd>
<dt>oversample</dt>
<dd>Minimum distance to an edge before interpolation is used. Setting this
to 0 will always interpolate edges, whereas setting it to 0.5 will
never interpolate, thus behaving as if the regular nearest neighbour
algorithm was used. Defaults to 0.0.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-blur=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-blur=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-blur=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-blur=&lt;value&gt;</span></tt></dt>
<dd>Kernel scaling factor (also known as a blur factor). Decreasing this makes
the result sharper, increasing it makes it blurrier (default 0). If set to
0, the kernel's preferred blur factor is used. Note that setting this too
low (eg. 0.5) leads to bad results. It's generally recommended to stick to
values between 0.8 and 1.2.</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-clamp=&lt;0.0-1.0&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-clamp</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-clamp</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-clamp</span></tt></dt>
<dd>Specifies a weight bias to multiply into negative coefficients. Specifying
<tt class="docutils literal"><span class="pre">--scale-clamp=1</span></tt> has the effect of removing negative weights completely,
thus effectively clamping the value range to [0-1]. Values between 0.0 and
1.0 can be specified to apply only a moderate diminishment of negative
weights. This is especially useful for <tt class="docutils literal"><span class="pre">--tscale</span></tt>, where it reduces
excessive ringing artifacts in the temporal domain (which typically
manifest themselves as short flashes or fringes of black, mostly around
moving edges) in exchange for potentially adding more blur. The default for
<tt class="docutils literal"><span class="pre">--tscale-clamp</span></tt> is 1.0, the others default to 0.0.</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-taper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--scale-wtaper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-taper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-wtaper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-taper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-wtaper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-taper=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-wtaper=&lt;value&gt;</span></tt></dt>
<dd>Kernel/window taper factor. Increasing this flattens the filter function.
Value range is 0 to 1. A value of 0 (the default) means no flattening, a
value of 1 makes the filter completely flat (equivalent to a box function).
Values in between mean that some portion will be flat and the actual filter
function will be squeezed into the space in between.</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-radius=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-radius=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-radius=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-radius=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Set radius for tunable filters, must be a float number between 0.5 and
16.0. Defaults to the filter's preferred radius if not specified. Doesn't
work for every scaler and VO combination.</p>
<p class="last">Note that depending on filter implementation details and video scaling
ratio, the radius that actually being used might be different (most likely
being increased a bit).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-antiring=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-antiring=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-antiring=&lt;value&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-antiring=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Set the antiringing strength. This tries to eliminate ringing, but can
introduce other artifacts in the process. Must be a float number between
0.0 and 1.0. The default value of 0.0 disables antiringing entirely.</p>
<p class="last">Note that this doesn't affect the special filters <tt class="docutils literal">bilinear</tt> and
<tt class="docutils literal">bicubic_fast</tt>, nor does it affect any polar (EWA) scalers.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-window=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-window=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--dscale-window=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-window=&lt;window&gt;</span></tt></dt>
<dd>(Advanced users only) Choose a custom windowing function for the kernel.
Defaults to the filter's preferred window if unset. Use
<tt class="docutils literal"><span class="pre">--scale-window=help</span></tt> to get a list of supported windowing functions.</dd>
<dt><tt class="docutils literal"><span class="pre">--scale-wparam=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-wparam=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--cscale-wparam=&lt;window&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--tscale-wparam=&lt;window&gt;</span></tt></dt>
<dd><p class="first">(Advanced users only) Configure the parameter for the window function given
by <tt class="docutils literal"><span class="pre">--scale-window</span></tt> etc. By default, these are set to the special string
<tt class="docutils literal">default</tt>, which maps to a window-specific default value. Ignored if the
window is not tunable. Currently, this affects the following window
parameters:</p>
<dl class="last docutils">
<dt>kaiser</dt>
<dd>Window parameter (alpha). Defaults to 6.33.</dd>
<dt>blackman</dt>
<dd>Window parameter (alpha). Defaults to 0.16.</dd>
<dt>gaussian</dt>
<dd>Scale parameter (t). Increasing this makes the window wider. Defaults
to 1.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--scaler-resizes-only</span></tt></dt>
<dd>Disable the scaler if the video image is not resized. In that case,
<tt class="docutils literal">bilinear</tt> is used instead of whatever is set with <tt class="docutils literal"><span class="pre">--scale</span></tt>. Bilinear
will reproduce the source image perfectly if no scaling is performed.
Enabled by default. Note that this option never affects <tt class="docutils literal"><span class="pre">--cscale</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--correct-downscaling</span></tt></dt>
<dd><p class="first">When using convolution based filters, extend the filter size when
downscaling. Increases quality, but reduces performance while downscaling.
Enabled by default.</p>
<p>This will perform slightly sub-optimally for anamorphic video (but still
better than without it) since it will extend the size to match only the
milder of the scale factors between the axes.</p>
<p class="last">Note: this option is ignored when using bilinear downscaling with <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--linear-downscaling</span></tt></dt>
<dd>Scale in linear light when downscaling. It should only be used with a
<tt class="docutils literal"><span class="pre">--fbo-format</span></tt> that has at least 16 bit precision. This option
has no effect on HDR content. Enabled by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--linear-upscaling</span></tt></dt>
<dd>Scale in linear light when upscaling. Like <tt class="docutils literal"><span class="pre">--linear-downscaling</span></tt>, it
should only be used with a <tt class="docutils literal"><span class="pre">--fbo-format</span></tt> that has at least 16 bits
precisions. This is not usually recommended except for testing/specific
purposes. Users are advised to either enable <tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt> or
keep both options disabled (i.e. scaling in gamma light).</dd>
<dt><tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt></dt>
<dd>When upscaling, use a sigmoidal color transform to avoid emphasizing
ringing artifacts. Enabled by default. This is incompatible with and replaces
<tt class="docutils literal"><span class="pre">--linear-upscaling</span></tt>. (Note that sigmoidization also requires
linearization, so the <tt class="docutils literal">LINEAR</tt> rendering step fires in both cases)</dd>
<dt><tt class="docutils literal"><span class="pre">--sigmoid-center</span></tt></dt>
<dd>The center of the sigmoid curve used for <tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt>, must be a
float between 0.0 and 1.0. Defaults to 0.75 if not specified.</dd>
<dt><tt class="docutils literal"><span class="pre">--sigmoid-slope</span></tt></dt>
<dd>The slope of the sigmoid curve used for <tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt>, must be a
float between 1.0 and 20.0. Defaults to 6.5 if not specified.</dd>
<dt><tt class="docutils literal"><span class="pre">--interpolation</span></tt></dt>
<dd><p class="first">Reduce stuttering caused by mismatches in the video fps and display refresh
rate (also known as judder).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This requires setting the <tt class="docutils literal"><span class="pre">--video-sync</span></tt> option to one
of the <tt class="docutils literal">display-</tt> modes, or it will be silently disabled.
This was not required before mpv 0.14.0.</p>
</div>
<p class="last">This essentially attempts to interpolate the missing frames by convoluting
the video along the temporal axis. The filter used can be controlled using
the <tt class="docutils literal"><span class="pre">--tscale</span></tt> setting.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--interpolation-threshold=&lt;0..1,-1&gt;</span></tt></dt>
<dd><p class="first">Threshold below which frame ratio interpolation gets disabled (default:
<tt class="docutils literal">0.01</tt>). This is calculated as <tt class="docutils literal">abs(disphz/vfps - 1) &lt; threshold</tt>,
where <tt class="docutils literal">vfps</tt> is the speed-adjusted video FPS, and <tt class="docutils literal">disphz</tt> the
display refresh rate. (The speed-adjusted video FPS is roughly equal to
the normal video FPS, but with slowdown and speedup applied. This matters
if you use <tt class="docutils literal"><span class="pre">--video-sync=display-resample</span></tt> to make video run synchronously
to the display FPS, or if you change the <tt class="docutils literal">speed</tt> property.)</p>
<p>The default is intended to enable interpolation in scenarios where
retiming with the <tt class="docutils literal"><span class="pre">--video-sync=display-*</span></tt> cannot adjust the speed of
the video sufficiently for smooth playback. For example if a video is
60.00 FPS and your display refresh rate is 59.94 Hz, interpolation will
never be activated, since the mismatch is within 1% of the refresh
rate. The default also handles the scenario when mpv cannot determine the
container FPS, such as during certain live streams, and may dynamically
toggle interpolation on and off. In this scenario, the default would be to
not use interpolation but rather to allow <tt class="docutils literal"><span class="pre">--video-sync=display-*</span></tt> to
retime the video to match display refresh rate. See
<tt class="docutils literal"><span class="pre">--video-sync-max-video-change</span></tt> for more information about how mpv
will retime video.</p>
<p>Also note that if you use e.g. <tt class="docutils literal"><span class="pre">--video-sync=display-vdrop</span></tt>, small
deviations in the rate can disable interpolation and introduce a
discontinuity every other minute.</p>
<p class="last">Set this to <tt class="docutils literal"><span class="pre">-1</span></tt> to disable this logic.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--interpolation-preserve</span></tt></dt>
<dd>Preserve the previous frames' interpolated results even when renderer
parameters are changed - with the exception of options related to
cropping and video placement, which always invalidate the cache. Enabling
this option makes dynamic updates of renderer settings slightly smoother at
the cost of slightly higher latency in response to such changes. Defaults
to on. (Only affects <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>, note that <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> always
invalidates interpolated frames)</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-pbo</span></tt></dt>
<dd>Enable use of PBOs. On some drivers this can be faster, especially if the
source video size is huge (e.g. so called &quot;4K&quot; video). On other drivers it
might be slower or cause latency issues.</dd>
<dt><tt class="docutils literal"><span class="pre">--dither-depth=&lt;N|no|auto&gt;</span></tt></dt>
<dd><p class="first">Set dither target depth to N. Default: auto.</p>
<dl class="docutils">
<dt>no</dt>
<dd>Disable any dithering done by mpv.</dd>
<dt>auto</dt>
<dd>Automatic selection.
On <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>: detected depth or 8 bpc otherwise
On <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>: detected depth or 8 bpc (for SDR target)</dd>
<dt>8</dt>
<dd>Dither to 8 bit output.</dd>
</dl>
<p class="last">Note that the on-the-wire bit depth cannot be detected except when using
<tt class="docutils literal"><span class="pre">gpu-api=d3d11</span></tt>. Explicitly setting the value to your display's bit depth
is recommended, as dithering performed by some LCD panels can be of low
quality.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dither-size-fruit=&lt;2-8&gt;</span></tt></dt>
<dd><p class="first">Set the size of the dither matrix (default: 6). The actual size of the
matrix is <tt class="docutils literal">(2^N) x (2^N)</tt> for an option value of <tt class="docutils literal">N</tt>, so a value of 6
gives a size of 64x64. The matrix is generated at startup time, and a large
matrix can take rather long to compute (seconds).</p>
<p class="last">Used in <tt class="docutils literal"><span class="pre">--dither=fruit</span></tt> mode only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--dither=&lt;fruit|ordered|error-diffusion|no&gt;</span></tt></dt>
<dd><p class="first">Select dithering algorithm (default: fruit). (Normally, the
<tt class="docutils literal"><span class="pre">--dither-depth</span></tt> option controls whether dithering is enabled.)</p>
<p class="last">The <tt class="docutils literal"><span class="pre">error-diffusion</span></tt> option requires compute shader support. It also
requires large amount of shared memory to run, the size of which depends on
both the kernel (see <tt class="docutils literal"><span class="pre">--error-diffusion</span></tt> option below) and the height of
video window. It will fallback to <tt class="docutils literal">fruit</tt> dithering if there is no enough
shared memory to run the shader.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--temporal-dither</span></tt></dt>
<dd>Enable temporal dithering. (Only active if dithering is enabled in
general.) This changes between 8 different dithering patterns on each frame
by changing the orientation of the tiled dithering matrix. Unfortunately,
this can lead to flicker on LCD displays, since these have a high reaction
time.</dd>
<dt><tt class="docutils literal"><span class="pre">--temporal-dither-period=&lt;1-128&gt;</span></tt></dt>
<dd>Determines how often the dithering pattern is updated when
<tt class="docutils literal"><span class="pre">--temporal-dither</span></tt> is in use. 1 (the default) will update on every video
frame, 2 on every other frame, etc.</dd>
<dt><tt class="docutils literal"><span class="pre">--error-diffusion=&lt;kernel&gt;</span></tt></dt>
<dd><p class="first">The error diffusion kernel to use when <tt class="docutils literal"><span class="pre">--dither=error-diffusion</span></tt> is set.</p>
<dl class="docutils">
<dt><tt class="docutils literal">simple</tt></dt>
<dd>Propagate error to only two adjacent pixels. Fastest but low quality.</dd>
<dt><tt class="docutils literal"><span class="pre">sierra-lite</span></tt></dt>
<dd>Fast with reasonable quality. This is the default.</dd>
<dt><tt class="docutils literal"><span class="pre">floyd-steinberg</span></tt></dt>
<dd>Most notable error diffusion kernel.</dd>
<dt><tt class="docutils literal">atkinson</tt></dt>
<dd>Looks different from other kernels because only fraction of errors will
be propagated during dithering. A typical use case of this kernel is
saving dithered screenshot (in window mode). This kernel produces
slightly smaller file, with still reasonable dithering quality.</dd>
</dl>
<p class="last">There are other kernels (use <tt class="docutils literal"><span class="pre">--error-diffusion=help</span></tt> to list) but most of
them are much slower and demanding even larger amount of shared memory.
Among these kernels, <tt class="docutils literal">burkes</tt> achieves a good balance between performance
and quality, and probably is the one you want to try first.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-debug</span></tt></dt>
<dd>Enables GPU debugging. What this means depends on the API type. For OpenGL,
it calls <tt class="docutils literal">glGetError()</tt>, and requests a debug context. For Vulkan, it
enables validation layers.</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-swapinterval=&lt;n&gt;</span></tt></dt>
<dd><p class="first">Interval in displayed frames between two buffer swaps. 1 is equivalent to
enable VSYNC, 0 to disable VSYNC. Defaults to 1 if not specified.</p>
<p class="last">Note that this depends on proper OpenGL vsync support. On some platforms
and drivers, this only works reliably when in fullscreen mode. It may also
require driver-specific hacks if using multiple monitors, to ensure mpv
syncs to the right one. Compositing window managers can also lead to bad
results, as can missing or incorrect display FPS information (see
<tt class="docutils literal"><span class="pre">--display-fps-override</span></tt>).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--egl-config-id=&lt;ID&gt;</span></tt></dt>
<dd>(EGL only)
Select EGLConfig with specific EGL_CONFIG_ID.
Rendering surfaces and contexts will be created using this EGLConfig.
You can use <tt class="docutils literal"><span class="pre">--msg-level=vo=trace</span></tt> to obtain a list of available configs.</dd>
<dt><tt class="docutils literal"><span class="pre">--egl-output-format=&lt;auto|rgb8|rgba8|rgb10|rgb10_a2|rgb16|rgba16|rgb16f|rgba16f|rgb32f|rgba32f&gt;</span></tt></dt>
<dd><p class="first">(EGL only)
Select a specific EGL output format to utilize for OpenGL rendering.
This option is mutually exclusive with <tt class="docutils literal"><span class="pre">--egl-config-id</span></tt>.
&quot;auto&quot; is the default, which will pick the first usable config
based on the order given by the driver.</p>
<p>All formats are not available.
A fatal error is caused if an unavailable format is selected.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">There is no reliable API to query desktop bit depth in EGL.
You can manually set this option
according to the bit depth of your display.
This option also affects the auto-detection of <tt class="docutils literal"><span class="pre">--dither-depth</span></tt>.</p>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Unlike  <tt class="docutils literal"><span class="pre">--d3d11-output-format</span></tt>, this option also takes effect with <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-device=&lt;device</span> name|UUID&gt;</tt></dt>
<dd>The name or UUID of the Vulkan device to use for rendering and presentation. Use
<tt class="docutils literal"><span class="pre">--vulkan-device=help</span></tt> to see the list of available devices and their
names and UUIDs. If left unspecified, the first enumerated hardware Vulkan
device will be used.</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-swap-mode=&lt;mode&gt;</span></tt></dt>
<dd><p class="first">Controls the presentation mode of the vulkan swapchain. This is similar
to the <tt class="docutils literal"><span class="pre">--opengl-swapinterval</span></tt> option.</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Use the preferred swapchain mode for the vulkan context. (Default)</dd>
<dt>fifo</dt>
<dd>Non-tearing, vsync blocked. Similar to &quot;VSync on&quot;.</dd>
<dt>fifo-relaxed</dt>
<dd>Tearing, vsync blocked. Late frames will tear instead of stuttering.</dd>
<dt>mailbox</dt>
<dd>Non-tearing, not vsync blocked. Similar to &quot;triple buffering&quot;.</dd>
<dt>immediate</dt>
<dd>Tearing, not vsync blocked. Similar to &quot;VSync off&quot;.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-queue-count=&lt;1..8&gt;</span></tt></dt>
<dd>Controls the number of VkQueues used for rendering (limited by how many
your device supports). In theory, using more queues could enable some
parallelism between frames (when using a <tt class="docutils literal"><span class="pre">--swapchain-depth</span></tt> higher than
1), but it can also slow things down on hardware where there's no true
parallelism between queues. (Default: 1)</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-async-transfer</span></tt></dt>
<dd>Enables the use of async transfer queues on supported vulkan devices. Using
them allows transfer operations like texture uploads and blits to happen
concurrently with the actual rendering, thus improving overall throughput
and power consumption. Enabled by default, and should be relatively safe.</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-async-compute</span></tt></dt>
<dd>Enables the use of async compute queues on supported vulkan devices. Using
this, in theory, allows out-of-order scheduling of compute shaders with
graphics shaders, thus enabling the hardware to do more effective work while
waiting for pipeline bubbles and memory operations. Not beneficial on all
GPUs. It's worth noting that if async compute is enabled, and the device
supports more compute queues than graphics queues (bound by the restrictions
set by <tt class="docutils literal"><span class="pre">--vulkan-queue-count</span></tt>), mpv will internally try and prefer the
use of compute shaders over fragment shaders wherever possible. Enabled by
default, although Nvidia users may want to disable it.</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-display-display=&lt;n&gt;</span></tt></dt>
<dd>The index of the display, on the selected Vulkan device, to present on when
using the <tt class="docutils literal">displayvk</tt> GPU context. Use <tt class="docutils literal"><span class="pre">--vulkan-display-display=help</span></tt>
to see the list of available displays. If left unspecified, the first
enumerated display will be used.</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-display-mode=&lt;n&gt;</span></tt></dt>
<dd>The index of the display mode, of the selected Vulkan display, to use when
using the <tt class="docutils literal">displayvk</tt> GPU context. Use <tt class="docutils literal"><span class="pre">--vulkan-display-mode=help</span></tt>
to see the list of available modes. If left unspecified, the first
enumerated mode will be used.</dd>
<dt><tt class="docutils literal"><span class="pre">--vulkan-display-plane=&lt;n&gt;</span></tt></dt>
<dd>The index of the plane, on the selected Vulkan device, to present on when
using the <tt class="docutils literal">displayvk</tt> GPU context. Use <tt class="docutils literal"><span class="pre">--vulkan-display-plane=help</span></tt>
to see the list of available planes. If left unspecified, the first
enumerated plane will be used.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-exclusive-fs=&lt;yes|no&gt;</span></tt></dt>
<dd>Switches the D3D11 swap chain fullscreen state to 'fullscreen' when
fullscreen video is requested. Also known as &quot;exclusive fullscreen&quot; or
&quot;D3D fullscreen&quot; in other applications. Gives mpv full control of
rendering on the swap chain's screen. Off by default.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-warp=&lt;yes|no|auto&gt;</span></tt></dt>
<dd>Use WARP (Windows Advanced Rasterization Platform) with the D3D11 GPU
backend (default: auto). This is a high performance software renderer. By
default, it is only used when the system has no hardware adapters that
support D3D11. While the extended GPU features will work with WARP, they
can be very slow.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-feature-level=&lt;12_1|12_0|11_1|11_0|10_1|10_0|9_3|9_2|9_1&gt;</span></tt></dt>
<dd>Select a specific feature level when using the D3D11 GPU backend. By
default, the highest available feature level is used. This option can be
used to select a lower feature level, which is mainly useful for debugging.
Most extended GPU features will not work at 9_x feature levels.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-flip=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable flip-model presentation, which avoids unnecessarily copying the
backbuffer by sharing surfaces with the DWM (default: yes). This may cause
performance issues with older drivers. If flip-model presentation is not
supported (for example, on Windows 7 without the platform update), mpv will
automatically fall back to the older bitblt presentation model.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-sync-interval=&lt;0..4&gt;</span></tt></dt>
<dd>Schedule each frame to be presented for this number of VBlank intervals.
(default: 1) Setting to 1 will enable VSync, setting to 0 will disable it.</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-adapter=&lt;adapter</span> name|help&gt;</tt></dt>
<dd><p class="first">Select a specific D3D11 adapter to utilize for D3D11 rendering.
Will pick the default adapter if unset. Alternatives are listed
when the name &quot;help&quot; is given.</p>
<p>Checks for matches based on the start of the string, case
insensitive. Thus, if the description of the adapter starts with
the vendor name, that can be utilized as the selection parameter.</p>
<p class="last">Hardware decoders utilizing the D3D11 rendering abstraction's helper
functionality to receive a device, such as D3D11VA or DXVA2's DXGI
mode, will be affected by this choice.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-output-format=&lt;auto|rgba8|bgra8|rgb10_a2|rgba16f&gt;</span></tt></dt>
<dd><p class="first">Select a specific D3D11 output format to utilize for D3D11 rendering.
&quot;auto&quot; is the default, which will pick either rgba8 or rgb10_a2 depending
on the configured desktop bit depth. rgba16f and bgra8 are left out of
the autodetection logic, and are available for manual testing.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Desktop bit depth querying is only available from an API available
from Windows 10. Thus on older systems it will only automatically
utilize the rgba8 output format.</p>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">For <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>, this is used as a best-effort hint and
libplacebo has the last say on which format is utilized.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11-output-csp=&lt;auto|srgb|linear|pq|bt.2020&gt;</span></tt></dt>
<dd><p class="first">Select a specific D3D11 output color space to utilize for D3D11 rendering.
&quot;auto&quot; is the default, which will select the color space of the desktop
on which the swap chain is located.</p>
<p>Values other than &quot;srgb&quot; and &quot;pq&quot; have had issues in testing, so they
are mostly available for manual testing.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Swap chain color space configuration is only available from an API
available from Windows 10. Thus on older systems it will not work.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--d3d11va-zero-copy=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">By default, when using hardware decoding with <tt class="docutils literal"><span class="pre">--gpu-api=d3d11</span></tt>, the
video image will be copied (GPU-to-GPU) from the decoder surface to a
shader resource. Set this option to avoid that copy by sampling directly
from the decoder image. This may increase performance and reduce power
usage, but can cause the image to be sampled incorrectly on the bottom and
right edges due to padding, and may invoke driver bugs, since Direct3D 11
technically does not allow sampling from a decoder surface (though most
drivers support it.)</p>
<p class="last">Currently only relevant for <tt class="docutils literal"><span class="pre">--gpu-api=d3d11</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-app-id=&lt;string&gt;</span></tt></dt>
<dd>Set the client app id for Wayland-based video output methods (default: <tt class="docutils literal">mpv</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-configure-bounds=&lt;auto|yes|no&gt;</span></tt></dt>
<dd>Controls whether or not mpv opts into the configure bounds event if sent by the
compositor (default: auto). This restricts the initial size of the mpv window to
a certain maximum size intended by the compositor. In most cases, this simply
just prevents the mpv window from being larger than the size of the monitor when
it first renders. With the default value of <tt class="docutils literal">auto</tt>, configure-bounds will
silently be ignored if any <tt class="docutils literal">autofit</tt> or <tt class="docutils literal">geometry</tt> type option is also set.</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-content-type=&lt;auto|none|photo|video|game&gt;</span></tt></dt>
<dd>If supported by the compositor, mpv will send a hint using the content-type
protocol telling the compositor what type of content is being displayed. <tt class="docutils literal">auto</tt>
(default) will automatically switch between telling the compositor the content
is a photo, video or possibly none depending on internal heuristics.</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-disable-vsync=&lt;yes|no&gt;</span></tt></dt>
<dd>Disable mpv's internal vsync for Wayland-based video output (default: no).
This is mainly useful for benchmarking wayland VOs when combined with
<tt class="docutils literal"><span class="pre">video-sync=display-desync</span></tt>, <tt class="docutils literal"><span class="pre">--audio=no</span></tt>, and <tt class="docutils literal"><span class="pre">--untimed=yes</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-edge-pixels-pointer=&lt;value&gt;</span></tt></dt>
<dd>Defines the size of an edge border (default: 16) to initiate client side
resize events in the wayland contexts with the mouse. This is only active if
there are no server side decorations from the compositor.</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-edge-pixels-touch=&lt;value&gt;</span></tt></dt>
<dd>Defines the size of an edge border (default: 32) to initiate client side
resizes events in the wayland contexts with touch events.</dd>
<dt><tt class="docutils literal"><span class="pre">--wayland-present=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable the use of wayland's presentation time protocol for more accurate
frame presentation if it is supported by the compositor (default: <tt class="docutils literal">yes</tt>).
This only has an effect if <tt class="docutils literal"><span class="pre">--video-sync=display-...</span></tt> is being used.</dd>
<dt><tt class="docutils literal"><span class="pre">--spirv-compiler=&lt;compiler&gt;</span></tt></dt>
<dd><p class="first">Controls which compiler is used to translate GLSL to SPIR-V. This is
only relevant for <tt class="docutils literal"><span class="pre">--gpu-api=d3d11</span></tt> with <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>.
The possible choices are currently:</p>
<dl class="docutils">
<dt>auto</dt>
<dd>Use the first available compiler. (Default)</dd>
<dt>shaderc</dt>
<dd>Use libshaderc, which is an API wrapper around glslang. This is
generally the most preferred, if available.</dd>
</dl>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This option is deprecated, since there is only one usable value.
It may be removed in the future.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--glsl-shader=&lt;file&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--glsl-shaders=&lt;file-list&gt;</span></tt></dt>
<dd><p class="first">Custom GLSL hooks. These are a flexible way to add custom fragment shaders,
which can be injected at almost arbitrary points in the rendering pipeline,
and access all previous intermediate textures.</p>
<p>Each use of the <tt class="docutils literal"><span class="pre">--glsl-shader</span></tt> option will add another file to the
internal list of shaders, while <tt class="docutils literal"><span class="pre">--glsl-shaders</span></tt> takes a list of files,
and overwrites the internal list with it. The latter is a path list option
(see <a class="reference internal" href="#list-options">List Options</a> for details).</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">The syntax is not stable yet and may change any time.</p>
</div>
<p>The general syntax of a user shader looks like this:</p>
<pre class="literal-block">
//!METADATA ARGS...
//!METADATA ARGS...

vec4 hook() {
   ...
   return something;
}

//!METADATA ARGS...
//!METADATA ARGS...

...
</pre>
<p>Each section of metadata, along with the non-metadata lines after it,
defines a single block. There are currently two types of blocks, HOOKs and
TEXTUREs.</p>
<p>A <tt class="docutils literal">TEXTURE</tt> block can set the following options:</p>
<dl class="docutils">
<dt>TEXTURE &lt;name&gt; (required)</dt>
<dd>The name of this texture. Hooks can then bind the texture under this
name using BIND. This must be the first option of the texture block.</dd>
<dt>SIZE &lt;width&gt; [&lt;height&gt;] [&lt;depth&gt;] (required)</dt>
<dd>The dimensions of the texture. The height and depth are optional. The
type of texture (1D, 2D or 3D) depends on the number of components
specified.</dd>
<dt>FORMAT &lt;name&gt; (required)</dt>
<dd><p class="first">The texture format for the samples. Supported texture formats are listed
in debug logging when the <tt class="docutils literal">gpu</tt> VO is initialized (look for
<tt class="docutils literal">Texture formats:</tt>). Usually, this follows OpenGL naming conventions.
For example, <tt class="docutils literal">rgb16</tt> provides 3 channels with normalized 16 bit
components. One oddity are float formats: for example, <tt class="docutils literal">rgba16f</tt> has
16 bit internal precision, but the texture data is provided as 32 bit
floats, and the driver converts the data on texture upload.</p>
<p class="last">Although format names follow a common naming convention, not all of them
are available on all hardware, drivers, GL versions, and so on.</p>
</dd>
<dt>FILTER &lt;LINEAR|NEAREST&gt;</dt>
<dd>The min/magnification filter used when sampling from this texture.</dd>
<dt>BORDER &lt;CLAMP|REPEAT|MIRROR&gt;</dt>
<dd>The border wrapping mode used when sampling from this texture.</dd>
</dl>
<p>Following the metadata is a string of bytes in hexadecimal notation that
define the raw texture data, corresponding to the format specified by
<cite>FORMAT</cite>, on a single line with no extra whitespace.</p>
<p>A <tt class="docutils literal">HOOK</tt> block can set the following options:</p>
<dl class="docutils">
<dt>HOOK &lt;name&gt; (required)</dt>
<dd>The texture which to hook into. May occur multiple times within a
metadata block, up to a predetermined limit. See below for a list of
hookable textures.</dd>
<dt>DESC &lt;title&gt;</dt>
<dd>User-friendly description of the pass. This is the name used when
representing this shader in the list of passes for property
<cite>vo-passes</cite>.</dd>
<dt>BIND &lt;name&gt;</dt>
<dd>Loads a texture (either coming from mpv or from a <tt class="docutils literal">TEXTURE</tt> block)
and makes it available to the pass. When binding textures from mpv,
this will also set up macros to facilitate accessing it properly. See
below for a list. By default, no textures are bound. The special name
HOOKED can be used to refer to the texture that triggered this pass.</dd>
<dt>SAVE &lt;name&gt;</dt>
<dd>Gives the name of the texture to save the result of this pass into. By
default, this is set to the special name HOOKED which has the effect of
overwriting the hooked texture.</dd>
<dt>WIDTH &lt;szexpr&gt;, HEIGHT &lt;szexpr&gt;</dt>
<dd>Specifies the size of the resulting texture for this pass. <tt class="docutils literal">szexpr</tt>
refers to an expression in RPN (reverse polish notation), using the
operators + - * / &gt; &lt; !, floating point literals, and references to
sizes of existing texture (such as MAIN.width or CHROMA.height),
OUTPUT, or NATIVE_CROPPED (size of an input texture cropped after
pan-and-scan, video-align-x/y, video-pan-x/y, etc. and possibly
prescaled). By default, these are set to HOOKED.w and HOOKED.h,
espectively.</dd>
<dt>WHEN &lt;szexpr&gt;</dt>
<dd>Specifies a condition that needs to be true (non-zero) for the shader
stage to be evaluated. If it fails, it will silently be omitted. (Note
that a shader stage like this which has a dependency on an optional
hook point can still cause that hook point to be saved, which has some
minor overhead)</dd>
<dt>OFFSET &lt;ox oy | ALIGN&gt;</dt>
<dd><p class="first">Indicates a pixel shift (offset) introduced by this pass. These pixel
offsets will be accumulated and corrected during the next scaling pass
(<tt class="docutils literal">cscale</tt> or <tt class="docutils literal">scale</tt>). The default values are 0 0 which correspond
to no shift. Note that offsets are ignored when not overwriting the
hooked texture.</p>
<p class="last">A special value of <tt class="docutils literal">ALIGN</tt> will attempt to fix existing offset of
HOOKED by align it with reference. It requires HOOKED to be resizable
(see below). It works transparently with fragment shader. For compute
shader, the predefined <tt class="docutils literal">texmap</tt> macro is required to handle coordinate
mapping.</p>
</dd>
<dt>COMPONENTS &lt;n&gt;</dt>
<dd>Specifies how many components of this pass's output are relevant and
should be stored in the texture, up to 4 (rgba). By default, this value
is equal to the number of components in HOOKED.</dd>
<dt>COMPUTE &lt;bw&gt; &lt;bh&gt; [&lt;tw&gt; &lt;th&gt;]</dt>
<dd><p class="first">Specifies that this shader should be treated as a compute shader, with
the block size bw and bh. The compute shader will be dispatched with
however many blocks are necessary to completely tile over the output.
Within each block, there will be tw*th threads, forming a single work
group. In other words: tw and th specify the work group size, which can
be different from the block size. So for example, a compute shader with
bw, bh = 32 and tw, th = 8 running on a 500x500 texture would dispatch
16x16 blocks (rounded up), each with 8x8 threads.</p>
<p class="last">Compute shaders in mpv are treated a bit different from fragment
shaders. Instead of defining a <tt class="docutils literal">vec4 hook</tt> that produces an output
sample, you directly define <tt class="docutils literal">void hook</tt> which writes to a fixed
writeonly image unit named <tt class="docutils literal">out_image</tt> (this is bound by mpv) using
<cite>imageStore</cite>. To help translate texture coordinates in the absence of
vertices, mpv provides a special function <tt class="docutils literal">NAME_map(id)</tt> to map from
the texel space of the output image to the texture coordinates for all
bound textures. In particular, <tt class="docutils literal">NAME_pos</tt> is equivalent to
<tt class="docutils literal">NAME_map(gl_GlobalInvocationID)</tt>, although using this only really
makes sense if (tw,th) == (bw,bh).</p>
</dd>
</dl>
<p>Each bound mpv texture (via <tt class="docutils literal">BIND</tt>) will make available the following
definitions to that shader pass, where NAME is the name of the bound
texture:</p>
<dl class="docutils">
<dt>vec4 NAME_tex(vec2 pos)</dt>
<dd>The sampling function to use to access the texture at a certain spot
(in texture coordinate space, range [0,1]). This takes care of any
necessary normalization conversions.</dd>
<dt>vec4 NAME_texOff(vec2 offset)</dt>
<dd>Sample the texture at a certain offset in pixels. This works like
NAME_tex but additionally takes care of necessary rotations, so that
sampling at e.g. vec2(-1,0) is always one pixel to the left.</dd>
<dt>vec2 NAME_pos</dt>
<dd>The local texture coordinate of that texture, range [0,1].</dd>
<dt>vec2 NAME_size</dt>
<dd>The (rotated) size in pixels of the texture.</dd>
<dt>mat2 NAME_rot</dt>
<dd>The rotation matrix associated with this texture. (Rotates pixel space
to texture coordinates)</dd>
<dt>vec2 NAME_pt</dt>
<dd>The (unrotated) size of a single pixel, range [0,1].</dd>
<dt>float NAME_mul</dt>
<dd>The coefficient that needs to be multiplied into the texture contents
in order to normalize it to the range [0,1].</dd>
<dt>sampler NAME_raw</dt>
<dd>The raw bound texture itself. The use of this should be avoided unless
absolutely necessary.</dd>
</dl>
<p>Normally, users should use either NAME_tex or NAME_texOff to read from the
texture. For some shaders however , it can be better for performance to do
custom sampling from NAME_raw, in which case care needs to be taken to
respect NAME_mul and NAME_rot.</p>
<p>In addition to these parameters, the following uniforms are also globally
available:</p>
<dl class="docutils">
<dt>float random</dt>
<dd>A random number in the range [0-1], different per frame.</dd>
<dt>int frame</dt>
<dd>A simple count of frames rendered, increases by one per frame and never
resets (regardless of seeks).</dd>
<dt>vec2 input_size</dt>
<dd>The size in pixels of the input image (possibly cropped and prescaled).</dd>
<dt>vec2 target_size</dt>
<dd>The size in pixels of the visible part of the scaled (and possibly
cropped) image.</dd>
<dt>vec2 tex_offset</dt>
<dd>Texture offset introduced by user shaders or options like panscan, video-align-x/y, video-pan-x/y.</dd>
</dl>
<p>Internally, vo_gpu may generate any number of the following textures.
Whenever a texture is rendered and saved by vo_gpu, all of the passes
that have hooked into it will run, in the order they were added by the
user. This is a list of the legal hook points:</p>
<dl class="docutils">
<dt>RGB, LUMA, CHROMA, ALPHA, XYZ (resizable)</dt>
<dd>Source planes (raw). Which of these fire depends on the image format of
the source.</dd>
<dt>CHROMA_SCALED, ALPHA_SCALED (fixed)</dt>
<dd>Source planes (upscaled). These only fire on subsampled content.</dd>
<dt>NATIVE (resizable)</dt>
<dd>The combined image, in the source colorspace, before conversion to RGB.</dd>
<dt>MAINPRESUB (resizable)</dt>
<dd>The image, after conversion to RGB, but before
<tt class="docutils literal"><span class="pre">--blend-subtitles=video</span></tt> is applied.</dd>
<dt>MAIN (resizable)</dt>
<dd>The main image, after conversion to RGB but before upscaling.</dd>
<dt>LINEAR (fixed)</dt>
<dd>Linear light image, before scaling. This only fires when
<tt class="docutils literal"><span class="pre">--linear-upscaling</span></tt>, <tt class="docutils literal"><span class="pre">--linear-downscaling</span></tt> or
<tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt> is in effect.</dd>
<dt>SIGMOID (fixed)</dt>
<dd>Sigmoidized light, before scaling. This only fires when
<tt class="docutils literal"><span class="pre">--sigmoid-upscaling</span></tt> is in effect.</dd>
<dt>PREKERNEL (fixed)</dt>
<dd>The image immediately before the scaler kernel runs.</dd>
<dt>POSTKERNEL (fixed)</dt>
<dd>The image immediately after the scaler kernel runs.</dd>
<dt>SCALED (fixed)</dt>
<dd>The final upscaled image, before color management.</dd>
<dt>OUTPUT (fixed)</dt>
<dd>The final output image, after color management but before dithering and
drawing to screen.</dd>
</dl>
<p class="last">Only the textures labelled with <tt class="docutils literal">resizable</tt> may be transformed by the
pass. When overwriting a texture marked <tt class="docutils literal">fixed</tt>, the WIDTH, HEIGHT and
OFFSET must be left at their default values.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--glsl-shader=&lt;file&gt;</span></tt></dt>
<dd>CLI/config file only alias for <tt class="docutils literal"><span class="pre">--glsl-shaders-append</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--glsl-shader-opts=param1=value1,param2=value2,...</span></tt></dt>
<dd>Specifies the options to use for tunable shader parameters. You can target
specific named shaders by prefixing the shader name with a <tt class="docutils literal">/</tt>, e.g.
<tt class="docutils literal">shader/param=value</tt>. Without a prefix, parameters affect all shaders.
The shader name is the base part of the shader filename, without the
extension. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt><tt class="docutils literal"><span class="pre">--deband</span></tt></dt>
<dd>Enable the debanding algorithm. This greatly reduces the amount of visible
banding, blocking and other quantization artifacts, at the expense of
very slightly blurring some of the finest details. In practice, it's
virtually always an improvement - the only reason to disable it would be
for performance.</dd>
<dt><tt class="docutils literal"><span class="pre">--deband-iterations=&lt;0..16&gt;</span></tt></dt>
<dd>The number of debanding steps to perform per sample. Each step reduces a
bit more banding, but takes time to compute. Note that the strength of each
step falls off very quickly, so high numbers (&gt;4) are practically useless.
(Default 1)</dd>
<dt><tt class="docutils literal"><span class="pre">--deband-threshold=&lt;0..4096&gt;</span></tt></dt>
<dd>The debanding filter's cut-off threshold. Higher numbers increase the
debanding strength dramatically but progressively diminish image details.
(Default 48)</dd>
<dt><tt class="docutils literal"><span class="pre">--deband-range=&lt;1..64&gt;</span></tt></dt>
<dd><p class="first">The debanding filter's initial radius. The radius increases linearly for
each iteration. A higher radius will find more gradients, but a lower
radius will smooth more aggressively. (Default 16)</p>
<p class="last">If you increase the <tt class="docutils literal"><span class="pre">--deband-iterations</span></tt>, you should probably decrease
this to compensate.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--deband-grain=&lt;0..4096&gt;</span></tt></dt>
<dd>Add some extra noise to the image. This significantly helps cover up
remaining quantization artifacts. Higher numbers add more noise. (Default
32)</dd>
<dt><tt class="docutils literal"><span class="pre">--corner-rounding=&lt;0..1&gt;</span></tt></dt>
<dd>If set to a value above 0.0, the output will be rendered with rounded
corners, as if an alpha transparency mask had been applied. The value
indicates the relative fraction of the side length to round - a value of
1.0 rounds the corners as much as possible. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt><tt class="docutils literal"><span class="pre">--sharpen=&lt;value&gt;</span></tt></dt>
<dd>If set to a value other than 0, enable an unsharp masking filter. Positive
values will sharpen the image (but add more ringing and aliasing). Negative
values will blur the image. If your GPU is powerful enough, consider
alternatives like the <tt class="docutils literal">ewa_lanczossharp</tt> scale filter, or the
<tt class="docutils literal"><span class="pre">--scale-blur</span></tt> option. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-glfinish</span></tt></dt>
<dd>Call <tt class="docutils literal">glFinish()</tt> before swapping buffers (default: disabled). Slower,
but might improve results when doing framedropping. Can completely ruin
performance. The details depend entirely on the OpenGL driver.</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-waitvsync</span></tt></dt>
<dd><p class="first">Call <tt class="docutils literal">glXWaitVideoSyncSGI</tt> after each buffer swap (default: disabled).
This may or may not help with video timing accuracy and frame drop. It's
possible that this makes video output slower, or has no effect at all.</p>
<p class="last">X11/GLX only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-dwmflush=&lt;no|windowed|yes|auto&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Calls <tt class="docutils literal">DwmFlush</tt> after swapping buffers on Windows (default: auto). It
also sets <tt class="docutils literal">SwapInterval(0)</tt> to ignore the OpenGL timing. Values are: no
(disabled), windowed (only in windowed mode), yes (also in full screen).</p>
<p>The value <tt class="docutils literal">auto</tt> will try to determine whether the compositor is active,
and calls <tt class="docutils literal">DwmFlush</tt> only if it seems to be.</p>
<p class="last">This may help to get more consistent frame intervals, especially with
high-fps clips - which might also reduce dropped frames. Typically, a value
of <tt class="docutils literal">windowed</tt> should be enough, since full screen may bypass the DWM.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--angle-d3d11-feature-level=&lt;11_0|10_1|10_0|9_3&gt;</span></tt></dt>
<dd><p class="first">Selects a specific feature level when using the ANGLE backend with D3D11.
By default, the highest available feature level is used. This option can be
used to select a lower feature level, which is mainly useful for debugging.
Note that OpenGL ES 3.0 is only supported at feature level 10_1 or higher.
Most extended OpenGL features will not work at lower feature levels
(similar to <tt class="docutils literal"><span class="pre">--gpu-dumb-mode</span></tt>).</p>
<p class="last">Windows with ANGLE only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--angle-d3d11-warp=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Use WARP (Windows Advanced Rasterization Platform) when using the ANGLE
backend with D3D11 (default: auto). This is a high performance software
renderer. By default, it is used when the Direct3D hardware does not
support Direct3D 11 feature level 9_3. While the extended OpenGL features
will work with WARP, they can be very slow.</p>
<p class="last">Windows with ANGLE only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--angle-egl-windowing=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Use ANGLE's built in EGL windowing functions to create a swap chain
(default: auto). If this is set to <tt class="docutils literal">no</tt> and the D3D11 renderer is in use,
ANGLE's built in swap chain will not be used and a custom swap chain that
is optimized for video rendering will be created instead. If set to
<tt class="docutils literal">auto</tt>, a custom swap chain will be used for D3D11 and the built in swap
chain will be used for D3D9. This option is mainly for debugging purposes,
in case the custom swap chain has poor performance or does not work.</p>
<p>If set to <tt class="docutils literal">yes</tt>, the <tt class="docutils literal"><span class="pre">--angle-flip</span></tt> option will have no effect.</p>
<p class="last">Windows with ANGLE only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--angle-flip=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Enable flip-model presentation, which avoids unnecessarily copying the
backbuffer by sharing surfaces with the DWM (default: yes). This may cause
performance issues with older drivers. If flip-model presentation is not
supported (for example, on Windows 7 without the platform update), mpv will
automatically fall back to the older bitblt presentation model.</p>
<p>If set to <tt class="docutils literal">no</tt>, the <tt class="docutils literal"><span class="pre">--angle-swapchain-length</span></tt> option will have no
effect.</p>
<p class="last">Windows with ANGLE only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--angle-renderer=&lt;d3d9|d3d11|auto&gt;</span></tt></dt>
<dd><p class="first">Forces a specific renderer when using the ANGLE backend (default: auto). In
auto mode this will pick D3D11 for systems that support Direct3D 11 feature
level 9_3 or higher, and D3D9 otherwise. This option is mainly for
debugging purposes. Normally there is no reason to force a specific
renderer, though <tt class="docutils literal"><span class="pre">--angle-renderer=d3d9</span></tt> may give slightly better
performance on old hardware. Note that the D3D9 renderer only supports
OpenGL ES 2.0, so most extended OpenGL features will not work if this
renderer is selected (similar to <tt class="docutils literal"><span class="pre">--gpu-dumb-mode</span></tt>).</p>
<p class="last">Windows with ANGLE only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-force-dedicated-gpu=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Deactivates the automatic graphics switching and forces the dedicated GPU.
(default: no)</p>
<p class="last">macOS only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cocoa-cb-sw-renderer=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Use the Apple Software Renderer when using cocoa-cb (default: auto). If set
to <tt class="docutils literal">no</tt> the software renderer is never used and instead fails when a the
usual pixel format could not be created, <tt class="docutils literal">yes</tt> will always only use the
software renderer, and <tt class="docutils literal">auto</tt> only falls back to the software renderer
when the usual pixel format couldn't be created.</p>
<p class="last">macOS and cocoa-cb only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cocoa-cb-10bit-context=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Creates a 10bit capable pixel format for the context creation (default: yes).
Instead of 8bit integer framebuffer a 16bit half-float framebuffer is
requested.</p>
<p class="last">macOS and cocoa-cb only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cocoa-cb-output-csp=&lt;csp&gt;</span></tt></dt>
<dd><p class="first">This sets the color space of the layer to activate the macOS color
transformation. Depending on the color space used the system's EDR (HDR)
support will be activated. To get correct results, this needs to be set to
the color primaries/transfer characteristics of the VO target. It is recommended
to use this switch together with <tt class="docutils literal"><span class="pre">--target-trc</span></tt> and <tt class="docutils literal"><span class="pre">--target-prim</span></tt>.</p>
<p><tt class="docutils literal">&lt;csp&gt;</tt> can be one of the following:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">Sets the color space to the icc profile of the
screen (default).</td>
</tr>
<tr class="field"><th class="field-name">display-p3:</th><td class="field-body">DCI P3 primaries, a D65 white point and the sRGB
transfer function.</td>
</tr>
<tr class="field"><th class="field-name">display-p3-hlg:</th><td class="field-body">DCI P3 primaries, a D65 white point and the Hybrid
Log-Gamma (HLG) transfer function.</td>
</tr>
<tr class="field"><th class="field-name">display-p3-pq:</th><td class="field-body">DCI P3 primaries, a D65 white point and the Perceptual
Quantizer (PQ) transfer function.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">display-p3-linear:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">DCI P3 primaries, a D65 white point and linear transfer function.</td>
</tr>
<tr class="field"><th class="field-name">dci-p3:</th><td class="field-body">DCI P3 color space.</td>
</tr>
<tr class="field"><th class="field-name">bt.2020:</th><td class="field-body">ITU BT.2020 color space.</td>
</tr>
<tr class="field"><th class="field-name">bt.2020-linear:</th><td class="field-body">ITU BT.2020 color space and linear transfer function.</td>
</tr>
<tr class="field"><th class="field-name">bt.2100-hlg:</th><td class="field-body">ITU BT.2100 and the Hybrid Log-Gamma (HLG) transfer function.</td>
</tr>
<tr class="field"><th class="field-name">bt.2100-pq:</th><td class="field-body">ITU BT.2100 and the Perceptual Quantizer (PQ) transfer function.</td>
</tr>
<tr class="field"><th class="field-name">bt.709:</th><td class="field-body">ITU BT.709 color space.</td>
</tr>
<tr class="field"><th class="field-name">srgb:</th><td class="field-body">sRGB colorimetry and non-linear transfer function.</td>
</tr>
<tr class="field"><th class="field-name">srgb-linear:</th><td class="field-body">Same as sRGB but linear transfer function.</td>
</tr>
<tr class="field"><th class="field-name">rgb-linear:</th><td class="field-body">RGB and linear transfer function.</td>
</tr>
<tr class="field"><th class="field-name">adobe:</th><td class="field-body">Adobe RGB (1998) color space.</td>
</tr>
</tbody>
</table>
<p class="last">macOS and cocoa-cb only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-title-bar-appearance=&lt;appearance&gt;</span></tt></dt>
<dd><p class="first">Sets the appearance of the title bar (default: auto). Not all combinations
of appearances and <tt class="docutils literal"><span class="pre">--macos-title-bar-material</span></tt> materials make sense or
are unique. Appearances that are not supported by you current macOS version
fall back to the default value.
macOS only</p>
<p><tt class="docutils literal">&lt;appearance&gt;</tt> can be one of the following:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">Detects the system settings and sets the title
bar appearance appropriately. On macOS 10.14 it
also detects run time changes.</td>
</tr>
<tr class="field"><th class="field-name">aqua:</th><td class="field-body">The standard macOS Light appearance.</td>
</tr>
<tr class="field"><th class="field-name">darkAqua:</th><td class="field-body">The standard macOS Dark appearance. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">vibrantLight:</th><td class="field-body">Light vibrancy appearance with.</td>
</tr>
<tr class="field"><th class="field-name">vibrantDark:</th><td class="field-body">Dark vibrancy appearance with.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">aquaHighContrast:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Light Accessibility appearance. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">darkAquaHighContrast:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Dark Accessibility appearance. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">vibrantLightHighContrast:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Light vibrancy Accessibility appearance.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">vibrantDarkHighContrast:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Dark vibrancy Accessibility appearance.
(macOS 10.14+)</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-title-bar-material=&lt;material&gt;</span></tt></dt>
<dd><p class="first">Sets the material of the title bar (default: titlebar). All deprecated
materials should not be used on macOS 10.14+ because their functionality
is not guaranteed. Not all combinations of materials and
<tt class="docutils literal"><span class="pre">--macos-title-bar-appearance</span></tt> appearances make sense or are unique.
Materials that are not supported by you current macOS version fall back to
the default value.
macOS only</p>
<p><tt class="docutils literal">&lt;material&gt;</tt> can be one of the following:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">titlebar:</th><td class="field-body">The standard macOS title bar material.</td>
</tr>
<tr class="field"><th class="field-name">selection:</th><td class="field-body">The standard macOS selection material.</td>
</tr>
<tr class="field"><th class="field-name">menu:</th><td class="field-body">The standard macOS menu material. (macOS 10.11+)</td>
</tr>
<tr class="field"><th class="field-name">popover:</th><td class="field-body">The standard macOS popover material. (macOS 10.11+)</td>
</tr>
<tr class="field"><th class="field-name">sidebar:</th><td class="field-body">The standard macOS sidebar material. (macOS 10.11+)</td>
</tr>
<tr class="field"><th class="field-name">headerView:</th><td class="field-body">The standard macOS header view material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">sheet:</th><td class="field-body">The standard macOS sheet material. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">windowBackground:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">The standard macOS window background material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">hudWindow:</th><td class="field-body">The standard macOS hudWindow material. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">fullScreen:</th><td class="field-body">The standard macOS full screen material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">toolTip:</th><td class="field-body">The standard macOS tool tip material. (macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">contentBackground:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">The standard macOS content background material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">underWindowBackground:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">The standard macOS under window background material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">underPageBackground:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">The standard macOS under page background material.
(deprecated in macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">dark:</th><td class="field-body">The standard macOS dark material.
(deprecated in macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">light:</th><td class="field-body">The standard macOS light material.
(macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">mediumLight:</th><td class="field-body">The standard macOS mediumLight material.
(macOS 10.11+, deprecated in macOS 10.14+)</td>
</tr>
<tr class="field"><th class="field-name">ultraDark:</th><td class="field-body">The standard macOS ultraDark material.
(macOS 10.11+ deprecated in macOS 10.14+)</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-title-bar-color=&lt;color&gt;</span></tt></dt>
<dd>Sets the color of the title bar (default: completely transparent). Is
influenced by <tt class="docutils literal"><span class="pre">--macos-title-bar-appearance</span></tt> and
<tt class="docutils literal"><span class="pre">--macos-title-bar-material</span></tt>.
See <tt class="docutils literal"><span class="pre">--sub-color</span></tt> for color syntax.</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-fs-animation-duration=&lt;default|0-1000&gt;</span></tt></dt>
<dd>Sets the fullscreen resize animation duration in ms (default: default).
The default value is slightly less than the system's animation duration
(500ms) to prevent some problems when the end of an async animation happens
at the same time as the end of the system wide fullscreen animation. Setting
anything higher than 500ms will only prematurely cancel the resize animation
after the system wide animation ended. The upper limit is still set at
1000ms since it's possible that Apple or the user changes the system
defaults. Anything higher than 1000ms though seems too long and shouldn't be
set anyway.
(macOS)</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-app-activation-policy=&lt;regular|accessory|prohibited&gt;</span></tt></dt>
<dd><p class="first">Changes the App activation policy. With accessory the mpv icon in the Dock
can be hidden. (default: regular)</p>
<p class="last">macOS only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-geometry-calculation=&lt;visible|whole&gt;</span></tt></dt>
<dd><p class="first">This changes the rectangle which is used to calculate the screen position
and size of the window (default: visible). <tt class="docutils literal">visible</tt> takes the the menu
bar and Dock into account and the window is only positioned/sized within the
visible screen frame rectangle, <tt class="docutils literal">whole</tt> takes the whole screen frame
rectangle and ignores the menu bar and Dock. Other previous restrictions
still apply, like the window can't be placed on top of the menu bar etc.</p>
<p class="last">macOS only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-render-timer=&lt;timer&gt;</span></tt></dt>
<dd><p class="first">Sets the mode (default: callback) for syncing the rendering of frames to the display's
vertical refresh rate.
macOS and Vulkan (macvk) only.</p>
<p><tt class="docutils literal">&lt;timer&gt;</tt> can be one of the following:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">callback:</th><td class="field-body">Syncs to the CVDisplayLink callback</td>
</tr>
<tr class="field"><th class="field-name">precise:</th><td class="field-body">Syncs to the time of the next vertical display refresh reported by the
CVDisplayLink callback provided information</td>
</tr>
<tr class="field"><th class="field-name">system:</th><td class="field-body">No manual syncing, depend on the layer mechanic and the next drawable</td>
</tr>
<tr class="field"><th class="field-name">feedback:</th><td class="field-body">Same as precise but uses the presentation feedback core mechanism</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--macos-menu-shortcuts=&lt;yes|no&gt;</span></tt></dt>
<dd>Enables the default menu bar shortcuts (default: yes). The menu bar shortcuts always take
precedence over any other shortcuts, they are not propagated to the mpv core and they can't be
used in config files like <tt class="docutils literal">input.conf</tt> or script bindings.</dd>
<dt><tt class="docutils literal"><span class="pre">--android-surface-size=&lt;WxH&gt;</span></tt></dt>
<dd><p class="first">Set dimensions of the rendering surface used by the Android gpu context.
Needs to be set by the embedding application if the dimensions change during
runtime (i.e. if the device is rotated), via the surfaceChanged callback.</p>
<p class="last">Android with <tt class="docutils literal"><span class="pre">--gpu-context=android</span></tt> only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-sw</span></tt></dt>
<dd>Continue even if a software renderer is detected.</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-context=&lt;context1,context2,...[,]&gt;</span></tt></dt>
<dd><p class="first">Specify a priority list of the GPU contexts to be used.
The value <tt class="docutils literal">auto</tt> (the default) selects the GPU context with the default autoprobe
order. You can also pass <tt class="docutils literal">help</tt> to get a complete list of compiled in backends
(sorted by the default autoprobe order).</p>
<p>Note that the default GPU context is subject to change, and must not be relied upon.
If a certain GPU context needs to be used, it must be explicitly specified.</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>auto-select (default). Note that this context must be used alone and
does not participate in the priority list.</dd>
<dt>win</dt>
<dd>Win32/WGL</dd>
<dt>winvk</dt>
<dd>VK_KHR_win32_surface</dd>
<dt>angle</dt>
<dd>Direct3D11 through the OpenGL ES translation layer ANGLE. This supports
almost everything the <tt class="docutils literal">win</tt> backend does (if the ANGLE build is new
enough).</dd>
<dt>dxinterop (experimental)</dt>
<dd>Win32, using WGL for rendering and Direct3D 9Ex for presentation. Works
on Nvidia and AMD. Newer Intel chips with the latest drivers may also
work.</dd>
<dt>d3d11</dt>
<dd>Win32, with native Direct3D 11 rendering.</dd>
<dt>x11</dt>
<dd>X11/GLX (deprecated/legacy, EGL is preferred these days)</dd>
<dt>x11vk</dt>
<dd>VK_KHR_xlib_surface</dd>
<dt>wayland</dt>
<dd>Wayland/EGL</dd>
<dt>waylandvk</dt>
<dd>VK_KHR_wayland_surface</dd>
<dt>drm</dt>
<dd>DRM/EGL</dd>
<dt>displayvk</dt>
<dd>VK_KHR_display. This backend is roughly the Vulkan equivalent of
DRM/EGL, allowing for direct rendering via Vulkan without a display
manager.</dd>
<dt>x11egl</dt>
<dd>X11/EGL</dd>
<dt>android</dt>
<dd>Android/EGL. Requires <tt class="docutils literal"><span class="pre">--wid</span></tt> be set to an <tt class="docutils literal">android.view.Surface</tt>.</dd>
<dt>macvk</dt>
<dd>Vulkan on macOS with a metal surface through a translation layer (experimental)</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-api=&lt;type1,type2,...[,]&gt;</span></tt></dt>
<dd><p class="first">Specify a priority list of accepted graphics APIs.</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Use any available API (default). Note that the default GPU API used for this
value is subject to change, and must not be relied upon. If a certain GPU API
needs to be used, it must be explicitly specified.</dd>
<dt>opengl</dt>
<dd>Allow only OpenGL (requires OpenGL 2.1+ or GLES 2.0+)</dd>
<dt>vulkan</dt>
<dd>Allow only Vulkan (requires a valid/working <tt class="docutils literal"><span class="pre">--spirv-compiler</span></tt>)</dd>
<dt>d3d11</dt>
<dd>Allow only <tt class="docutils literal"><span class="pre">--gpu-context=d3d11</span></tt></dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-es=&lt;mode&gt;</span></tt></dt>
<dd><p class="first">Controls which type of OpenGL context will be accepted:</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Allow all types of OpenGL (default)</dd>
<dt>yes</dt>
<dd>Only allow GLES</dd>
<dt>no</dt>
<dd>Only allow desktop/core GL</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--fbo-format=&lt;fmt&gt;</span></tt></dt>
<dd><p class="first">Selects the internal format of textures used for FBOs. The format can
influence performance and quality of the video output. <tt class="docutils literal">fmt</tt> can be one
of: rgb8, rgb10, rgb10_a2, rgb16, rgb16f, rgb32f, rgba12, rgba16, rgba16f,
rgba16hf, rgba32f.</p>
<p class="last">Default: <tt class="docutils literal">auto</tt>, which first attempts to utilize 16bit float
(rgba16f, rgba16hf), and falls back to rgba16 if those are not available.
Finally, attempts to utilize rgb10_a2 or rgba8 if all of the previous formats
are not available.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gamma-factor=&lt;0.1..2.0&gt;</span></tt></dt>
<dd><p class="first">Set an additional raw gamma factor (default: 1.0). If gamma is adjusted in
other ways (like with the <tt class="docutils literal"><span class="pre">--gamma</span></tt> option or key bindings and the
<tt class="docutils literal">gamma</tt> property), the value is multiplied with the other gamma value.</p>
<p class="last">This option is deprecated and may be removed in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gamma-auto</span></tt></dt>
<dd><p class="first">Automatically corrects the gamma value depending on ambient lighting
conditions (adding a gamma boost for bright rooms).</p>
<p>This option is deprecated and may be removed in the future.</p>
<p class="last">NOTE: Only implemented on macOS.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--image-lut=&lt;file&gt;</span></tt></dt>
<dd>Specifies a custom LUT file (in Adobe .cube format) to apply to the colors
during image decoding. The exact interpretation of the LUT depends on
the value of <tt class="docutils literal"><span class="pre">--image-lut-type</span></tt>. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--image-lut-type=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Controls the interpretation of color values fed to and from the LUT
specified as <tt class="docutils literal"><span class="pre">--image-lut</span></tt>. Valid values are:</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Chooses the interpretation of the LUT automatically from tagged
metadata, and otherwise falls back to <tt class="docutils literal">native</tt>. (Default)</dd>
<dt>native</dt>
<dd>Applied to the raw image contents in its native colorspace, before
decoding to RGB. For example, for a HDR10 image, this would be fed
PQ-encoded YCbCr values in the range 0.0 - 1.0.</dd>
<dt>normalized</dt>
<dd>Applied to the normalized RGB image contents, after decoding from
its native color encoding, but before linearization.</dd>
<dt>conversion</dt>
<dd>Fully replaces the color decoding. A LUT of this type should ingest the
image's native colorspace and output normalized non-linear RGB.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--target-colorspace-hint</span></tt></dt>
<dd>Automatically configure the output colorspace of the display to pass
through the input values of the stream (e.g. for HDR passthrough), if
possible. Requires a supporting driver and <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--target-prim=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Specifies the primaries of the display. Video colors will be adapted to
this colorspace when ICC color management is not being used. Valid values
are:</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Disable any adaptation, except for atypical color spaces. Specifically,
wide/unusual gamuts get automatically adapted to BT.709, while standard
gamut (i.e. BT.601 and BT.709) content is not touched. (default)</dd>
<dt>bt.470m</dt>
<dd>ITU-R BT.470 M</dd>
<dt>bt.601-525</dt>
<dd>ITU-R BT.601 (525-line SD systems, eg. NTSC), SMPTE 170M/240M</dd>
<dt>bt.601-625</dt>
<dd>ITU-R BT.601 (625-line SD systems, eg. PAL/SECAM), ITU-R BT.470 B/G</dd>
<dt>bt.709</dt>
<dd>ITU-R BT.709 (HD), IEC 61966-2-4 (sRGB), SMPTE RP177 Annex B</dd>
<dt>bt.2020</dt>
<dd>ITU-R BT.2020 (UHD)</dd>
<dt>apple</dt>
<dd>Apple RGB</dd>
<dt>adobe</dt>
<dd>Adobe RGB (1998)</dd>
<dt>prophoto</dt>
<dd>ProPhoto RGB (ROMM)</dd>
<dt>cie1931</dt>
<dd>CIE 1931 RGB (not to be confused with CIE XYZ)</dd>
<dt>dci-p3</dt>
<dd>DCI-P3 (Digital Cinema Colorspace), SMPTE RP431-2</dd>
<dt>v-gamut</dt>
<dd>Panasonic V-Gamut (VARICAM) primaries</dd>
<dt>s-gamut</dt>
<dd>Sony S-Gamut (S-Log) primaries</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--target-trc=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Specifies the transfer characteristics (gamma) of the display. Video colors
will be adjusted to this curve when ICC color management is not being used.
Valid values are:</p>
<dl class="docutils">
<dt>auto</dt>
<dd>Disable any adaptation, except for atypical transfers. Specifically,
HDR or linear light source material gets automatically converted to
gamma 2.2, while SDR content is not touched. (default)</dd>
<dt>bt.1886</dt>
<dd>ITU-R BT.1886 curve (assuming infinite contrast)</dd>
<dt>srgb</dt>
<dd>IEC 61966-2-4 (sRGB)</dd>
<dt>linear</dt>
<dd>Linear light output</dd>
<dt>gamma1.8</dt>
<dd>Pure power curve (gamma 1.8), also used for Apple RGB</dd>
<dt>gamma2.0</dt>
<dd>Pure power curve (gamma 2.0)</dd>
<dt>gamma2.2</dt>
<dd>Pure power curve (gamma 2.2)</dd>
<dt>gamma2.4</dt>
<dd>Pure power curve (gamma 2.4)</dd>
<dt>gamma2.6</dt>
<dd>Pure power curve (gamma 2.6)</dd>
<dt>gamma2.8</dt>
<dd>Pure power curve (gamma 2.8), also used for BT.470-BG</dd>
<dt>prophoto</dt>
<dd>ProPhoto RGB (ROMM)</dd>
<dt>pq</dt>
<dd>ITU-R BT.2100 PQ (Perceptual quantizer) curve, aka SMPTE ST2084</dd>
<dt>hlg</dt>
<dd>ITU-R BT.2100 HLG (Hybrid Log-gamma) curve, aka ARIB STD-B67</dd>
<dt>v-log</dt>
<dd>Panasonic V-Log (VARICAM) curve</dd>
<dt>s-log1</dt>
<dd>Sony S-Log1 curve</dd>
<dt>s-log2</dt>
<dd>Sony S-Log2 curve</dd>
</dl>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">When using HDR output formats, mpv will encode to the specified
curve but it will not set any HDMI flags or other signalling that might
be required for the target device to correctly display the HDR signal.
The user should independently guarantee this before using these signal
formats for display.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--target-peak=&lt;auto|nits&gt;</span></tt></dt>
<dd><p class="first">Specifies the measured peak brightness of the output display, in cd/m^2
(AKA nits). The interpretation of this brightness depends on the configured
<tt class="docutils literal"><span class="pre">--target-trc</span></tt>. In all cases, it imposes a limit on the signal values
that will be sent to the display. If the source exceeds this brightness
level, a tone mapping filter will be inserted. For HLG, it has the
additional effect of parametrizing the inverse OOTF, in order to get
colorimetrically consistent results with the mastering display. For SDR, or
when using an ICC (profile (<tt class="docutils literal"><span class="pre">--icc-profile</span></tt>), setting this to a value
above 203 essentially causes the display to be treated as if it were an HDR
display in disguise. (See the note below)</p>
<p>In <tt class="docutils literal">auto</tt> mode (the default), the chosen peak is an appropriate value
based on the TRC in use. For SDR curves, it uses 203. For HDR curves, it
uses 203 * the transfer function's nominal peak.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p>When using an SDR transfer function, this is normally not needed, and
setting it may lead to very unexpected results. The one time it <em>is</em>
useful is if you want to calibrate a HDR display using traditional
transfer functions and calibration equipment. In such cases, you can
set your HDR display to a high brightness such as 800 cd/m^2, and then
calibrate it to a standard curve like gamma2.8. Setting this value to
800 would then instruct mpv to essentially treat it as an HDR display
with the given peak. This may be a good alternative in environments
where PQ or HLG input to the display is not possible, and makes it
possible to use HDR displays with mpv regardless of operating system
support for HDMI HDR metadata.</p>
<p class="last">In such a configuration, we highly recommend setting <tt class="docutils literal"><span class="pre">--tone-mapping</span></tt>
to <tt class="docutils literal">mobius</tt> or even <tt class="docutils literal">clip</tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--target-contrast=&lt;auto|10-1000000|inf&gt;</span></tt></dt>
<dd>Specifies the measured contrast of the output display. <tt class="docutils literal"><span class="pre">--target-contrast</span></tt>
in conjunction with <tt class="docutils literal"><span class="pre">--target-peak</span></tt> value is used to calculate display
black point. Used in black point compensation during HDR tone-mapping.
<tt class="docutils literal">auto</tt> is the default and assumes 1000:1 contrast as a typical SDR display
would have or an infinite contrast when HDR <tt class="docutils literal"><span class="pre">--target-trc</span></tt> is used.
<tt class="docutils literal">inf</tt> contrast specifies display with perfect black level, in practice OLED.
(Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--target-gamut=&lt;value&gt;</span></tt></dt>
<dd>Constrains the gamut of the display. You can use this option to output e.g.
DCIP3-in-BT.2020. Set <tt class="docutils literal"><span class="pre">--target-prim</span></tt> to the primaries of the containing
colorspace (into which values will be encoded), and <tt class="docutils literal"><span class="pre">--target-gamut</span></tt> to
the gamut you want to limit colors to. Takes the same values as
<tt class="docutils literal"><span class="pre">--target-prim</span></tt>. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--target-lut=&lt;file&gt;</span></tt></dt>
<dd>Specifies a custom LUT file (in Adobe .cube format) to apply to the colors
before display on-screen. This LUT is fed values in normalized RGB, after
encoding into the target colorspace, so after the application of
<tt class="docutils literal"><span class="pre">--target-trc</span></tt>. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--tone-mapping=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Specifies the algorithm used for tone-mapping images onto the target
display. This is relevant for both HDR-&gt;SDR conversion as well as gamut
reduction (e.g. playing back BT.2020 content on a standard gamut display).
Valid values are:</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Choose the best curve according to internal heuristics. (Default)</dd>
<dt>clip</dt>
<dd>Hard-clip any out-of-range values. Use this when you care about
perfect color accuracy for in-range values at the cost of completely
distorting out-of-range values. Not generally recommended.</dd>
<dt>mobius</dt>
<dd>Generalization of Reinhard to a Möbius transform with linear section.
Smoothly maps out-of-range values while retaining contrast and colors
for in-range material as much as possible. Use this when you care about
color accuracy more than detail preservation. This is somewhere in
between <tt class="docutils literal">clip</tt> and <tt class="docutils literal">reinhard</tt>, depending on the value of
<tt class="docutils literal"><span class="pre">--tone-mapping-param</span></tt>.</dd>
<dt>reinhard</dt>
<dd>Reinhard tone mapping algorithm. Very simple continuous curve.
Preserves overall image brightness but uses nonlinear contrast, which
results in flattening of details and degradation in color accuracy.</dd>
<dt>hable</dt>
<dd>Similar to <tt class="docutils literal">reinhard</tt> but preserves both dark and bright details
better (slightly sigmoidal), at the cost of slightly darkening /
desaturating everything. Developed by John Hable for use in video
games. Use this when you care about detail preservation more than
color/brightness accuracy. This is roughly equivalent to
<tt class="docutils literal"><span class="pre">--tone-mapping=reinhard</span> <span class="pre">--tone-mapping-param=0.24</span></tt>. If possible,
you should also enable <tt class="docutils literal"><span class="pre">--hdr-compute-peak</span></tt> for the best results.</dd>
<dt>bt.2390</dt>
<dd>Perceptual tone mapping curve (EETF) specified in ITU-R Report BT.2390.</dd>
<dt>gamma</dt>
<dd>Fits a logarithmic transfer between the tone curves.</dd>
<dt>linear</dt>
<dd>Linearly stretches the entire reference gamut to (a linear multiple of)
the display.</dd>
<dt>spline</dt>
<dd>Perceptually linear single-pivot polynomial. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>bt.2446a</dt>
<dd>HDR&lt;-&gt;SDR mapping specified in ITU-R Report BT.2446, method A. This is
the recommended curve for well-mastered content. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>
only)</dd>
<dt>st2094-40</dt>
<dd>Dynamic HDR10+ tone-mapping method specified in SMPTE ST2094-40 Annex
B. In the absence of metadata, falls back to a fixed spline matched to
the input/output average brightness characteristics. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>
only)</dd>
<dt>st2094-10</dt>
<dd>Dynamic tone-mapping method specified in SMPTE ST2094-10 Annex B.2.
Conceptually simpler than ST2094-40, and generally produces worse
results.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--tone-mapping-param=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Set tone mapping parameters. By default, this is set to the special string
<tt class="docutils literal">default</tt>, which maps to an algorithm-specific default value. Ignored if
the tone mapping algorithm is not tunable. This affects the following tone
mapping algorithms:</p>
<dl class="last docutils">
<dt>clip</dt>
<dd>Specifies an extra linear coefficient to multiply into the signal
before clipping. Defaults to 1.0.</dd>
<dt>mobius</dt>
<dd>Specifies the transition point from linear to mobius transform. Every
value below this point is guaranteed to be mapped 1:1. The higher the
value, the more accurate the result will be, at the cost of losing
bright details. Defaults to 0.3, which due to the steep initial slope
still preserves in-range colors fairly accurately.</dd>
<dt>reinhard</dt>
<dd>Specifies the local contrast coefficient at the display peak. Defaults
to 0.5, which means that in-gamut values will be about half as bright
as when clipping.</dd>
<dt>bt.2390</dt>
<dd>Specifies the offset for the knee point. Defaults to 1.0, which is
higher than the value from the original ITU-R specification (0.5).
(<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>gamma</dt>
<dd>Specifies the exponent of the function. Defaults to 1.8.</dd>
<dt>linear</dt>
<dd>Specifies the scale factor to use while stretching. Defaults to 1.0.</dd>
<dt>spline</dt>
<dd>Specifies the knee point (in PQ space). Defaults to 0.30.</dd>
<dt>st2094-10</dt>
<dd>Specifies the contrast (slope) at the knee point. Defaults to 1.0.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--inverse-tone-mapping</span></tt></dt>
<dd>If set, allows inverse tone mapping (expanding SDR to HDR). Not supported
by all tone mapping curves. Use with caution. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt><tt class="docutils literal"><span class="pre">--tone-mapping-max-boost=&lt;1.0..10.0&gt;</span></tt></dt>
<dd>Upper limit for how much the tone mapping algorithm is allowed to boost
the average brightness by over-exposing the image. The default value of 1.0
allows no additional brightness boost. A value of 2.0 would allow
over-exposing by a factor of 2, and so on. Raising this setting can help
reveal details that would otherwise be hidden in dark scenes, but raising
it too high will make dark scenes appear unnaturally bright. (<tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>
only)</dd>
<dt><tt class="docutils literal"><span class="pre">--tone-mapping-visualize</span></tt></dt>
<dd>Display a (PQ-PQ) graph of the active tone-mapping LUT. Intended only for
debugging purposes. The X axis shows PQ input values, the Y axis shows PQ
output values. The tone-mapping curve is shown in green/yellow. Yellow
means the brightness has been boosted from the source, dark blue regions
show where the brightness has been reduced. The extra colored regions and
lines indicate various monitor limits, as well a reference diagonal
(neutral tone-mapping) and source scene average brightness information (if
available). (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt><tt class="docutils literal"><span class="pre">--gamut-mapping-mode</span></tt></dt>
<dd><p class="first">Specifies the algorithm used for reducing the gamut of images for the
target display, after any tone mapping is done.</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Choose the best mode automatically. (Default)</dd>
<dt>clip</dt>
<dd>Hard-clip to the gamut (per-channel). Very low quality, but free.</dd>
<dt>perceptual</dt>
<dd>Performs a perceptually balanced gamut mapping using a soft knee
function to roll-off clipped regions, and a hue shifting function to
preserve saturation. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>relative</dt>
<dd>Performs relative colorimetric clipping, while maintaining an
exponential relationship between brightness and chromaticity.
(<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>saturation</dt>
<dd>Performs simple RGB-&gt;RGB saturation mapping. The input R/G/B channels
are mapped directly onto the output R/G/B channels. Will never clip,
but will distort all hues and/or result in a faded look.
(<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>absolute</dt>
<dd>Performs absolute colorimetric clipping. Like <tt class="docutils literal">relative</tt>, but does
not adapt the white point. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>desaturate</dt>
<dd>Performs constant-luminance colorimetric clipping, desaturing colors
towards white until they're in-range.</dd>
<dt>darken</dt>
<dd>Uniformly darkens the input slightly to prevent clipping on blown-out
highlights, then clamps colorimetrically to the input gamut boundary,
biased slightly to preserve chromaticity over luminance.
(<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
<dt>warn</dt>
<dd>Performs no gamut mapping, but simply highlights out-of-gamut pixels.</dd>
<dt>linear</dt>
<dd>Linearly/uniformly desaturates the image in order to bring the entire
image into the target gamut. (<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt> only)</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--hdr-compute-peak=&lt;auto|yes|no&gt;</span></tt></dt>
<dd>Compute the HDR peak and frame average brightness per-frame instead of
relying on tagged metadata. These values are averaged over local regions as
well as over several frames to prevent the value from jittering around too
much. This option basically gives you dynamic, per-scene tone mapping.
Requires compute shaders, which is a fairly recent OpenGL feature, and will
probably also perform horribly on some drivers, so enable at your own risk.
The special value <tt class="docutils literal">auto</tt> (default) will enable HDR peak computation
automatically if compute shaders and SSBOs are supported.</dd>
<dt><tt class="docutils literal"><span class="pre">--allow-delayed-peak-detect</span></tt></dt>
<dd>When using <tt class="docutils literal"><span class="pre">--hdr-compute-peak</span></tt>, allow delaying the detected peak by a
frame when beneficial for performance. In particular, this is required to
avoid an unnecessary FBO indirection when no advanced rendering is required
otherwise. Has no effect if there already is an indirect pass, such as when
advanced scaling is enabled. Defaults to no. (Only affects
<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>, note that <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> always delays the peak.)</dd>
<dt><tt class="docutils literal"><span class="pre">--hdr-peak-percentile=&lt;0.0..100.0&gt;</span></tt></dt>
<dd>Which percentile of the input image brightness histogram to consider as the
true peak of the scene. If this is set to 100 (default), the
brightest pixel is measured. Otherwise, the top of the frequency
distribution is progressively cut off. Setting this too low will cause
clipping of very bright details, but can improve the dynamic brightness
range of scenes with very bright isolated highlights. Values other than 100
come with a small performance penalty. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--hdr-peak-decay-rate=&lt;0.0..1000.0&gt;</span></tt></dt>
<dd>The decay rate used for the HDR peak detection algorithm (default: 20.0).
This is only relevant when <tt class="docutils literal"><span class="pre">--hdr-compute-peak</span></tt> is enabled. Higher values
make the peak decay more slowly, leading to more stable values at the cost
of more &quot;eye adaptation&quot;-like effects (although this is mitigated somewhat
by <tt class="docutils literal"><span class="pre">--hdr-scene-threshold</span></tt>). A value of 0.0 (the lowest possible) disables
all averaging, meaning each frame's value is used directly as measured,
but doing this is not recommended for &quot;noisy&quot; sources since it may lead
to excessive flicker. (In signal theory terms, this controls the time
constant &quot;tau&quot; of an IIR low pass filter)</dd>
<dt><tt class="docutils literal"><span class="pre">--hdr-scene-threshold-low=&lt;0.0..100.0&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--hdr-scene-threshold-high=&lt;0.0..100.0&gt;</span></tt></dt>
<dd>The lower and upper thresholds (in dB) for a brightness difference
to be considered a scene change (default: 1.0 low, 3.0 high). This is only
relevant when <tt class="docutils literal"><span class="pre">--hdr-compute-peak</span></tt> is enabled. Normally, small
fluctuations in the frame brightness are compensated for by the peak
averaging mechanism, but for large jumps in the brightness this can result
in the frame remaining too bright or too dark for up to several seconds,
depending on the value of <tt class="docutils literal"><span class="pre">--hdr-peak-decay-rate</span></tt>. To counteract this,
when the brightness between the running average and the current frame
exceeds the low threshold, mpv will make the averaging filter more
aggressive, up to the limit of the high threshold (at which point the
filter becomes instant).</dd>
<dt><tt class="docutils literal"><span class="pre">--hdr-contrast-recovery=&lt;0.0..2.0&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--hdr-contrast-smoothness=&lt;1.0..100.0&gt;</span></tt></dt>
<dd>Enables the HDR contrast recovery algorithm, which is to designed to
enhance contrast of HDR video after tone mapping. The strength (default:
0.0) indicates the degree of contrast recovery, with 0.0 being completely
disabled and 1.0 being 100% strength. Values higher than 1.0 are allowed,
but may result in excessive sharpening. The smoothness (default: 3.5)
indicates the degree to which the HDR source is low-passed in order to
obtain contrast information - a value of 2.0 corresponds to 2x downscaling.
Users on low DPI displays (&lt;= 100) may want to lower this value, while
users on very high DPI displays (&quot;retina&quot;) may want to increase it. (Only
for <tt class="docutils literal"><span class="pre">vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--use-embedded-icc-profile</span></tt></dt>
<dd>Load the embedded ICC profile contained in media files such as PNG images.
(Default: yes). Note that this option only works when also using a display
ICC profile (<tt class="docutils literal"><span class="pre">--icc-profile</span></tt> or <tt class="docutils literal"><span class="pre">--icc-profile-auto</span></tt>), and also
requires LittleCMS 2 support.</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-profile=&lt;file&gt;</span></tt></dt>
<dd>Load an ICC profile and use it to transform video RGB to screen output.
Needs LittleCMS 2 support compiled in. This option overrides the
<tt class="docutils literal"><span class="pre">--target-prim</span></tt>, <tt class="docutils literal"><span class="pre">--target-trc</span></tt> and <tt class="docutils literal"><span class="pre">--icc-profile-auto</span></tt> options.</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-profile-auto</span></tt></dt>
<dd><p class="first">Automatically select the ICC display profile currently specified by the
display settings of the operating system.</p>
<p>NOTE: On Windows, the default profile must be an ICC profile. WCS profiles
are not supported.</p>
<p class="last">Applications using libmpv with the render API need to provide the ICC
profile via <tt class="docutils literal">MPV_RENDER_PARAM_ICC_PROFILE</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-cache</span></tt></dt>
<dd><p class="first">Store and load 3DLUTs created from the ICC profile on disk in the
cache directory (Default: <tt class="docutils literal">yes</tt>). This can be used to speed up loading,
since LittleCMS 2 can take a while to create a 3D LUT. Note that these
files contain uncompressed LUTs. Their size depends on the
<tt class="docutils literal"><span class="pre">--icc-3dlut-size</span></tt>, and can be very big.</p>
<p>On <cite>--vo=gpu-next</cite>, files that have not been accessed in the last 24 hours
may be cleared if the cache limit (1.5 GiB) is exceeded.</p>
<p class="last">On <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>, this is not cleaned automatically, so old, unused cache
files may stick around indefinitely.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-cache-dir</span></tt></dt>
<dd>The directory where icc cache is stored. Cache is stored in the system's
cache directory (usually <tt class="docutils literal"><span class="pre">~/.cache/mpv</span></tt>) if this is unset.</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-intent=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Specifies the ICC intent used for the color transformation (when using
<tt class="docutils literal"><span class="pre">--icc-profile</span></tt>).</p>
<dl class="last docutils">
<dt>0</dt>
<dd>perceptual</dd>
<dt>1</dt>
<dd>relative colorimetric (default)</dd>
<dt>2</dt>
<dd>saturation</dd>
<dt>3</dt>
<dd>absolute colorimetric</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-3dlut-size=&lt;auto|RxGxB&gt;</span></tt></dt>
<dd><p class="first">Size of the 3D LUT generated from the ICC profile in each dimension. The
default of <tt class="docutils literal">auto</tt> means to pick the size automatically based on the
profile characteristics. Sizes may range from 2 to 512.</p>
<p class="last">NOTE: Setting this option to anything other than <tt class="docutils literal">auto</tt> is <strong>strongly</strong>
discouraged, except for testing.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-force-contrast=&lt;no|0-1000000|inf&gt;</span></tt></dt>
<dd>Override the target device's detected contrast ratio by a specific value.
This is detected automatically from the profile if possible, but for some
profiles it might be missing, causing the contrast to be assumed as
infinite. As a result, video may appear darker than intended. If this is
the case, setting this option might help. This only affects BT.1886
content. The default of <tt class="docutils literal">no</tt> means to use the profile values. The special
value <tt class="docutils literal">inf</tt> causes the BT.1886 curve to be treated as a pure power gamma
2.4 function.</dd>
<dt><tt class="docutils literal"><span class="pre">--icc-use-luma</span></tt></dt>
<dd>Use ICC profile luminance value. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--lut=&lt;file&gt;</span></tt></dt>
<dd>Specifies a custom LUT (in Adobe .cube format) to apply to the colors
as part of color conversion. The exact interpretation depends on the value
of <tt class="docutils literal"><span class="pre">--lut-type</span></tt>. (Only for <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--lut-type=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Controls the interpretation of color values fed to and from the LUT
specified as <tt class="docutils literal"><span class="pre">--lut</span></tt>. Valid values are:</p>
<dl class="last docutils">
<dt>auto</dt>
<dd>Chooses the interpretation of the LUT automatically from tagged
metadata, and otherwise falls back to <tt class="docutils literal">native</tt>. (Default)</dd>
<dt>native</dt>
<dd>Applied to raw image contents in its native RGB colorspace (non-linear
light), before conversion to the output color space.</dd>
<dt>normalized</dt>
<dd>Applied to the normalized RGB image contents, in linear light, before
conversion to the output color space.</dd>
<dt>conversion</dt>
<dd>Fully replaces the conversion from the image color space to the output
color space. If such a LUT is present, it has the highest priority, and
overrides any ICC profiles, as well as options related to tone mapping
and output colorimetry (<tt class="docutils literal"><span class="pre">--target-prim</span></tt>, <tt class="docutils literal"><span class="pre">--target-trc</span></tt> etc.).</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--blend-subtitles=&lt;yes|video|no&gt;</span></tt></dt>
<dd><p class="first">Blend subtitles directly onto upscaled video frames, before interpolation
and/or color management (default: no). Enabling this causes subtitles to be
affected by <tt class="docutils literal"><span class="pre">--icc-profile</span></tt>, <tt class="docutils literal"><span class="pre">--target-prim</span></tt>, <tt class="docutils literal"><span class="pre">--target-trc</span></tt>,
<tt class="docutils literal"><span class="pre">--interpolation</span></tt>, <tt class="docutils literal"><span class="pre">--gamma-factor</span></tt> and <tt class="docutils literal"><span class="pre">--glsl-shaders</span></tt>. It also
increases subtitle performance when using <tt class="docutils literal"><span class="pre">--interpolation</span></tt>.</p>
<p>The downside of enabling this is that it restricts subtitles to the visible
portion of the video, so you can't have subtitles exist in the black
margins below a video (for example).</p>
<p>If <tt class="docutils literal">video</tt> is selected, the behavior is similar to <tt class="docutils literal">yes</tt>, but subs are
drawn at the video's native resolution, and scaled along with the video.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">This changes the way subtitle colors are handled. Normally,
subtitle colors are assumed to be in sRGB and color managed as
such. Enabling this makes them treated as being in the video's
color space instead. This is good if you want things like
softsubbed ASS signs to match the video colors, but may cause
SRT subtitles or similar to look slightly off.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--background=&lt;none|color|tiles&gt;</span></tt></dt>
<dd><p class="first">If the frame has an alpha component, decide what kind of background, if any,
to blend it with. This does nothing if there is no alpha component.</p>
<dl class="docutils">
<dt>color</dt>
<dd>Blend the frame against the background color (<tt class="docutils literal"><span class="pre">--background-color</span></tt>,
normally black).</dd>
<dt>tiles</dt>
<dd>Blend the frame against a 16x16 gray/white tiles background (default).</dd>
<dt>none</dt>
<dd>Do not blend the frame and leave the alpha as is.</dd>
</dl>
<p class="last">Before mpv 0.38.0, this option used to accept a color value specifying the
background color. This is now done by the <tt class="docutils literal"><span class="pre">--background-color</span></tt> option.
Use that instead.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--background-color=&lt;color&gt;</span></tt></dt>
<dd>Color used to draw parts of the mpv window not covered by video. See the
<tt class="docutils literal"><span class="pre">--sub-color</span></tt> option for how colors are defined.</dd>
<dt><tt class="docutils literal"><span class="pre">--border-background=&lt;none|color|tiles&gt;</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">--background</span></tt> but only applies to the black bar/border area of
the window. <tt class="docutils literal"><span class="pre">vo=gpu-next</span></tt> only. Defaults to <tt class="docutils literal">color</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-rectangle-textures</span></tt></dt>
<dd>Force use of rectangle textures (default: no). Normally this shouldn't have
any advantages over normal textures. Note that hardware decoding overrides
this flag. Could be removed any time.</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-tex-pad-x</span></tt>, <tt class="docutils literal"><span class="pre">--gpu-tex-pad-y</span></tt></dt>
<dd>Enlarge the video source textures by this many pixels. For debugging only
(normally textures are sized exactly, but due to hardware decoding interop
we may have to deal with additional padding, which can be tested with these
options). Could be removed any time.</dd>
<dt><tt class="docutils literal"><span class="pre">--opengl-early-flush=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">Call <tt class="docutils literal">glFlush()</tt> after rendering a frame and before attempting to display
it (default: auto). Can fix stuttering in some cases, in other cases
probably causes it. The <tt class="docutils literal">auto</tt> mode will call <tt class="docutils literal">glFlush()</tt> only if
the renderer is going to wait for a while after rendering, instead of
flipping GL front and backbuffers immediately (i.e. it doesn't call it
in display-sync mode).</p>
<p class="last">On macOS this is always deactivated because it only causes performance
problems and other regressions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-dumb-mode=&lt;yes|no|auto&gt;</span></tt></dt>
<dd><p class="first">This mode is extremely restricted, and will disable most extended
features. That includes high quality scalers and custom shaders!</p>
<p>It is intended for hardware that does not support FBOs (including GLES,
which supports it insufficiently), or to get some more performance out of
bad or old hardware.</p>
<p>This mode is forced automatically if needed, and this option is mostly
useful for debugging. The default of <tt class="docutils literal">auto</tt> will enable it automatically
if nothing uses features which require FBOs.</p>
<p class="last">This option might be silently removed in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-shader-cache</span></tt></dt>
<dd><p class="first">Store and load compiled GLSL shaders in the cache directory (Default:
<tt class="docutils literal">yes</tt>). Normally, shader compilation is very fast, so this is not usually
needed. It mostly matters for anything involving GLSL to SPIR-V conversion,
that is: D3D11, ANGLE or Vulkan, as well as on some other proprietary
drivers. Enabling this can improve startup performance on these platforms.</p>
<p>On <cite>--vo=gpu-next</cite>, files that have not been accessed in the last 24 hours
may be cleared if the cache limit (128 MiB) is exceeded.</p>
<p class="last">On <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>, this is not cleaned automatically, so old, unused cache
files may stick around indefinitely.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--gpu-shader-cache-dir</span></tt></dt>
<dd>The directory where gpu shader cache is stored. Cache is stored in the system's
cache directory (usually <tt class="docutils literal"><span class="pre">~/.cache/mpv</span></tt>) if this is unset.</dd>
<dt><tt class="docutils literal"><span class="pre">--libplacebo-opts=&lt;key&gt;=&lt;value&gt;[,&lt;key&gt;=&lt;value&gt;[,...]]</span></tt></dt>
<dd><p class="first">Passes extra raw option to the libplacebo rendering backend (used by
<tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>). May override the effects of any other options set using
the normal options system. Requires libplacebo v6.309 or higher. Included
for debugging purposes only. For more information, see:</p>
<p class="last"><a class="reference external" href="https://libplacebo.org/options/">https://libplacebo.org/options/</a></p>
</dd>
</dl>
</div>
<div class="section" id="miscellaneous">
<h2>Miscellaneous</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--display-tags=tag1,tags2,...</span></tt></dt>
<dd><p class="first">Set the list of tags that should be displayed on the terminal and stats.
Tags that are in the list, but are not present in the played file, will not
be shown. If a value ends with <tt class="docutils literal">*</tt>, all tags are matched by prefix (though
there is no general globbing). Just passing <tt class="docutils literal">*</tt> essentially filtering.</p>
<p>The default includes a common list of tags, call mpv with <tt class="docutils literal"><span class="pre">--list-options</span></tt>
to see it.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--mc=&lt;seconds/frame&gt;</span></tt></dt>
<dd>Maximum A-V sync correction per frame (in seconds)</dd>
<dt><tt class="docutils literal"><span class="pre">--autosync=&lt;factor&gt;</span></tt></dt>
<dd>Gradually adjusts the A/V sync based on audio delay measurements.
Specifying <tt class="docutils literal"><span class="pre">--autosync=0</span></tt>, the default, will cause frame timing to be
based entirely on audio delay measurements. Specifying <tt class="docutils literal"><span class="pre">--autosync=1</span></tt>
will do the same, but will subtly change the A/V correction algorithm. An
uneven video framerate in a video which plays fine with <tt class="docutils literal"><span class="pre">--audio=no</span></tt> can
often be helped by setting this to an integer value greater than 1. The
higher the value, the closer the timing will be to <tt class="docutils literal"><span class="pre">--audio=no</span></tt>. Try
<tt class="docutils literal"><span class="pre">--autosync=30</span></tt> to smooth out problems with sound drivers which do not
implement a perfect audio delay measurement. With this value, if large A/V
sync offsets occur, they will only take about 1 or 2 seconds to settle
out. This delay in reaction time to sudden A/V offsets should be the only
side effect of turning this option on, for all sound drivers.</dd>
<dt><tt class="docutils literal"><span class="pre">--video-timing-offset=&lt;seconds&gt;</span></tt></dt>
<dd><p class="first">Control how long before video display target time the frame should be
rendered (default: 0.050). If a video frame should be displayed at a
certain time, the VO will start rendering the frame earlier, and then will
perform a blocking wait until the display time, and only then &quot;swap&quot; the
frame to display. The rendering cannot start before the previous frame is
displayed, so this value is implicitly limited by the video framerate. With
normal video frame rates, the default value will ensure that rendering is
always immediately started after the previous frame was displayed. On the
other hand, setting a too high value can reduce responsiveness with low
FPS value.</p>
<p>This option is interesting for client API users using the render API
because you can stop it from limiting your FPS
(see <tt class="docutils literal">mpv_render_context_render()</tt> documentation).</p>
<p class="last">This applies only to audio timing modes (e.g. <tt class="docutils literal"><span class="pre">--video-sync=audio</span></tt>). In
other modes (<tt class="docutils literal"><span class="pre">--video-sync=display-...</span></tt>), video timing relies on vsync
blocking, and this option is not used.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-sync=&lt;audio|...&gt;</span></tt></dt>
<dd><p class="first">How the player synchronizes audio and video.</p>
<p>If you use this option, you usually want to set it to <tt class="docutils literal"><span class="pre">display-resample</span></tt>
to enable a timing mode that tries to not skip or repeat frames when for
example playing 24fps video on a 24Hz screen.</p>
<p>The modes starting with <tt class="docutils literal">display-</tt> try to output video frames completely
synchronously to the display, using the detected display vertical refresh
rate as a hint how fast frames will be displayed on average. These modes
change video speed slightly to match the display. See <tt class="docutils literal"><span class="pre">--video-sync-...</span></tt>
options for fine tuning. The robustness of this mode is further reduced by
making a some idealized assumptions, which may not always apply in reality.
Behavior can depend on the VO and the system's video and audio drivers.
Media files must use constant framerate. Section-wise VFR might work as well
with some container formats (but not e.g. mkv).</p>
<p>Under some circumstances, the player automatically reverts to <tt class="docutils literal">audio</tt> mode
for some time or permanently. This can happen on very low framerate video,
or if the framerate cannot be detected.</p>
<p>Also in display-sync modes it can happen that interruptions to video
playback (such as toggling fullscreen mode, or simply resizing the window)
will skip the video frames that should have been displayed, while <tt class="docutils literal">audio</tt>
mode will display them after the renderer has resumed (typically resulting
in a short A/V desync and the video &quot;catching up&quot;).</p>
<p>Before mpv 0.30.0, there was a fallback to <tt class="docutils literal">audio</tt> mode on severe A/V
desync. This was changed for the sake of not sporadically stopping. Now,
<tt class="docutils literal"><span class="pre">display-desync</span></tt> does what it promises and may desync with audio by an
arbitrary amount, until it is manually fixed with a seek.</p>
<p>These modes also require a vsync blocked presentation mode. For OpenGL, this
translates to <tt class="docutils literal"><span class="pre">--opengl-swapinterval=1</span></tt>. For Vulkan, it translates to
<tt class="docutils literal"><span class="pre">--vulkan-swap-mode=fifo</span></tt> (or <tt class="docutils literal"><span class="pre">fifo-relaxed</span></tt>).</p>
<p>The modes with <tt class="docutils literal">desync</tt> in their names do not attempt to keep audio/video
in sync. They will slowly (or quickly) desync, until e.g. the next seek
happens. These modes are meant for testing, not serious use.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">audio:</th><td class="field-body">Time video frames to audio. This is the most robust
mode, because the player doesn't have to assume anything
about how the display behaves. The disadvantage is that
it can lead to occasional frame drops or repeats. If
audio is disabled, this uses the system clock. This is
the default mode.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">display-resample:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Resample audio to match the video. This mode will also
try to adjust audio speed to compensate for other drift.
(This means it will play the audio at a different speed
every once in a while to reduce the A/V difference.)</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">display-resample-vdrop:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Resample audio to match the video. Drop video
frames to compensate for drift.</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">display-resample-desync:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">Like the previous mode, but no A/V compensation.</td>
</tr>
<tr class="field"><th class="field-name">display-tempo:</th><td class="field-body">Same as <tt class="docutils literal"><span class="pre">display-resample</span></tt>, but apply audio speed
changes to audio filters instead of resampling to avoid
the change in pitch. Beware that some audio filters
don't do well with a speed close to 1. It is recommend
to use a conditional profile to automatically switch to
<tt class="docutils literal"><span class="pre">display-resample</span></tt> when speed gets too close to 1 for
your filter setup. Use (speed * video_speed_correction)
to get the actual playback speed in the condition.
See <a class="reference internal" href="#conditional-auto-profiles">Conditional auto profiles</a> for details.</td>
</tr>
<tr class="field"><th class="field-name">display-vdrop:</th><td class="field-body">Drop or repeat video frames to compensate desyncing
video. (Although it should have the same effects as
<tt class="docutils literal">audio</tt>, the implementation is very different.)</td>
</tr>
<tr class="field"><th class="field-name">display-adrop:</th><td class="field-body">Drop or repeat audio data to compensate desyncing
video. This mode will cause severe audio artifacts if
the real monitor refresh rate is too different from
the reported or forced rate. Since mpv 0.33.0, this
acts on entire audio frames, instead of single samples.</td>
</tr>
<tr class="field"><th class="field-name">display-desync:</th><td class="field-body">Sync video to display, and let audio play on its own.</td>
</tr>
<tr class="field"><th class="field-name">desync:</th><td class="field-body">Sync video according to system clock, and let audio play
on its own.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-sync-max-factor=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Maximum multiple for which to try to fit the video's FPS to the display's
FPS (default: 5).</p>
<p>For example, if this is set to 1, the video FPS is forced to an integer
multiple of the display FPS, as long as the speed change does not exceed
the value set by <tt class="docutils literal"><span class="pre">--video-sync-max-video-change</span></tt>.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--interpolation-threshold</span></tt> for how this option affects
interpolation.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-sync-max-video-change=&lt;value&gt;</span></tt></dt>
<dd><p class="first">Maximum speed difference in percent that is applied to video with
<tt class="docutils literal"><span class="pre">--video-sync=display-...</span></tt> (default: 1). Display sync mode will be
disabled if the monitor and video refresh way do not match within the
given range. It tries multiples as well: playing 30 fps video on a 60 Hz
screen will duplicate every second frame. Playing 24 fps video on a 60 Hz
screen will play video in a 2-3-2-3-... pattern.</p>
<p>The default settings are not loose enough to speed up 23.976 fps video to
25 fps. We consider the pitch change too extreme to allow this behavior
by default. Set this option to a value of <tt class="docutils literal">5</tt> to enable it.</p>
<p>Note that <tt class="docutils literal"><span class="pre">--video-sync=display-tempo</span></tt> avoids this pitch change.</p>
<p class="last">Also note that in the <tt class="docutils literal"><span class="pre">--video-sync=display-resample</span></tt> or
<tt class="docutils literal"><span class="pre">--video-sync=display-tempo</span></tt> mode, audio speed will additionally be
changed by a small amount if necessary for A/V sync. See
<tt class="docutils literal"><span class="pre">--video-sync-max-audio-change</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-sync-max-audio-change=&lt;value&gt;</span></tt></dt>
<dd>Maximum <em>additional</em> speed difference in percent that is applied to audio
with <tt class="docutils literal"><span class="pre">--video-sync=display-...</span></tt> (default: 0.125). Normally, the player
plays the audio at the speed of the video. But if the difference between
audio and video position is too high, e.g. due to drift or other timing
errors, it will attempt to speed up or slow down audio by this additional
factor. Too low values could lead to video frame dropping or repeating if
the A/V desync cannot be compensated, too high values could lead to chaotic
frame dropping due to the audio &quot;overshooting&quot; and skipping multiple video
frames before the sync logic can react.</dd>
<dt><tt class="docutils literal"><span class="pre">--mf-fps=&lt;value&gt;</span></tt></dt>
<dd>Framerate used when decoding from multiple PNG or JPEG files with <tt class="docutils literal"><span class="pre">mf://</span></tt>
(default: 1).</dd>
<dt><tt class="docutils literal"><span class="pre">--mf-type=&lt;value&gt;</span></tt></dt>
<dd>Input file type for <tt class="docutils literal"><span class="pre">mf://</span></tt> (available: jpeg, png, tga, sgi). By default,
this is guessed from the file extension.</dd>
<dt><tt class="docutils literal"><span class="pre">--stream-dump=&lt;destination-filename&gt;</span></tt></dt>
<dd>Instead of playing a file, read its byte stream and write it to the given
destination file. The destination is overwritten. Can be useful to test
network-related behavior.</dd>
<dt><tt class="docutils literal"><span class="pre">--stream-lavf-o=opt1=value1,opt2=value2,...</span></tt></dt>
<dd><p class="first">Set AVOptions on streams opened with libavformat. Unknown or misspelled
options are silently ignored. (They are mentioned in the terminal output
in verbose mode, i.e. <tt class="docutils literal"><span class="pre">--v</span></tt>. In general we can't print errors, because
other options such as e.g. user agent are not available with all protocols,
and printing errors for unknown options would end up being too noisy.)</p>
<p class="last">This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--backdrop-type=&lt;auto|none|mica|acrylic|mica-alt&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Controls the backdrop/border style.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">Default Windows behavior</td>
</tr>
<tr class="field"><th class="field-name">none:</th><td class="field-body">The backdrop will be black or white depending on the system's theme settings.</td>
</tr>
<tr class="field"><th class="field-name">mica:</th><td class="field-body">Enables the Mica style, which is the default on Windows 11.</td>
</tr>
<tr class="field"><th class="field-name">acrylic:</th><td class="field-body">Enables the Acrylic style (frosted glass look).</td>
</tr>
<tr class="field"><th class="field-name">mica-alt:</th><td class="field-body">Same as Mica, except reversed.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--window-affinity=&lt;default|excludefromcmcapture|monitor&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Controls the window affinity behavior of mpv.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">default:</th><td class="field-body">Default Windows behavior</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">excludefromcapture:</th></tr>
<tr class="field"><td>&nbsp;</td><td class="field-body">mpv's window will be completely excluded from capture by external applications or screen recording software.</td>
</tr>
<tr class="field"><th class="field-name">monitor:</th><td class="field-body">Blacks out the mpv window</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-mmcss-profile=&lt;name&gt;</span></tt></dt>
<dd>(Windows only)
Set the MMCSS profile for the video renderer thread (default: <tt class="docutils literal">Playback</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--priority=&lt;prio&gt;</span></tt></dt>
<dd><p class="first">(Windows only)
Set process priority for mpv according to the predefined priorities
available under Windows.</p>
<p>Possible values of <tt class="docutils literal">&lt;prio&gt;</tt>:
idle|belownormal|normal|abovenormal|high|realtime</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Using realtime priority can cause system lockup.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--media-controls=&lt;yes|player|no&gt;</span></tt></dt>
<dd>(Windows only)
Enable integration of media control interface SystemMediaTransportControls.
If set to <tt class="docutils literal">player</tt>, only the player will use the controls. Setting it to
<tt class="docutils literal">yes</tt> will also enable the controls for libmpv integrations.
(default: <tt class="docutils literal">player</tt>)</dd>
<dt><tt class="docutils literal"><span class="pre">--force-media-title=&lt;string&gt;</span></tt></dt>
<dd>Force the contents of the <tt class="docutils literal"><span class="pre">media-title</span></tt> property to this value. Useful
for scripts which want to set a title, without overriding the user's
setting in <tt class="docutils literal"><span class="pre">--title</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--external-files=&lt;file-list&gt;</span></tt></dt>
<dd><p class="first">Load a file and add all of its tracks. This is useful to play different
files together (for example audio from one file, video from another), or
for advanced <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt> used (like playing two video files at
the same time).</p>
<p>Unlike <tt class="docutils literal"><span class="pre">--sub-files</span></tt> and <tt class="docutils literal"><span class="pre">--audio-files</span></tt>, this includes all tracks, and
does not cause default stream selection over the &quot;proper&quot; file. This makes
it slightly less intrusive. (In mpv 0.28.0 and before, this was not quite
strictly enforced.)</p>
<p class="last">This is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--external-file=&lt;file&gt;</span></tt></dt>
<dd>CLI/config file only alias for <tt class="docutils literal"><span class="pre">--external-files-append</span></tt>. Each use of this
option will add a new external file.</dd>
<dt><tt class="docutils literal"><span class="pre">--cover-art-files=&lt;file-list&gt;</span></tt></dt>
<dd><p class="first">Use an external file as cover art while playing audio. This makes it appear
on the track list and subject to automatic track selection. Options like
<tt class="docutils literal"><span class="pre">--audio-display</span></tt> control whether such tracks are supposed to be selected.</p>
<p>(The difference to loading a file with <tt class="docutils literal"><span class="pre">--external-files</span></tt> is that video
tracks will be marked as being pictures, which affects the auto-selection
method. If the passed file is a video, only the first frame will be decoded
and displayed. Enabling the cover art track during playback may show a
random frame if the source file is a video. Normally you're not supposed to
pass videos to this option, so this paragraph describes the behavior
coincidentally resulting from implementation details.)</p>
<p class="last">This is a path list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cover-art-file=&lt;file&gt;</span></tt></dt>
<dd>CLI/config file only alias for <tt class="docutils literal"><span class="pre">--cover-art-files-append</span></tt>. Each use of this
option will add a new external file.</dd>
<dt><tt class="docutils literal"><span class="pre">--cover-art-auto=&lt;no|exact|fuzzy|all&gt;</span></tt></dt>
<dd><p class="first">Whether to load _external_ cover art automatically. Similar to
<tt class="docutils literal"><span class="pre">--sub-auto</span></tt> and <tt class="docutils literal"><span class="pre">--audio-file-auto</span></tt>. If a video already has tracks
(which are not marked as cover art), external cover art will not be loaded.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Don't automatically load cover art.</td>
</tr>
<tr class="field"><th class="field-name">exact:</th><td class="field-body">Load the media filename with an image file extension (default).</td>
</tr>
<tr class="field"><th class="field-name">fuzzy:</th><td class="field-body">Load all cover art containing the media filename.</td>
</tr>
<tr class="field"><th class="field-name">all:</th><td class="field-body">Load all images in the current directory.</td>
</tr>
</tbody>
</table>
<p>See <tt class="docutils literal"><span class="pre">--cover-art-files</span></tt> for details about what constitutes cover art.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">--audio-display</span></tt> how to control display of cover art (this can be
used to disable cover art that is part of the file).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--image-exts=ext1,ext2,...</span></tt></dt>
<dd><p class="first">Image file extentions to try to match when using <tt class="docutils literal"><span class="pre">--cover-art-auto</span></tt>,
<tt class="docutils literal"><span class="pre">--autocreate-playlist</span></tt> or <tt class="docutils literal"><span class="pre">--directory-filter-types</span></tt>.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.
Use <tt class="docutils literal"><span class="pre">--help=image-exts</span></tt> to see default extensions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--cover-art-whitelist=filename1,filename2,...</span></tt></dt>
<dd><p class="first">Filenames to load as cover art, sorted by descending priority. They are
combined with the extensions in <tt class="docutils literal"><span class="pre">--image-exts</span></tt>. This has no
effect if <tt class="docutils literal"><span class="pre">cover-art-auto</span></tt> is <tt class="docutils literal">no</tt>.</p>
<p>Default: <tt class="docutils literal"><span class="pre">AlbumArt,Album,cover,front,AlbumArtSmall,Folder,.folder,thumb</span></tt></p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--video-exts=ext1,ext2,...</span></tt></dt>
<dd><p class="first">Video file extentions to try to match when using <tt class="docutils literal"><span class="pre">--autocreate-playlist</span></tt> or
<tt class="docutils literal"><span class="pre">--directory-filter-types</span></tt>.</p>
<p class="last">This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.
Use <tt class="docutils literal"><span class="pre">--help=video-exts</span></tt> to see default extensions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--autoload-files=&lt;yes|no&gt;</span></tt></dt>
<dd><p class="first">Automatically load/select external files (default: yes).</p>
<p>If set to <tt class="docutils literal">no</tt>, then do not automatically load external files as specified
by <tt class="docutils literal"><span class="pre">--sub-auto</span></tt>, <tt class="docutils literal"><span class="pre">--audio-file-auto</span></tt> and <tt class="docutils literal"><span class="pre">--cover-art-auto</span></tt>. If
external files are forcibly added (like with <tt class="docutils literal"><span class="pre">--sub-files</span></tt>), they will
not be auto-selected.</p>
<p class="last">This does not affect playlist expansion, redirection, or other loading of
referenced files like with ordered chapters.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--stream-record=&lt;file&gt;</span></tt></dt>
<dd><p class="first">Write received/read data from the demuxer to the given output file. The
output file will always be overwritten without asking. The output format
is determined by the extension of the output file.</p>
<p>Switching streams or seeking during recording might result in recording
being stopped and/or broken files. Use with care.</p>
<p>Seeking outside of the demuxer cache will result in &quot;skips&quot; in the output
file, but seeking within  the demuxer cache should not affect recording. One
exception is when you seek back far enough to exceed the forward buffering
size, in which case the cache stops actively reading. This will return in
dropped data if it's a live stream.</p>
<p>If this is set at runtime, the old file is closed, and the new file is
opened. Note that this will write only data that is appended at the end of
the cache, and the already cached data cannot be written. You can try the
<tt class="docutils literal"><span class="pre">dump-cache</span></tt> command as an alternative.</p>
<p>External files (<tt class="docutils literal"><span class="pre">--audio-file</span></tt> etc.) are ignored by this, it works on the
&quot;main&quot; file only. Using this with files using ordered chapters or EDL files
will also not work correctly in general.</p>
<p class="last">There are some glitches with this because it uses FFmpeg's libavformat for
writing the output file. For example, it's typical that it will only work if
the output format is the same as the input format. This is the case even if
it works with the <tt class="docutils literal">ffmpeg</tt> tool. One reason for this is that <tt class="docutils literal">ffmpeg</tt>
and its libraries contain certain hacks and workarounds for these issues,
that are unavailable to outside users.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--lavfi-complex=&lt;string&gt;</span></tt></dt>
<dd><p class="first">Set a &quot;complex&quot; libavfilter filter, which means a single filter graph can
take input from multiple source audio and video tracks. The graph can result
in a single audio or video output (or both).</p>
<p>Currently, the filter graph labels are used to select the participating
input tracks and audio/video output. The following rules apply:</p>
<ul class="simple">
<li>A label of the form <tt class="docutils literal">aidN</tt> selects audio track N as input (e.g.
<tt class="docutils literal">aid1</tt>).</li>
<li>A label of the form <tt class="docutils literal">vidN</tt> selects video track N as input.</li>
<li>A label named <tt class="docutils literal">ao</tt> will be connected to the audio output.</li>
<li>A label named <tt class="docutils literal">vo</tt> will be connected to the video output.</li>
</ul>
<p>Each label can be used only once. If you want to use e.g. an audio stream
for multiple filters, you need to use the <tt class="docutils literal">asplit</tt> filter. Multiple
video or audio outputs are not possible, but you can use filters to merge
them into one.</p>
<p>It's not possible to change the tracks connected to the filter at runtime,
unless you explicitly change the <tt class="docutils literal"><span class="pre">lavfi-complex</span></tt> property and set new
track assignments. When the graph is changed, the track selection is changed
according to the used labels as well.</p>
<p>Other tracks, as long as they're not connected to the filter, and the
corresponding output is not connected to the filter, can still be freely
changed with the normal methods.</p>
<p>Note that the normal filter chains (<tt class="docutils literal"><span class="pre">--af</span></tt>, <tt class="docutils literal"><span class="pre">--vf</span></tt>) are applied between
the complex graphs (e.g. <tt class="docutils literal">ao</tt> label) and the actual output.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--lavfi-complex='[aid1]</span> [aid2] amix [ao]'</tt>
Play audio track 1 and 2 at the same time.</li>
<li><tt class="docutils literal"><span class="pre">--lavfi-complex='[vid1]</span> [vid2] vstack [vo]'</tt>
Stack video track 1 and 2 and play them at the same time. Note that
both tracks need to have the same width, or filter initialization
will fail (you can add <tt class="docutils literal">scale</tt> filters before the <tt class="docutils literal">vstack</tt> filter
to fix the size).
To load a video track from another file, you can use
<tt class="docutils literal"><span class="pre">--external-file=other.mkv</span></tt>.</li>
<li><tt class="docutils literal"><span class="pre">--lavfi-complex='[vid1]</span> [vid2] [vid3] hstack=inputs=3 [vo]'</tt>
Use the inputs option to stack more than 2 tracks.</li>
<li><tt class="docutils literal"><span class="pre">--lavfi-complex='[aid1]</span> asplit [t1] [ao] ; [t1] showvolume [t2] ; [vid1] [t2] overlay [vo]'</tt>
Play audio track 1, and overlay the measured volume for each speaker
over video track 1.</li>
</ul>
</div>
<p class="last">See the FFmpeg libavfilter documentation for details on the available
filters.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--metadata-codepage=&lt;codepage&gt;</span></tt></dt>
<dd><p class="first">Codepage for various input metadata (default: <tt class="docutils literal">auto</tt>). This affects how
file tags, chapter titles, etc. are interpreted. In most cases, this merely
evaluates to UTF-8 as non-UTF-8 codepages are obscure.</p>
<p>See <tt class="docutils literal"><span class="pre">--sub-codepage</span></tt> option on how codepages are specified and further
details regarding autodetection and codepage conversion. (The underlying
code is the same.)</p>
<p class="last">Conversion is not applied to metadata that is updated at runtime.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="audio-output-drivers">
<h1>AUDIO OUTPUT DRIVERS</h1>
<p>Audio output drivers are interfaces to different audio output facilities. The
syntax is:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--ao=&lt;driver1,driver2,...[,]&gt;</span></tt></dt>
<dd>Specify a priority list of audio output drivers to be used.</dd>
</dl>
<p>If the list has a trailing ',', mpv will fall back on drivers not contained
in the list.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>See <tt class="docutils literal"><span class="pre">--ao=help</span></tt> for a list of compiled-in audio output drivers sorted by
autoprobe order.</p>
<p class="last">Note that the default audio output driver is subject to change, and must
not be relied upon. If a certain AO needs to be used, it must be
explicitly specified.</p>
</div>
<p>Available audio output drivers are:</p>
<dl class="docutils">
<dt><tt class="docutils literal">alsa</tt></dt>
<dd><p class="first">ALSA audio output driver.</p>
<p>The following global options are supported by this audio output:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--alsa-resample=yes</span></tt></dt>
<dd>Enable ALSA resampling plugin. (This is disabled by default, because
some drivers report incorrect audio delay in some cases.)</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-mixer-device=&lt;device&gt;</span></tt></dt>
<dd>Set the mixer device used with <tt class="docutils literal"><span class="pre">ao-volume</span></tt> (default: <tt class="docutils literal">default</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-mixer-name=&lt;name&gt;</span></tt></dt>
<dd>Set the name of the mixer element (default: <tt class="docutils literal">Master</tt>). This is for
example <tt class="docutils literal">PCM</tt> or <tt class="docutils literal">Master</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-mixer-index=&lt;number&gt;</span></tt></dt>
<dd>Set the index of the mixer channel (default: 0). Consider the output of
&quot;<tt class="docutils literal">amixer scontrols</tt>&quot;, then the index is the number that follows the
name of the element.</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-non-interleaved</span></tt></dt>
<dd>Allow output of non-interleaved formats (if the audio decoder uses
this format). Currently disabled by default, because some popular
ALSA plugins are utterly broken with non-interleaved formats.</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-ignore-chmap</span></tt></dt>
<dd>Don't read or set the channel map of the ALSA device - only request the
required number of channels, and then pass the audio as-is to it. This
option most likely should not be used. It can be useful for debugging,
or for static setups with a specially engineered ALSA configuration (in
this case you should always force the same layout with <tt class="docutils literal"><span class="pre">--audio-channels</span></tt>,
or it will work only for files which use the layout implicit to your
ALSA device).</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-buffer-time=&lt;microseconds&gt;</span></tt></dt>
<dd><p class="first">Set the requested buffer time in microseconds. A value of 0 skips requesting
anything from the ALSA API. This and the <tt class="docutils literal"><span class="pre">--alsa-periods</span></tt> option uses the
ALSA <tt class="docutils literal">near</tt> functions to set the requested parameters. If doing so results
in an empty configuration set, setting these parameters is skipped.</p>
<p class="last">Both options control the buffer size. A low buffer size can lead to higher
CPU usage and audio dropouts, while a high buffer size can lead to higher
latency in volume changes and other filtering.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--alsa-periods=&lt;number&gt;</span></tt></dt>
<dd>Number of periods requested from the ALSA API. See <tt class="docutils literal"><span class="pre">--alsa-buffer-time</span></tt>
for further remarks.</dd>
</dl>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p>To get multichannel/surround audio, use <tt class="docutils literal"><span class="pre">--audio-channels=auto</span></tt>. The
default for this option is <tt class="docutils literal"><span class="pre">auto-safe</span></tt>, which makes this audio output
explicitly reject multichannel output, as there is no way to detect
whether a certain channel layout is actually supported.</p>
<p class="last">You can also try <a class="reference external" href="https://github.com/mpv-player/mpv/wiki/ALSA-Surround-Sound-and-Upmixing">using the upmix plugin</a>.
This setup enables multichannel audio on the <tt class="docutils literal">default</tt> device
with automatic upmixing with shared access, so playing stereo
and multichannel audio at the same time will work as expected.</p>
</div>
</dd>
<dt><tt class="docutils literal">oss</tt></dt>
<dd>OSS audio output driver</dd>
<dt><tt class="docutils literal">jack</tt></dt>
<dd><p class="first">JACK (Jack Audio Connection Kit) audio output driver.</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--jack-port=&lt;name&gt;</span></tt></dt>
<dd>Connects to the ports with the given name (default: physical ports).</dd>
<dt><tt class="docutils literal"><span class="pre">--jack-name=&lt;client&gt;</span></tt></dt>
<dd>Client name that is passed to JACK (default: <tt class="docutils literal">mpv</tt>). Useful
if you want to have certain connections established automatically.</dd>
<dt><tt class="docutils literal"><span class="pre">--jack-autostart=&lt;yes|no&gt;</span></tt></dt>
<dd>Automatically start jackd if necessary (default: disabled). Note that
this tends to be unreliable and will flood stdout with server messages.</dd>
<dt><tt class="docutils literal"><span class="pre">--jack-connect=&lt;yes|no&gt;</span></tt></dt>
<dd>Automatically create connections to output ports (default: enabled).
When enabled, the maximum number of output channels will be limited to
the number of available output ports.</dd>
<dt><tt class="docutils literal"><span class="pre">--jack-std-channel-layout=&lt;waveext|any&gt;</span></tt></dt>
<dd>Select the standard channel layout (default: waveext). JACK itself has no
notion of channel layouts (i.e. assigning which speaker a given
channel is supposed to map to) - it just takes whatever the application
outputs, and reroutes it to whatever the user defines. This means the
user and the application are in charge of dealing with the channel
layout. <tt class="docutils literal">waveext</tt> uses WAVE_FORMAT_EXTENSIBLE order, which, even
though it was defined by Microsoft, is the standard on many systems.
The value <tt class="docutils literal">any</tt> makes JACK accept whatever comes from the audio
filter chain, regardless of channel layout and without reordering. This
mode is probably not very useful, other than for debugging or when used
with fixed setups.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">coreaudio</tt> (macOS only)</dt>
<dd><p class="first">Native macOS audio output driver using AudioUnits and the CoreAudio
sound server.</p>
<p>Automatically redirects to <tt class="docutils literal">coreaudio_exclusive</tt> when playing compressed
formats.</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--coreaudio-change-physical-format=&lt;yes|no&gt;</span></tt></dt>
<dd>Change the physical format to one similar to the requested audio format
(default: no). This has the advantage that multichannel audio output
will actually work. The disadvantage is that it will change the
system-wide audio settings. This is equivalent to changing the <tt class="docutils literal">Format</tt>
setting in the <tt class="docutils literal">Audio Devices</tt> dialog in the <tt class="docutils literal">Audio MIDI Setup</tt>
utility. Note that this does not affect the selected speaker setup.</dd>
<dt><tt class="docutils literal"><span class="pre">--coreaudio-spdif-hack=&lt;yes|no&gt;</span></tt></dt>
<dd>Try to pass through AC3/DTS data as PCM. This is useful for drivers
which do not report AC3 support. It converts the AC3 data to float,
and assumes the driver will do the inverse conversion, which means
a typical A/V receiver will pick it up as compressed IEC framed AC3
stream, ignoring that it's marked as PCM. This disables normal AC3
passthrough (even if the device reports it as supported). Use with
extreme care.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">coreaudio_exclusive</tt> (macOS only)</dt>
<dd>Native macOS audio output driver using direct device access and
exclusive mode (bypasses the sound server).</dd>
<dt><tt class="docutils literal">avfoundation</tt> (macOS only)</dt>
<dd><p class="first">Native macOS audio output driver using <tt class="docutils literal">AVSampleBufferAudioRenderer</tt>
in AVFoundation, which supports <a class="reference external" href="https://support.apple.com/en-us/HT211775">spatial audio</a>.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Turning on spatial audio may hang the playback
if mpv is not started out of the bundle,
though playback with spatial audio off always works.</p>
</div>
</dd>
<dt><tt class="docutils literal">openal</tt></dt>
<dd><p class="first">OpenAL audio output driver.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--openal-num-buffers=&lt;2-128&gt;</span></tt></dt>
<dd>Specify the number of audio buffers to use. Lower values are better for
lower CPU usage. Default: 4.</dd>
<dt><tt class="docutils literal"><span class="pre">--openal-num-samples=&lt;256-32768&gt;</span></tt></dt>
<dd>Specify the number of complete samples to use for each buffer. Higher
values are better for lower CPU usage. Default: 8192.</dd>
<dt><tt class="docutils literal"><span class="pre">--openal-direct-channels=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable OpenAL Soft's direct channel extension when available to avoid
tinting the sound with ambisonics or HRTF. Default: yes.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">pulse</tt></dt>
<dd><p class="first">PulseAudio audio output driver</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--pulse-host=&lt;host&gt;</span></tt></dt>
<dd>Specify the host to use. An empty &lt;host&gt; string uses a local connection,
&quot;localhost&quot; uses network transfer (most likely not what you want).</dd>
<dt><tt class="docutils literal"><span class="pre">--pulse-buffer=&lt;1-2000|native&gt;</span></tt></dt>
<dd>Set the audio buffer size in milliseconds. A higher value buffers
more data, and has a lower probability of buffer underruns. A smaller
value makes the audio stream react faster, e.g. to playback speed
changes. &quot;native&quot; lets the sound server determine buffers.</dd>
<dt><tt class="docutils literal"><span class="pre">--pulse-latency-hacks=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable hacks to workaround PulseAudio timing bugs (default: yes). If
enabled, mpv will do elaborate latency calculations on its own. If
disabled, it will use PulseAudio automatically updated timing
information. Disabling this might help with e.g. networked audio or
some plugins, while enabling it might help in some unknown situations
(it is currently enabled due to known bugs with PulseAudio 16.0).</dd>
<dt><tt class="docutils literal"><span class="pre">--pulse-allow-suspended=&lt;yes|no&gt;</span></tt></dt>
<dd>Allow mpv to use PulseAudio even if the sink is suspended (default: no).
Can be useful if PulseAudio is running as a bridge to jack and mpv has its sink-input set to the one jack is using.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">pipewire</tt></dt>
<dd><p class="first">PipeWire audio output driver</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--pipewire-buffer=&lt;1-2000|native&gt;</span></tt></dt>
<dd>Set the audio buffer size in milliseconds. A higher value buffers
more data, and has a lower probability of buffer underruns. A smaller
value makes the audio stream react faster, e.g. to playback speed
changes. &quot;native&quot; lets the sound server determine buffers.</dd>
<dt><tt class="docutils literal"><span class="pre">--pipewire-remote=&lt;remote&gt;</span></tt></dt>
<dd>Specify the PipeWire remote daemon name to connect to via local UNIX
sockets.
An empty &lt;remote&gt; string uses the default remote named <tt class="docutils literal"><span class="pre">pipewire-0</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--pipewire-volume-mode=&lt;channel|global&gt;</span></tt></dt>
<dd>Specify if the <tt class="docutils literal"><span class="pre">ao-volume</span></tt> property should apply to the channel
volumes or the global volume.
By default the channel volumes are used.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">sdl</tt></dt>
<dd><p class="first">SDL 2.0+ audio output driver. Should work on any platform supported by SDL
2.0, but may require the <tt class="docutils literal">SDL_AUDIODRIVER</tt> environment variable to be set
appropriately for your system.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This driver is for compatibility with extremely foreign
environments, such as systems where none of the other drivers
are available.</p>
</div>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--sdl-buflen=&lt;length&gt;</span></tt></dt>
<dd>Sets the audio buffer length in seconds. Is used only as a hint by the
sound system. Playing a file with <tt class="docutils literal"><span class="pre">-v</span></tt> will show the requested and
obtained exact buffer size. A value of 0 selects the sound system
default.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">null</tt></dt>
<dd><p class="first">Produces no audio output but maintains video playback speed. You can use
<tt class="docutils literal"><span class="pre">--ao=null</span> <span class="pre">--ao-null-untimed</span></tt> for benchmarking.</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--ao-null-untimed</span></tt></dt>
<dd>Do not simulate timing of a perfect audio device. This means audio
decoding will go as fast as possible, instead of timing it to the
system clock.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-buffer</span></tt></dt>
<dd>Simulated buffer length in seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-outburst</span></tt></dt>
<dd>Simulated chunk size in samples.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-speed</span></tt></dt>
<dd>Simulated audio playback speed as a multiplier. Usually, a real audio
device will not go exactly as fast as the system clock. It will deviate
just a little, and this option helps to simulate this.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-latency</span></tt></dt>
<dd>Simulated device latency. This is additional to EOF.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-broken-eof</span></tt></dt>
<dd>Simulate broken audio drivers, which always add the fixed device
latency to the reported audio playback position.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-broken-delay</span></tt></dt>
<dd>Simulate broken audio drivers, which don't report latency correctly.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-channel-layouts</span></tt></dt>
<dd>If not empty, this is a <tt class="docutils literal">,</tt> separated list of channel layouts the
AO allows. This can be used to test channel layout selection.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-null-format</span></tt></dt>
<dd>Force the audio output format the AO will accept. If unset accepts any.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">pcm</tt></dt>
<dd><p class="first">Raw PCM/WAVE file writer audio output</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--ao-pcm-waveheader=&lt;yes|no&gt;</span></tt></dt>
<dd>Include or do not include the WAVE header (default: included). When
not included, raw PCM will be generated.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-pcm-file=&lt;filename&gt;</span></tt></dt>
<dd>Write the sound to <tt class="docutils literal">&lt;filename&gt;</tt> instead of the default
<tt class="docutils literal">audiodump.wav</tt>. If <tt class="docutils literal"><span class="pre">no-waveheader</span></tt> is specified, the default is
<tt class="docutils literal">audiodump.pcm</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--ao-pcm-append=&lt;yes|no&gt;</span></tt></dt>
<dd>Append to the file, instead of overwriting it. Always use this with the
<tt class="docutils literal"><span class="pre">no-waveheader</span></tt> option - with <tt class="docutils literal">waveheader</tt> it's broken, because
it will write a WAVE header every time the file is opened.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">sndio</tt></dt>
<dd><p class="first">Audio output to the OpenBSD sndio sound system</p>
<p class="last">(Note: only supports mono, stereo, 4.0, 5.1 and 7.1 channel
layouts.)</p>
</dd>
<dt><tt class="docutils literal">wasapi</tt></dt>
<dd><p class="first">Audio output to the Windows Audio Session API.</p>
<p>The following global options are supported by this audio output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--wasapi-exclusive-buffer=&lt;default|min|1-2000000&gt;</span></tt></dt>
<dd><p class="first">Set buffer duration in exclusive mode (i.e., with
<tt class="docutils literal"><span class="pre">--audio-exclusive=yes</span></tt>). <tt class="docutils literal">default</tt> and <tt class="docutils literal">min</tt> use the default and
minimum device period reported by WASAPI, respectively. You can also
directly specify the buffer duration in microseconds, in which case a
duration shorter than the minimum device period will be rounded up to
the minimum period.</p>
<p class="last">The default buffer duration should provide robust playback in most
cases, but reportedly on some devices there are glitches following
stream resets under the default setting. In such cases, specifying a
shorter duration might help.</p>
</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="video-output-drivers">
<h1>VIDEO OUTPUT DRIVERS</h1>
<p>Video output drivers are interfaces to different video output facilities. The
syntax is:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vo=&lt;driver1,driver2,...[,]&gt;</span></tt></dt>
<dd>Specify a priority list of video output drivers to be used.</dd>
</dl>
<p>If the list has a trailing <tt class="docutils literal">,</tt>, mpv will fall back on drivers not contained
in the list.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>See <tt class="docutils literal"><span class="pre">--vo=help</span></tt> for a list of compiled-in video output drivers.</p>
<p>The recommended output driver is <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>, which is the default. All
other drivers are for compatibility or special purposes. If the default
does not work, it will fallback to other drivers (in the same order as
listed by <tt class="docutils literal"><span class="pre">--vo=help</span></tt>).</p>
<p class="last">Note that the default video output driver is subject to change, and must
not be relied upon. If a certain VO needs to be used (e.g. for <tt class="docutils literal">libmpv</tt>
rendering API), it must be explicitly specified.</p>
</div>
<p>Available video output drivers are:</p>
<dl class="docutils">
<dt><tt class="docutils literal">gpu</tt></dt>
<dd><p class="first">General purpose, customizable, GPU-accelerated video output driver. It
supports extended scaling methods, dithering, color management, custom
shaders, HDR, and more.</p>
<p>See <a class="reference internal" href="#gpu-renderer-options">GPU renderer options</a> for options specific to this VO.</p>
<p>By default, mpv utilizes settings that balance quality and performance.
Additionally, two predefined profiles are available: <tt class="docutils literal">fast</tt> for maximum
performance and <tt class="docutils literal"><span class="pre">high-quality</span></tt> for superior rendering quality. You can
apply a specific profile using the <tt class="docutils literal"><span class="pre">--profile=&lt;name&gt;</span></tt> option and inspect
its contents using <tt class="docutils literal"><span class="pre">--show-profile=&lt;name&gt;</span></tt>.</p>
<p>This VO abstracts over several possible graphics APIs and windowing
contexts, which can be influenced using the <tt class="docutils literal"><span class="pre">--gpu-api</span></tt> and
<tt class="docutils literal"><span class="pre">--gpu-context</span></tt> options.</p>
<p>Hardware decoding over OpenGL-interop is supported to some degree. Note
that in this mode, some corner case might not be gracefully handled, and
color space conversion and chroma upsampling is generally in the hand of
the hardware decoder APIs.</p>
<p class="last"><tt class="docutils literal">gpu</tt> makes use of FBOs by default. Sometimes you can achieve better
quality or performance by changing the <tt class="docutils literal"><span class="pre">--fbo-format</span></tt> option to
<tt class="docutils literal">rgb16f</tt>, <tt class="docutils literal">rgb32f</tt> or <tt class="docutils literal">rgb</tt>. Known problems include Mesa/Intel not
accepting <tt class="docutils literal">rgb16</tt>, Mesa sometimes not being compiled with float texture
support, and some macOS setups being very slow with <tt class="docutils literal">rgb16</tt> but fast
with <tt class="docutils literal">rgb32f</tt>. If you have problems, you can also try enabling the
<tt class="docutils literal"><span class="pre">--gpu-dumb-mode=yes</span></tt> option.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">gpu-next</span></tt></dt>
<dd><p class="first">Experimental video renderer based on <tt class="docutils literal">libplacebo</tt>. This supports almost
the same set of features as <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>. See <a class="reference internal" href="#gpu-renderer-options">GPU renderer options</a> for a
list.</p>
<p>Should generally be faster and higher quality, but some features may still
be missing or misbehave. Expect (and report!) bugs. See here for a list of
known differences and bugs:</p>
<p class="last"><a class="reference external" href="https://github.com/mpv-player/mpv/wiki/GPU-Next-vs-GPU">https://github.com/mpv-player/mpv/wiki/GPU-Next-vs-GPU</a></p>
</dd>
<dt><tt class="docutils literal">xv</tt> (X11 only)</dt>
<dd><p class="first">Uses the XVideo extension to enable hardware-accelerated display. This is
the most compatible VO on X, but may be low-quality, and has issues with
OSD and subtitle display.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This driver is for compatibility with old systems.</p>
</div>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--xv-adaptor=&lt;number&gt;</span></tt></dt>
<dd>Select a specific XVideo adapter (check xvinfo results).</dd>
<dt><tt class="docutils literal"><span class="pre">--xv-port=&lt;number&gt;</span></tt></dt>
<dd>Select a specific XVideo port.</dd>
<dt><tt class="docutils literal"><span class="pre">--xv-ck=&lt;cur|use|set&gt;</span></tt></dt>
<dd><p class="first">Select the source from which the color key is taken (default: cur).</p>
<dl class="last docutils">
<dt>cur</dt>
<dd>The default takes the color key currently set in Xv.</dd>
<dt>use</dt>
<dd>Use but do not set the color key from mpv (use the <tt class="docutils literal"><span class="pre">--colorkey</span></tt>
option to change it).</dd>
<dt>set</dt>
<dd>Same as use but also sets the supplied color key.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--xv-ck-method=&lt;none|man|bg|auto&gt;</span></tt></dt>
<dd><p class="first">Sets the color key drawing method (default: man).</p>
<dl class="last docutils">
<dt>none</dt>
<dd>Disables color-keying.</dd>
<dt>man</dt>
<dd>Draw the color key manually (reduces flicker in some cases).</dd>
<dt>bg</dt>
<dd>Set the color key as window background.</dd>
<dt>auto</dt>
<dd>Let Xv draw the color key.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--xv-colorkey=&lt;number&gt;</span></tt></dt>
<dd>Changes the color key to an RGB value of your choice. <tt class="docutils literal">0x000000</tt> is
black and <tt class="docutils literal">0xffffff</tt> is white.</dd>
<dt><tt class="docutils literal"><span class="pre">--xv-buffers=&lt;number&gt;</span></tt></dt>
<dd>Number of image buffers to use for the internal ringbuffer (default: 2).
Increasing this will use more memory, but might help with the X server
not responding quickly enough if video FPS is close to or higher than
the display refresh rate.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">x11</tt> (X11 only)</dt>
<dd><p class="first">Shared memory video output driver without hardware acceleration that works
whenever X11 is present.</p>
<p>Since mpv 0.30.0, you may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent
performance.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This is a fallback only, and should not be normally used.</p>
</div>
</dd>
<dt><tt class="docutils literal">vdpau</tt> (X11 only)</dt>
<dd><p class="first">Uses the VDPAU interface to display and optionally also decode video.
Hardware decoding is used with <tt class="docutils literal"><span class="pre">--hwdec=vdpau</span></tt>. Note that there is
absolutely no reason to use this, other than compatibility. We strongly
recommend that you use <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> with <tt class="docutils literal"><span class="pre">--hwdec=nvdec</span></tt> instead.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Earlier versions of mpv (and MPlayer, mplayer2) provided sub-options
to tune vdpau post-processing, like <tt class="docutils literal">deint</tt>, <tt class="docutils literal">sharpen</tt>, <tt class="docutils literal">denoise</tt>,
<tt class="docutils literal"><span class="pre">chroma-deint</span></tt>, <tt class="docutils literal">pullup</tt>, <tt class="docutils literal">hqscaling</tt>. These sub-options are
deprecated, and you should use the <tt class="docutils literal">vdpaupp</tt> video filter instead.</p>
</div>
<p>The following global options are supported by this video output:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-sharpen=&lt;-1-1&gt;</span></tt></dt>
<dd><p class="first">(Deprecated. See note about <tt class="docutils literal">vdpaupp</tt>.)</p>
<p class="last">For positive values, apply a sharpening algorithm to the video, for
negative values a blurring algorithm (default: 0).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-denoise=&lt;0-1&gt;</span></tt></dt>
<dd><p class="first">(Deprecated. See note about <tt class="docutils literal">vdpaupp</tt>.)</p>
<p class="last">Apply a noise reduction algorithm to the video (default: 0; no noise
reduction).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-chroma-deint</span></tt></dt>
<dd><p class="first">(Deprecated. See note about <tt class="docutils literal">vdpaupp</tt>.)</p>
<p class="last">Makes temporal deinterlacers operate both on luma and chroma (default).
Use no-chroma-deint to solely use luma and speed up advanced
deinterlacing. Useful with slow video memory.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-pullup</span></tt></dt>
<dd><p class="first">(Deprecated. See note about <tt class="docutils literal">vdpaupp</tt>.)</p>
<p class="last">Try to apply inverse telecine, needs motion adaptive temporal
deinterlacing.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-hqscaling=&lt;0-9&gt;</span></tt></dt>
<dd><p class="first">(Deprecated. See note about <tt class="docutils literal">vdpaupp</tt>.)</p>
<dl class="last docutils">
<dt>0</dt>
<dd>Use default VDPAU scaling (default).</dd>
<dt>1-9</dt>
<dd>Apply high quality VDPAU scaling (needs capable hardware).</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-fps=&lt;number&gt;</span></tt></dt>
<dd>Override autodetected display refresh rate value (the value is needed
for framedrop to allow video playback rates higher than display
refresh rate, and for vsync-aware frame timing adjustments). Default 0
means use autodetected value. A positive value is interpreted as a
refresh rate in Hz and overrides the autodetected value. A negative
value disables all timing adjustment and framedrop logic.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-composite-detect</span></tt></dt>
<dd>NVIDIA's current VDPAU implementation behaves somewhat differently
under a compositing window manager and does not give accurate frame
timing information. With this option enabled, the player tries to
detect whether a compositing window manager is active. If one is
detected, the player disables timing adjustments as if the user had
specified <tt class="docutils literal"><span class="pre">fps=-1</span></tt> (as they would be based on incorrect input). This
means timing is somewhat less accurate than without compositing, but
with the composited mode behavior of the NVIDIA driver, there is no
hard playback speed limit even without the disabled logic. Enabled by
default, use <tt class="docutils literal"><span class="pre">--vo-vdpau-composite-detect=no</span></tt> to disable.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-queuetime-windowed=&lt;number&gt;</span></tt> and <tt class="docutils literal"><span class="pre">queuetime-fs=&lt;number&gt;</span></tt></dt>
<dd>Use VDPAU's presentation queue functionality to queue future video
frame changes at most this many milliseconds in advance (default: 50).
See below for additional information.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-output-surfaces=&lt;2-15&gt;</span></tt></dt>
<dd>Allocate this many output surfaces to display video frames (default:
3). See below for additional information.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-colorkey=&lt;#RRGGBB|#AARRGGBB&gt;</span></tt></dt>
<dd>Set the VDPAU presentation queue background color, which in practice
is the colorkey used if VDPAU operates in overlay mode (default:
<tt class="docutils literal">#020507</tt>, some shade of black). If the alpha component of this value
is 0, the default VDPAU colorkey will be used instead (which is usually
green).</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vdpau-force-yuv</span></tt></dt>
<dd>Never accept RGBA input. This means mpv will insert a filter to convert
to a YUV format before the VO. Sometimes useful to force availability
of certain YUV-only features, like video equalizer or deinterlacing.</dd>
</dl>
<p>Using the VDPAU frame queuing functionality controlled by the queuetime
options makes mpv's frame flip timing less sensitive to system CPU load and
allows mpv to start decoding the next frame(s) slightly earlier, which can
reduce jitter caused by individual slow-to-decode frames. However, the
NVIDIA graphics drivers can make other window behavior such as window moves
choppy if VDPAU is using the blit queue (mainly happens if you have the
composite extension enabled) and this feature is active. If this happens on
your system and it bothers you then you can set the queuetime value to 0 to
disable this feature. The settings to use in windowed and fullscreen mode
are separate because there should be no reason to disable this for
fullscreen mode (as the driver issue should not affect the video itself).</p>
<p class="last">You can queue more frames ahead by increasing the queuetime values and the
<tt class="docutils literal">output_surfaces</tt> count (to ensure enough surfaces to buffer video for a
certain time ahead you need at least as many surfaces as the video has
frames during that time, plus two). This could help make video smoother in
some cases. The main downsides are increased video RAM requirements for
the surfaces and laggier display response to user commands (display
changes only become visible some time after they're queued). The graphics
driver implementation may also have limits on the length of maximum
queuing time or number of queued surfaces that work well or at all.</p>
</dd>
<dt><tt class="docutils literal">direct3d</tt> (Windows only)</dt>
<dd><p class="first">Video output driver that uses the Direct3D interface.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This driver is for compatibility with systems that don't provide
proper OpenGL drivers, and where ANGLE does not perform well.</p>
</div>
<p>The following global options are supported by this video output:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-direct3d-disable-texture-align</span></tt></dt>
<dd>Normally texture sizes are always aligned to 16. With this option
enabled, the video texture will always have exactly the same size as
the video itself.</dd>
</dl>
<p>Debug options. These might be incorrect, might be removed in the future,
might crash, might cause slow downs, etc. Contact the developers if you
actually need any of these for performance or proper operation.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-direct3d-force-power-of-2</span></tt></dt>
<dd>Always force textures to power of 2, even if the device reports
non-power-of-2 texture sizes as supported.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-direct3d-texture-memory=&lt;mode&gt;</span></tt></dt>
<dd><p class="first">Only affects operation with shaders/texturing enabled, and (E)OSD.
Possible values:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">default</tt> (default)</dt>
<dd>Use <tt class="docutils literal">D3DPOOL_DEFAULT</tt>, with a <tt class="docutils literal">D3DPOOL_SYSTEMMEM</tt> texture for
locking. If the driver supports <tt class="docutils literal">D3DDEVCAPS_TEXTURESYSTEMMEMORY</tt>,
<tt class="docutils literal">D3DPOOL_SYSTEMMEM</tt> is used directly.</dd>
<dt><tt class="docutils literal"><span class="pre">default-pool</span></tt></dt>
<dd>Use <tt class="docutils literal">D3DPOOL_DEFAULT</tt>. (Like <tt class="docutils literal">default</tt>, but never use a
shadow-texture.)</dd>
<dt><tt class="docutils literal"><span class="pre">default-pool-shadow</span></tt></dt>
<dd>Use <tt class="docutils literal">D3DPOOL_DEFAULT</tt>, with a <tt class="docutils literal">D3DPOOL_SYSTEMMEM</tt> texture for
locking. (Like <tt class="docutils literal">default</tt>, but always force the shadow-texture.)</dd>
<dt><tt class="docutils literal">managed</tt></dt>
<dd>Use <tt class="docutils literal">D3DPOOL_MANAGED</tt>.</dd>
<dt><tt class="docutils literal">scratch</tt></dt>
<dd>Use <tt class="docutils literal">D3DPOOL_SCRATCH</tt>, with a <tt class="docutils literal">D3DPOOL_SYSTEMMEM</tt> texture for
locking.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-direct3d-swap-discard</span></tt></dt>
<dd>Use <tt class="docutils literal">D3DSWAPEFFECT_DISCARD</tt>, which might be faster.
Might be slower too, as it must(?) clear every frame.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-direct3d-exact-backbuffer</span></tt></dt>
<dd>Always resize the backbuffer to window size.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">sdl</tt></dt>
<dd><p class="first">SDL 2.0+ Render video output driver, depending on system with or without
hardware acceleration. Should work on all platforms supported by SDL 2.0.
For tuning, refer to your copy of the file <tt class="docutils literal">SDL_hints.h</tt>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This driver is for compatibility with systems that don't provide
proper graphics drivers.</p>
</div>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--sdl-sw</span></tt></dt>
<dd>Continue even if a software renderer is detected.</dd>
<dt><tt class="docutils literal"><span class="pre">--sdl-switch-mode</span></tt></dt>
<dd>Instruct SDL to switch the monitor video mode when going fullscreen.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">dmabuf-wayland</span></tt></dt>
<dd>Experimental Wayland output driver designed for use with either drm stateless
or VA API hardware decoding. The driver is designed to avoid any GPU to CPU copies,
and to perform scaling and color space conversion using fixed-function hardware,
if available, rather than GPU shaders. This frees up GPU resources for other tasks.
It is highly recommended to use this VO with the appropriate <tt class="docutils literal"><span class="pre">--hwdec</span></tt> option such
as <tt class="docutils literal"><span class="pre">auto-safe</span></tt>. It can still work in some circumstances without <tt class="docutils literal"><span class="pre">--hwdec</span></tt> due to
mpv's internal conversion filters, but this is not recommended as it's a needless
extra step. Correct output depends on support from your GPU, drivers, and compositor.
Weston and wlroots-based compositors like Sway and Intel GPUs are known to generally
work.</dd>
<dt><tt class="docutils literal">vaapi</tt></dt>
<dd><p class="first">Intel VA API video output driver with support for hardware decoding. Note
that there is absolutely no reason to use this, other than compatibility.
This is low quality, and has issues with OSD. We strongly recommend that
you use <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> with <tt class="docutils literal"><span class="pre">--hwdec=vaapi</span></tt> instead.</p>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-vaapi-scaling=&lt;algorithm&gt;</span></tt></dt>
<dd><dl class="first last docutils">
<dt>default</dt>
<dd>Driver default (mpv default as well).</dd>
<dt>fast</dt>
<dd>Fast, but low quality.</dd>
<dt>hq</dt>
<dd>Unspecified driver dependent high-quality scaling, slow.</dd>
<dt>nla</dt>
<dd><tt class="docutils literal"><span class="pre">non-linear</span> anamorphic scaling</tt></dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-vaapi-scaled-osd=&lt;yes|no&gt;</span></tt></dt>
<dd>If enabled, then the OSD is rendered at video resolution and scaled to
display resolution. By default, this is disabled, and the OSD is
rendered at display resolution if the driver supports it.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">null</tt></dt>
<dd><p class="first">Produces no video output. Useful for benchmarking.</p>
<p>Usually, it's better to disable video with <tt class="docutils literal"><span class="pre">--video=no</span></tt> instead.</p>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-null-fps=&lt;value&gt;</span></tt></dt>
<dd>Simulate display FPS. This artificially limits how many frames the
VO accepts per second.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">caca</tt></dt>
<dd><p class="first">Color ASCII art video output driver that works on a text console.</p>
<p>This driver reserves some keys for runtime configuration. These keys are
hardcoded and cannot be bound:</p>
<dl class="docutils">
<dt>d and D</dt>
<dd>Toggle dithering algorithm.</dd>
<dt>a and A</dt>
<dd>Toggle antialiasing method.</dd>
<dt>h and H</dt>
<dd>Toggle charset method.</dd>
<dt>c and C</dt>
<dd>Toggle color method.</dd>
</dl>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This driver is a joke.</p>
</div>
</dd>
<dt><tt class="docutils literal">tct</tt></dt>
<dd><p class="first">Color Unicode art video output driver that works on a text console.
By default depends on support of true color by modern terminals to display
the images at full color range, but 256-colors output is also supported (see
below). On Windows it requires an ansi terminal such as mintty.</p>
<p>Since mpv 0.30.0, you may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent
performance.</p>
<p>Note: the TCT image output is not synchronized with other terminal output
from mpv, which can lead to broken images. The options <tt class="docutils literal"><span class="pre">--terminal=no</span></tt> or
<tt class="docutils literal"><span class="pre">--really-quiet</span></tt> can help with that.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-tct-algo=&lt;algo&gt;</span></tt></dt>
<dd><p class="first">Select how to write the pixels to the terminal.</p>
<dl class="last docutils">
<dt>half-blocks</dt>
<dd>Uses unicode LOWER HALF BLOCK character to achieve higher vertical
resolution. (Default.)</dd>
<dt>plain</dt>
<dd>Uses spaces. Causes vertical resolution to drop twofolds, but in
theory works in more places.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-tct-buffering=&lt;pixel|line|frame&gt;</span></tt></dt>
<dd><p class="first">Specifies the size of data batches buffered before being sent to the
terminal.</p>
<p>TCT image output is not synchronized with other terminal output from mpv,
which can lead to broken images. Sending data to the terminal in small
batches may improve parallelism between terminal processing and mpv
processing but incurs a static overhead of generating tens of thousands
of small writes. Also, depending on the terminal used, sending frames in
one chunk might help with tearing of the output, especially if not used
with <tt class="docutils literal"><span class="pre">--really-quiet</span></tt> and other logs interrupt the data stream.</p>
<dl class="last docutils">
<dt>pixel</dt>
<dd>Send data to terminal for each pixel.</dd>
<dt>line</dt>
<dd>Send data to terminal for each line. (Default)</dd>
<dt>frame</dt>
<dd>Send data to terminal for each frame.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-tct-width=&lt;width&gt;</span></tt>  <tt class="docutils literal"><span class="pre">--vo-tct-height=&lt;height&gt;</span></tt></dt>
<dd>Assume the terminal has the specified character width and/or height.
These default to 80x25 if the terminal size cannot be determined.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-tct-256=&lt;yes|no&gt;</span></tt> (default: no)</dt>
<dd>Use 256 colors - for terminals which don't support true color.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">kitty</tt></dt>
<dd><p class="first">Graphical output for the terminal, using the kitty graphics protocol.
Tested with kitty and Konsole.</p>
<p>You may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent performance.</p>
<p>Kitty size and alignment options:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-cols=&lt;columns&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-kitty-rows=&lt;rows&gt;</span></tt> (default: 0)</dt>
<dd>Specify the terminal size in character cells, otherwise (0) read it
from the terminal, or fall back to 80x25.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-width=&lt;width&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-kitty-height=&lt;height&gt;</span></tt> (default: 0)</dt>
<dd>Specify the available size in pixels, otherwise (0) read it from the
terminal, or fall back to 320x240.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-left=&lt;col&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-kitty-top=&lt;row&gt;</span></tt> (default: 0)</dt>
<dd>Specify the position in character cells where the image starts (1 is
the first column or row). If 0 (default) then try to automatically
determine it according to the other values and the image aspect ratio
and zoom.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-config-clear=&lt;yes|no&gt;</span></tt> (default: yes)</dt>
<dd>Whether or not to clear the terminal whenever the output is
reconfigured (e.g. when video size changes).</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-alt-screen=&lt;yes|no&gt;</span></tt> (default: yes)</dt>
<dd>Whether or not to use the alternate screen buffer and return the
terminal to its previous state on exit. When set to no, the last
kitty image stays on screen after quit, with the cursor following it.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-kitty-use-shm=&lt;yes|no&gt;</span></tt> (default: no)</dt>
<dd><p class="first">Use shared memory objects to transfer image data to the terminal.
This is much faster than sending the data as escape codes, but is not
supported by as many terminals. It also only works on the local machine
and not via e.g. SSH connections.</p>
<p class="last">This option is not implemented on Windows.</p>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">sixel</tt></dt>
<dd><p class="first">Graphical output for the terminal, using sixels. Tested with <tt class="docutils literal">mlterm</tt> and
<tt class="docutils literal">xterm</tt>.</p>
<p>Note: the Sixel image output is not synchronized with other terminal
output from mpv, which can lead to broken images.
The option <tt class="docutils literal"><span class="pre">--really-quiet</span></tt> can help with that, and is recommended.
On some platforms, using the <tt class="docutils literal"><span class="pre">--vo-sixel-buffered</span></tt> option may work as
well.</p>
<p>You may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent performance.</p>
<p>Note: at the time of writing, <tt class="docutils literal">xterm</tt> does not enable sixel by default -
launching it as <tt class="docutils literal">xterm <span class="pre">-ti</span> 340</tt> is one way to enable it. Also, <tt class="docutils literal">xterm</tt>
does not display images bigger than 1000x1000 pixels by default.</p>
<p>To render and align sixel images correctly, mpv needs to know the terminal
size both in cells and in pixels. By default it tries to use values which
the terminal reports, however, due to differences between terminals this is
an error-prone process which cannot be automated with certainty - some
terminals report the size in pixels including the padding - e.g. <tt class="docutils literal">xterm</tt>,
while others report the actual usable number of pixels - like <tt class="docutils literal">mlterm</tt>.
Additionally, they may behave differently when maximized or in fullscreen,
and mpv cannot detect this state using standard methods.</p>
<p>Sixel size and alignment options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-cols=&lt;columns&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-sixel-rows=&lt;rows&gt;</span></tt> (default: 0)</dt>
<dd>Specify the terminal size in character cells, otherwise (0) read it
from the terminal, or fall back to 80x25. Note that mpv doesn't use the
the last row with sixel because this seems to result in scrolling.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-width=&lt;width&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-sixel-height=&lt;height&gt;</span></tt> (default: 0)</dt>
<dd>Specify the available size in pixels, otherwise (0) read it from the
terminal, or fall back to 320x240. Other than excluding the last line,
the height is also further rounded down to a multiple of 6 (sixel unit
height) to avoid overflowing below the designated size.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-left=&lt;col&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-sixel-top=&lt;row&gt;</span></tt> (default: 0)</dt>
<dd>Specify the position in character cells where the image starts (1 is
the first column or row). If 0 (default) then try to automatically
determine it according to the other values and the image aspect ratio
and zoom.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-pad-x=&lt;pad_x&gt;</span></tt>, <tt class="docutils literal"><span class="pre">--vo-sixel-pad-y=&lt;pad_y&gt;</span></tt> (default: -1)</dt>
<dd>Used only when mpv reads the size in pixels from the terminal.
Specify the number of padding pixels (on one side) which are included
at the size which the terminal reports. If -1 (default) then the number
of pixels is rounded down to a multiple of number of cells (per axis),
to take into account padding at the report - this only works correctly
when the overall padding per axis is smaller than the number of cells.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-config-clear=&lt;yes|no&gt;</span></tt> (default: yes)</dt>
<dd>Whether or not to clear the terminal whenever the output is
reconfigured (e.g. when video size changes).</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-alt-screen=&lt;yes|no&gt;</span></tt> (default: yes)</dt>
<dd><p class="first">Whether or not to use the alternate screen buffer and return the
terminal to its previous state on exit. When set to no, the last
sixel image stays on screen after quit, with the cursor following it.</p>
<p class="last"><tt class="docutils literal"><span class="pre">--vo-sixel-exit-clear</span></tt> is a deprecated alias for this option and
may be removed in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-buffered=&lt;yes|no&gt;</span></tt> (default: no)</dt>
<dd>Buffers the full output sequence before writing it to the terminal.
On POSIX platforms, this can help prevent interruption (including from
other applications) and thus broken images, but may come at a
performance cost with some terminals and is subject to implementation
details.</dd>
</dl>
<p>Sixel image quality options:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-dither=&lt;algo&gt;</span></tt></dt>
<dd><p class="first">Selects the dither algorithm which libsixel should apply.
Can be one of the below list as per libsixel's documentation.</p>
<dl class="last docutils">
<dt>auto (Default)</dt>
<dd>Let libsixel choose the dithering method.</dd>
<dt>none</dt>
<dd>Don't diffuse</dd>
<dt>atkinson</dt>
<dd>Diffuse with Bill Atkinson's method.</dd>
<dt>fs</dt>
<dd>Diffuse with Floyd-Steinberg method</dd>
<dt>jajuni</dt>
<dd>Diffuse with Jarvis, Judice &amp; Ninke method</dd>
<dt>stucki</dt>
<dd>Diffuse with Stucki's method</dd>
<dt>burkes</dt>
<dd>Diffuse with Burkes' method</dd>
<dt>arithmetic</dt>
<dd>Positionally stable arithmetic dither</dd>
<dt>xor</dt>
<dd>Positionally stable arithmetic xor based dither</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-fixedpalette=&lt;yes|no&gt;</span></tt> (default: yes)</dt>
<dd>Use libsixel's built-in static palette using the XTERM256 profile
for dither. Fixed palette uses 256 colors for dithering. Note that
using <tt class="docutils literal">no</tt> (at the time of writing) will slow down <tt class="docutils literal">xterm</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-reqcolors=&lt;colors&gt;</span></tt> (default: 256)</dt>
<dd>Has no effect with fixed palette. Set up libsixel to use required
number of colors for dynamic palette. This value depends on the
terminal emulator as well. Xterm supports 256 colors. Can set this to
a lower value for faster performance.</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-sixel-threshold=&lt;threshold&gt;</span></tt> (default: -1)</dt>
<dd>Has no effect with fixed palette. Defines the threshold to change the
palette - as percentage of the number of colors, e.g. 20 will change
the palette when the number of colors changed by 20%. It's a simple
measure to reduce the number of palette changes, because it can be slow
in some terminals (<tt class="docutils literal">xterm</tt>). The default (-1) will choose a palette
on every frame and will have better quality.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">image</tt></dt>
<dd><p class="first">Output each frame into an image file in the current directory. Each file
takes the frame number padded with leading zeros as name.</p>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vo-image-format=&lt;format&gt;</span></tt></dt>
<dd><p class="first">Select the image file format.</p>
<dl class="last docutils">
<dt>jpg</dt>
<dd>JPEG files, extension .jpg. (Default.)</dd>
<dt>jpeg</dt>
<dd>JPEG files, extension .jpeg.</dd>
<dt>png</dt>
<dd>PNG files.</dd>
<dt>webp</dt>
<dd>WebP files.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-png-compression=&lt;0-9&gt;</span></tt></dt>
<dd>PNG compression factor (speed vs. file size tradeoff) (default: 7)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-png-filter=&lt;0-5&gt;</span></tt></dt>
<dd>Filter applied prior to PNG compression (0 = none; 1 = sub; 2 = up;
3 = average; 4 = Paeth; 5 = mixed) (default: 5)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-jpeg-quality=&lt;0-100&gt;</span></tt></dt>
<dd>JPEG quality factor (default: 90)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-jpeg-optimize=&lt;0-100&gt;</span></tt></dt>
<dd>JPEG optimization factor (default: 100)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-webp-lossless=&lt;yes|no&gt;</span></tt></dt>
<dd>Enable writing lossless WebP files (default: no)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-webp-quality=&lt;0-100&gt;</span></tt></dt>
<dd>WebP quality (default: 75)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-webp-compression=&lt;0-6&gt;</span></tt></dt>
<dd>WebP compression factor (default: 4)</dd>
<dt><tt class="docutils literal"><span class="pre">--vo-image-outdir=&lt;dirname&gt;</span></tt></dt>
<dd>Specify the directory to save the image files to (default: <tt class="docutils literal">./</tt>).</dd>
</dl>
</dd>
<dt><tt class="docutils literal">libmpv</tt></dt>
<dd><p class="first">For use with libmpv direct embedding. As a special case, on macOS it
is used like a normal VO within mpv (cocoa-cb). Otherwise useless in any
other contexts.
(See <tt class="docutils literal">&lt;mpv/render.h&gt;</tt>.)</p>
<p class="last">This also supports many of the options the <tt class="docutils literal">gpu</tt> VO has, depending on the
backend.</p>
</dd>
<dt><tt class="docutils literal">drm</tt> (Direct Rendering Manager)</dt>
<dd><p class="first">Video output driver using Kernel Mode Setting / Direct Rendering Manager.
Should be used when one doesn't want to install full-blown graphical
environment (e.g. no X). Does not support hardware acceleration (if you
need this, check the <tt class="docutils literal">drm</tt> backend for <tt class="docutils literal">gpu</tt> VO).</p>
<p>Since mpv 0.30.0, you may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent
performance.</p>
<p>The following global options are supported by this video output:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--drm-connector=&lt;name&gt;</span></tt></dt>
<dd>Select the connector to use (usually this is a monitor.) If <tt class="docutils literal">&lt;name&gt;</tt>
is empty or <tt class="docutils literal">auto</tt>, mpv renders the output on the first available
connector. Use <tt class="docutils literal"><span class="pre">--drm-connector=help</span></tt> to get a list of available
connectors. (default: empty)</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-device=&lt;path&gt;</span></tt></dt>
<dd>Select the DRM device file to use. If specified this overrides automatic
card selection. (default: empty)</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-mode=&lt;preferred|highest|N|WxH[&#64;R]&gt;</span></tt></dt>
<dd><p class="first">Mode to use (resolution and frame rate).
Possible values:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">preferred:</th><td class="field-body">Use the preferred mode for the screen on the selected
connector. (default)</td>
</tr>
<tr class="field"><th class="field-name">highest:</th><td class="field-body">Use the mode with the highest resolution available on the
selected connector.</td>
</tr>
<tr class="field"><th class="field-name">N:</th><td class="field-body">Select mode by index.</td>
</tr>
<tr class="field"><th class="field-name">WxH[&#64;R]:</th><td class="field-body">Specify mode by width, height, and optionally refresh rate.
In case several modes match, selects the mode that comes
first in the EDID list of modes.</td>
</tr>
</tbody>
</table>
<p class="last">Use <tt class="docutils literal"><span class="pre">--drm-mode=help</span></tt> to get a list of available modes for all active
connectors.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-draw-plane=&lt;primary|overlay|N&gt;</span></tt></dt>
<dd><p class="first">Select the DRM plane to which video and OSD is drawn to, under normal
circumstances. The plane can be specified as <tt class="docutils literal">primary</tt>, which will
pick the first applicable primary plane; <tt class="docutils literal">overlay</tt>, which will pick
the first applicable overlay plane; or by index. The index is zero
based, and related to the CRTC.
(default: primary)</p>
<p class="last">When using this option with the drmprime-overlay hwdec interop, only the
OSD is rendered to this plane.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-drmprime-video-plane=&lt;primary|overlay|N&gt;</span></tt></dt>
<dd><p class="first">Select the DRM plane to use for video with the drmprime-overlay hwdec
interop (used by e.g. the rkmpp hwdec on RockChip SoCs, and v4l2 hwdec:s
on various other SoC:s). The plane is unused otherwise. This option
accepts the same values as <tt class="docutils literal"><span class="pre">--drm-draw-plane</span></tt>. (default: overlay)</p>
<p class="last">To be able to successfully play 4K video on various SoCs you might need
to set <tt class="docutils literal"><span class="pre">--drm-draw-plane=overlay</span> <span class="pre">--drm-drmprime-video-plane=primary</span></tt>
and setting <tt class="docutils literal"><span class="pre">--drm-draw-surface-size=1920x1080</span></tt>, to render the OSD at a
lower resolution (the video when handled by the hwdec will be on the
drmprime-video plane and at full 4K resolution)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-format=&lt;xrgb8888|xbgr8888|xrgb2101010|xbgr2101010|yuyv&gt;</span></tt></dt>
<dd><p class="first">Select the DRM format to use (default: xrgb8888). This allows you to
choose the bit depth and color type of the DRM mode.</p>
<p>xrgb8888 is your usual 24bpp packed RGB format with 8 bits of padding.
xrgb2101010 is a 30bpp packed RGB format with 2 bits of padding.
yuyv is a 32bpp packed YUV 4:2:2 format. No planar formats are currently
supported.</p>
<p class="last">There are cases when xrgb2101010 will work with the <tt class="docutils literal">drm</tt> VO, but not
with the <tt class="docutils literal">drm</tt> backend for the <tt class="docutils literal">gpu</tt> VO. This is because with the
<tt class="docutils literal">gpu</tt> VO, in addition to requiring support in your DRM driver,
requires support for xrgb2101010 in your EGL driver.
yuyv only ever works with the <tt class="docutils literal">drm</tt> VO.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-draw-surface-size=&lt;[WxH]&gt;</span></tt></dt>
<dd><p class="first">Sets the size of the surface used on the draw plane. The surface will
then be upscaled to the current screen resolution. This option can be
useful when used together with the drmprime-overlay hwdec interop at
high resolutions, as it allows scaling the draw plane (which in this
case only handles the OSD) down to a size the GPU can handle.</p>
<p>When used without the drmprime-overlay hwdec interop this option will
just cause the video to get rendered at a different resolution and then
scaled to screen size.</p>
<p class="last">(default: display resolution)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">--drm-vrr-enabled=&lt;no|yes|auto&gt;</span></tt></dt>
<dd><p class="first">Toggle use of Variable Refresh Rate (VRR), aka Freesync or Adaptive Sync
on compatible systems. VRR allows for the display to be refreshed at any
rate within a range (usually ~40Hz-60Hz for 60Hz displays). This can help
with playback of 24/25/50fps content. Support depends on the use of a
compatible monitor, GPU, and a sufficiently new kernel with drivers
that support the feature.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Do not attempt to enable VRR. (default)</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Attempt to enable VRR, whether the capability is reported or not.</td>
</tr>
<tr class="field"><th class="field-name">auto:</th><td class="field-body">Attempt to enable VRR if support is reported.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">mediacodec_embed</tt> (Android)</dt>
<dd><p class="first">Renders <tt class="docutils literal">IMGFMT_MEDIACODEC</tt> frames directly to an <tt class="docutils literal">android.view.Surface</tt>.
Requires <tt class="docutils literal"><span class="pre">--hwdec=mediacodec</span></tt> for hardware decoding, along with
<tt class="docutils literal"><span class="pre">--vo=mediacodec_embed</span></tt> and <tt class="docutils literal"><span class="pre">--wid=(intptr_t)(*android.view.Surface)</span></tt>.</p>
<p>Since this video output driver uses native decoding and rendering routines,
many of mpv's features (subtitle rendering, OSD/OSC, video filters, etc)
are not available with this driver.</p>
<p class="last">To use hardware decoding with <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> instead, use <tt class="docutils literal"><span class="pre">--hwdec=mediacodec</span></tt>
or <tt class="docutils literal"><span class="pre">mediacodec-copy</span></tt> along with <tt class="docutils literal"><span class="pre">--gpu-context=android</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">wlshm</tt> (Wayland only)</dt>
<dd><p class="first">Shared memory video output driver without hardware acceleration that works
whenever Wayland is present.</p>
<p>Since mpv 0.30.0, you may need to use <tt class="docutils literal"><span class="pre">--profile=sw-fast</span></tt> to get decent
performance.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This is a fallback only, and should not be normally used.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="audio-filters">
<h1>AUDIO FILTERS</h1>
<p>Audio filters allow you to modify the audio stream and its properties. The
syntax is:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--af=...</span></tt></dt>
<dd>Setup a chain of audio filters. See <tt class="docutils literal"><span class="pre">--vf</span></tt> (<a class="reference internal" href="#video-filters">VIDEO FILTERS</a>) for the
full syntax.</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To get a full list of available audio filters, see <tt class="docutils literal"><span class="pre">--af=help</span></tt>.</p>
<p>Also, keep in mind that most actual filters are available via the <tt class="docutils literal">lavfi</tt>
wrapper, which gives you access to most of libavfilter's filters. This
includes all filters that have been ported from MPlayer to libavfilter.</p>
<p class="last">The <tt class="docutils literal"><span class="pre">--vf</span></tt> description describes how libavfilter can be used and how to
workaround deprecated mpv filters.</p>
</div>
<p>See <tt class="docutils literal"><span class="pre">--vf</span></tt> group of options for info on how <tt class="docutils literal"><span class="pre">--af-add</span></tt>, <tt class="docutils literal"><span class="pre">--af-pre</span></tt>,
<tt class="docutils literal"><span class="pre">--af-clr</span></tt>, and possibly others work.</p>
<p>Available filters are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">lavcac3enc[=options]</span></tt></dt>
<dd><p class="first">Encode multi-channel audio to AC-3 at runtime using libavcodec. Supports
16-bit native-endian input format, maximum 6 channels. The output is
big-endian when outputting a raw AC-3 stream, native-endian when
outputting to S/PDIF. If the input sample rate is not 48 kHz, 44.1 kHz or
32 kHz, it will be resampled to 48 kHz.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">tospdif=&lt;yes|no&gt;</span></tt></dt>
<dd>Output raw AC-3 stream if <tt class="docutils literal">no</tt>, output to S/PDIF for
pass-through if <tt class="docutils literal">yes</tt> (default).</dd>
<dt><tt class="docutils literal"><span class="pre">bitrate=&lt;rate&gt;</span></tt></dt>
<dd><p class="first">The bitrate use for the AC-3 stream. Set it to 384 to get 384 kbps.</p>
<p>The default is 640. Some receivers might not be able to handle this.</p>
<p>Valid values: 32, 40, 48, 56, 64, 80, 96, 112, 128,
160, 192, 224, 256, 320, 384, 448, 512, 576, 640.</p>
<p>The special value <tt class="docutils literal">auto</tt> selects a default bitrate based on the
input channel number:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">1ch:</th><td class="field-body">96</td>
</tr>
<tr class="field"><th class="field-name">2ch:</th><td class="field-body">192</td>
</tr>
<tr class="field"><th class="field-name">3ch:</th><td class="field-body">224</td>
</tr>
<tr class="field"><th class="field-name">4ch:</th><td class="field-body">384</td>
</tr>
<tr class="field"><th class="field-name">5ch:</th><td class="field-body">448</td>
</tr>
<tr class="field"><th class="field-name">6ch:</th><td class="field-body">448</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">minch=&lt;n&gt;</span></tt></dt>
<dd>If the input channel number is less than <tt class="docutils literal">&lt;minch&gt;</tt>, the filter will
detach itself (default: 3).</dd>
<dt><tt class="docutils literal"><span class="pre">encoder=&lt;name&gt;</span></tt></dt>
<dd>Select the libavcodec encoder used. Currently, this should be an AC-3
encoder, and using another codec will fail horribly.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">format=format:srate:channels:out-srate:out-channels</span></tt></dt>
<dd><p class="first">Does not do any format conversion itself. Rather, it may cause the
filter system to insert necessary conversion filters before or after this
filter if needed. It is primarily useful for controlling the audio format
going into other filters. To specify the format for audio output, see
<tt class="docutils literal"><span class="pre">--audio-format</span></tt>, <tt class="docutils literal"><span class="pre">--audio-samplerate</span></tt>, and <tt class="docutils literal"><span class="pre">--audio-channels</span></tt>. This
filter is able to force a particular format, whereas <tt class="docutils literal"><span class="pre">--audio-*</span></tt>
may be overridden by the ao based on output compatibility.</p>
<p>All parameters are optional. The first 3 parameters restrict what the filter
accepts as input. They will therefore cause conversion filters to be
inserted before this one.  The <tt class="docutils literal">out-</tt> parameters tell the filters or audio
outputs following this filter how to interpret the data without actually
doing a conversion. Setting these will probably just break things unless you
really know you want this for some reason, such as testing or dealing with
broken media.</p>
<dl class="docutils">
<dt><tt class="docutils literal">&lt;format&gt;</tt></dt>
<dd>Force conversion to this format. Use <tt class="docutils literal"><span class="pre">--af=format=format=help</span></tt> to get
a list of valid formats.</dd>
<dt><tt class="docutils literal">&lt;srate&gt;</tt></dt>
<dd>Force conversion to a specific sample rate. The rate is an integer,
48000 for example.</dd>
<dt><tt class="docutils literal">&lt;channels&gt;</tt></dt>
<dd>Force mixing to a specific channel layout. See <tt class="docutils literal"><span class="pre">--audio-channels</span></tt> option
for possible values.</dd>
</dl>
<p><tt class="docutils literal"><span class="pre">&lt;out-srate&gt;</span></tt></p>
<p><tt class="docutils literal"><span class="pre">&lt;out-channels&gt;</span></tt></p>
<p class="last"><em>NOTE</em>: this filter used to be named <tt class="docutils literal">force</tt>. The old <tt class="docutils literal">format</tt> filter
used to do conversion itself, unlike this one which lets the filter system
handle the conversion.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">scaletempo[=option1:option2:...]</span></tt></dt>
<dd><p class="first">Scales audio tempo without altering pitch, optionally synced to playback
speed.</p>
<p>This works by playing 'stride' ms of audio at normal speed then consuming
'stride*scale' ms of input audio. It pieces the strides together by
blending 'overlap'% of stride with audio following the previous stride. It
optionally performs a short statistical analysis on the next 'search' ms
of audio to determine the best overlap position.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">scale=&lt;amount&gt;</span></tt></dt>
<dd>Nominal amount to scale tempo. Scales this amount in addition to
speed. (default: 1.0)</dd>
<dt><tt class="docutils literal"><span class="pre">stride=&lt;amount&gt;</span></tt></dt>
<dd>Length in milliseconds to output each stride. Too high of a value will
cause noticeable skips at high scale amounts and an echo at low scale
amounts. Very low values will alter pitch. Increasing improves
performance. (default: 60)</dd>
<dt><tt class="docutils literal"><span class="pre">overlap=&lt;factor&gt;</span></tt></dt>
<dd>Factor of stride to overlap. Decreasing improves performance.
(default: .20)</dd>
<dt><tt class="docutils literal"><span class="pre">search=&lt;amount&gt;</span></tt></dt>
<dd>Length in milliseconds to search for best overlap position. Decreasing
improves performance greatly. On slow systems, you will probably want
to set this very low. (default: 14)</dd>
<dt><tt class="docutils literal"><span class="pre">speed=&lt;tempo|pitch|both|none&gt;</span></tt></dt>
<dd><p class="first">Set response to speed change.</p>
<dl class="last docutils">
<dt>tempo</dt>
<dd>Scale tempo in sync with speed (default).</dd>
<dt>pitch</dt>
<dd><p class="first">Reverses effect of filter. Scales pitch without altering tempo.
Add this to your <tt class="docutils literal">input.conf</tt> to step by musical semi-tones:</p>
<pre class="literal-block">
[ multiply speed 0.9438743126816935
] multiply speed 1.059463094352953
</pre>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Loses sync with video.</p>
</div>
</dd>
<dt>both</dt>
<dd>Scale both tempo and pitch.</dd>
<dt>none</dt>
<dd>Ignore speed changes.</dd>
</dl>
</dd>
</dl>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal">mpv <span class="pre">--af=scaletempo</span> <span class="pre">--speed=1.2</span> media.ogg</tt></dt>
<dd>Would play media at 1.2x normal speed, with audio at normal
pitch. Changing playback speed would change audio tempo to match.</dd>
<dt><tt class="docutils literal">mpv <span class="pre">--af=scaletempo=scale=1.2:speed=none</span> <span class="pre">--speed=1.2</span> media.ogg</tt></dt>
<dd>Would play media at 1.2x normal speed, with audio at normal
pitch, but changing playback speed would have no effect on audio
tempo.</dd>
<dt><tt class="docutils literal">mpv <span class="pre">--af=scaletempo=stride=30:overlap=.50:search=10</span> media.ogg</tt></dt>
<dd>Would tweak the quality and performance parameters.</dd>
<dt><tt class="docutils literal">mpv <span class="pre">--af=scaletempo=scale=1.2:speed=pitch</span> audio.ogg</tt></dt>
<dd>Would play media at 1.2x normal speed, with audio at normal pitch.
Changing playback speed would change pitch, leaving audio tempo at
1.2x.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">scaletempo2[=option1:option2:...]</span></tt></dt>
<dd><p class="first">Scales audio tempo without altering pitch.
The algorithm is ported from chromium and uses the
Waveform Similarity Overlap-and-add (WSOLA) method.
It seems to achieves higher audio quality than scaletempo, and rubberband R2
engine, or <tt class="docutils literal">engine=faster</tt>. This filter is inserted automatically if
<tt class="docutils literal"><span class="pre">audio-pitch-correction</span></tt> option is used (on by default) when the playback
speed is changed.</p>
<p>By default, the <tt class="docutils literal"><span class="pre">search-interval</span></tt> and <tt class="docutils literal"><span class="pre">window-size</span></tt> parameters
have the same values as in chromium.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">min-speed=&lt;speed&gt;</span></tt></dt>
<dd>Mute audio if the playback speed is below <tt class="docutils literal">&lt;speed&gt;</tt>. (default: 0.25)</dd>
<dt><tt class="docutils literal"><span class="pre">max-speed=&lt;speed&gt;</span></tt></dt>
<dd>Mute audio if the playback speed is above <tt class="docutils literal">&lt;speed&gt;</tt>
and <tt class="docutils literal">&lt;speed&gt; != 0</tt>. (default: 8.0)</dd>
<dt><tt class="docutils literal"><span class="pre">search-interval=&lt;amount&gt;</span></tt></dt>
<dd>Length in milliseconds to search for best overlap position. (default: 40)</dd>
<dt><tt class="docutils literal"><span class="pre">window-size=&lt;amount&gt;</span></tt></dt>
<dd>Length in milliseconds of the overlap-and-add window. (default: 12)</dd>
</dl>
</dd>
<dt><tt class="docutils literal">rubberband</tt></dt>
<dd><p class="first">High quality pitch correction with librubberband. This can be used in place
of <tt class="docutils literal">scaletempo</tt> and <tt class="docutils literal">scaletempo2</tt>, and will be used to adjust audio pitch
when playing at speed different from normal. It can also be used to adjust
audio pitch without changing playback speed.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">pitch-scale=&lt;amount&gt;</span></tt></dt>
<dd>Sets the pitch scaling factor. Frequencies are multiplied by this value.
(default: 1.0)</dd>
<dt><tt class="docutils literal"><span class="pre">engine=&lt;faster|finer&gt;</span></tt></dt>
<dd><p class="first">Select the core Rubberband engine to be used. There are two available:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Faster:</th><td class="field-body">This is the Rubberband R2 engine. It uses significantly less
CPU than the Finer (R3) engine.</td>
</tr>
<tr class="field"><th class="field-name">Finer:</th><td class="field-body">This is the Rubberband R3 engine. This engine is only available
with librubberband version 3 or newer. This produces significantly
higher quality output, at the cost of higher CPU usage. (Default
if available)</td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>This filter has a number of additional sub-options. You can list them with
<tt class="docutils literal">mpv <span class="pre">--af=rubberband=help</span></tt>. This will also show the default values
for each option. The options are not documented here, because they are
merely passed to librubberband. Look at the librubberband documentation
to learn what each option does:
<a class="reference external" href="https://breakfastquay.com/rubberband/code-doc/classRubberBand_1_1RubberBandStretcher.html">https://breakfastquay.com/rubberband/code-doc/classRubberBand_1_1RubberBandStretcher.html</a>
Do note that certain options are only applicable to one of R2 (faster) and
R3 (finer) engines.
(The mapping of the mpv rubberband filter sub-option names and values to
those of librubberband follows a simple pattern: <tt class="docutils literal">&quot;Option&quot; + Name + Value</tt>.)</p>
<p>This filter supports the following <tt class="docutils literal"><span class="pre">af-command</span></tt> commands:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">set-pitch</span></tt></dt>
<dd>Set the <tt class="docutils literal"><span class="pre">&lt;pitch-scale&gt;</span></tt> argument dynamically. This can be used to
change the playback pitch at runtime. Note that speed is controlled
using the standard <tt class="docutils literal">speed</tt> property, not <tt class="docutils literal"><span class="pre">af-command</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">multiply-pitch</span> &lt;factor&gt;</tt></dt>
<dd>Multiply the current value of <tt class="docutils literal"><span class="pre">&lt;pitch-scale&gt;</span></tt> dynamically.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">lavfi=graph</tt></dt>
<dd><p class="first">Filter audio using FFmpeg's libavfilter.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">&lt;graph&gt;</tt></dt>
<dd><p class="first">Libavfilter graph. See <tt class="docutils literal">lavfi</tt> video filter for details - the graph
syntax is the same.</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Don't forget to quote libavfilter graphs as described in the lavfi
video filter section.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">o=&lt;string&gt;</span></tt></dt>
<dd>AVOptions.</dd>
<dt><tt class="docutils literal"><span class="pre">fix-pts=&lt;yes|no&gt;</span></tt></dt>
<dd>Determine PTS based on sample count (default: no). If this is enabled,
the player won't rely on libavfilter passing through PTS accurately.
Instead, it pass a sample count as PTS to libavfilter, and compute the
PTS used by mpv based on that and the input PTS. This helps with filters
which output a recomputed PTS instead of the original PTS (including
filters which require the PTS to start at 0). mpv normally expects
filters to not touch the PTS (or only to the extent of changing frame
boundaries), so this is not the default, but it will be needed to use
broken filters. In practice, these broken filters will either cause slow
A/V desync over time (with some files), or break playback completely if
you seek or start playback from the middle of a file.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">drop</tt></dt>
<dd>This filter drops or repeats audio frames to adapt to playback speed. It
always operates on full audio frames, because it was made to handle SPDIF
(compressed audio passthrough). This is used automatically if the
<tt class="docutils literal"><span class="pre">--video-sync=display-adrop</span></tt> option is used. Do not use this filter (or
the given option); they are extremely low quality.</dd>
</dl>
</div>
<div class="section" id="video-filters">
<h1>VIDEO FILTERS</h1>
<p>Video filters allow you to modify the video stream and its properties. All of
the information described in this section applies to audio filters as well
(generally using the prefix <tt class="docutils literal"><span class="pre">--af</span></tt> instead of <tt class="docutils literal"><span class="pre">--vf</span></tt>).</p>
<p>The exact syntax is:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vf=&lt;filter1[=parameter1:parameter2:...],filter2,...&gt;</span></tt></dt>
<dd><p class="first">Setup a chain of video filters. This consists on the filter name, and an
option list of parameters after <tt class="docutils literal">=</tt>. The parameters are separated by
<tt class="docutils literal">:</tt> (not <tt class="docutils literal">,</tt>, as that starts a new filter entry).</p>
<p>Before the filter name, a label can be specified with <tt class="docutils literal">&#64;name:</tt>, where
name is an arbitrary user-given name, which identifies the filter. This
is only needed if you want to toggle the filter at runtime.</p>
<p>A <tt class="docutils literal">!</tt> before the filter name means the filter is disabled by default. It
will be skipped on filter creation. This is also useful for runtime filter
toggling.</p>
<p>See the <tt class="docutils literal">vf</tt> command (and <tt class="docutils literal">toggle</tt> sub-command) for further explanations
and examples.</p>
<p>The general filter entry syntax is:</p>
<blockquote>
<tt class="docutils literal"><span class="pre">[&quot;&#64;&quot;&lt;label-name&gt;&quot;:&quot;]</span> <span class="pre">[&quot;!&quot;]</span> <span class="pre">&lt;filter-name&gt;</span> [ &quot;=&quot; <span class="pre">&lt;filter-parameter-list&gt;</span> ]</tt></blockquote>
<p>or for the special &quot;toggle&quot; syntax (see <tt class="docutils literal">vf</tt> command):</p>
<blockquote>
<tt class="docutils literal"><span class="pre">&quot;&#64;&quot;&lt;label-name&gt;</span></tt></blockquote>
<p>and the <tt class="docutils literal"><span class="pre">filter-parameter-list</span></tt>:</p>
<blockquote>
<tt class="docutils literal"><span class="pre">&lt;filter-parameter&gt;</span> | <span class="pre">&lt;filter-parameter&gt;</span> &quot;,&quot; <span class="pre">&lt;filter-parameter-list&gt;</span></tt></blockquote>
<p>and <tt class="docutils literal"><span class="pre">filter-parameter</span></tt>:</p>
<blockquote>
<tt class="docutils literal">( <span class="pre">&lt;param-name&gt;</span> &quot;=&quot; <span class="pre">&lt;param-value&gt;</span> ) | <span class="pre">&lt;param-value&gt;</span></tt></blockquote>
<p class="last"><tt class="docutils literal"><span class="pre">param-value</span></tt> can further be quoted in <tt class="docutils literal">[</tt> / <tt class="docutils literal">]</tt> in case the value
contains characters like <tt class="docutils literal">,</tt> or <tt class="docutils literal">=</tt>. This is used in particular with
the <tt class="docutils literal">lavfi</tt> filter, which uses a very similar syntax as mpv (MPlayer
historically) to specify filters and their parameters.</p>
</dd>
</dl>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">--vf</span></tt> can only take a single track as input, even if the filter supports
dynamic input. Filters that require multiple inputs can't be used.
Use <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt> for such a use case. This also applies for <tt class="docutils literal"><span class="pre">--af</span></tt>.</p>
</div>
<p>Filters can be manipulated at run time. You can use <tt class="docutils literal">&#64;</tt> labels as described
above in combination with the <tt class="docutils literal">vf</tt> command (see <a class="reference internal" href="#command-interface">COMMAND INTERFACE</a>) to get
more control over this. Initially disabled filters with <tt class="docutils literal">!</tt> are useful for
this as well.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>To get a full list of available video filters, see <tt class="docutils literal"><span class="pre">--vf=help</span></tt> and
<a class="reference external" href="https://ffmpeg.org/ffmpeg-filters.html">https://ffmpeg.org/ffmpeg-filters.html</a> .</p>
<p>Also, keep in mind that most actual filters are available via the <tt class="docutils literal">lavfi</tt>
wrapper, which gives you access to most of libavfilter's filters. This
includes all filters that have been ported from MPlayer to libavfilter.</p>
<p>Most builtin filters are deprecated in some ways, unless they're only available
in mpv (such as filters which deal with mpv specifics, or which are
implemented in mpv only).</p>
<p>If a filter is not builtin, the <tt class="docutils literal"><span class="pre">lavfi-bridge</span></tt> will be automatically
tried. This bridge does not support help output, and does not verify
parameters before the filter is actually used. Although the mpv syntax
is rather similar to libavfilter's, it's not the same. (Which means not
everything accepted by vf_lavfi's <tt class="docutils literal">graph</tt> option will be accepted by
<tt class="docutils literal"><span class="pre">--vf</span></tt>.)</p>
<p class="last">You can also prefix the filter name with <tt class="docutils literal">lavfi-</tt> to force the wrapper.
This is helpful if the filter name collides with a deprecated mpv builtin
filter. For example <tt class="docutils literal"><span class="pre">--vf=lavfi-scale=args</span></tt> would use libavfilter's
<tt class="docutils literal">scale</tt> filter over mpv's deprecated builtin one.</p>
</div>
<p>Video filters are managed in lists. There are a few commands to manage the
filter list.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vf-append=filter</span></tt></dt>
<dd>Appends the filter given as arguments to the filter list.</dd>
<dt><tt class="docutils literal"><span class="pre">--vf-add=filter</span></tt></dt>
<dd>Appends the filter given as arguments to the filter list. (Passing multiple
filters is currently still possible, but deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--vf-pre=filter</span></tt></dt>
<dd>Prepends the filters given as arguments to the filter list. (Passing
multiple filters is currently still possible, but deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--vf-remove=filter</span></tt></dt>
<dd>Deletes the filter from the list. The filter can be either given the way it
was added (filter name and its full argument list), or by label (prefixed
with <tt class="docutils literal">&#64;</tt>). Matching of filters works as follows: if either of the compared
filters has a label set, only the labels are compared. If none of the
filters have a label, the filter name, arguments, and argument order are
compared. (Passing multiple filters is currently still possible, but
deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--vf-toggle=filter</span></tt></dt>
<dd>Add the given filter to the list if it was not present yet, or remove it
from the list if it was present. Matching of filters works as described in
<tt class="docutils literal"><span class="pre">--vf-remove</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">--vf-clr</span></tt></dt>
<dd>Completely empties the filter list.</dd>
</dl>
<p>With filters that support it, you can access parameters by their name.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--vf=&lt;filter&gt;=help</span></tt></dt>
<dd>Prints the parameter names and parameter value ranges for a particular
filter.</dd>
</dl>
<p>Available mpv-only filters are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">format=fmt=&lt;value&gt;:colormatrix=&lt;value&gt;:...</span></tt></dt>
<dd><p class="first">Applies video parameter overrides, with optional conversion. By default,
this overrides the video's parameters without conversion (except for the
<tt class="docutils literal">fmt</tt> parameter), but can be made to perform an appropriate conversion
with <tt class="docutils literal">convert=yes</tt> for parameters for which conversion is supported.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">&lt;fmt&gt;</tt></dt>
<dd><p class="first">Image format name, e.g. rgb15, bgr24, 420p, etc. (default: don't change).</p>
<p>This filter always performs conversion to the given format.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For a list of available formats, use <tt class="docutils literal"><span class="pre">--vf=format=fmt=help</span></tt>.</p>
</div>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Conversion between hardware formats is supported in some cases.
eg: <tt class="docutils literal">cuda</tt> to <tt class="docutils literal">vulkan</tt>, or <tt class="docutils literal">vaapi</tt> to <tt class="docutils literal">vulkan</tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal">&lt;convert=yes|no&gt;</tt></dt>
<dd><p class="first">Force conversion of color parameters (default: no).</p>
<p>If this is disabled (the default), the only conversion that is possibly
performed is format conversion if <tt class="docutils literal">&lt;fmt&gt;</tt> is set. All other parameters
(like <tt class="docutils literal">&lt;colormatrix&gt;</tt>) are forced without conversion. This mode is
typically useful when files have been incorrectly tagged.</p>
<p>If this is enabled, libswscale or zimg is used if any of the parameters
mismatch. zimg is used of the input/output image formats are supported
by mpv's zimg wrapper, and if <tt class="docutils literal"><span class="pre">--sws-allow-zimg=yes</span></tt> is used. Both
libraries may not support all kinds of conversions. This typically
results in silent incorrect conversion. zimg has in many cases a better
chance of performing the conversion correctly.</p>
<p>In both cases, the color parameters are set on the output stage of the
image format conversion (if <tt class="docutils literal">fmt</tt> was set). The difference is that
with <tt class="docutils literal">convert=no</tt>, the color parameters are not passed on to the
converter.</p>
<p>If input and output video parameters are the same, conversion is always
skipped.</p>
<p>When converting between hardware formats, this parameter has no effect,
and the only conversion that is done is the format conversion.</p>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal">mpv test.mkv <span class="pre">--vf=format:colormatrix=ycgco</span></tt></dt>
<dd>Results in incorrect colors (if test.mkv was tagged correctly).</dd>
<dt><tt class="docutils literal">mpv test.mkv <span class="pre">--vf=format:colormatrix=ycgco:convert=yes</span> <span class="pre">--sws-allow-zimg</span></tt></dt>
<dd><p class="first">Results in true conversion to <tt class="docutils literal">ycgco</tt>, assuming the renderer
supports it (<tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> normally does). You can add <tt class="docutils literal"><span class="pre">--vo=xv</span></tt>
to force a VO which definitely does not support it, which should
show incorrect colors as confirmation.</p>
<p class="last">Using <tt class="docutils literal"><span class="pre">--sws-allow-zimg=no</span></tt> (or disabling zimg at build time)
will use libswscale, which cannot perform this conversion as
of this writing.</p>
</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal">&lt;colormatrix&gt;</tt></dt>
<dd><p class="first">Controls the YUV to RGB color space conversion when playing video. There
are various standards. Normally, BT.601 should be used for SD video, and
BT.709 for HD video. (This is done by default.) Using incorrect color space
results in slightly under or over saturated and shifted colors.</p>
<p>These options are not always supported. Different video outputs provide
varying degrees of support. The <tt class="docutils literal">gpu</tt> and <tt class="docutils literal">vdpau</tt> video output
drivers usually offer full support. The <tt class="docutils literal">xv</tt> output can set the color
space if the system video driver supports it, but not input and output
levels. The <tt class="docutils literal">scale</tt> video filter can configure color space and input
levels, but only if the output format is RGB (if the video output driver
supports RGB output, you can force this with <tt class="docutils literal"><span class="pre">--vf=scale,format=rgba</span></tt>).</p>
<p>If this option is set to <tt class="docutils literal">auto</tt> (which is the default), the video's
color space flag will be used. If that flag is unset, the color space
will be selected automatically. This is done using a simple heuristic that
attempts to distinguish SD and HD video. If the video is larger than
1279x576 pixels, BT.709 (HD) will be used; otherwise BT.601 (SD) is
selected.</p>
<p>Available color spaces are:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">automatic selection (default)</td>
</tr>
<tr class="field"><th class="field-name">bt.601:</th><td class="field-body">ITU-R Rec. BT.601 (SD)</td>
</tr>
<tr class="field"><th class="field-name">bt.709:</th><td class="field-body">ITU-R Rec. BT.709 (HD)</td>
</tr>
<tr class="field"><th class="field-name">bt.2020-ncl:</th><td class="field-body">ITU-R Rec. BT.2020 (non-constant luminance)</td>
</tr>
<tr class="field"><th class="field-name">bt.2020-cl:</th><td class="field-body">ITU-R Rec. BT.2020 (constant luminance)</td>
</tr>
<tr class="field"><th class="field-name">bt.2100-pq:</th><td class="field-body">ITU-R Rec. BT.2100 ICtCp PQ variant</td>
</tr>
<tr class="field"><th class="field-name">bt.2100-hlg:</th><td class="field-body">ITU-R Rec. BT.2100 ICtCp HLG variant</td>
</tr>
<tr class="field"><th class="field-name">dolbyvision:</th><td class="field-body">Dolby Vision</td>
</tr>
<tr class="field"><th class="field-name">smpte-240m:</th><td class="field-body">SMPTE-240M</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal">&lt;colorlevels&gt;</tt></dt>
<dd><p class="first">YUV color levels used with YUV to RGB conversion. This option is only
necessary when playing broken files which do not follow standard color
levels or which are flagged wrong. If the video does not specify its
color range, it is assumed to be limited range.</p>
<p>The same limitations as with <tt class="docutils literal">&lt;colormatrix&gt;</tt> apply.</p>
<p>Available color ranges are:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">automatic selection (normally limited range) (default)</td>
</tr>
<tr class="field"><th class="field-name">limited:</th><td class="field-body">limited range (16-235 for luma, 16-240 for chroma)</td>
</tr>
<tr class="field"><th class="field-name">full:</th><td class="field-body">full range (0-255 for both luma and chroma)</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal">&lt;primaries&gt;</tt></dt>
<dd><p class="first">RGB primaries the source file was encoded with. Normally this should be set
in the file header, but when playing broken or mistagged files this can be
used to override the setting.</p>
<p>This option only affects video output drivers that perform color
management, for example <tt class="docutils literal">gpu</tt> with the <tt class="docutils literal"><span class="pre">target-prim</span></tt> or
<tt class="docutils literal"><span class="pre">icc-profile</span></tt> suboptions set.</p>
<p>If this option is set to <tt class="docutils literal">auto</tt> (which is the default), the video's
primaries flag will be used. If that flag is unset, the color space will
be selected automatically, using the following heuristics: If the
<tt class="docutils literal">&lt;colormatrix&gt;</tt> is set or determined as BT.2020 or BT.709, the
corresponding primaries are used. Otherwise, if the video height is
exactly 576 (PAL), BT.601-625 is used. If it's exactly 480 or 486 (NTSC),
BT.601-525 is used. If the video resolution is anything else, BT.709 is
used.</p>
<p>Available primaries are:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">automatic selection (default)</td>
</tr>
<tr class="field"><th class="field-name">bt.601-525:</th><td class="field-body">ITU-R BT.601 (SD) 525-line systems (NTSC, SMPTE-C)</td>
</tr>
<tr class="field"><th class="field-name">bt.601-625:</th><td class="field-body">ITU-R BT.601 (SD) 625-line systems (PAL, SECAM)</td>
</tr>
<tr class="field"><th class="field-name">bt.709:</th><td class="field-body">ITU-R BT.709 (HD) (same primaries as sRGB)</td>
</tr>
<tr class="field"><th class="field-name">bt.2020:</th><td class="field-body">ITU-R BT.2020 (UHD)</td>
</tr>
<tr class="field"><th class="field-name">apple:</th><td class="field-body">Apple RGB</td>
</tr>
<tr class="field"><th class="field-name">adobe:</th><td class="field-body">Adobe RGB (1998)</td>
</tr>
<tr class="field"><th class="field-name">prophoto:</th><td class="field-body">ProPhoto RGB (ROMM)</td>
</tr>
<tr class="field"><th class="field-name">cie1931:</th><td class="field-body">CIE 1931 RGB</td>
</tr>
<tr class="field"><th class="field-name">dci-p3:</th><td class="field-body">DCI-P3 (Digital Cinema)</td>
</tr>
<tr class="field"><th class="field-name">v-gamut:</th><td class="field-body">Panasonic V-Gamut primaries</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal">&lt;gamma&gt;</tt></dt>
<dd><p class="first">Gamma function the source file was encoded with. Normally this should be set
in the file header, but when playing broken or mistagged files this can be
used to override the setting.</p>
<p>This option only affects video output drivers that perform color management.</p>
<p>If this option is set to <tt class="docutils literal">auto</tt> (which is the default), the gamma will
be set to BT.1886 for YCbCr content, sRGB for RGB content and Linear for
XYZ content.</p>
<p>Available gamma functions are:</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">automatic selection (default)</td>
</tr>
<tr class="field"><th class="field-name">bt.1886:</th><td class="field-body">ITU-R BT.1886 (EOTF corresponding to BT.601/BT.709/BT.2020)</td>
</tr>
<tr class="field"><th class="field-name">srgb:</th><td class="field-body">IEC 61966-2-4 (sRGB)</td>
</tr>
<tr class="field"><th class="field-name">linear:</th><td class="field-body">Linear light</td>
</tr>
<tr class="field"><th class="field-name">gamma1.8:</th><td class="field-body">Pure power curve (gamma 1.8)</td>
</tr>
<tr class="field"><th class="field-name">gamma2.0:</th><td class="field-body">Pure power curve (gamma 2.0)</td>
</tr>
<tr class="field"><th class="field-name">gamma2.2:</th><td class="field-body">Pure power curve (gamma 2.2)</td>
</tr>
<tr class="field"><th class="field-name">gamma2.4:</th><td class="field-body">Pure power curve (gamma 2.4)</td>
</tr>
<tr class="field"><th class="field-name">gamma2.6:</th><td class="field-body">Pure power curve (gamma 2.6)</td>
</tr>
<tr class="field"><th class="field-name">gamma2.8:</th><td class="field-body">Pure power curve (gamma 2.8)</td>
</tr>
<tr class="field"><th class="field-name">prophoto:</th><td class="field-body">ProPhoto RGB (ROMM) curve</td>
</tr>
<tr class="field"><th class="field-name">pq:</th><td class="field-body">ITU-R BT.2100 PQ (Perceptual quantizer) curve</td>
</tr>
<tr class="field"><th class="field-name">hlg:</th><td class="field-body">ITU-R BT.2100 HLG (Hybrid Log-gamma) curve</td>
</tr>
<tr class="field"><th class="field-name">v-log:</th><td class="field-body">Panasonic V-Log transfer curve</td>
</tr>
<tr class="field"><th class="field-name">s-log1:</th><td class="field-body">Sony S-Log1 transfer curve</td>
</tr>
<tr class="field"><th class="field-name">s-log2:</th><td class="field-body">Sony S-Log2 transfer curve</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;sig-peak&gt;</span></tt></dt>
<dd><p class="first">Reference peak illumination for the video file, relative to the
signal's reference white level. This is mostly interesting for HDR, but
it can also be used tone map SDR content to simulate a different
exposure. Normally inferred from tags such as MaxCLL or mastering
metadata.</p>
<p class="last">The default of 0.0 will default to the source's nominal peak luminance.</p>
</dd>
<dt><tt class="docutils literal">&lt;light&gt;</tt></dt>
<dd><blockquote class="first">
<p>Light type of the scene. This is mostly correctly inferred based on the
gamma function, but it can be useful to override this when viewing raw
camera footage (e.g. V-Log), which is normally scene-referred instead
of display-referred.</p>
<p>Available light types are:</p>
</blockquote>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">auto:</th><td class="field-body">Automatic selection (default)</td>
</tr>
<tr class="field"><th class="field-name">display:</th><td class="field-body">Display-referred light (most content)</td>
</tr>
<tr class="field"><th class="field-name">hlg:</th><td class="field-body">Scene-referred using the HLG OOTF (e.g. HLG content)</td>
</tr>
<tr class="field"><th class="field-name">709-1886:</th><td class="field-body">Scene-referred using the BT709+BT1886 interaction</td>
</tr>
<tr class="field"><th class="field-name">gamma1.2:</th><td class="field-body">Scene-referred using a pure power OOTF (gamma=1.2)</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal">&lt;dolbyvision=yes|no&gt;</tt></dt>
<dd>Whether or not to include Dolby Vision metadata (default: yes). If
disabled, any Dolby Vision metadata will be stripped from frames.</dd>
<dt><tt class="docutils literal">&lt;hdr10plus=yes|no&gt;</tt></dt>
<dd>Whether or not to include HDR10+ metadata (default: yes). If
disabled, any HDR10+ metadata will be stripped from frames.</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;film-grain=yes|no&gt;</span></tt></dt>
<dd>Whether or not to include film grain metadata (default: yes). If
disabled, any film grain metadata will be stripped from frames.</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;chroma-location&gt;</span></tt></dt>
<dd>Set the chroma loc of the video. Use
<tt class="docutils literal"><span class="pre">--vf=format:chroma-location=help</span></tt> to list all available modes.</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;stereo-in&gt;</span></tt></dt>
<dd>Set the stereo mode the video is assumed to be encoded in. Use
<tt class="docutils literal"><span class="pre">--vf=format:stereo-in=help</span></tt> to list all available modes. Check with
the <tt class="docutils literal">stereo3d</tt> filter documentation to see what the names mean.</dd>
<dt><tt class="docutils literal">&lt;rotate&gt;</tt></dt>
<dd>Set the rotation the video is assumed to be encoded with in degrees.
The special value <tt class="docutils literal"><span class="pre">-1</span></tt> uses the input format.</dd>
<dt><tt class="docutils literal">&lt;w&gt;</tt>, <tt class="docutils literal">&lt;h&gt;</tt></dt>
<dd>If not 0, perform conversion to the given size. Ignored if
<tt class="docutils literal">convert=yes</tt> is not set.</dd>
<dt><tt class="docutils literal">&lt;dw&gt;</tt>, <tt class="docutils literal">&lt;dh&gt;</tt></dt>
<dd>Set the display size. Note that setting the display size such that
the video is scaled in both directions instead of just changing the
aspect ratio is an implementation detail, and might change later.</dd>
<dt><tt class="docutils literal">&lt;dar&gt;</tt></dt>
<dd>Set the display aspect ratio of the video frame. This is a float,
but values such as <tt class="docutils literal">[16:9]</tt> can be passed too (<tt class="docutils literal"><span class="pre">[...]</span></tt> for quoting
to prevent the option parser from interpreting the <tt class="docutils literal">:</tt> character).</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;force-scaler=auto|zimg|sws&gt;</span></tt></dt>
<dd>Force a specific scaler backend, if applicable. This is a debug option
and could go away any time.</dd>
<dt><tt class="docutils literal">&lt;alpha=auto|straight|premul&gt;</tt></dt>
<dd>Set the kind of alpha the video uses. Undefined effect if the image
format has no alpha channel (could be ignored or cause an error,
depending on how mpv internals evolve). Setting this may or may not
cause downstream image processing to treat alpha differently, depending
on support. With <tt class="docutils literal">convert</tt> and zimg used, this will convert the alpha.
libswscale and other FFmpeg components completely ignore this.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">lavfi=graph[:sws-flags[:o=opts]]</span></tt></dt>
<dd><p class="first">Filter video using FFmpeg's libavfilter.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">&lt;graph&gt;</tt></dt>
<dd><p class="first">The libavfilter graph string. The filter must have a single video input
pad and a single video output pad.</p>
<p>See <a class="reference external" href="https://ffmpeg.org/ffmpeg-filters.html">https://ffmpeg.org/ffmpeg-filters.html</a> for syntax and available
filters.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you want to use the full filter syntax with this option, you have
to quote the filter graph in order to prevent mpv's syntax and the
filter graph syntax from clashing. To prevent a quoting and escaping
mess, consider using <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt> if you know which video
track you want to use from the input file. (There is only one video
track for nearly all video files anyway.)</p>
</div>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vf=lavfi=[gradfun=20:30,vflip]</span></tt></dt>
<dd><tt class="docutils literal">gradfun</tt> filter with nonsense parameters, followed by a
<tt class="docutils literal">vflip</tt> filter. (This demonstrates how libavfilter takes a
graph and not just a single filter.) The filter graph string is
quoted with <tt class="docutils literal">[</tt> and <tt class="docutils literal">]</tt>. This requires no additional quoting
or escaping with some shells (like bash), while others (like
zsh) require additional <tt class="docutils literal">&quot;</tt> quotes around the option string.</dd>
<dt><tt class="docutils literal"><span class="pre">'--vf=lavfi=&quot;gradfun=20:30,vflip&quot;'</span></tt></dt>
<dd>Same as before, but uses quoting that should be safe with all
shells. The outer <tt class="docutils literal">'</tt> quotes make sure that the shell does not
remove the <tt class="docutils literal">&quot;</tt> quotes needed by mpv.</dd>
<dt><tt class="docutils literal"><span class="pre">'--vf=lavfi=graph=&quot;gradfun=radius=30:strength=20,vflip&quot;'</span></tt></dt>
<dd>Same as before, but uses named parameters for everything.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;sws-flags&gt;</span></tt></dt>
<dd><p class="first">If libavfilter inserts filters for pixel format conversion, this
option gives the flags which should be passed to libswscale. This
option is numeric and takes a bit-wise combination of <tt class="docutils literal">SWS_</tt> flags.</p>
<p class="last">See <tt class="docutils literal"><span class="pre">https://git.videolan.org/?p=ffmpeg.git;a=blob;f=libswscale/swscale.h</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">&lt;o&gt;</tt></dt>
<dd><p class="first">Set AVFilterGraph options. These should be documented by FFmpeg.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">'--vf=lavfi=yadif:o=&quot;threads=2,thread_type=slice&quot;'</span></tt></dt>
<dd>forces a specific threading configuration.</dd>
</dl>
</div>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub=[=bottom-margin:top-margin]</span></tt></dt>
<dd><p class="first">Moves subtitle rendering to an arbitrary point in the filter chain, or force
subtitle rendering in the video filter as opposed to using video output OSD
support.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">&lt;bottom-margin&gt;</span></tt></dt>
<dd>Adds a black band at the bottom of the frame. The SSA/ASS renderer can
place subtitles there (with <tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;top-margin&gt;</span></tt></dt>
<dd>Black band on the top for toptitles  (with <tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt>).</dd>
</dl>
<div class="admonition admonition-examples last">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--vf=sub,eq</span></tt></dt>
<dd>Moves sub rendering before the eq filter. This will put both
subtitle colors and video under the influence of the video equalizer
settings.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">vapoursynth=file:buffered-frames:concurrent-frames:user-data</span></tt></dt>
<dd><p class="first">Loads a VapourSynth filter script. This is intended for streamed
processing: mpv actually provides a source filter, instead of using a
native VapourSynth video source. The mpv source will answer frame
requests only within a small window of frames (the size of this window
is controlled with the <tt class="docutils literal"><span class="pre">buffered-frames</span></tt> parameter), and requests outside
of that will return errors. As such, you can't use the full power of
VapourSynth, but you can use certain filters.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use this filter, unless you have expert knowledge in VapourSynth,
and know how to fix bugs in the mpv VapourSynth wrapper code.</p>
</div>
<p>If you just want to play video generated by VapourSynth (i.e. using
a native VapourSynth video source), it's better to use <tt class="docutils literal">vspipe</tt> and a
pipe or FIFO to feed the video to mpv. The same applies if the filter script
requires random frame access (see <tt class="docutils literal"><span class="pre">buffered-frames</span></tt> parameter).</p>
<dl class="docutils">
<dt><tt class="docutils literal">file</tt></dt>
<dd><p class="first">Filename of the script source. Currently, this is always a python
script (<tt class="docutils literal">.vpy</tt> in VapourSynth convention).</p>
<p>The variable <tt class="docutils literal">video_in</tt> is set to the mpv video source, and it is
expected that the script reads video from it. (Otherwise, mpv will
decode no video, and the video packet queue will overflow, eventually
leading to only audio playing, or worse.)</p>
<p>The filter graph created by the script is also expected to pass through
timestamps using the <tt class="docutils literal">_DurationNum</tt> and <tt class="docutils literal">_DurationDen</tt> frame
properties.</p>
<p>See the end of the option list for a full list of script variables
defined by mpv.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example:</p>
<pre class="last literal-block">
import vapoursynth as vs
from vapoursynth import core
core.std.AddBorders(video_in, 10, 10, 20, 20).set_output()
</pre>
</div>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">The script will be reloaded on every seek. This is done to reset
the filter properly on discontinuities.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">buffered-frames</span></tt></dt>
<dd><p class="first">Maximum number of decoded video frames that should be buffered before
the filter (default: 4). This specifies the maximum number of frames
the script can request in backward direction.</p>
<p>E.g. if <tt class="docutils literal"><span class="pre">buffered-frames=5</span></tt>, and the script just requested frame 15,
it can still request frame 10, but frame 9 is not available anymore.
If it requests frame 30, mpv will decode 15 more frames, and keep only
frames 25-30.</p>
<p>The only reason why this buffer exists is to serve the random access
requests the VapourSynth filter can make.</p>
<p>The VapourSynth API has a <tt class="docutils literal">getFrameAsync</tt> function, which takes an
absolute frame number. Source filters must respond to all requests. For
example, a source filter can request frame 2432, and then frame 3.
Source filters  typically implement this by pre-indexing the entire
file.</p>
<p>mpv on the other hand is stream oriented, and does not allow filters to
seek. (And it would not make sense to allow it, because it would ruin
performance.) Filters get frames sequentially in playback direction, and
cannot request them out of order.</p>
<p>To compensate for this mismatch, mpv allows the filter to access frames
within a certain window. <tt class="docutils literal"><span class="pre">buffered-frames</span></tt> controls the size of this
window. Most VapourSynth filters happen to work with this, because mpv
requests frames sequentially increasing from it, and most filters only
require frames &quot;close&quot; to the requested frame.</p>
<p>If the filter requests a frame that has a higher frame number than the
highest buffered frame, new frames will be decoded until the requested
frame number is reached. Excessive frames will be flushed out in a FIFO
manner (there are only at most <tt class="docutils literal"><span class="pre">buffered-frames</span></tt> in this buffer).</p>
<p>If the filter requests a frame that has a lower frame number than the
lowest buffered frame, the request cannot be satisfied, and an error
is returned to the filter. This kind of error is not supposed to happen
in a &quot;proper&quot; VapourSynth environment. What exactly happens depends on
the filters involved.</p>
<p>Increasing this buffer will not improve performance. Rather, it will
waste memory, and slow down seeks (when enough frames to fill the buffer
need to be decoded at once). It is only needed to prevent the error
described in the previous paragraph.</p>
<p>How many frames a filter requires depends on filter implementation
details, and mpv has no way of knowing. A scale filter might need only
1 frame, an interpolation filter may require a small number of frames,
and the <tt class="docutils literal">Reverse</tt> filter will require an infinite number of frames.</p>
<p>If you want reliable operation to the full extend VapourSynth is
capable, use <tt class="docutils literal">vspipe</tt>.</p>
<p class="last">The actual number of buffered frames also depends on the value of the
<tt class="docutils literal"><span class="pre">concurrent-frames</span></tt> option. Currently, both option values are
multiplied to get the final buffer size.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">concurrent-frames</span></tt></dt>
<dd><p class="first">Number of frames that should be requested in parallel. The
level of concurrency depends on the filter and how quickly mpv can
decode video to feed the filter. This value should probably be
proportional to the number of cores on your machine. Most time,
making it higher than the number of cores can actually make it
slower.</p>
<p>Technically, mpv will call the VapourSynth <tt class="docutils literal">getFrameAsync</tt> function
in a loop, until there are <tt class="docutils literal"><span class="pre">concurrent-frames</span></tt> frames that have not
been returned by the filter yet. This also assumes that the rest of the
mpv filter chain reads the output of the <tt class="docutils literal">vapoursynth</tt> filter quickly
enough. (For example, if you pause the player, filtering will stop very
soon, because the filtered frames are waiting in a queue.)</p>
<p>Actual concurrency depends on many other factors.</p>
<p class="last">By default, this uses the special value <tt class="docutils literal">auto</tt>, which sets the option
to the number of detected logical CPU cores.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">user-data</span></tt></dt>
<dd>Optional arbitrary string that is passed to the script. Default to empty
string if not set.</dd>
</dl>
<p>The following <tt class="docutils literal">.vpy</tt> script variables are defined by mpv:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">video_in</tt></dt>
<dd>The mpv video source as vapoursynth clip. Note that this has an
incorrect (very high) length set, which confuses many filters. This is
necessary, because the true number of frames is unknown. You can use the
<tt class="docutils literal">Trim</tt> filter on the clip to reduce the length.</dd>
<dt><tt class="docutils literal">video_in_dw</tt>, <tt class="docutils literal">video_in_dh</tt></dt>
<dd>Display size of the video. Can be different from video size if the
video does not use square pixels (e.g. DVD).</dd>
<dt><tt class="docutils literal">container_fps</tt></dt>
<dd><p class="first">FPS value as reported by file headers. This value can be wrong or
completely broken (e.g. 0 or NaN). Even if the value is correct,
if another filter changes the real FPS (by dropping or inserting
frames), the value of this variable will not be useful. Note that
the <tt class="docutils literal"><span class="pre">--container-fps-override</span></tt> command line option overrides this value.</p>
<p class="last">Useful for some filters which insist on having a FPS.</p>
</dd>
<dt><tt class="docutils literal">display_fps</tt></dt>
<dd>Refresh rate of the current display. Note that this value can be 0.</dd>
<dt><tt class="docutils literal">display_res</tt></dt>
<dd>Resolution of the current display. This is an integer array with the
first entry corresponding to the width and the second entry corresponding
to the height. These values can be 0. Note that this will not respond to
monitor changes and may not work on all platforms.</dd>
<dt><tt class="docutils literal">user_data</tt></dt>
<dd>User data passed from the filter. This variable always exists, and defaults
to empty string.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">vavpp</tt></dt>
<dd><p class="first">VA-API video post processing. Requires the system to support VA-API,
i.e. Linux/BSD only. Works with <tt class="docutils literal"><span class="pre">--vo=vaapi</span></tt> and <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> only.
Currently deinterlaces. This filter is automatically inserted if
deinterlacing is requested (either using the <tt class="docutils literal">d</tt> key, by default mapped to
the command <tt class="docutils literal">cycle deinterlace</tt>, or the <tt class="docutils literal"><span class="pre">--deinterlace</span></tt> option).</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">deint=&lt;method&gt;</span></tt></dt>
<dd><p class="first">Select the deinterlacing algorithm.</p>
<dl class="last docutils">
<dt>no</dt>
<dd>Don't perform deinterlacing.</dd>
<dt>auto</dt>
<dd>Select the best quality deinterlacing algorithm (default). This
goes by the order of the options as documented, with
<tt class="docutils literal"><span class="pre">motion-compensated</span></tt> being considered best quality.</dd>
<dt>first-field</dt>
<dd>Show only first field.</dd>
<dt>bob</dt>
<dd>bob deinterlacing.</dd>
<dt>weave, motion-adaptive, motion-compensated</dt>
<dd>Advanced deinterlacing algorithms. Whether these actually work
depends on the GPU hardware, the GPU drivers, driver bugs, and
mpv bugs.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">&lt;interlaced-only&gt;</span></tt></dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Deinterlace all frames (default).</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Only deinterlace frames marked as interlaced.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal"><span class="pre">reversal-bug=&lt;yes|no&gt;</span></tt></dt>
<dd><table class="first last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">no:</th><td class="field-body">Use the API as it was interpreted by older Mesa drivers. While
this interpretation was more obvious and intuitive, it was
apparently wrong, and not shared by Intel driver developers.</td>
</tr>
<tr class="field"><th class="field-name">yes:</th><td class="field-body">Use Intel interpretation of surface forward and backwards
references (default). This is what Intel drivers and newer Mesa
drivers expect. Matters only for the advanced deinterlacing
algorithms.</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">vdpaupp</tt></dt>
<dd><p class="first">VDPAU video post processing. Works with <tt class="docutils literal"><span class="pre">--vo=vdpau</span></tt> and <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>
only. This filter is automatically inserted if deinterlacing is requested
(either using the <tt class="docutils literal">d</tt> key, by default mapped to the command
<tt class="docutils literal">cycle deinterlace</tt>, or the <tt class="docutils literal"><span class="pre">--deinterlace</span></tt> option). When enabling
deinterlacing, it is always preferred over software deinterlacer filters
if the <tt class="docutils literal">vdpau</tt> VO is used, and also if <tt class="docutils literal">gpu</tt> is used and hardware
decoding was activated at least once (i.e. vdpau was loaded).</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">sharpen=&lt;-1-1&gt;</span></tt></dt>
<dd>For positive values, apply a sharpening algorithm to the video, for
negative values a blurring algorithm (default: 0).</dd>
<dt><tt class="docutils literal"><span class="pre">denoise=&lt;0-1&gt;</span></tt></dt>
<dd>Apply a noise reduction algorithm to the video (default: 0; no noise
reduction).</dd>
<dt><tt class="docutils literal"><span class="pre">deint=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether deinterlacing is enabled (default: no). If enabled, it will use
the mode selected with <tt class="docutils literal"><span class="pre">deint-mode</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">deint-mode=&lt;first-field|bob|temporal|temporal-spatial&gt;</span></tt></dt>
<dd><p class="first">Select deinterlacing mode (default: temporal).</p>
<p>Note that there's currently a mechanism that allows the <tt class="docutils literal">vdpau</tt> VO to
change the <tt class="docutils literal"><span class="pre">deint-mode</span></tt> of auto-inserted <tt class="docutils literal">vdpaupp</tt> filters. To avoid
confusion, it's recommended not to use the <tt class="docutils literal"><span class="pre">--vo=vdpau</span></tt> suboptions
related to filtering.</p>
<dl class="last docutils">
<dt>first-field</dt>
<dd>Show only first field.</dd>
<dt>bob</dt>
<dd>Bob deinterlacing.</dd>
<dt>temporal</dt>
<dd>Motion-adaptive temporal deinterlacing. May lead to A/V desync
with slow video hardware and/or high resolution.</dd>
<dt>temporal-spatial</dt>
<dd>Motion-adaptive temporal deinterlacing with edge-guided spatial
interpolation. Needs fast video hardware.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">chroma-deint</span></tt></dt>
<dd>Makes temporal deinterlacers operate both on luma and chroma (default).
Use no-chroma-deint to solely use luma and speed up advanced
deinterlacing. Useful with slow video memory.</dd>
<dt><tt class="docutils literal">pullup</tt></dt>
<dd>Try to apply inverse telecine, needs motion adaptive temporal
deinterlacing.</dd>
<dt><tt class="docutils literal"><span class="pre">interlaced-only=&lt;yes|no&gt;</span></tt></dt>
<dd>If <tt class="docutils literal">yes</tt>, only deinterlace frames marked as interlaced (default: no).</dd>
<dt><tt class="docutils literal"><span class="pre">hqscaling=&lt;0-9&gt;</span></tt></dt>
<dd><dl class="first last docutils">
<dt>0</dt>
<dd>Use default VDPAU scaling (default).</dd>
<dt>1-9</dt>
<dd>Apply high quality VDPAU scaling (needs capable hardware).</dd>
</dl>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal">d3d11vpp</tt></dt>
<dd><p class="first">Direct3D 11 video post-processing. Requires a D3D11 context and works best
with hardware decoding. Software frames are automatically uploaded to hardware
for processing.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">format</tt></dt>
<dd>Convert to the selected image format, e.g., nv12, p010, etc. (default: don't change).
Format names can be queried with <tt class="docutils literal"><span class="pre">--vf=d3d11vpp=format=help</span></tt>.
Note that only a limited subset is supported, and actual support depends
on your hardware. Normally, this shouldn't be changed unless some
processing only works with a specific format, in which case it can be
selected here.</dd>
<dt><tt class="docutils literal"><span class="pre">deint=&lt;yes|no&gt;</span></tt></dt>
<dd>Whether deinterlacing is enabled (default: no).</dd>
<dt><tt class="docutils literal">scale</tt></dt>
<dd>Scaling factor for the video frames (default: 1.0).</dd>
<dt><tt class="docutils literal"><span class="pre">scaling-mode=&lt;standard,intel,nvidia&gt;</span></tt></dt>
<dd><p class="first">Select the scaling mode to be used. Note that this only enables the
appropriate processing extensions; whether it actually works or not
depends on your hardware and the settings in your GPU driver's control
panel (default: standard).</p>
<dl class="last docutils">
<dt>standard</dt>
<dd>Default scaling mode as decided by d3d11vpp implementation.</dd>
<dt>intel</dt>
<dd>Intel Video Super Resolution.</dd>
<dt>nvidia</dt>
<dd>NVIDIA RTX Super Resolution.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">interlaced-only=&lt;yes|no&gt;</span></tt></dt>
<dd>If <tt class="docutils literal">yes</tt>, only deinterlace frames marked as interlaced (default: no).</dd>
<dt><tt class="docutils literal"><span class="pre">mode=&lt;blend|bob|adaptive|mocomp|ivctc|none&gt;</span></tt></dt>
<dd>Tries to select a video processor with the given processing capability.
If a video processor supports multiple capabilities, it is not clear
which algorithm is actually selected. <tt class="docutils literal">none</tt> always falls back. On
most if not all hardware, this option will probably do nothing, because
a video processor usually supports all modes or none.</dd>
<dt><tt class="docutils literal"><span class="pre">nvidia-true-hdr</span></tt></dt>
<dd>Enable NVIDIA RTX Video HDR processing.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">fingerprint=...</span></tt></dt>
<dd><p class="first">Compute video frame fingerprints and provide them as metadata. Actually, it
currently barely deserved to be called <tt class="docutils literal">fingerprint</tt>, because it does not
compute &quot;proper&quot; fingerprints, only tiny downscaled images (but which can be
used to compute image hashes or for similarity matching).</p>
<p>The main purpose of this filter is to support the <tt class="docutils literal"><span class="pre">skip-logo.lua</span></tt> script.
If this script is dropped, or mpv ever gains a way to load user-defined
filters (other than VapourSynth), this filter will be removed. Due to the
&quot;special&quot; nature of this filter, it will be removed without warning.</p>
<p>The intended way to read from the filter is using <tt class="docutils literal"><span class="pre">vf-metadata</span></tt> (also
see <tt class="docutils literal"><span class="pre">clear-on-query</span></tt> filter parameter). The property will return a list
of key/value pairs as follows:</p>
<pre class="literal-block">
fp0.pts = 1.2345
fp0.hex = 1234abcdef...bcde
fp1.pts = 1.4567
fp1.hex = abcdef1234...6789
...
fpN.pts = ...
fpN.hex = ...
type = gray-hex-16x16
</pre>
<p>Each <tt class="docutils literal">fp&lt;N&gt;</tt> entry is for a frame. The <tt class="docutils literal">pts</tt> entry specifies the
timestamp of the frame (within the filter chain; in simple cases this is
the same as the display timestamp). The <tt class="docutils literal">hex</tt> field is the hex encoded
fingerprint, whose size and meaning depend on the <tt class="docutils literal">type</tt> filter option.
The <tt class="docutils literal">type</tt> field has the same value as the option the filter was created
with.</p>
<p>This returns the frames that were filtered since the last query of the
property. If <tt class="docutils literal"><span class="pre">clear-on-query=no</span></tt> was set, a query doesn't reset the list
of frames. In both cases, a maximum of 10 frames is returned. If there are
more frames, the oldest frames are discarded. Frames are returned in filter
order.</p>
<p>(This doesn't return a structured list for the per-frame details because the
internals of the <tt class="docutils literal"><span class="pre">vf-metadata</span></tt> mechanism suck. The returned format may
change in the future.)</p>
<p>This filter uses zimg for speed and profit. However, it will fallback to
libswscale in a number of situations: lesser pixel formats, unaligned data
pointers or strides, or if zimg fails to initialize for unknown reasons. In
these cases, the filter will use more CPU. Also, it will output different
fingerprints, because libswscale cannot perform the full range expansion we
normally request from zimg. As a consequence, the filter may be slower and
not work correctly in random situations.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">type=...</span></tt></dt>
<dd><p class="first">What fingerprint to compute. Available types are:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">gray-hex-8x8:</th><td class="field-body">grayscale, 8 bit, 8x8 size</td>
</tr>
<tr class="field"><th class="field-name">gray-hex-16x16:</th><td class="field-body">grayscale, 8 bit, 16x16 size (default)</td>
</tr>
</tbody>
</table>
<p class="last">Both types simply remove all colors, downscale the image, concatenate
all pixel values to a byte array, and convert the array to a hex string.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">clear-on-query=yes|no</span></tt></dt>
<dd>Clear the list of frame fingerprints if the <tt class="docutils literal"><span class="pre">vf-metadata</span></tt> property for
this filter is queried (default: yes). This requires some care by the
user. Some types of accesses might query the filter multiple times,
which leads to lost frames.</dd>
<dt><tt class="docutils literal">print=yes|no</tt></dt>
<dd>Print computed fingerprints to the terminal (default: no). This is
mostly for testing and such. Scripts should use <tt class="docutils literal"><span class="pre">vf-metadata</span></tt> to
read information from this filter instead.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">gpu=...</span></tt></dt>
<dd><p class="first">Convert video to RGB using the Vulkan or OpenGL renderer normally used with
<tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>. In case of OpenGL, this requires that the EGL implementation
supports off-screen rendering on the default display. (This is the case with
Mesa.)</p>
<p>Sub-options:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">api=&lt;type&gt;</span></tt></dt>
<dd><p class="first">The value <tt class="docutils literal">type</tt> selects the rendering API. You can also pass
<tt class="docutils literal">help</tt> to get a complete list of compiled in backends.</p>
<dl class="last docutils">
<dt>egl</dt>
<dd>EGL (default if available)</dd>
<dt>vulkan</dt>
<dd>Vulkan</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">w=&lt;pixels&gt;</span></tt>, <tt class="docutils literal"><span class="pre">h=&lt;pixels&gt;</span></tt></dt>
<dd>Size of the output in pixels (default: 0). If not positive, this will
use the size of the first filtered input frame.</dd>
</dl>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is highly experimental. Performance is bad, and it will not work
everywhere in the first place. Some features are not supported.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This does not do OSD rendering. If you see OSD, then it has been
rendered by the VO backend. (Subtitles are rendered by the <tt class="docutils literal">gpu</tt>
filter, if possible.)</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If you use this with encoding mode, keep in mind that encoding mode will
convert the RGB filter's output back to yuv420p in software, using the
configured software scaler. Using <tt class="docutils literal">zimg</tt> might improve this, but in
any case it might go against your goals when using this filter.</p>
</div>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Do not use this with <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt>. It will apply filtering twice, since
most <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> options are unconditionally applied to the <tt class="docutils literal">gpu</tt>
filter. There is no mechanism in mpv to prevent this.</p>
</div>
</dd>
</dl>
</div>
<div class="section" id="encoding">
<h1>ENCODING</h1>
<p>You can encode files from one format/codec to another using this facility.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">--o=&lt;filename&gt;</span></tt></dt>
<dd>Enables encoding mode and specifies the output file name.</dd>
<dt><tt class="docutils literal"><span class="pre">--of=&lt;format&gt;</span></tt></dt>
<dd>Specifies the output format (overrides autodetection by the file name
extension of the file specified by <tt class="docutils literal"><span class="pre">--o</span></tt>). See <tt class="docutils literal"><span class="pre">--of=help</span></tt> for a full
list of supported formats.</dd>
<dt><tt class="docutils literal"><span class="pre">--ofopts=&lt;options&gt;</span></tt></dt>
<dd><p class="first">Specifies the output format options for libavformat.
See <tt class="docutils literal"><span class="pre">--ofopts=help</span></tt> for a full list of supported options.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--ofopts-add=&lt;option&gt;</span></tt></dt>
<dd>Appends the option given as an argument to the options list. (Passing
multiple options is currently still possible, but deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--ofopts=&quot;&quot;</span></tt></dt>
<dd>Completely empties the options list.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--oac=&lt;codec&gt;</span></tt></dt>
<dd>Specifies the output audio codec. See <tt class="docutils literal"><span class="pre">--oac=help</span></tt> for a full list of
supported codecs.</dd>
<dt><tt class="docutils literal"><span class="pre">--oacopts=&lt;options&gt;</span></tt></dt>
<dd><p class="first">Specifies the output audio codec options for libavcodec.
See <tt class="docutils literal"><span class="pre">--oacopts=help</span></tt> for a full list of supported options.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt>&quot;<tt class="docutils literal"><span class="pre">--oac=libmp3lame</span> <span class="pre">--oacopts=b=128000</span></tt>&quot;</dt>
<dd>selects 128 kbps MP3 encoding.</dd>
</dl>
</div>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--oacopts-add=&lt;option&gt;</span></tt></dt>
<dd>Appends the option given as an argument to the options list. (Passing
multiple options is currently still possible, but deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--oacopts=&quot;&quot;</span></tt></dt>
<dd>Completely empties the options list.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--ovc=&lt;codec&gt;</span></tt></dt>
<dd>Specifies the output video codec. See <tt class="docutils literal"><span class="pre">--ovc=help</span></tt> for a full list of
supported codecs.</dd>
<dt><tt class="docutils literal"><span class="pre">--ovcopts=&lt;options&gt;</span></tt></dt>
<dd><p class="first">Specifies the output video codec options for libavcodec.
See --ovcopts=help for a full list of supported options.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">&quot;--ovc=mpeg4</span> <span class="pre">--ovcopts=qscale=5&quot;</span></tt></dt>
<dd>selects constant quantizer scale 5 for MPEG-4 encoding.</dd>
<dt><tt class="docutils literal"><span class="pre">&quot;--ovc=libx264</span> <span class="pre">--ovcopts=crf=23&quot;</span></tt></dt>
<dd>selects VBR quality factor 23 for H.264 encoding.</dd>
</dl>
</div>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">--ovcopts-add=&lt;option&gt;</span></tt></dt>
<dd>Appends the option given as an argument to the options list. (Passing
multiple options is currently still possible, but deprecated.)</dd>
<dt><tt class="docutils literal"><span class="pre">--ovcopts=&quot;&quot;</span></tt></dt>
<dd>Completely empties the options list.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">--orawts</span></tt></dt>
<dd>Copies input pts to the output video (not supported by some output
container formats, e.g. AVI). In this mode, discontinuities are not fixed
and all pts are passed through as-is. Never seek backwards or use multiple
input files in this mode!</dd>
<dt><tt class="docutils literal"><span class="pre">--ocopy-metadata=&lt;yes|no&gt;</span></tt></dt>
<dd>Copy metadata from input files to output files when encoding (default: yes).</dd>
<dt><tt class="docutils literal"><span class="pre">--oset-metadata=&lt;metadata-tag[,metadata-tag,...]&gt;</span></tt></dt>
<dd><p class="first">Specifies metadata to include in the output file.
Supported keys vary between output formats. For example, Matroska (MKV) and
FLAC allow almost arbitrary keys, while support in MP4 and MP3 is more
limited.</p>
<p>This is a key/value list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt>&quot;<tt class="docutils literal"><span class="pre">--oset-metadata=title=&quot;Output</span> <span class="pre">title&quot;,comment=&quot;Another</span> tag&quot;</tt>&quot;</dt>
<dd>adds a title and a comment to the output file.</dd>
</dl>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">--oremove-metadata=&lt;metadata-tag[,metadata-tag,...]&gt;</span></tt></dt>
<dd><p class="first">Specifies metadata to exclude from the output file when copying from the
input file.</p>
<p>This is a string list option. See <a class="reference internal" href="#list-options">List Options</a> for details.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<dl class="last docutils">
<dt>&quot;<tt class="docutils literal"><span class="pre">--oremove-metadata=comment,genre</span></tt>&quot;</dt>
<dd>excludes copying of the the comment and genre tags to the output
file.</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="section" id="command-interface">
<h1>COMMAND INTERFACE</h1>
<p>The mpv core can be controlled with commands and properties. A number of ways
to interact with the player use them: key bindings (<tt class="docutils literal">input.conf</tt>), OSD
(showing information with properties), JSON IPC, the client API (<tt class="docutils literal">libmpv</tt>),
and the classic slave mode.</p>
<div class="section" id="input-conf">
<h2>input.conf</h2>
<p>The input.conf file consists of a list of key bindings, for example:</p>
<pre class="literal-block">
s screenshot      # take a screenshot with the s key
LEFT seek 15      # map the left-arrow key to seeking forward by 15 seconds
</pre>
<p>Each line maps a key to an input command. Keys are specified with their literal
value (upper case if combined with <tt class="docutils literal">Shift</tt>), or a name for special keys. For
example, <tt class="docutils literal">a</tt> maps to the <tt class="docutils literal">a</tt> key without shift, and <tt class="docutils literal">A</tt> maps to <tt class="docutils literal">a</tt>
with shift.</p>
<p>The file is located in the mpv configuration directory (normally at
<tt class="docutils literal"><span class="pre">~/.config/mpv/input.conf</span></tt> depending on platform). The default bindings are
defined here:</p>
<pre class="literal-block">
https://github.com/mpv-player/mpv/blob/master/etc/input.conf
</pre>
<p>A list of special keys can be obtained with</p>
<blockquote>
<tt class="docutils literal">mpv <span class="pre">--input-keylist</span></tt></blockquote>
<p>In general, keys can be combined with <tt class="docutils literal">Shift</tt>, <tt class="docutils literal">Ctrl</tt> and <tt class="docutils literal">Alt</tt>:</p>
<pre class="literal-block">
ctrl+q quit
</pre>
<p><strong>mpv</strong> can be started in input test mode, which displays key bindings and the
commands they're bound to on the OSD, instead of executing the commands:</p>
<pre class="literal-block">
mpv --input-test --force-window --idle
</pre>
<p>(Only closing the window will make <strong>mpv</strong> exit, pressing normal keys will
merely display the binding, even if mapped to quit.)</p>
<p>Also see <a class="reference internal" href="#key-names">Key names</a>.</p>
</div>
<div class="section" id="input-conf-syntax">
<h2>input.conf syntax</h2>
<p><tt class="docutils literal"><span class="pre">[Shift+][Ctrl+][Alt+][Meta+]&lt;key&gt;</span> <span class="pre">[{&lt;section&gt;}]</span> &lt;command&gt; ( ; &lt;command&gt; )*</tt></p>
<p>Note that by default, the right Alt key can be used to create special
characters, and thus does not register as a modifier. This can be changed
with <tt class="docutils literal"><span class="pre">--input-right-alt-gr</span></tt> option.</p>
<p>Newlines always start a new binding. <tt class="docutils literal">#</tt> starts a comment (outside of quoted
string arguments). To bind commands to the <tt class="docutils literal">#</tt> key, <tt class="docutils literal">SHARP</tt> can be used.</p>
<p><tt class="docutils literal">&lt;key&gt;</tt> is either the literal character the key produces (ASCII or Unicode
character), or a symbolic name (as printed by <tt class="docutils literal"><span class="pre">--input-keylist</span></tt>).</p>
<p><tt class="docutils literal">&lt;section&gt;</tt> (braced with <tt class="docutils literal">{</tt> and <tt class="docutils literal">}</tt>) is the input section for this
command.</p>
<p><tt class="docutils literal">&lt;command&gt;</tt> is the command itself. It consists of the command name and
multiple (or none) arguments, all separated by whitespace. String arguments
should be quoted, typically with <tt class="docutils literal">&quot;</tt>. See <tt class="docutils literal">Flat command syntax</tt>.</p>
<p>You can bind multiple commands to one key. For example:</p>
<div class="line-block">
<div class="line">a show-text &quot;command 1&quot; ; show-text &quot;command 2&quot;</div>
</div>
<p>It's also possible to bind a command to a sequence of keys:</p>
<div class="line-block">
<div class="line">a-b-c show-text &quot;command run after a, b, c have been pressed&quot;</div>
</div>
<p>(This is not shown in the general command syntax.)</p>
<p>If <tt class="docutils literal">a</tt> or <tt class="docutils literal"><span class="pre">a-b</span></tt> or <tt class="docutils literal">b</tt> are already bound, this will run the first command
that matches, and the multi-key command will never be called. Intermediate keys
can be remapped to <tt class="docutils literal">ignore</tt> in order to avoid this issue. The maximum number
of (non-modifier) keys for combinations is currently 4.</p>
</div>
<div class="section" id="key-names">
<h2>Key names</h2>
<p>All mouse and keyboard input is to converted to mpv-specific key names. Key
names are either special symbolic identifiers representing a physical key, or a
text key names, which are unicode code points encoded as UTF-8. These are what
keyboard input would normally produce, for example <tt class="docutils literal">a</tt> for the A key. As a
consequence, mpv uses input translated by the current OS keyboard layout, rather
than physical scan codes.</p>
<p>Currently there is the hardcoded assumption that every text key can be
represented as a single unicode code point (in NFKC form).</p>
<p>All key names can be combined with the modifiers <tt class="docutils literal">Shift</tt>, <tt class="docutils literal">Ctrl</tt>, <tt class="docutils literal">Alt</tt>,
<tt class="docutils literal">Meta</tt>. They must be prefixed to the actual key name, where each modifier
is followed by a <tt class="docutils literal">+</tt> (for example <tt class="docutils literal">ctrl+q</tt>).</p>
<p>The <tt class="docutils literal">Shift</tt> modifier requires some attention. For instance <tt class="docutils literal">Shift+2</tt> should
usually be specified as key-name <tt class="docutils literal">&#64;</tt> at <tt class="docutils literal">input.conf</tt>, and similarly the
combination <tt class="docutils literal">Alt+Shift+2</tt> is usually <tt class="docutils literal">Alt+&#64;</tt>, etc. Special key names like
<tt class="docutils literal">Shift+LEFT</tt> work as expected. If in doubt - use <tt class="docutils literal"><span class="pre">--input-test</span></tt> to check
how a key/combination is seen by mpv.</p>
<p>Symbolic key names and modifier names are case-insensitive. Unicode key names
are case-sensitive because input bindings typically respect the shift key.</p>
<p>Another type of key names are hexadecimal key names, that serve as fallback
for special keys that are neither unicode, nor have a special mpv defined name.
They will break as soon as mpv adds proper names for them, but can enable you
to use a key at all if that does not happen.</p>
<p>All symbolic names are listed by <tt class="docutils literal"><span class="pre">--input-keylist</span></tt>. <tt class="docutils literal"><span class="pre">--input-test</span></tt> is a
special mode that prints all input on the OSD.</p>
<p>Comments on some symbolic names:</p>
<dl class="docutils">
<dt><tt class="docutils literal">KP*</tt></dt>
<dd>Keypad names. Behavior varies by backend (whether they implement this, and
on how they treat numlock), but typically, mpv tries to map keys on the
keypad to separate names, even if they produce the same text as normal keys.</dd>
<dt><tt class="docutils literal">MOUSE_BTN*</tt>, <tt class="docutils literal">MBTN*</tt></dt>
<dd><p class="first">Various mouse buttons.</p>
<p>Depending on backend, the mouse wheel might also be represented as a button.
In addition, <tt class="docutils literal">MOUSE_BTN3</tt> to <tt class="docutils literal">MOUSE_BTN6</tt> are deprecated aliases for
<tt class="docutils literal">WHEEL_UP</tt>, <tt class="docutils literal">WHEEL_DOWN</tt>, <tt class="docutils literal">WHEEL_LEFT</tt>, <tt class="docutils literal">WHEEL_RIGHT</tt>.</p>
<p class="last"><tt class="docutils literal">MBTN*</tt> are aliases for <tt class="docutils literal">MOUSE_BTN*</tt>.</p>
</dd>
<dt><tt class="docutils literal">WHEEL_*</tt></dt>
<dd>Mouse wheels (typically).</dd>
<dt><tt class="docutils literal">AXIS_*</tt></dt>
<dd>Deprecated aliases for <tt class="docutils literal">WHEEL_*</tt>.</dd>
<dt><tt class="docutils literal">*_DBL</tt></dt>
<dd>Mouse button double clicks.</dd>
<dt><tt class="docutils literal">MOUSE_MOVE</tt>, <tt class="docutils literal">MOUSE_ENTER</tt>, <tt class="docutils literal">MOUSE_LEAVE</tt></dt>
<dd>Emitted by mouse move events. Enter/leave happens when the mouse enters or
leave the mpv window (or the current mouse region, using the deprecated
mouse region input section mechanism).</dd>
<dt><tt class="docutils literal">CLOSE_WIN</tt></dt>
<dd>Pseudo key emitted when closing the mpv window using the OS window manager
(for example, by clicking the close button in the window title bar).</dd>
<dt><tt class="docutils literal">GAMEPAD_*</tt></dt>
<dd>Keys emitted by the SDL gamepad backend.</dd>
<dt><tt class="docutils literal">UNMAPPED</tt></dt>
<dd>Pseudo-key that matches any unmapped key. (You should probably avoid this
if possible, because it might change behavior or get removed in the future.)</dd>
<dt><tt class="docutils literal">ANY_UNICODE</tt></dt>
<dd>Pseudo-key that matches any key that produces text. (You should probably
avoid this if possible, because it might change behavior or get removed in
the future.)</dd>
</dl>
</div>
<div class="section" id="flat-command-syntax">
<h2>Flat command syntax</h2>
<p>This is the syntax used in input.conf, and referred to &quot;input.conf syntax&quot; in
a number of other places.</p>
<div class="line-block">
<div class="line"><br /></div>
<div class="line"><tt class="docutils literal">&lt;command&gt;&nbsp; ::= [&lt;prefixes&gt;] &lt;command_name&gt; <span class="pre">(&lt;argument&gt;)*</span></tt></div>
<div class="line"><tt class="docutils literal">&lt;argument&gt; ::= (&lt;unquoted&gt; | &quot; &lt;double_quoted&gt; &quot; | ' &lt;single_quoted&gt; ' | `X &lt;custom_quoted&gt; X`)</tt></div>
</div>
<p><tt class="docutils literal">command_name</tt> is an unquoted string with the command name itself. See
<a class="reference internal" href="#list-of-input-commands">List of Input Commands</a> for a list.</p>
<p>Arguments are separated by whitespaces even if the command expects only one
argument. Arguments with whitespaces or other special characters must be quoted,
or the command cannot be parsed correctly.</p>
<p>Double quotes interpret JSON/C-style escaping, like <tt class="docutils literal">\t</tt> or <tt class="docutils literal">\&quot;</tt> or <tt class="docutils literal">\\</tt>.
JSON escapes according to RFC 8259, minus surrogate pair escapes. This is the
only form which allows newlines at the value - as <tt class="docutils literal">\n</tt>.</p>
<p>Single quotes take the content literally, and cannot include the single-quote
character at the value.</p>
<p>Custom quotes also take the content literally, but are more flexible than single
quotes. They start with <tt class="docutils literal">`</tt> (back-quote) followed by any ASCII character,
and end at the first occurrence of the same pair in reverse order, e.g.
<tt class="docutils literal"><span class="pre">`-foo-`</span></tt> or <tt class="docutils literal">``bar``</tt>. The final pair sequence is not allowed at the
value - in these examples <tt class="docutils literal"><span class="pre">-`</span></tt> and <tt class="docutils literal">``</tt> respectively. In the second
example the last character of the value also can't be a back-quote.</p>
<p>Mixed quoting at the same argument, like <tt class="docutils literal"><span class="pre">'foo'&quot;bar&quot;</span></tt>, is not supported.</p>
<p>Note that argument parsing and property expansion happen at different stages.
First, arguments are determined as described above, and then, where applicable,
properties are expanded - regardless of argument quoting. However, expansion
can still be prevented with the <tt class="docutils literal">raw</tt> prefix or <tt class="docutils literal">$&gt;</tt>. See <a class="reference internal" href="#input-command-prefixes">Input Command
Prefixes</a> and <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
</div>
<div class="section" id="commands-specified-as-arrays">
<h2>Commands specified as arrays</h2>
<p>This applies to certain APIs, such as <tt class="docutils literal">mp.commandv()</tt> or
<tt class="docutils literal">mp.command_native()</tt> (with array parameters) in Lua scripting, or
<tt class="docutils literal">mpv_command()</tt> or <tt class="docutils literal">mpv_command_node()</tt> (with MPV_FORMAT_NODE_ARRAY) in the
C libmpv client API.</p>
<p>The command as well as all arguments are passed as a single array. Similar to
the <a class="reference internal" href="#flat-command-syntax">Flat command syntax</a>, you can first pass prefixes as strings (each as
separate array item), then the command name as string, and then each argument
as string or a native value.</p>
<p>Since these APIs pass arguments as separate strings or native values, they do
not expect quotes, and do support escaping. Technically, there is the input.conf
parser, which first splits the command string into arguments, and then invokes
argument parsers for each argument. The input.conf parser normally handles
quotes and escaping. The array command APIs mentioned above pass strings
directly to the argument parsers, or can sidestep them by the ability to pass
non-string values.</p>
<p>Property expansion is disabled by default for these APIs. This can be changed
with the <tt class="docutils literal"><span class="pre">expand-properties</span></tt> prefix. See <a class="reference internal" href="#input-command-prefixes">Input Command Prefixes</a>.</p>
<p>Sometimes commands have string arguments, that in turn are actually parsed by
other components (e.g. filter strings with <tt class="docutils literal">vf add</tt>) - in these cases, you
you would have to double-escape in input.conf, but not with the array APIs.</p>
<p>For complex commands, consider using <a class="reference internal" href="#named-arguments">Named arguments</a> instead, which should
give slightly more compatibility. Some commands do not support named arguments
and inherently take an array, though.</p>
</div>
<div class="section" id="named-arguments">
<h2>Named arguments</h2>
<p>This applies to certain APIs, such as <tt class="docutils literal">mp.command_native()</tt> (with tables that
have string keys) in Lua scripting, or <tt class="docutils literal">mpv_command_node()</tt> (with
MPV_FORMAT_NODE_MAP) in the C libmpv client API.</p>
<p>The name of the command is provided with a <tt class="docutils literal">name</tt> string field. The name of
each command is defined in each command description in the
<a class="reference internal" href="#list-of-input-commands">List of Input Commands</a>. <tt class="docutils literal"><span class="pre">--input-cmdlist</span></tt> also lists them. See the
<tt class="docutils literal">subprocess</tt> command for an example.</p>
<p>Some commands do not support named arguments (e.g. <tt class="docutils literal">run</tt> command). You need
to use APIs that pass arguments as arrays.</p>
<p>Named arguments are not supported in the &quot;flat&quot; input.conf syntax, which means
you cannot use them for key bindings in input.conf at all.</p>
<p>Property expansion is disabled by default for these APIs. This can be changed
with the <tt class="docutils literal"><span class="pre">expand-properties</span></tt> prefix. See <a class="reference internal" href="#input-command-prefixes">Input Command Prefixes</a>.</p>
</div>
<div class="section" id="list-of-input-commands">
<h2>List of Input Commands</h2>
<p>Commands with parameters have the parameter name enclosed in <tt class="docutils literal">&lt;</tt> / <tt class="docutils literal">&gt;</tt>.
Don't add those to the actual command. Optional arguments are enclosed in
<tt class="docutils literal">[</tt> / <tt class="docutils literal">]</tt>. If you don't pass them, they will be set to a default value.</p>
<p>Remember to quote string arguments in input.conf (see <a class="reference internal" href="#flat-command-syntax">Flat command syntax</a>).</p>
<dl class="docutils">
<dt><tt class="docutils literal">ignore</tt></dt>
<dd>Use this to &quot;block&quot; keys that should be unbound, and do nothing. Useful for
disabling default bindings, without disabling all bindings with
<tt class="docutils literal"><span class="pre">--input-default-bindings=no</span></tt>.</dd>
<dt><tt class="docutils literal">seek &lt;target&gt; [&lt;flags&gt;]</tt></dt>
<dd><p class="first">Change the playback position. By default, seeks by a relative amount of
seconds.</p>
<p>The second argument consists of flags controlling the seek mode:</p>
<dl class="docutils">
<dt>relative (default)</dt>
<dd>Seek relative to current position (a negative value seeks backwards).</dd>
<dt>absolute</dt>
<dd>Seek to a given time (a negative value starts from the end of the file).</dd>
<dt>absolute-percent</dt>
<dd>Seek to a given percent position.</dd>
<dt>relative-percent</dt>
<dd>Seek relative to current position in percent.</dd>
<dt>keyframes</dt>
<dd>Always restart playback at keyframe boundaries (fast).</dd>
<dt>exact</dt>
<dd>Always do exact/hr/precise seeks (slow).</dd>
</dl>
<p>Multiple flags can be combined, e.g.: <tt class="docutils literal">absolute+keyframes</tt>.</p>
<p>By default, <tt class="docutils literal">keyframes</tt> is used for <tt class="docutils literal">relative</tt>, <tt class="docutils literal"><span class="pre">relative-percent</span></tt>,
and <tt class="docutils literal"><span class="pre">absolute-percent</span></tt> seeks, while <tt class="docutils literal">exact</tt> is used for <tt class="docutils literal">absolute</tt>
seeks.</p>
<p class="last">Before mpv 0.9, the <tt class="docutils literal">keyframes</tt> and <tt class="docutils literal">exact</tt> flags had to be passed as
3rd parameter (essentially using a space instead of <tt class="docutils literal">+</tt>). The 3rd
parameter is still parsed, but is considered deprecated.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">revert-seek</span> [&lt;flags&gt;]</tt></dt>
<dd><p class="first">Undoes the <tt class="docutils literal">seek</tt> command, and some other commands that seek (but not
necessarily all of them). Calling this command once will jump to the
playback position before the seek. Calling it a second time undoes the
<tt class="docutils literal"><span class="pre">revert-seek</span></tt> command itself. This only works within a single file.</p>
<p>The first argument is optional, and can change the behavior:</p>
<dl class="docutils">
<dt>mark</dt>
<dd>Mark the current time position. The next normal <tt class="docutils literal"><span class="pre">revert-seek</span></tt> command
will seek back to this point, no matter how many seeks happened since
last time.</dd>
<dt>mark-permanent</dt>
<dd>If set, mark the current position, and do not change the mark position
before the next <tt class="docutils literal"><span class="pre">revert-seek</span></tt> command that has <tt class="docutils literal">mark</tt> or
<tt class="docutils literal"><span class="pre">mark-permanent</span></tt> set (or playback of the current file ends). Until
this happens, <tt class="docutils literal"><span class="pre">revert-seek</span></tt> will always seek to the marked point. This
flag cannot be combined with <tt class="docutils literal">mark</tt>.</dd>
</dl>
<p class="last">Using it without any arguments gives you the default behavior.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">frame-step</span></tt></dt>
<dd>Play one frame, then pause. Does nothing with audio-only playback.</dd>
<dt><tt class="docutils literal"><span class="pre">frame-back-step</span></tt></dt>
<dd><p class="first">Go back by one frame, then pause. Note that this can be very slow (it tries
to be precise, not fast), and sometimes fails to behave as expected. How
well this works depends on whether precise seeking works correctly (e.g.
see the <tt class="docutils literal"><span class="pre">--hr-seek-demuxer-offset</span></tt> option). Video filters or other video
post-processing that modifies timing of frames (e.g. deinterlacing) should
usually work, but might make backstepping silently behave incorrectly in
corner cases. Using <tt class="docutils literal"><span class="pre">--hr-seek-framedrop=no</span></tt> should help, although it
might make precise seeking slower.</p>
<p class="last">This does not work with audio-only playback.</p>
</dd>
<dt><tt class="docutils literal">set &lt;name&gt; &lt;value&gt;</tt></dt>
<dd>Set the given property or option to the given value.</dd>
<dt><tt class="docutils literal">del &lt;name&gt;</tt></dt>
<dd>Delete the given property. Most properties cannot be deleted.</dd>
<dt><tt class="docutils literal">add &lt;name&gt; [&lt;value&gt;]</tt></dt>
<dd>Add the given value to the property or option. On overflow or underflow,
clamp the property to the maximum. If <tt class="docutils literal">&lt;value&gt;</tt> is omitted, assume <tt class="docutils literal">1</tt>.</dd>
<dt><tt class="docutils literal">cycle &lt;name&gt; [&lt;value&gt;]</tt></dt>
<dd><p class="first">Cycle the given property or option. The second argument can be <tt class="docutils literal">up</tt> or
<tt class="docutils literal">down</tt> to set the cycle direction. On overflow, set the property back to
the minimum, on underflow set it to the maximum. If <tt class="docutils literal">up</tt> or <tt class="docutils literal">down</tt> is
omitted, assume <tt class="docutils literal">up</tt>.</p>
<p class="last">Whether or not key-repeat is enabled by default depends on the property.
Currently properties with continuous values are repeatable by default (like
<tt class="docutils literal">volume</tt>), while discrete values are not (like <tt class="docutils literal"><span class="pre">osd-level</span></tt>).</p>
</dd>
<dt><tt class="docutils literal">multiply &lt;name&gt; &lt;value&gt;</tt></dt>
<dd>Similar to <tt class="docutils literal">add</tt>, but multiplies the property or option with the numeric
value.</dd>
<dt><tt class="docutils literal">screenshot &lt;flags&gt;</tt></dt>
<dd><p class="first">Take a screenshot.</p>
<p>Multiple flags are available (some can be combined with <tt class="docutils literal">+</tt>):</p>
<dl class="docutils">
<dt>&lt;subtitles&gt; (default)</dt>
<dd>Save the video image, in its original resolution, and with subtitles.
Some video outputs may still include the OSD in the output under certain
circumstances.</dd>
<dt>&lt;video&gt;</dt>
<dd>Like <tt class="docutils literal">subtitles</tt>, but typically without OSD or subtitles. The exact
behavior depends on the selected video output.</dd>
<dt>&lt;window&gt;</dt>
<dd>Save the contents of the mpv window. Typically scaled, with OSD and
subtitles. The exact behavior depends on the selected video output.</dd>
<dt>&lt;each-frame&gt;</dt>
<dd>Take a screenshot each frame. Issue this command again to stop taking
screenshots. Note that you should disable frame-dropping when using
this mode - or you might receive duplicate images in cases when a
frame was dropped. This flag can be combined with the other flags,
e.g. <tt class="docutils literal"><span class="pre">video+each-frame</span></tt>.</dd>
</dl>
<p>Older mpv versions required passing <tt class="docutils literal">single</tt> and <tt class="docutils literal"><span class="pre">each-frame</span></tt> as
second argument (and did not have flags). This syntax is still understood,
but deprecated and might be removed in the future.</p>
<p>If you combine this command with another one using <tt class="docutils literal">;</tt>, you can use the
<tt class="docutils literal">async</tt> flag to make encoding/writing the image file asynchronous. For
normal standalone commands, this is always asynchronous, and the flag has
no effect. (This behavior changed with mpv 0.29.0.)</p>
<p class="last">On success, returns a <tt class="docutils literal">mpv_node</tt> with a <tt class="docutils literal">filename</tt> field set to the
saved screenshot location.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">screenshot-to-file</span> &lt;filename&gt; &lt;flags&gt;</tt></dt>
<dd><p class="first">Take a screenshot and save it to a given file. The format of the file will
be guessed by the extension (and <tt class="docutils literal"><span class="pre">--screenshot-format</span></tt> is ignored - the
behavior when the extension is missing or unknown is arbitrary).</p>
<p>The second argument is like the first argument to <tt class="docutils literal">screenshot</tt> and
supports <tt class="docutils literal">subtitles</tt>, <tt class="docutils literal">video</tt>, <tt class="docutils literal">window</tt>.</p>
<p>If the file already exists, it's overwritten.</p>
<p class="last">Like all input command parameters, the filename is subject to property
expansion as described in <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-next</span> &lt;flags&gt;</tt></dt>
<dd><p class="first">Go to the next entry on the playlist.</p>
<p>First argument:</p>
<dl class="last docutils">
<dt>weak (default)</dt>
<dd>If the last file on the playlist is currently played, do nothing.</dd>
<dt>force</dt>
<dd>Terminate playback if there are no more files on the playlist.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-prev</span> &lt;flags&gt;</tt></dt>
<dd><p class="first">Go to the previous entry on the playlist.</p>
<p>First argument:</p>
<dl class="last docutils">
<dt>weak (default)</dt>
<dd>If the first file on the playlist is currently played, do nothing.</dd>
<dt>force</dt>
<dd>Terminate playback if the first file is being played.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-next-playlist</span></tt></dt>
<dd>Go to the next entry on the playlist with a different <tt class="docutils literal"><span class="pre">playlist-path</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-prev-playlist</span></tt></dt>
<dd>Go to the first of the previous entries on the playlist with a different
<tt class="docutils literal"><span class="pre">playlist-path</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-play-index</span> &lt;integer|current|none&gt;</tt></dt>
<dd><p class="first">Start (or restart) playback of the given playlist index. In addition to the
0-based playlist entry index, it supports the following values:</p>
<dl class="docutils">
<dt>&lt;current&gt;</dt>
<dd>The current playlist entry (as in <tt class="docutils literal"><span class="pre">playlist-current-pos</span></tt>) will be
played again (unload and reload). If none is set, playback is stopped.
(In corner cases, <tt class="docutils literal"><span class="pre">playlist-current-pos</span></tt> can point to a playlist entry
even if playback is currently inactive,</dd>
<dt>&lt;none&gt;</dt>
<dd>Playback is stopped. If idle mode (<tt class="docutils literal"><span class="pre">--idle</span></tt>) is enabled, the player
will enter idle mode, otherwise it will exit.</dd>
</dl>
<p>This command is similar to <tt class="docutils literal">loadfile</tt> in that it only manipulates the
state of what to play next, without waiting until the current file is
unloaded, and the next one is loaded.</p>
<p class="last">Setting <tt class="docutils literal"><span class="pre">playlist-pos</span></tt> or similar properties can have a similar effect to
this command. However, it's more explicit, and guarantees that playback is
restarted if for example the new playlist entry is the same as the previous
one.</p>
</dd>
<dt><tt class="docutils literal">loadfile &lt;url&gt; [&lt;flags&gt; [&lt;index&gt; <span class="pre">[&lt;options&gt;]]]</span></tt></dt>
<dd><p class="first">Load the given file or URL and play it. Technically, this is just a playlist
manipulation command (which either replaces the playlist or adds an entry
to it). Actual file loading happens independently. For example, a
<tt class="docutils literal">loadfile</tt> command that replaces the current file with a new one returns
before the current file is stopped, and the new file even begins loading.</p>
<p>Second argument:</p>
<dl class="docutils">
<dt>&lt;replace&gt; (default)</dt>
<dd>Stop playback of the current file, and play the new file immediately.</dd>
<dt>&lt;append&gt;</dt>
<dd>Append the file to the playlist.</dd>
<dt>&lt;append-play&gt;</dt>
<dd>Append the file, and if nothing is currently playing, start playback.
(Always starts with the added file, even if the playlist was not empty
before running this command.)</dd>
<dt>&lt;insert-next&gt;</dt>
<dd>Insert the file into the playlist, directly after the current entry.</dd>
<dt>&lt;insert-next-play&gt;</dt>
<dd>Insert the file next, and if nothing is currently playing, start playback.
(Always starts with the added file, even if the playlist was not empty
before running this command.)</dd>
<dt>&lt;insert-at&gt;</dt>
<dd>Insert the file into the playlist, at the index given in the third
argument.</dd>
<dt>&lt;insert-at-play&gt;</dt>
<dd>Insert the file at the index given in the third argument, and if nothing
is currently playing, start playback. (Always starts with the added
file, even if the playlist was not empty before running this command.)</dd>
</dl>
<p>The third argument is an insertion index, used only by the <tt class="docutils literal"><span class="pre">insert-at</span></tt> and
<tt class="docutils literal"><span class="pre">insert-at-play</span></tt> actions. When used with those actions, the new item will
be inserted at the index position in the playlist, or appended to the end if
index is less than 0 or greater than the size of the playlist. This argument
will be ignored for all other actions. This argument is added in mpv 0.38.0.</p>
<p>The fourth argument is a list of options and values which should be set
while the file is playing. It is of the form <tt class="docutils literal"><span class="pre">opt1=value1,opt2=value2,..</span></tt>.
When using the client API, this can be a <tt class="docutils literal">MPV_FORMAT_NODE_MAP</tt> (or a Lua
table), however the values themselves must be strings currently. These
options are set during playback, and restored to the previous value at end
of playback (see <a class="reference internal" href="#per-file-options">Per-File Options</a>).</p>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">Since mpv 0.38.0, an insertion index argument is added as the third argument.
This breaks all existing uses of this command which make use of the argument
to include the list of options to be set while the file is playing. To address
this problem, the third argument now needs to be set to -1 if the fourth
argument needs to be used.</p>
</div>
</dd>
<dt><tt class="docutils literal">loadlist &lt;url&gt; [&lt;flags&gt; <span class="pre">[&lt;index&gt;]]</span></tt></dt>
<dd><p class="first">Load the given playlist file or URL (like <tt class="docutils literal"><span class="pre">--playlist</span></tt>).</p>
<p>Second argument:</p>
<dl class="docutils">
<dt>&lt;replace&gt; (default)</dt>
<dd>Stop playback and replace the internal playlist with the new one.</dd>
<dt>&lt;append&gt;</dt>
<dd>Append the new playlist at the end of the current internal playlist.</dd>
<dt>&lt;append-play&gt;</dt>
<dd>Append the new playlist, and if nothing is currently playing, start
playback. (Always starts with the new playlist, even if the internal
playlist was not empty before running this command.)</dd>
<dt>&lt;insert-next&gt;</dt>
<dd>Insert the new playlist into the current internal playlist, directly
after the current entry.</dd>
<dt>&lt;insert-next-play&gt;</dt>
<dd>Insert the new playlist, and if nothing is currently playing, start
playback. (Always starts with the new playlist, even if the internal
playlist was not empty before running this command.)</dd>
<dt>&lt;insert-at&gt;</dt>
<dd>Insert the new playlist at the index given in the third argument.</dd>
<dt>&lt;insert-at-play&gt;</dt>
<dd>Insert the new playlist at the index given in the third argument, and if
nothing is currently playing, start playback. (Always starts with the
new playlist, even if the internal playlist was not empty before running
this command.)</dd>
</dl>
<p class="last">The third argument is an insertion index, used only by the <tt class="docutils literal"><span class="pre">insert-at</span></tt> and
<tt class="docutils literal"><span class="pre">insert-at-play</span></tt> actions. When used with those actions, the new playlist
will be inserted at the index position in the internal playlist, or appended
to the end if index is less than 0 or greater than the size of the internal
playlist. This argument will be ignored for all other actions.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-clear</span></tt></dt>
<dd>Clear the playlist, except the currently played file.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-remove</span> &lt;index&gt;</tt></dt>
<dd>Remove the playlist entry at the given index. Index values start counting
with 0. The special value <tt class="docutils literal">current</tt> removes the current entry. Note that
removing the current entry also stops playback and starts playing the next
entry.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-move</span> &lt;index1&gt; &lt;index2&gt;</tt></dt>
<dd>Move the playlist entry at index1, so that it takes the place of the
entry index2. (Paradoxically, the moved playlist entry will not have
the index value index2 after moving if index1 was lower than index2,
because index2 refers to the target entry, not the index the entry
will have after moving.)</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-shuffle</span></tt></dt>
<dd>Shuffle the playlist. This is similar to what is done on start if the
<tt class="docutils literal"><span class="pre">--shuffle</span></tt> option is used.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-unshuffle</span></tt></dt>
<dd>Attempt to revert the previous <tt class="docutils literal"><span class="pre">playlist-shuffle</span></tt> command. This works
only once (multiple successive <tt class="docutils literal"><span class="pre">playlist-unshuffle</span></tt> commands do nothing).
May not work correctly if new recursive playlists have been opened since
a <tt class="docutils literal"><span class="pre">playlist-shuffle</span></tt> command.</dd>
<dt><tt class="docutils literal">run &lt;command&gt; [&lt;arg1&gt; [&lt;arg2&gt; <span class="pre">[...]]]</span></tt></dt>
<dd><p class="first">Run the given command. Unlike in MPlayer/mplayer2 and earlier versions of
mpv (0.2.x and older), this doesn't call the shell. Instead, the command
is run directly, with each argument passed separately. Each argument is
expanded like in <a class="reference internal" href="#property-expansion">Property Expansion</a>.</p>
<p>This command has a variable number of arguments, and cannot be used with
named arguments.</p>
<p>The program is run in a detached way. mpv doesn't wait until the command
is completed, but continues playback right after spawning it.</p>
<p>To get the old behavior, use <tt class="docutils literal">/bin/sh</tt> and <tt class="docutils literal"><span class="pre">-c</span></tt> as the first two
arguments.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p><tt class="docutils literal">run &quot;/bin/sh&quot; <span class="pre">&quot;-c&quot;</span> &quot;echo ${title} &gt; /tmp/playing&quot;</tt></p>
<p class="last">This is not a particularly good example, because it doesn't handle
escaping, and a specially prepared file might allow an attacker to
execute arbitrary shell commands. It is recommended to write a small
shell script, and call that with <tt class="docutils literal">run</tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal">subprocess</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">run</tt>, but gives more control about process execution to the
caller, and does not detach the process.</p>
<p>You can avoid blocking until the process terminates by running this command
asynchronously. (For example <tt class="docutils literal">mp.command_native_async()</tt> in Lua scripting.)</p>
<p>This has the following named arguments. The order of them is not guaranteed,
so you should always call them with named arguments, see <a class="reference internal" href="#named-arguments">Named arguments</a>.</p>
<dl class="docutils">
<dt><tt class="docutils literal">args</tt> (<tt class="docutils literal">MPV_FORMAT_NODE_ARRAY[MPV_FORMAT_STRING]</tt>)</dt>
<dd><p class="first">Array of strings with the command as first argument, and subsequent
command line arguments following. This is just like the <tt class="docutils literal">run</tt> command
argument list.</p>
<p class="last">The first array entry is either an absolute path to the executable, or
a filename with no path components, in which case the executable is
searched in the directories in the <tt class="docutils literal">PATH</tt> environment variable. On
Unix, this is equivalent to <tt class="docutils literal">posix_spawnp</tt> and <tt class="docutils literal">execvp</tt> behavior.</p>
</dd>
<dt><tt class="docutils literal">playback_only</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>Boolean indicating whether the process should be killed when playback
of the current playlist entry terminates (optional, default: true). If
enabled, stopping playback will automatically kill the process, and you
can't start it outside of playback.</dd>
<dt><tt class="docutils literal">capture_size</tt> (<tt class="docutils literal">MPV_FORMAT_INT64</tt>)</dt>
<dd>Integer setting the maximum number of stdout plus stderr bytes that can
be captured (optional, default: 64MB). If the number of bytes exceeds
this, capturing is stopped. The limit is per captured stream.</dd>
<dt><tt class="docutils literal">capture_stdout</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>Capture all data the process outputs to stdout and return it once the
process ends (optional, default: no).</dd>
<dt><tt class="docutils literal">capture_stderr</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>Same as <tt class="docutils literal">capture_stdout</tt>, but for stderr.</dd>
<dt><tt class="docutils literal">detach</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>Whether to run the process in detached mode (optional, default: no). In
this mode, the process is run in a new process session, and the command
does not wait for the process to terminate. If neither
<tt class="docutils literal">capture_stdout</tt> nor <tt class="docutils literal">capture_stderr</tt> have been set to true,
the command returns immediately after the new process has been started,
otherwise the command will read as long as the pipes are open.</dd>
<dt><tt class="docutils literal">env</tt> (<tt class="docutils literal">MPV_FORMAT_NODE_ARRAY[MPV_FORMAT_STRING]</tt>)</dt>
<dd><p class="first">Set a list of environment variables for the new process (default: empty).
If an empty list is passed, the environment of the mpv process is used
instead. (Unlike the underlying OS mechanisms, the mpv command cannot
start a process with empty environment. Fortunately, that is completely
useless.) The format of the list is as in the <tt class="docutils literal">execle()</tt> syscall. Each
string item defines an environment variable as in <tt class="docutils literal">NAME=VALUE</tt>.</p>
<p class="last">On Lua, you may use <tt class="docutils literal">utils.get_env_list()</tt> to retrieve the current
environment if you e.g. simply want to add a new variable.</p>
</dd>
<dt><tt class="docutils literal">stdin_data</tt> (<tt class="docutils literal">MPV_FORMAT_STRING</tt>)</dt>
<dd>Feed the given string to the new process' stdin. Since this is a string,
you cannot pass arbitrary binary data. If the process terminates or
closes the pipe before all data is written, the remaining data is
silently discarded. Probably does not work on win32.</dd>
<dt><tt class="docutils literal">passthrough_stdin</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>If enabled, wire the new process' stdin to mpv's stdin (default: no).
Before mpv 0.33.0, this argument did not exist, but the behavior was as
if this was set to true.</dd>
</dl>
<p>The command returns the following result (as <tt class="docutils literal">MPV_FORMAT_NODE_MAP</tt>):</p>
<dl class="docutils">
<dt><tt class="docutils literal">status</tt> (<tt class="docutils literal">MPV_FORMAT_INT64</tt>)</dt>
<dd><p class="first">Typically this is the process exit code (0 or positive) if the process
terminates normally, or negative for other errors (failed to start,
terminated by mpv, and others).  The meaning of negative values is
undefined, other than meaning error (and does not correspond to OS low
level exit status values).</p>
<p class="last">On Windows, it can happen that a negative return value is returned even
if the process terminates normally, because the win32 <tt class="docutils literal">UINT</tt> exit
code is assigned to an <tt class="docutils literal">int</tt> variable before being set as <tt class="docutils literal">int64_t</tt>
field in the result map. This might be fixed later.</p>
</dd>
<dt><tt class="docutils literal">stdout</tt> (<tt class="docutils literal">MPV_FORMAT_BYTE_ARRAY</tt>)</dt>
<dd>Captured stdout stream, limited to <tt class="docutils literal">capture_size</tt>.</dd>
<dt><tt class="docutils literal">stderr</tt> (<tt class="docutils literal">MPV_FORMAT_BYTE_ARRAY</tt>)</dt>
<dd>Same as <tt class="docutils literal">stdout</tt>, but for stderr.</dd>
<dt><tt class="docutils literal">error_string</tt> (<tt class="docutils literal">MPV_FORMAT_STRING</tt>)</dt>
<dd><p class="first">Empty string if the process terminated normally. The string <tt class="docutils literal">killed</tt>
if the process was terminated in an unusual way. The string <tt class="docutils literal">init</tt> if
the process could not be started.</p>
<p class="last">On Windows, <tt class="docutils literal">killed</tt> is only returned when the process has been
killed by mpv as a result of <tt class="docutils literal">playback_only</tt> being set to true.</p>
</dd>
<dt><tt class="docutils literal">killed_by_us</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>Whether the process has been killed by mpv, for example as a result of
<tt class="docutils literal">playback_only</tt> being set to true, aborting the command (e.g. by
<tt class="docutils literal">mp.abort_async_command()</tt>), or if the player is about to exit.</dd>
</dl>
<p>Note that the command itself will always return success as long as the
parameters are correct. Whether the process could be spawned or whether
it was somehow killed or returned an error status has to be queried from
the result value.</p>
<p>This command can be asynchronously aborted via API. Also see <a class="reference internal" href="#asynchronous-command-details">Asynchronous
command details</a>. Only the <tt class="docutils literal">run</tt> command can start processes in a truly
detached way.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The subprocess will always be terminated on player exit if it
wasn't started in detached mode, even if <tt class="docutils literal">playback_only</tt> is
false.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Don't forget to set the <tt class="docutils literal">playback_only</tt> field to false if you want
the command to run while the player is in idle mode, or if you don't
want the end of playback to kill the command.</p>
</div>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<pre class="literal-block">
local r = mp.command_native({
    name = &quot;subprocess&quot;,
    playback_only = false,
    capture_stdout = true,
    args = {&quot;cat&quot;, &quot;/proc/cpuinfo&quot;},
})
if r.status == 0 then
    print(&quot;result: &quot; .. r.stdout)
end
</pre>
<p class="last">This is a fairly useless Lua example, which demonstrates how to run
a process in a blocking manner, and retrieving its stdout output.</p>
</div>
</dd>
<dt><tt class="docutils literal">quit [&lt;code&gt;]</tt></dt>
<dd>Exit the player. If an argument is given, it's used as process exit code.</dd>
<dt><tt class="docutils literal"><span class="pre">quit-watch-later</span> [&lt;code&gt;]</tt></dt>
<dd>Exit player, and store current playback position. Playing that file later
will seek to the previous position on start. The (optional) argument is
exactly as in the <tt class="docutils literal">quit</tt> command. See <a class="reference internal" href="#resuming-playback">RESUMING PLAYBACK</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">sub-add</span> &lt;url&gt; [&lt;flags&gt; [&lt;title&gt; <span class="pre">[&lt;lang&gt;]]]</span></tt></dt>
<dd><p class="first">Load the given subtitle file or stream. By default, it is selected as
current subtitle  after loading.</p>
<p>The <tt class="docutils literal">flags</tt> argument is one of the following values:</p>
<p>&lt;select&gt;</p>
<blockquote>
Select the subtitle immediately (default).</blockquote>
<p>&lt;auto&gt;</p>
<blockquote>
Don't select the subtitle. (Or in some special situations, let the
default stream selection mechanism decide.)</blockquote>
<p>&lt;cached&gt;</p>
<blockquote>
Select the subtitle. If a subtitle with the same filename was already
added, that one is selected, instead of loading a duplicate entry.
(In this case, title/language are ignored, and if the was changed since
it was loaded, these changes won't be reflected.)</blockquote>
<p>The <tt class="docutils literal">title</tt> argument sets the track title in the UI.</p>
<p class="last">The <tt class="docutils literal">lang</tt> argument sets the track language, and can also influence
stream selection with <tt class="docutils literal">flags</tt> set to <tt class="docutils literal">auto</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-remove</span> [&lt;id&gt;]</tt></dt>
<dd>Remove the given subtitle track. If the <tt class="docutils literal">id</tt> argument is missing, remove
the current track. (Works on external subtitle files only.)</dd>
<dt><tt class="docutils literal"><span class="pre">sub-reload</span> [&lt;id&gt;]</tt></dt>
<dd><p class="first">Reload the given subtitle tracks. If the <tt class="docutils literal">id</tt> argument is missing, reload
the current track. (Works on external subtitle files only.)</p>
<p class="last">This works by unloading and re-adding the subtitle track.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-step</span> &lt;skip&gt; &lt;flags&gt;</tt></dt>
<dd><p class="first">Change subtitle timing such, that the subtitle event after the next
<tt class="docutils literal">&lt;skip&gt;</tt> subtitle events is displayed. <tt class="docutils literal">&lt;skip&gt;</tt> can be negative to step
backwards.</p>
<p>Secondary argument:</p>
<dl class="last docutils">
<dt>primary (default)</dt>
<dd>Steps through the primary subtitles.</dd>
<dt>secondary</dt>
<dd>Steps through the secondary subtitles.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-seek</span> &lt;skip&gt; &lt;flags&gt;</tt></dt>
<dd><p class="first">Change video and audio position such that the subtitle event after
<tt class="docutils literal">&lt;skip&gt;</tt> subtitle events is displayed. For example, <tt class="docutils literal"><span class="pre">sub-seek</span> 1</tt> skips
to the next subtitle, <tt class="docutils literal"><span class="pre">sub-seek</span> <span class="pre">-1</span></tt> skips to the previous subtitles, and
<tt class="docutils literal"><span class="pre">sub-seek</span> 0</tt> seeks to the beginning of the current subtitle.</p>
<p>This is similar to <tt class="docutils literal"><span class="pre">sub-step</span></tt>, except that it seeks video and audio
instead of adjusting the subtitle delay.</p>
<p>Secondary argument:</p>
<dl class="docutils">
<dt>primary (default)</dt>
<dd>Seeks through the primary subtitles.</dd>
<dt>secondary</dt>
<dd>Seeks through the secondary subtitles.</dd>
</dl>
<p class="last">For embedded subtitles (like with Matroska), this works only with subtitle
events that have already been displayed, or are within a short prefetch
range. See <a class="reference internal" href="#cache">Cache</a> for details on how to control the available prefetch range.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">print-text</span> &lt;text&gt;</tt></dt>
<dd>Print text to stdout. The string can contain properties (see
<a class="reference internal" href="#property-expansion">Property Expansion</a>). Take care to put the argument in quotes.</dd>
<dt><tt class="docutils literal"><span class="pre">show-text</span> &lt;text&gt; <span class="pre">[&lt;duration&gt;|-1</span> <span class="pre">[&lt;level&gt;]]</span></tt></dt>
<dd><p class="first">Show text on the OSD. The string can contain properties, which are expanded
as described in <a class="reference internal" href="#property-expansion">Property Expansion</a>. This can be used to show playback
time, filename, and so on. <tt class="docutils literal"><span class="pre">no-osd</span></tt> has no effect on this command.</p>
<dl class="last docutils">
<dt>&lt;duration&gt;</dt>
<dd>The time in ms to show the message for. By default, it uses the same
value as <tt class="docutils literal"><span class="pre">--osd-duration</span></tt>.</dd>
<dt>&lt;level&gt;</dt>
<dd>The minimum OSD level to show the text at (see <tt class="docutils literal"><span class="pre">--osd-level</span></tt>).</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">expand-text</span> &lt;text&gt;</tt></dt>
<dd>Property-expand the argument and return the expanded string. This can be
used only through the client API or from a script using
<tt class="docutils literal">mp.command_native</tt>. (see <a class="reference internal" href="#property-expansion">Property Expansion</a>).</dd>
<dt><tt class="docutils literal"><span class="pre">expand-path</span> &quot;&lt;text&gt;&quot;</tt></dt>
<dd><p class="first">Expand a path's double-tilde placeholders into a platform-specific path.
As <tt class="docutils literal"><span class="pre">expand-text</span></tt>, this can only be used through the client API or from
a script using <tt class="docutils literal">mp.command_native</tt>.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p><tt class="docutils literal"><span class="pre">mp.osd_message(mp.command_native({&quot;expand-path&quot;,</span> <span class="pre">&quot;~~home/&quot;}))</span></tt></p>
<p class="last">This line of Lua would show the location of the user's mpv
configuration directory on the OSD.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">normalize-path</span> &lt;filename&gt;</tt></dt>
<dd><p class="first">Return a canonical representation of the path <tt class="docutils literal">filename</tt> by converting it
to an absolute path, removing consecutive slashes, removing <tt class="docutils literal">.</tt>
components, resolving <tt class="docutils literal">..</tt> components, and converting slashes to
backslashes on Windows. Symlinks are not resolved unless the platform is
Unix-like and one of the path components is <tt class="docutils literal">..</tt>. If <tt class="docutils literal">filename</tt> is a
URL, it is returned unchanged. This can only be used through the client API
or from a script using <tt class="docutils literal">mp.command_native</tt>.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p><tt class="docutils literal"><span class="pre">mp.osd_message(mp.command_native({&quot;normalize-path&quot;,</span> <span class="pre">&quot;/foo//./bar&quot;}))</span></tt></p>
<p class="last">This line of Lua prints &quot;/foo/bar&quot; on the OSD.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">escape-ass</span> &lt;text&gt;</tt></dt>
<dd><p class="first">Modify <tt class="docutils literal">text</tt> so that commands and functions that interpret ASS tags,
such as <tt class="docutils literal"><span class="pre">osd-overlay</span></tt> and <tt class="docutils literal">mp.create_osd_overlay</tt>, will display it
verbatim, and return it. This can only be used through the client API or
from a script using <tt class="docutils literal">mp.command_native</tt>.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p><tt class="docutils literal"><span class="pre">mp.osd_message(mp.command_native({&quot;escape-ass&quot;,</span> &quot;foo <span class="pre">{bar}&quot;}))</span></tt></p>
<p class="last">This line of Lua prints &quot;foo \{bar}&quot; on the OSD.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">show-progress</span></tt></dt>
<dd>Show the progress bar, the elapsed time and the total duration of the file
on the OSD. <tt class="docutils literal"><span class="pre">no-osd</span></tt> has no effect on this command.</dd>
<dt><tt class="docutils literal"><span class="pre">write-watch-later-config</span></tt></dt>
<dd>Write the resume config file that the <tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> command writes,
but continue playback normally.</dd>
<dt><tt class="docutils literal"><span class="pre">delete-watch-later-config</span> [&lt;filename&gt;]</tt></dt>
<dd>Delete any existing resume config file that was written by
<tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> or <tt class="docutils literal"><span class="pre">write-watch-later-config</span></tt>. If a filename is
specified, then the deleted config is for that file; otherwise, it is the
same one as would be written by <tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> or
<tt class="docutils literal"><span class="pre">write-watch-later-config</span></tt> in the current circumstance.</dd>
<dt><tt class="docutils literal">stop [&lt;flags&gt;]</tt></dt>
<dd><p class="first">Stop playback and clear playlist. With default settings, this is
essentially like <tt class="docutils literal">quit</tt>. Useful for the client API: playback can be
stopped without terminating the player.</p>
<p>The first argument is optional, and supports the following flags:</p>
<dl class="last docutils">
<dt>keep-playlist</dt>
<dd>Do not clear the playlist.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">mouse &lt;x&gt; &lt;y&gt; [&lt;button&gt; <span class="pre">[&lt;mode&gt;]]</span></tt></dt>
<dd><p class="first">Send a mouse event with given coordinate (<tt class="docutils literal">&lt;x&gt;</tt>, <tt class="docutils literal">&lt;y&gt;</tt>).</p>
<p>Second argument:</p>
<dl class="docutils">
<dt>&lt;button&gt;</dt>
<dd>The button number of clicked mouse button. This should be one of 0-19.
If <tt class="docutils literal">&lt;button&gt;</tt> is omitted, only the position will be updated.</dd>
</dl>
<p>Third argument:</p>
<dl class="last docutils">
<dt>&lt;single&gt; (default)</dt>
<dd>The mouse event represents regular single click.</dd>
<dt>&lt;double&gt;</dt>
<dd>The mouse event represents double-click.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">keypress &lt;name&gt; [&lt;scale&gt;]</tt></dt>
<dd>Send a key event through mpv's input handler, triggering whatever
behavior is configured to that key. <tt class="docutils literal">name</tt> uses the <tt class="docutils literal">input.conf</tt>
naming scheme for keys and modifiers. <tt class="docutils literal">scale</tt> is used to scale numerical
change effected by the bound command (same mechanism as precise scrolling).
Useful for the client API: key events can be sent to libmpv to handle
internally.</dd>
<dt><tt class="docutils literal">keydown &lt;name&gt;</tt></dt>
<dd>Similar to <tt class="docutils literal">keypress</tt>, but sets the <tt class="docutils literal">KEYDOWN</tt> flag so that if the key is
bound to a repeatable command, it will be run repeatedly with mpv's key
repeat timing until the <tt class="docutils literal">keyup</tt> command is called.</dd>
<dt><tt class="docutils literal">keyup [&lt;name&gt;]</tt></dt>
<dd>Set the <tt class="docutils literal">KEYUP</tt> flag, stopping any repeated behavior that had been
triggered. <tt class="docutils literal">name</tt> is optional. If <tt class="docutils literal">name</tt> is not given or is an
empty string, <tt class="docutils literal">KEYUP</tt> will be set on all keys. Otherwise, <tt class="docutils literal">KEYUP</tt> will
only be set on the key specified by <tt class="docutils literal">name</tt>.</dd>
<dt><tt class="docutils literal">keybind &lt;name&gt; &lt;command&gt;</tt></dt>
<dd>Binds a key to an input command. <tt class="docutils literal">command</tt> must be a complete command
containing all the desired arguments and flags. Both <tt class="docutils literal">name</tt> and
<tt class="docutils literal">command</tt> use the <tt class="docutils literal">input.conf</tt> naming scheme. This is primarily
useful for the client API.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-add</span> &lt;url&gt; [&lt;flags&gt; [&lt;title&gt; <span class="pre">[&lt;lang&gt;]]]</span></tt></dt>
<dd>Load the given audio file. See <tt class="docutils literal"><span class="pre">sub-add</span></tt> command.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-remove</span> [&lt;id&gt;]</tt></dt>
<dd>Remove the given audio track. See <tt class="docutils literal"><span class="pre">sub-remove</span></tt> command.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-reload</span> [&lt;id&gt;]</tt></dt>
<dd>Reload the given audio tracks. See <tt class="docutils literal"><span class="pre">sub-reload</span></tt> command.</dd>
<dt><tt class="docutils literal"><span class="pre">video-add</span> &lt;url&gt; [&lt;flags&gt; [&lt;title&gt; [&lt;lang&gt; <span class="pre">[&lt;albumart&gt;]]]]</span></tt></dt>
<dd><p class="first">Load the given video file. See <tt class="docutils literal"><span class="pre">sub-add</span></tt> command for common options.</p>
<dl class="last docutils">
<dt><tt class="docutils literal">albumart</tt> (<tt class="docutils literal">MPV_FORMAT_FLAG</tt>)</dt>
<dd>If enabled, mpv will load the given video as album art.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">video-remove</span> [&lt;id&gt;]</tt></dt>
<dd>Remove the given video track. See <tt class="docutils literal"><span class="pre">sub-remove</span></tt> command.</dd>
<dt><tt class="docutils literal"><span class="pre">video-reload</span> [&lt;id&gt;]</tt></dt>
<dd>Reload the given video tracks. See <tt class="docutils literal"><span class="pre">sub-reload</span></tt> command.</dd>
<dt><tt class="docutils literal"><span class="pre">rescan-external-files</span> [&lt;mode&gt;]</tt></dt>
<dd><p class="first">Rescan external files according to the current <tt class="docutils literal"><span class="pre">--sub-auto</span></tt>,
<tt class="docutils literal"><span class="pre">--audio-file-auto</span></tt> and <tt class="docutils literal"><span class="pre">--cover-art-auto</span></tt> settings. This can be used
to auto-load external files <em>after</em> the file was loaded.</p>
<p>The <tt class="docutils literal">mode</tt> argument is one of the following:</p>
<dl class="last docutils">
<dt>&lt;reselect&gt; (default)</dt>
<dd>Select the default audio and subtitle streams, which typically selects
external files with the highest preference. (The implementation is not
perfect, and could be improved on request.)</dd>
<dt>&lt;keep-selection&gt;</dt>
<dd>Do not change current track selections.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">context-menu</span></tt></dt>
<dd>Show context menu on the video window. See <a class="reference internal" href="#context-menu">Context Menu</a> section for details.</dd>
</dl>
</div>
<div class="section" id="input-commands-that-are-possibly-subject-to-change">
<h2>Input Commands that are Possibly Subject to Change</h2>
<dl class="docutils">
<dt><tt class="docutils literal">af &lt;operation&gt; &lt;value&gt;</tt></dt>
<dd>Change audio filter chain. See <tt class="docutils literal">vf</tt> command.</dd>
<dt><tt class="docutils literal">vf &lt;operation&gt; &lt;value&gt;</tt></dt>
<dd><p class="first">Change video filter chain.</p>
<p>The semantics are exactly the same as with option parsing (see
<a class="reference internal" href="#video-filters">VIDEO FILTERS</a>). As such the text below is a redundant and incomplete
summary.</p>
<p>The first argument decides what happens:</p>
<dl class="docutils">
<dt>&lt;set&gt;</dt>
<dd>Overwrite the previous filter chain with the new one.</dd>
<dt>&lt;add&gt;</dt>
<dd>Append the new filter chain to the previous one.</dd>
<dt>&lt;toggle&gt;</dt>
<dd><p class="first">Check if the given filter (with the exact parameters) is already in the
video chain. If it is, remove the filter. If it isn't, add the filter.
(If several filters are passed to the command, this is done for
each filter.)</p>
<p class="last">A special variant is combining this with labels, and using <tt class="docutils literal">&#64;name</tt>
without filter name and parameters as filter entry. This toggles the
enable/disable flag.</p>
</dd>
<dt>&lt;remove&gt;</dt>
<dd>Like <tt class="docutils literal">toggle</tt>, but always remove the given filter from the chain.</dd>
<dt>&lt;clr&gt;</dt>
<dd>Remove all filters. Note that like the other sub-commands, this does
not control automatically inserted filters.</dd>
</dl>
<p>The argument is always needed. E.g. in case of <tt class="docutils literal">clr</tt> use <tt class="docutils literal">vf clr &quot;&quot;</tt>.</p>
<p>You can assign labels to filter by prefixing them with <tt class="docutils literal">&#64;name:</tt> (where
<tt class="docutils literal">name</tt> is a user-chosen arbitrary identifier). Labels can be used to
refer to filters by name in all of the filter chain modification commands.
For <tt class="docutils literal">add</tt>, using an already used label will replace the existing filter.</p>
<p>The <tt class="docutils literal">vf</tt> command shows the list of requested filters on the OSD after
changing the filter chain. This is roughly equivalent to
<tt class="docutils literal"><span class="pre">show-text</span> ${vf}</tt>. Note that auto-inserted filters for format conversion
are not shown on the list, only what was requested by the user.</p>
<p>Normally, the commands will check whether the video chain is recreated
successfully, and will undo the operation on failure. If the command is run
before video is configured (can happen if the command is run immediately
after opening a file and before a video frame is decoded), this check can't
be run. Then it can happen that creating the video chain fails.</p>
<div class="admonition admonition-example-for-input-conf">
<p class="first admonition-title">Example for input.conf</p>
<ul class="last simple">
<li><tt class="docutils literal">a vf set vflip</tt> turn the video upside-down on the <tt class="docutils literal">a</tt> key</li>
<li><tt class="docutils literal">b vf set &quot;&quot;</tt> remove all video filters on <tt class="docutils literal">b</tt></li>
<li><tt class="docutils literal">c vf toggle gradfun</tt> toggle debanding on <tt class="docutils literal">c</tt></li>
</ul>
</div>
<div class="admonition admonition-example-how-to-toggle-disabled-filters-at-runtime last">
<p class="first admonition-title">Example how to toggle disabled filters at runtime</p>
<ul class="last simple">
<li>Add something like <tt class="docutils literal"><span class="pre">vf-add=&#64;deband:!gradfun</span></tt> to <tt class="docutils literal">mpv.conf</tt>.
The <tt class="docutils literal">&#64;deband:</tt> is the label, an arbitrary, user-given name for this
filter entry. The <tt class="docutils literal">!</tt> before the filter name disables the filter by
default. Everything after this is the normal filter name and possibly
filter parameters, like in the normal <tt class="docutils literal"><span class="pre">--vf</span></tt> syntax.</li>
<li>Add <tt class="docutils literal">a vf toggle &#64;deband</tt> to <tt class="docutils literal">input.conf</tt>. This toggles the
&quot;disabled&quot; flag for the filter with the label <tt class="docutils literal">deband</tt> when the
<tt class="docutils literal">a</tt> key is hit.</li>
</ul>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">cycle-values</span> <span class="pre">[&lt;&quot;!reverse&quot;&gt;]</span> &lt;property&gt; &lt;value1&gt; [&lt;value2&gt; <span class="pre">[...]]</span></tt></dt>
<dd><p class="first">Cycle through a list of values. Each invocation of the command will set the
given property to the next value in the list. The command will use the
current value of the property/option, and use it to determine the current
position in the list of values. Once it has found it, it will set the
next value in the list (wrapping around to the first item if needed).</p>
<p>This command has a variable number of arguments, and cannot be used with
named arguments.</p>
<p class="last">The special argument <tt class="docutils literal">!reverse</tt> can be used to cycle the value list in
reverse. The only advantage is that you don't need to reverse the value
list yourself when adding a second key binding for cycling backwards.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">enable-section</span> &lt;name&gt; [&lt;flags&gt;]</tt></dt>
<dd><p class="first">This command is deprecated, except for mpv-internal uses.</p>
<p>Enable all key bindings in the named input section.</p>
<p>The enabled input sections form a stack. Bindings in sections on the top of
the stack are preferred to lower sections. This command puts the section
on top of the stack. If the section was already on the stack, it is
implicitly removed beforehand. (A section cannot be on the stack more than
once.)</p>
<p>The <tt class="docutils literal">flags</tt> parameter can be a combination (separated by <tt class="docutils literal">+</tt>) of the
following flags:</p>
<dl class="last docutils">
<dt>&lt;exclusive&gt;</dt>
<dd>All sections enabled before the newly enabled section are disabled.
They will be re-enabled as soon as all exclusive sections above them
are removed. In other words, the new section shadows all previous
sections.</dd>
<dt>&lt;allow-hide-cursor&gt;</dt>
<dd>This feature can't be used through the public API.</dd>
<dt>&lt;allow-vo-dragging&gt;</dt>
<dd>Same.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">disable-section</span> &lt;name&gt;</tt></dt>
<dd><p class="first">This command is deprecated, except for mpv-internal uses.</p>
<p class="last">Disable the named input section. Undoes <tt class="docutils literal"><span class="pre">enable-section</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">define-section</span> &lt;name&gt; &lt;contents&gt; [&lt;flags&gt;]</tt></dt>
<dd><p class="first">This command is deprecated, except for mpv-internal uses.</p>
<p>Create a named input section, or replace the contents of an already existing
input section. The <tt class="docutils literal">contents</tt> parameter uses the same syntax as the
<tt class="docutils literal">input.conf</tt> file (except that using the section syntax in it is not
allowed), including the need to separate bindings with a newline character.</p>
<p>If the <tt class="docutils literal">contents</tt> parameter is an empty string, the section is removed.</p>
<p>The section with the name <tt class="docutils literal">default</tt> is the normal input section.</p>
<p>In general, input sections have to be enabled with the <tt class="docutils literal"><span class="pre">enable-section</span></tt>
command, or they are ignored.</p>
<p>The last parameter has the following meaning:</p>
<dl class="docutils">
<dt>&lt;default&gt; (also used if parameter omitted)</dt>
<dd>Use a key binding defined by this section only if the user hasn't
already bound this key to a command.</dd>
<dt>&lt;force&gt;</dt>
<dd>Always bind a key. (The input section that was made active most recently
wins if there are ambiguities.)</dd>
</dl>
<p class="last">This command can be used to dispatch arbitrary keys to a script or a client
API user. If the input section defines <tt class="docutils literal"><span class="pre">script-binding</span></tt> commands, it is
also possible to get separate events on key up/down, and relatively detailed
information about the key state. The special key name <tt class="docutils literal">unmapped</tt> can be
used to match any unmapped key.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">overlay-add</span> &lt;id&gt; &lt;x&gt; &lt;y&gt; &lt;file&gt; &lt;offset&gt; &lt;fmt&gt; &lt;w&gt; &lt;h&gt; &lt;stride&gt; &lt;dw&gt; &lt;dh&gt;</tt></dt>
<dd><p class="first">Add an OSD overlay sourced from raw data. This might be useful for scripts
and applications controlling mpv, and which want to display things on top
of the video window.</p>
<p>Overlays are usually displayed in screen resolution, but with some VOs,
the resolution is reduced to that of the video's. You can read the
<tt class="docutils literal"><span class="pre">osd-width</span></tt> and <tt class="docutils literal"><span class="pre">osd-height</span></tt> properties. At least with <tt class="docutils literal"><span class="pre">--vo-xv</span></tt> and
anamorphic video (such as DVD), <tt class="docutils literal"><span class="pre">osd-par</span></tt> should be read as well, and the
overlay should be aspect-compensated.</p>
<p>This has the following named arguments. The order of them is not guaranteed,
so you should always call them with named arguments, see <a class="reference internal" href="#named-arguments">Named arguments</a>.</p>
<p><tt class="docutils literal">id</tt> is an integer between 0 and 63 identifying the overlay element. The
ID can be used to add multiple overlay parts, update a part by using this
command with an already existing ID, or to remove a part with
<tt class="docutils literal"><span class="pre">overlay-remove</span></tt>. Using a previously unused ID will add a new overlay,
while reusing an ID will update it.</p>
<p><tt class="docutils literal">x</tt> and <tt class="docutils literal">y</tt> specify the position where the OSD should be displayed.</p>
<p><tt class="docutils literal">file</tt> specifies the file the raw image data is read from. It can be
either a numeric UNIX file descriptor prefixed with <tt class="docutils literal">&#64;</tt> (e.g. <tt class="docutils literal">&#64;4</tt>),
or a filename. The file will be mapped into memory with <tt class="docutils literal">mmap()</tt>,
copied, and unmapped before the command returns (changed in mpv 0.18.1).</p>
<p>It is also possible to pass a raw memory address for use as bitmap memory
by passing a memory address as integer prefixed with an <tt class="docutils literal">&amp;</tt> character.
Passing the wrong thing here will crash the player. This mode might be
useful for use with libmpv. The <tt class="docutils literal">offset</tt> parameter is simply added to the
memory address (since mpv 0.8.0, ignored before).</p>
<p><tt class="docutils literal">offset</tt> is the byte offset of the first pixel in the source file.
(The current implementation always mmap's the whole file from position 0 to
the end of the image, so large offsets should be avoided. Before mpv 0.8.0,
the offset was actually passed directly to <tt class="docutils literal">mmap</tt>, but it was changed to
make using it easier.)</p>
<p><tt class="docutils literal">fmt</tt> is a string identifying the image format. Currently, only <tt class="docutils literal">bgra</tt>
is defined. This format has 4 bytes per pixels, with 8 bits per component.
The least significant 8 bits are blue, and the most significant 8 bits
are alpha (in little endian, the components are B-G-R-A, with B as first
byte). This uses premultiplied alpha: every color component is already
multiplied with the alpha component. This means the numeric value of each
component is equal to or smaller than the alpha component. (Violating this
rule will lead to different results with different VOs: numeric overflows
resulting from blending broken alpha values is considered something that
shouldn't happen, and consequently implementations don't ensure that you
get predictable behavior in this case.)</p>
<p><tt class="docutils literal">w</tt>, <tt class="docutils literal">h</tt>, and <tt class="docutils literal">stride</tt> specify the size of the overlay. <tt class="docutils literal">w</tt> is the
visible width of the overlay, while <tt class="docutils literal">stride</tt> gives the width in bytes in
memory. In the simple case, and with the <tt class="docutils literal">bgra</tt> format, <tt class="docutils literal"><span class="pre">stride==4*w</span></tt>.
In general, the total amount of memory accessed is <tt class="docutils literal">stride * h</tt>.
(Technically, the minimum size would be <tt class="docutils literal">stride * (h - 1) + w * 4</tt>, but
for simplicity, the player will access all <tt class="docutils literal">stride * h</tt> bytes.)</p>
<p><tt class="docutils literal">dw</tt> and <tt class="docutils literal">dh</tt> specify the (optional) display size of the overlay.
The overlay visible portion of the overlay (<tt class="docutils literal">w</tt> and <tt class="docutils literal">h</tt>) is scaled to
in display to <tt class="docutils literal">dw</tt> and <tt class="docutils literal">dh</tt>.  If parameters are not present, the
values for <tt class="docutils literal">w</tt> and <tt class="docutils literal">h</tt> are used.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Before mpv 0.18.1, you had to do manual &quot;double buffering&quot; when updating
an overlay by replacing it with a different memory buffer. Since mpv
0.18.1, the memory is simply copied and doesn't reference any of the
memory indicated by the command's arguments after the command returns.
If you want to use this command before mpv 0.18.1, reads the old docs
to see how to handle this correctly.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">overlay-remove</span> &lt;id&gt;</tt></dt>
<dd>Remove an overlay added with <tt class="docutils literal"><span class="pre">overlay-add</span></tt> and the same ID. Does nothing
if no overlay with this ID exists.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-overlay</span></tt></dt>
<dd><p class="first">Add/update/remove an OSD overlay.</p>
<p>(Although this sounds similar to <tt class="docutils literal"><span class="pre">overlay-add</span></tt>, <tt class="docutils literal"><span class="pre">osd-overlay</span></tt> is for
text overlays, while <tt class="docutils literal"><span class="pre">overlay-add</span></tt> is for bitmaps. Maybe <tt class="docutils literal"><span class="pre">overlay-add</span></tt>
will be merged into <tt class="docutils literal"><span class="pre">osd-overlay</span></tt> to remove this oddity.)</p>
<p>You can use this to add text overlays in ASS format. ASS has advanced
positioning and rendering tags, which can be used to render almost any kind
of vector graphics.</p>
<p>This command accepts the following parameters:</p>
<dl class="docutils">
<dt><tt class="docutils literal">id</tt></dt>
<dd><p class="first">Arbitrary integer that identifies the overlay. Multiple overlays can be
added by calling this command with different <tt class="docutils literal">id</tt> parameters. Calling
this command with the same <tt class="docutils literal">id</tt> replaces the previously set overlay.</p>
<p>There is a separate namespace for each libmpv client (i.e. IPC
connection, script), so IDs can be made up and assigned by the API user
without conflicting with other API users.</p>
<p class="last">If the libmpv client is destroyed, all overlays associated with it are
also deleted. In particular, connecting via <tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt>,
adding an overlay, and disconnecting will remove the overlay immediately
again.</p>
</dd>
<dt><tt class="docutils literal">format</tt></dt>
<dd><p class="first">String that gives the type of the overlay. Accepts the following values
(HTML rendering of this is broken, view the generated manpage instead,
or the raw RST source):</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">ass-events</span></tt></dt>
<dd><p class="first">The <tt class="docutils literal">data</tt> parameter is a string. The string is split on the
newline character. Every line is turned into the <tt class="docutils literal">Text</tt> part of
a <tt class="docutils literal">Dialogue</tt> ASS event. Timing is unused (but behavior of timing
dependent ASS tags may change in future mpv versions).</p>
<p>Note that it's better to put multiple lines into <tt class="docutils literal">data</tt>, instead
of adding multiple OSD overlays.</p>
<p>This provides 2 ASS <tt class="docutils literal">Styles</tt>. <tt class="docutils literal">OSD</tt> contains the text style as
defined by the current <tt class="docutils literal"><span class="pre">--osd-...</span></tt> options. <tt class="docutils literal">Default</tt> is
similar, and contains style that <tt class="docutils literal">OSD</tt> would have if all options
were set to the default.</p>
<p class="last">In addition, the <tt class="docutils literal">res_x</tt> and <tt class="docutils literal">res_y</tt> options specify the value
of the ASS <tt class="docutils literal">PlayResX</tt> and <tt class="docutils literal">PlayResY</tt> header fields. If <tt class="docutils literal">res_y</tt>
is set to 0, <tt class="docutils literal">PlayResY</tt> is initialized to an arbitrary default
value (but note that the default for this command is 720, not 0).
If <tt class="docutils literal">res_x</tt> is set to 0, <tt class="docutils literal">PlayResX</tt> is set based on <tt class="docutils literal">res_y</tt>
such that a virtual ASS pixel has a square pixel aspect ratio.</p>
</dd>
<dt><tt class="docutils literal">none</tt></dt>
<dd>Special value that causes the overlay to be removed. Most parameters
other than <tt class="docutils literal">id</tt> and <tt class="docutils literal">format</tt> are mostly ignored.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">data</tt></dt>
<dd>String defining the overlay contents according to the <tt class="docutils literal">format</tt>
parameter.</dd>
<dt><tt class="docutils literal">res_x</tt>, <tt class="docutils literal">res_y</tt></dt>
<dd>Used if <tt class="docutils literal">format</tt> is set to <tt class="docutils literal"><span class="pre">ass-events</span></tt> (see description there).
Optional, defaults to 0/720.</dd>
<dt><tt class="docutils literal">z</tt></dt>
<dd><p class="first">The Z order of the overlay. Optional, defaults to 0.</p>
<p>Note that Z order between different overlays of different formats is
static, and cannot be changed (currently, this means that bitmap
overlays added by <tt class="docutils literal"><span class="pre">overlay-add</span></tt> are always on top of the ASS overlays
added by <tt class="docutils literal"><span class="pre">osd-overlay</span></tt>). In addition, the builtin OSD components are
always below any of the custom OSD. (This includes subtitles of any kind
as well as text rendered by <tt class="docutils literal"><span class="pre">show-text</span></tt>.)</p>
<p class="last">It's possible that future mpv versions will randomly change how Z order
between different OSD formats and builtin OSD is handled.</p>
</dd>
<dt><tt class="docutils literal">hidden</tt></dt>
<dd>If set to true, do not display this (default: false).</dd>
<dt><tt class="docutils literal">compute_bounds</tt></dt>
<dd><p class="first">If set to true, attempt to determine bounds and write them to the
command's result value as <tt class="docutils literal">x0</tt>, <tt class="docutils literal">x1</tt>, <tt class="docutils literal">y0</tt>, <tt class="docutils literal">y1</tt> rectangle
(default: false). If the rectangle is empty, not known, or somehow
degenerate, it is not set. <tt class="docutils literal">x1</tt>/<tt class="docutils literal">y1</tt> is the coordinate of the
bottom exclusive corner of the rectangle.</p>
<p>The result value may depend on the VO window size, and is based on the
last known window size at the time of the call. This means the results
may be different from what is actually rendered.</p>
<p>For <tt class="docutils literal"><span class="pre">ass-events</span></tt>, the result rectangle is recomputed to <tt class="docutils literal">PlayRes</tt>
coordinates (<tt class="docutils literal">res_x</tt>/<tt class="docutils literal">res_y</tt>). If window size is not known, a
fallback is chosen.</p>
<p>You should be aware that this mechanism is very inefficient, as it
renders the full result, and then uses the bounding box of the rendered
bitmap list (even if <tt class="docutils literal">hidden</tt> is set). It will flush various caches.
Its results also depend on the used libass version.</p>
<p class="last">This feature is experimental, and may change in some way again.</p>
</dd>
</dl>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">Always use named arguments (<tt class="docutils literal">mpv_command_node()</tt>). Lua scripts should
use the <tt class="docutils literal">mp.create_osd_overlay()</tt> helper instead of invoking this
command directly.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">script-message</span> [&lt;arg1&gt; [&lt;arg2&gt; <span class="pre">[...]]]</span></tt></dt>
<dd><p class="first">Send a message to all clients, and pass it the following list of arguments.
What this message means, how many arguments it takes, and what the arguments
mean is fully up to the receiver and the sender. Every client receives the
message, so be careful about name clashes (or use <tt class="docutils literal"><span class="pre">script-message-to</span></tt>).</p>
<p class="last">This command has a variable number of arguments, and cannot be used with
named arguments.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">script-message-to</span> &lt;target&gt; [&lt;arg1&gt; [&lt;arg2&gt; <span class="pre">[...]]]</span></tt></dt>
<dd><p class="first">Same as <tt class="docutils literal"><span class="pre">script-message</span></tt>, but send it only to the client named
<tt class="docutils literal">&lt;target&gt;</tt>. Each client (scripts etc.) has a unique name. For example,
Lua scripts can get their name via <tt class="docutils literal">mp.get_script_name()</tt>. Note that
client names only consist of alphanumeric characters and <tt class="docutils literal">_</tt>.</p>
<p class="last">This command has a variable number of arguments, and cannot be used with
named arguments.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">script-binding</span> &lt;name&gt;</tt></dt>
<dd><p class="first">Invoke a script-provided key binding. This can be used to remap key
bindings provided by external Lua scripts.</p>
<p>The argument is the name of the binding.</p>
<p>It can optionally be prefixed with the name of the script, using <tt class="docutils literal">/</tt> as
separator, e.g. <tt class="docutils literal"><span class="pre">script-binding</span> scriptname/bindingname</tt>. Note that script
names only consist of alphanumeric characters and <tt class="docutils literal">_</tt>.</p>
<p>For completeness, here is how this command works internally. The details
could change any time. On any matching key event, <tt class="docutils literal"><span class="pre">script-message-to</span></tt>
or <tt class="docutils literal"><span class="pre">script-message</span></tt> is called (depending on whether the script name is
included), with the following arguments:</p>
<ol class="arabic simple">
<li>The string <tt class="docutils literal"><span class="pre">key-binding</span></tt>.</li>
<li>The name of the binding (as established above).</li>
<li>The key state as string (see below).</li>
<li>The key name (since mpv 0.15.0).</li>
<li>The text the key would produce, or empty string if not applicable.</li>
</ol>
<p>The 5th argument is only set if no modifiers are present (using the shift
key with a letter is normally not emitted as having a modifier, and results
in upper case text instead, but some backends may mess up).</p>
<p>The key state consists of 3 characters:</p>
<ol class="arabic simple">
<li>One of <tt class="docutils literal">d</tt> (key was pressed down), <tt class="docutils literal">u</tt> (was released), <tt class="docutils literal">r</tt> (key
is still down, and was repeated; only if key repeat is enabled for this
binding), <tt class="docutils literal">p</tt> (key was pressed; happens if up/down can't be tracked).</li>
<li>Whether the event originates from the mouse, either <tt class="docutils literal">m</tt> (mouse button)
or <tt class="docutils literal">-</tt> (something else).</li>
<li>Whether the event results from a cancellation (e.g. the key is logically
released but not physically released), either <tt class="docutils literal">c</tt> (canceled) or <tt class="docutils literal">-</tt>
(something else). Not all types of cancellations set this flag.</li>
</ol>
<p class="last">Future versions can add more arguments and more key state characters to
support more input peculiarities.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ab-loop</span></tt></dt>
<dd>Cycle through A-B loop states. The first command will set the <tt class="docutils literal">A</tt> point
(the <tt class="docutils literal"><span class="pre">ab-loop-a</span></tt> property); the second the <tt class="docutils literal">B</tt> point, and the third
will clear both points.</dd>
<dt><tt class="docutils literal"><span class="pre">drop-buffers</span></tt></dt>
<dd>Drop audio/video/demuxer buffers, and restart from fresh. Might help with
unseekable streams that are going out of sync.
This command might be changed or removed in the future.</dd>
<dt><tt class="docutils literal"><span class="pre">screenshot-raw</span> [&lt;flags&gt;]</tt></dt>
<dd><p class="first">Return a screenshot in memory. This can be used only through the client
API. The MPV_FORMAT_NODE_MAP returned by this command has the <tt class="docutils literal">w</tt>, <tt class="docutils literal">h</tt>,
<tt class="docutils literal">stride</tt> fields set to obvious contents. The <tt class="docutils literal">format</tt> field is set to
<tt class="docutils literal">bgr0</tt> by default. This format is organized as <tt class="docutils literal">B8G8R8X8</tt> (where <tt class="docutils literal">B</tt>
is the LSB). The contents of the padding <tt class="docutils literal">X</tt> are undefined. The <tt class="docutils literal">data</tt>
field is of type MPV_FORMAT_BYTE_ARRAY with the actual image data. The image
is freed as soon as the result mpv_node is freed. As usual with client API
semantics, you are not allowed to write to the image data.</p>
<p>The <tt class="docutils literal">stride</tt> is the number of bytes from a pixel at <tt class="docutils literal">(x0, y0)</tt> to the
pixel at <tt class="docutils literal">(x0, y0 + 1)</tt>. This can be larger than <tt class="docutils literal">w * 4</tt> if the image
was cropped, or if there is padding. This number can be negative as well.
You access a pixel with <tt class="docutils literal">byte_index = y * stride + x * 4</tt> (assuming the
<tt class="docutils literal">bgr0</tt> format).</p>
<p class="last">The <tt class="docutils literal">flags</tt> argument is like the first argument to <tt class="docutils literal">screenshot</tt> and
supports <tt class="docutils literal">subtitles</tt>, <tt class="docutils literal">video</tt>, <tt class="docutils literal">window</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">vf-command</span> &lt;label&gt; &lt;command&gt; &lt;argument&gt; [&lt;target&gt;]</tt></dt>
<dd><p class="first">Send a command to the filter. Note that currently, this only works with
the <tt class="docutils literal">lavfi</tt> filter. Refer to the libavfilter documentation for the list
of supported commands for each filter.</p>
<p><tt class="docutils literal">&lt;label&gt;</tt> is a mpv filter label, use <tt class="docutils literal">all</tt> to send it to all filters
at once.</p>
<p><tt class="docutils literal">&lt;command&gt;</tt> and <tt class="docutils literal">&lt;argument&gt;</tt> are filter-specific strings.</p>
<p class="last"><tt class="docutils literal">&lt;target&gt;</tt> is a filter or filter instance name and defaults to <tt class="docutils literal">all</tt>.
Note that the target is an additional specifier for filters that
support them, such as complex <tt class="docutils literal">lavfi</tt> filter chains.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">af-command</span> &lt;label&gt; &lt;command&gt; &lt;argument&gt; [&lt;target&gt;]</tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">vf-command</span></tt>, but for audio filters.</dd>
<dt><tt class="docutils literal"><span class="pre">apply-profile</span> &lt;name&gt; [&lt;mode&gt;]</tt></dt>
<dd><p class="first">Apply the contents of a named profile. This is like using <tt class="docutils literal">profile=name</tt>
in a config file, except you can map it to a key binding to change it at
runtime.</p>
<p>The mode argument:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">default</tt></dt>
<dd>Apply the profile. Default if the argument is omitted.</dd>
<dt><tt class="docutils literal">restore</tt></dt>
<dd>Restore options set by a previous <tt class="docutils literal"><span class="pre">apply-profile</span></tt> command for this
profile. Only works if the profile has <tt class="docutils literal"><span class="pre">profile-restore</span></tt> set to a
relevant mode. Prints a warning if nothing could be done. See
<a class="reference internal" href="#runtime-profiles">Runtime profiles</a> for details.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">load-config-file</span> &lt;filename&gt;</tt></dt>
<dd>Load a configuration file, similar to the <tt class="docutils literal"><span class="pre">--include</span></tt> option. If the file
was already included, its previous options are not reset before it is
reparsed.</dd>
<dt><tt class="docutils literal"><span class="pre">load-input-conf</span> &lt;filename&gt;</tt></dt>
<dd>Load an input configuration file, similar to the <tt class="docutils literal"><span class="pre">--input-conf</span></tt> option. If
the file was already included, its previous bindings are not reset before it
is reparsed.</dd>
<dt><tt class="docutils literal"><span class="pre">load-script</span> &lt;filename&gt;</tt></dt>
<dd><p class="first">Load a script, similar to the <tt class="docutils literal"><span class="pre">--script</span></tt> option. Whether this waits for
the script to finish initialization or not changed multiple times, and the
future behavior is left undefined.</p>
<p class="last">On success, returns a <tt class="docutils literal">mpv_node</tt> with a <tt class="docutils literal">client_id</tt> field set to the
return value of the <tt class="docutils literal">mpv_client_id()</tt> API call of the newly created script
handle.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">change-list</span> &lt;name&gt; &lt;operation&gt; &lt;value&gt;</tt></dt>
<dd><p class="first">This command changes list options as described in <a class="reference internal" href="#list-options">List Options</a>. The
<tt class="docutils literal">&lt;name&gt;</tt> parameter is the normal option name, while <tt class="docutils literal">&lt;operation&gt;</tt> is
the suffix or action used on the option.</p>
<p>Some operations take no value, but the command still requires the value
parameter. In these cases, the value must be an empty string.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p><tt class="docutils literal"><span class="pre">change-list</span> <span class="pre">glsl-shaders</span> append file.glsl</tt></p>
<p class="last">Add a filename to the <tt class="docutils literal"><span class="pre">glsl-shaders</span></tt> list. The command line
equivalent is <tt class="docutils literal"><span class="pre">--glsl-shaders-append=file.glsl</span></tt> or alternatively
<tt class="docutils literal"><span class="pre">--glsl-shader=file.glsl</span></tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">dump-cache</span> &lt;start&gt; &lt;end&gt; &lt;filename&gt;</tt></dt>
<dd><p class="first">Dump the current cache to the given filename. The <tt class="docutils literal">&lt;filename&gt;</tt> file is
overwritten if it already exists. <tt class="docutils literal">&lt;start&gt;</tt> and <tt class="docutils literal">&lt;end&gt;</tt> give the
time range of what to dump. If no data is cached at the given time range,
nothing may be dumped (creating a file with no packets).</p>
<p>Dumping a larger part of the cache will freeze the player. No effort was
made to fix this, as this feature was meant mostly for creating small
excerpts.</p>
<p>See <tt class="docutils literal"><span class="pre">--stream-record</span></tt> for various caveats that mostly apply to this
command too, as both use the same underlying code for writing the output
file.</p>
<p>If <tt class="docutils literal">&lt;filename&gt;</tt> is an empty string, an ongoing <tt class="docutils literal"><span class="pre">dump-cache</span></tt> is stopped.</p>
<p>If <tt class="docutils literal">&lt;end&gt;</tt> is <tt class="docutils literal">no</tt>, then continuous dumping is enabled. Then, after
dumping the existing parts of the cache, anything read from network is
appended to the cache as well. This behaves similar to <tt class="docutils literal"><span class="pre">--stream-record</span></tt>
(although it does not conflict with that option, and they can be both active
at the same time).</p>
<p>If the <tt class="docutils literal">&lt;end&gt;</tt> time is after the cache, the command will _not_ wait and
write newly received data to it.</p>
<p>The end of the resulting file may be slightly damaged or incomplete at the
end. (Not enough effort was made to ensure that the end lines up properly.)</p>
<p>Note that this command will finish only once dumping ends. That means it
works similar to the <tt class="docutils literal">screenshot</tt> command, just that it can block much
longer. If continuous dumping is used, the command will not finish until
playback is stopped, an error happens, another <tt class="docutils literal"><span class="pre">dump-cache</span></tt> command is
run, or an API like <tt class="docutils literal">mp.abort_async_command</tt> was called to explicitly stop
the command. See <a class="reference internal" href="#synchronous-vs-asynchronous">Synchronous vs. Asynchronous</a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This was mostly created for network streams. For local files, there may
be much better methods to create excerpts and such. There are tons of
much more user-friendly Lua scripts, that will re-encode parts of a file
by spawning a separate instance of <tt class="docutils literal">ffmpeg</tt>. With network streams,
this is not that easily possible, as the stream would have to be
downloaded again. Even if <tt class="docutils literal"><span class="pre">--stream-record</span></tt> is used to record the
stream to the local filesystem, there may be problems, because the
recorded file is still written to.</p>
</div>
<p class="last">This command is experimental, and all details about it may change in the
future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ab-loop-dump-cache</span> &lt;filename&gt;</tt></dt>
<dd><p class="first">Essentially calls <tt class="docutils literal"><span class="pre">dump-cache</span></tt> with the current AB-loop points as
arguments. Like <tt class="docutils literal"><span class="pre">dump-cache</span></tt>, this will overwrite the file at
<tt class="docutils literal">&lt;filename&gt;</tt>. Likewise, if the B point is set to <tt class="docutils literal">no</tt>, it will enter
continuous dumping after the existing cache was dumped.</p>
<p class="last">The author reserves the right to remove this command if enough motivation
is found to move this functionality to a trivial Lua script.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ab-loop-align-cache</span></tt></dt>
<dd><p class="first">Re-adjust the A/B loop points to the start and end within the cache the
<tt class="docutils literal"><span class="pre">ab-loop-dump-cache</span></tt> command will (probably) dump. Basically, it aligns
the times on keyframes. The guess might be off especially at the end (due to
granularity issues due to remuxing). If the cache shrinks in the meantime,
the points set by the command will not be the effective parameters either.</p>
<p class="last">This command has an even more uncertain future than <tt class="docutils literal"><span class="pre">ab-loop-dump-cache</span></tt>
and might disappear without replacement if the author decides it's useless.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">begin-vo-dragging</span></tt></dt>
<dd>Begin window dragging if supported by the current VO. This command should
only be called while a mouse button is being pressed, otherwise it will
be ignored. The exact effect of this command depends on the VO implementation
of window dragging. For example, on Windows only the left mouse button can
begin window dragging, while X11 and Wayland allow other mouse buttons.</dd>
</dl>
<p>Undocumented commands: <tt class="docutils literal"><span class="pre">ao-reload</span></tt> (experimental/internal).</p>
<div class="section" id="list-of-events">
<h3>List of events</h3>
<p>This is a partial list of events. This section describes what
<tt class="docutils literal">mpv_event_to_node()</tt> returns, and which is what scripting APIs and the JSON
IPC sees. Note that the C API has separate C-level declarations with
<tt class="docutils literal">mpv_event</tt>, which may be slightly different.</p>
<p>Note that events are asynchronous: the player core continues running while
events are delivered to scripts and other clients. In some cases, you can use
hooks to enforce synchronous execution.</p>
<p>All events can have the following fields:</p>
<dl class="docutils">
<dt><tt class="docutils literal">event</tt></dt>
<dd>Name as the event (as returned by <tt class="docutils literal">mpv_event_name()</tt>).</dd>
<dt><tt class="docutils literal">id</tt></dt>
<dd>The <tt class="docutils literal">reply_userdata</tt> field (opaque user value). If <tt class="docutils literal">reply_userdata</tt> is 0,
the field is not added.</dd>
<dt><tt class="docutils literal">error</tt></dt>
<dd>Set to an error string (as returned by <tt class="docutils literal">mpv_error_string()</tt>). This field
is missing if no error happened, or the event type does not report error.
Most events leave this unset.</dd>
</dl>
<p>This list uses the event name field value, and the C API symbol in brackets:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">start-file</span></tt> (<tt class="docutils literal">MPV_EVENT_START_FILE</tt>)</dt>
<dd><p class="first">Happens right before a new file is loaded. When you receive this, the
player is loading the file (or possibly already done with it).</p>
<p>This has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">playlist_entry_id</tt></dt>
<dd>Playlist entry ID of the file being loaded now.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">end-file</span></tt> (<tt class="docutils literal">MPV_EVENT_END_FILE</tt>)</dt>
<dd><p class="first">Happens after a file was unloaded. Typically, the player will load the
next file right away, or quit if this was the last file.</p>
<p>The event has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">reason</tt></dt>
<dd><p class="first">Has one of these values:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">eof</tt></dt>
<dd>The file has ended. This can (but doesn't have to) include
incomplete files or broken network connections under
circumstances.</dd>
<dt><tt class="docutils literal">stop</tt></dt>
<dd>Playback was ended by a command.</dd>
<dt><tt class="docutils literal">quit</tt></dt>
<dd>Playback was ended by sending the quit command.</dd>
<dt><tt class="docutils literal">error</tt></dt>
<dd>An error happened. In this case, an <tt class="docutils literal">error</tt> field is present with
the error string.</dd>
<dt><tt class="docutils literal">redirect</tt></dt>
<dd>Happens with playlists and similar. Details see
<tt class="docutils literal">MPV_END_FILE_REASON_REDIRECT</tt> in the C API.</dd>
<dt><tt class="docutils literal">unknown</tt></dt>
<dd>Unknown. Normally doesn't happen, unless the Lua API is out of sync
with the C API. (Likewise, it could happen that your script gets
reason strings that did not exist yet at the time your script was
written.)</dd>
</dl>
</dd>
<dt><tt class="docutils literal">playlist_entry_id</tt></dt>
<dd>Playlist entry ID of the file that was being played or attempted to be
played. This has the same value as the <tt class="docutils literal">playlist_entry_id</tt> field in the
corresponding <tt class="docutils literal"><span class="pre">start-file</span></tt> event.</dd>
<dt><tt class="docutils literal">file_error</tt></dt>
<dd>Set to mpv error string describing the approximate reason why playback
failed. Unset if no error known. (In Lua scripting, this value was set
on the <tt class="docutils literal">error</tt> field directly. This is deprecated since mpv 0.33.0.
In the future, this <tt class="docutils literal">error</tt> field will be unset for this specific
event.)</dd>
<dt><tt class="docutils literal">playlist_insert_id</tt></dt>
<dd>If loading ended, because the playlist entry to be played was for example
a playlist, and the current playlist entry is replaced with a number of
other entries. This may happen at least with MPV_END_FILE_REASON_REDIRECT
(other event types may use this for similar but different purposes in the
future). In this case, playlist_insert_id will be set to the playlist
entry ID of the first inserted entry, and playlist_insert_num_entries to
the total number of inserted playlist entries. Note this in this specific
case, the ID of the last inserted entry is playlist_insert_id+num-1.
Beware that depending on circumstances, you may observe the new playlist
entries before seeing the event (e.g. reading the &quot;playlist&quot; property or
getting a property change notification before receiving the event).
If this is 0 in the C API, this field isn't added.</dd>
<dt><tt class="docutils literal">playlist_insert_num_entries</tt></dt>
<dd>See playlist_insert_id. Only present if playlist_insert_id is present.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">file-loaded</span></tt>  (<tt class="docutils literal">MPV_EVENT_FILE_LOADED</tt>)</dt>
<dd>Happens after a file was loaded and begins playback.</dd>
<dt><tt class="docutils literal">seek</tt> (<tt class="docutils literal">MPV_EVENT_SEEK</tt>)</dt>
<dd>Happens on seeking. (This might include cases when the player seeks
internally, even without user interaction. This includes e.g. segment
changes when playing ordered chapters Matroska files.)</dd>
<dt><tt class="docutils literal"><span class="pre">playback-restart</span></tt> (<tt class="docutils literal">MPV_EVENT_PLAYBACK_RESTART</tt>)</dt>
<dd>Start of playback after seek or after file was loaded.</dd>
<dt><tt class="docutils literal">shutdown</tt> (<tt class="docutils literal">MPV_EVENT_SHUTDOWN</tt>)</dt>
<dd>Sent when the player quits, and the script should terminate. Normally
handled automatically. See <a class="reference internal" href="#details-on-the-script-initialization-and-lifecycle">Details on the script initialization and lifecycle</a>.</dd>
<dt><tt class="docutils literal"><span class="pre">log-message</span></tt> (<tt class="docutils literal">MPV_EVENT_LOG_MESSAGE</tt>)</dt>
<dd><p class="first">Receives messages enabled with <tt class="docutils literal">mpv_request_log_messages()</tt> (Lua:
<tt class="docutils literal">mp.enable_messages</tt>).</p>
<p>This contains, in addition to the default event fields, the following
fields:</p>
<dl class="docutils">
<dt><tt class="docutils literal">prefix</tt></dt>
<dd>The module prefix, identifies the sender of the message. This is what
the terminal player puts in front of the message text when using the
<tt class="docutils literal"><span class="pre">--v</span></tt> option, and is also what is used for <tt class="docutils literal"><span class="pre">--msg-level</span></tt>.</dd>
<dt><tt class="docutils literal">level</tt></dt>
<dd>The log level as string. See <tt class="docutils literal">msg.log</tt> for possible log level names.
Note that later versions of mpv might add new levels or remove
(undocumented) existing ones.</dd>
<dt><tt class="docutils literal">text</tt></dt>
<dd>The log message. The text will end with a newline character. Sometimes
it can contain multiple lines.</dd>
</dl>
<p class="last">Keep in mind that these messages are meant to be hints for humans. You
should not parse them, and prefix/level/text of messages might change
any time.</p>
</dd>
<dt><tt class="docutils literal">hook</tt></dt>
<dd><p class="first">The event has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">hook_id</tt></dt>
<dd>ID to pass to <tt class="docutils literal">mpv_hook_continue()</tt>. The Lua scripting wrapper
provides a better API around this with <tt class="docutils literal">mp.add_hook()</tt>.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">get-property-reply</span></tt> (<tt class="docutils literal">MPV_EVENT_GET_PROPERTY_REPLY</tt>)</dt>
<dd>See C API.</dd>
<dt><tt class="docutils literal"><span class="pre">set-property-reply</span></tt> (<tt class="docutils literal">MPV_EVENT_SET_PROPERTY_REPLY</tt>)</dt>
<dd>See C API.</dd>
<dt><tt class="docutils literal"><span class="pre">command-reply</span></tt> (<tt class="docutils literal">MPV_EVENT_COMMAND_REPLY</tt>)</dt>
<dd><p class="first">This is one of the commands for which the <tt class="docutils literal">`error</tt> field is meaningful.</p>
<p>JSON IPC and Lua and possibly other backends treat this specially and may
not pass the actual event to the user. See C API.</p>
<p>The event has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">result</tt></dt>
<dd>The result (on success) of any <tt class="docutils literal">mpv_node</tt> type, if any.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">client-message</span></tt> (<tt class="docutils literal">MPV_EVENT_CLIENT_MESSAGE</tt>)</dt>
<dd><p class="first">Lua and possibly other backends treat this specially and may not pass the
actual event to the user.</p>
<p>The event has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">args</tt></dt>
<dd>Array of strings with the message data.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">video-reconfig</span></tt> (<tt class="docutils literal">MPV_EVENT_VIDEO_RECONFIG</tt>)</dt>
<dd>Happens on video output or filter reconfig.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-reconfig</span></tt> (<tt class="docutils literal">MPV_EVENT_AUDIO_RECONFIG</tt>)</dt>
<dd>Happens on audio output or filter reconfig.</dd>
<dt><tt class="docutils literal"><span class="pre">property-change</span></tt> (<tt class="docutils literal">MPV_EVENT_PROPERTY_CHANGE</tt>)</dt>
<dd><p class="first">Happens when a property that is being observed changes value.</p>
<p>The event has the following fields:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">name</tt></dt>
<dd>The name of the property.</dd>
<dt><tt class="docutils literal">data</tt></dt>
<dd>The new value of the property.</dd>
</dl>
</dd>
</dl>
<p>The following events also happen, but are deprecated: <tt class="docutils literal">idle</tt>, <tt class="docutils literal">tick</tt>
Use <tt class="docutils literal">mpv_observe_property()</tt> (Lua: <tt class="docutils literal">mp.observe_property()</tt>) instead.</p>
</div>
<div class="section" id="hooks">
<h3>Hooks</h3>
<p>Hooks are synchronous events between player core and a script or similar. This
applies to client API (including the Lua scripting interface). Normally,
events are supposed to be asynchronous, and the hook API provides an awkward
and obscure way to handle events that require stricter coordination. There are
no API stability guarantees made. Not following the protocol exactly can make
the player freeze randomly. Basically, nobody should use this API.</p>
<p>The C API is described in the header files. The Lua API is described in the
Lua section.</p>
<p>Before a hook is actually invoked on an API clients, it will attempt to return
new values for all observed properties that were changed before the hook. This
may make it easier for an application to set defined &quot;barriers&quot; between property
change notifications by registering hooks. (That means these hooks will have an
effect, even if you do nothing and make them continue immediately.)</p>
<p>The following hooks are currently defined:</p>
<dl class="docutils">
<dt><tt class="docutils literal">on_load</tt></dt>
<dd><p class="first">Called when a file is to be opened, before anything is actually done.
For example, you could read and write the <tt class="docutils literal"><span class="pre">stream-open-filename</span></tt>
property to redirect an URL to something else (consider support for
streaming sites which rarely give the user a direct media URL), or
you could set per-file options with by setting the property
<tt class="docutils literal"><span class="pre">file-local-options/&lt;option</span> name&gt;</tt>. The player will wait until all
hooks are run.</p>
<p class="last">Ordered after <tt class="docutils literal"><span class="pre">start-file</span></tt> and before <tt class="docutils literal"><span class="pre">playback-restart</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">on_load_fail</tt></dt>
<dd><p class="first">Called after after a file has been opened, but failed to. This can be
used to provide a fallback in case native demuxers failed to recognize
the file, instead of always running before the native demuxers like
<tt class="docutils literal">on_load</tt>. Demux will only be retried if <tt class="docutils literal"><span class="pre">stream-open-filename</span></tt>
was changed. If it fails again, this hook is _not_ called again, and
loading definitely fails.</p>
<p class="last">Ordered after <tt class="docutils literal">on_load</tt>, and before <tt class="docutils literal"><span class="pre">playback-restart</span></tt> and <tt class="docutils literal"><span class="pre">end-file</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">on_preloaded</tt></dt>
<dd><p class="first">Called after a file has been opened, and before tracks are selected and
decoders are created. This has some usefulness if an API users wants
to select tracks manually, based on the set of available tracks. It's
also useful to initialize <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt> in a specific way by API,
without having to &quot;probe&quot; the available streams at first.</p>
<p>Note that this does not yet apply default track selection. Which operations
exactly can be done and not be done, and what information is available and
what is not yet available yet, is all subject to change.</p>
<p class="last">Ordered after <tt class="docutils literal">on_load_fail</tt> etc. and before <tt class="docutils literal"><span class="pre">playback-restart</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">on_unload</tt></dt>
<dd><p class="first">Run before closing a file, and before actually uninitializing
everything. It's not possible to resume playback in this state.</p>
<p class="last">Ordered before <tt class="docutils literal"><span class="pre">end-file</span></tt>. Will also happen in the error case (then after
<tt class="docutils literal">on_load_fail</tt>).</p>
</dd>
<dt><tt class="docutils literal">on_before_start_file</tt></dt>
<dd>Run before a <tt class="docutils literal"><span class="pre">start-file</span></tt> event is sent. (If any client changes the
current playlist entry, or sends a quit command to the player, the
corresponding event will not actually happen after the hook returns.)
Useful to drain property changes before a new file is loaded.</dd>
<dt><tt class="docutils literal">on_after_end_file</tt></dt>
<dd>Run after an <tt class="docutils literal"><span class="pre">end-file</span></tt> event. Useful to drain property changes after a
file has finished.</dd>
</dl>
</div>
</div>
<div class="section" id="input-command-prefixes">
<h2>Input Command Prefixes</h2>
<p>These prefixes are placed between key name and the actual command. Multiple
prefixes can be specified. They are separated by whitespace.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">osd-auto</span></tt></dt>
<dd>Use the default behavior for this command. This is the default for
<tt class="docutils literal">input.conf</tt> commands. Some libmpv/scripting/IPC APIs do not use this as
default, but use <tt class="docutils literal"><span class="pre">no-osd</span></tt> instead.</dd>
<dt><tt class="docutils literal"><span class="pre">no-osd</span></tt></dt>
<dd>Do not use any OSD for this command.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-bar</span></tt></dt>
<dd>If possible, show a bar with this command. Seek commands will show the
progress bar, property changing commands may show the newly set value.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-msg</span></tt></dt>
<dd>If possible, show an OSD message with this command. Seek command show
the current playback time, property changing commands show the newly set
value as text.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-msg-bar</span></tt></dt>
<dd>Combine osd-bar and osd-msg.</dd>
<dt><tt class="docutils literal">raw</tt></dt>
<dd>Do not expand properties in string arguments. (Like <tt class="docutils literal"><span class="pre">&quot;${property-name}&quot;</span></tt>.)
This is the default for some libmpv/scripting/IPC APIs.</dd>
<dt><tt class="docutils literal"><span class="pre">expand-properties</span></tt></dt>
<dd>All string arguments are expanded as described in <a class="reference internal" href="#property-expansion">Property Expansion</a>.
This is the default for <tt class="docutils literal">input.conf</tt> commands.</dd>
<dt><tt class="docutils literal">repeatable</tt></dt>
<dd>For some commands, keeping a key pressed doesn't run the command repeatedly.
This prefix forces enabling key repeat in any case. For a list of commands:
the first command determines the repeatability of the whole list (up to and
including version 0.33 - a list was always repeatable).</dd>
<dt><tt class="docutils literal">nonrepeatable</tt></dt>
<dd>For some commands, keeping a key pressed runs the command repeatedly.
This prefix forces disabling key repeat in any case.</dd>
<dt><tt class="docutils literal">async</tt></dt>
<dd>Allow asynchronous execution (if possible). Note that only a few commands
will support this (usually this is explicitly documented). Some commands
are asynchronous by default (or rather, their effects might manifest
after completion of the command). The semantics of this flag might change
in the future. Set it only if you don't rely on the effects of this command
being fully realized when it returns. See <a class="reference internal" href="#synchronous-vs-asynchronous">Synchronous vs. Asynchronous</a>.</dd>
<dt><tt class="docutils literal">sync</tt></dt>
<dd>Allow synchronous execution (if possible). Normally, all commands are
synchronous by default, but some are asynchronous by default for
compatibility with older behavior.</dd>
</dl>
<p>All of the osd prefixes are still overridden by the global <tt class="docutils literal"><span class="pre">--osd-level</span></tt>
settings.</p>
</div>
<div class="section" id="synchronous-vs-asynchronous">
<h2>Synchronous vs. Asynchronous</h2>
<p>The <tt class="docutils literal">async</tt> and <tt class="docutils literal">sync</tt> prefix matter only for how the issuer of the command
waits on the completion of the command. Normally it does not affect how the
command behaves by itself. There are the following cases:</p>
<ul class="simple">
<li>Normal input.conf commands are always run asynchronously. Slow running
commands are queued up or run in parallel.</li>
<li>&quot;Multi&quot; input.conf commands (1 key binding, concatenated with <tt class="docutils literal">;</tt>) will be
executed in order, except for commands that are async (either prefixed with
<tt class="docutils literal">async</tt>, or async by default for some commands). The async commands are
run in a detached manner, possibly in parallel to the remaining sync commands
in the list.</li>
<li>Normal Lua and libmpv commands (e.g. <tt class="docutils literal">mpv_command()</tt>) are run in a blocking
manner, unless the <tt class="docutils literal">async</tt> prefix is used, or the command is async by
default. This means in the sync case the caller will block, even if the core
continues playback. Async mode runs the command in a detached manner.</li>
<li>Async libmpv command API (e.g. <tt class="docutils literal">mpv_command_async()</tt>) never blocks the
caller, and always notify their completion with a message. The <tt class="docutils literal">sync</tt> and
<tt class="docutils literal">async</tt> prefixes make no difference.</li>
<li>Lua also provides APIs for running async commands, which behave similar to the
C counterparts.</li>
<li>In all cases, async mode can still run commands in a synchronous manner, even
in detached mode. This can for example happen in cases when a command does not
have an  asynchronous implementation. The async libmpv API still never blocks
the caller in these cases.</li>
</ul>
<p>Before mpv 0.29.0, the <tt class="docutils literal">async</tt> prefix was only used by screenshot commands,
and made them run the file saving code in a detached manner. This is the
default now, and <tt class="docutils literal">async</tt> changes behavior only in the ways mentioned above.</p>
<p>Currently the following commands have different waiting characteristics with
sync vs. async: sub-add, audio-add, sub-reload, audio-reload,
rescan-external-files, screenshot, screenshot-to-file, dump-cache,
ab-loop-dump-cache.</p>
</div>
<div class="section" id="asynchronous-command-details">
<h2>Asynchronous command details</h2>
<p>On the API level, every asynchronous command is bound to the context which
started it. For example, an asynchronous command started by <tt class="docutils literal">mpv_command_async</tt>
is bound to the <tt class="docutils literal">mpv_handle</tt> passed to the function. Only this <tt class="docutils literal">mpv_handle</tt>
receives the completion notification (<tt class="docutils literal">MPV_EVENT_COMMAND_REPLY</tt>), and only
this handle can abort a still running command directly. If the <tt class="docutils literal">mpv_handle</tt> is
destroyed, any still running async. commands started by it are terminated.</p>
<p>The scripting APIs and JSON IPC give each script/connection its own implicit
<tt class="docutils literal">mpv_handle</tt>.</p>
<p>If the player is closed, the core may abort all pending async. commands on its
own (like a forced <tt class="docutils literal">mpv_abort_async_command()</tt> call for each pending command
on behalf of the API user). This happens at the same time <tt class="docutils literal">MPV_EVENT_SHUTDOWN</tt>
is sent, and there is no way to prevent this.</p>
</div>
<div class="section" id="input-sections">
<h2>Input Sections</h2>
<p>Input sections group a set of bindings, and enable or disable them at once.
In <tt class="docutils literal">input.conf</tt>, each key binding is assigned to an input section, rather
than actually having explicit text sections.</p>
<p>See also: <tt class="docutils literal"><span class="pre">enable-section</span></tt> and <tt class="docutils literal"><span class="pre">disable-section</span></tt> commands.</p>
<p>Predefined bindings:</p>
<dl class="docutils">
<dt><tt class="docutils literal">default</tt></dt>
<dd>Bindings without input section are implicitly assigned to this section. It
is enabled by default during normal playback.</dd>
<dt><tt class="docutils literal">encode</tt></dt>
<dd>Section which is active in encoding mode. It is enabled exclusively, so
that bindings in the <tt class="docutils literal">default</tt> sections are ignored.</dd>
</dl>
</div>
<div class="section" id="properties">
<h2>Properties</h2>
<p>Properties are used to set mpv options during runtime, or to query arbitrary
information. They can be manipulated with the <tt class="docutils literal">set</tt>/<tt class="docutils literal">add</tt>/<tt class="docutils literal">cycle</tt>
commands, and retrieved with <tt class="docutils literal"><span class="pre">show-text</span></tt>, or anything else that uses property
expansion. (See <a class="reference internal" href="#property-expansion">Property Expansion</a>.)</p>
<p>The property name is annotated with RW to indicate whether the property is
generally writable.</p>
<p>If an option is referenced, the property will normally take/return exactly the
same values as the option. In these cases, properties are merely a way to change
an option at runtime.</p>
</div>
<div class="section" id="property-list">
<h2>Property list</h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Most options can be set at runtime via properties as well. Just remove the
leading <tt class="docutils literal"><span class="pre">--</span></tt> from the option name. These are not documented below, see
<a class="reference internal" href="#options">OPTIONS</a> instead. Only properties which do not exist as option with the
same name, or which have very different behavior from the options are
documented below.</p>
<p class="last">Properties marked as (RW) are writeable, while those that aren't are
read-only.</p>
</div>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">audio-speed-correction</span></tt>, <tt class="docutils literal"><span class="pre">video-speed-correction</span></tt></dt>
<dd><p class="first">Factor multiplied with <tt class="docutils literal">speed</tt> at which the player attempts to play the
file. Usually it's exactly 1. (Display sync mode will make this useful.)</p>
<p class="last">OSD formatting will display it in the form of <tt class="docutils literal">+1.23456%</tt>, with the number
being <tt class="docutils literal">(raw - 1) * 100</tt> for the given raw property value.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">display-sync-active</span></tt></dt>
<dd>Whether <tt class="docutils literal"><span class="pre">--video-sync=display</span></tt> is actually active.</dd>
<dt><tt class="docutils literal">filename</tt></dt>
<dd><p class="first">Currently played file, with path stripped. If this is an URL, try to undo
percent encoding as well. (The result is not necessarily correct, but
looks better for display purposes. Use the <tt class="docutils literal">path</tt> property to get an
unmodified filename.)</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">filename/no-ext</span></tt></dt>
<dd>Like the <tt class="docutils literal">filename</tt> property, but if the text contains a <tt class="docutils literal">.</tt>, strip
all text after the last <tt class="docutils literal">.</tt>. Usually this removes the file extension.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">file-size</span></tt></dt>
<dd>Length in bytes of the source file/stream. (This is the same as
<tt class="docutils literal"><span class="pre">${stream-end}</span></tt>. For segmented/multi-part files, this will return the
size of the main or manifest file, whatever it is.)</dd>
<dt><tt class="docutils literal"><span class="pre">estimated-frame-count</span></tt></dt>
<dd><p class="first">Total number of frames in current file.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This is only an estimate. (It's computed from two unreliable
quantities: fps and stream length.)</p>
</div>
</dd>
<dt><tt class="docutils literal"><span class="pre">estimated-frame-number</span></tt></dt>
<dd><p class="first">Number of current frame in current stream.</p>
<div class="admonition note last">
<p class="first admonition-title">Note</p>
<p class="last">This is only an estimate. (It's computed from two unreliable
quantities: fps and possibly rounded timestamps.)</p>
</div>
</dd>
<dt><tt class="docutils literal">pid</tt></dt>
<dd>Process-id of mpv.</dd>
<dt><tt class="docutils literal">path</tt></dt>
<dd>Full path of the currently played file. Usually this is exactly the same
string you pass on the mpv command line or the <tt class="docutils literal">loadfile</tt> command, even
if it's a relative path. If you expect an absolute path, you will have to
determine it yourself, for example by using the <tt class="docutils literal"><span class="pre">working-directory</span></tt>
property.</dd>
<dt><tt class="docutils literal"><span class="pre">stream-open-filename</span></tt></dt>
<dd>The full path to the currently played media. This is different from
<tt class="docutils literal">path</tt> only in special cases. In particular, if <tt class="docutils literal"><span class="pre">--ytdl=yes</span></tt> is used,
and the URL is detected by <tt class="docutils literal"><span class="pre">youtube-dl</span></tt>, then the script will set this
property to the actual media URL. This property should be set only during
the <tt class="docutils literal">on_load</tt> or <tt class="docutils literal">on_load_fail</tt> hooks, otherwise it will have no effect
(or may do something implementation defined in the future). The property is
reset if playback of the current media ends.</dd>
<dt><tt class="docutils literal"><span class="pre">media-title</span></tt></dt>
<dd><p class="first">If the currently played file has a <tt class="docutils literal">title</tt> tag, use that.</p>
<p class="last">Otherwise, return the <tt class="docutils literal">filename</tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">file-format</span></tt></dt>
<dd>Symbolic name of the file format. In some cases, this is a comma-separated
list of format names, e.g. mp4 is <tt class="docutils literal">mov,mp4,m4a,3gp,3g2,mj2</tt> (the list
may grow in the future for any format).</dd>
<dt><tt class="docutils literal"><span class="pre">current-demuxer</span></tt></dt>
<dd><p class="first">Name of the current demuxer. (This is useless.)</p>
<p class="last">(Renamed from <tt class="docutils literal">demuxer</tt>.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">stream-path</span></tt></dt>
<dd>Filename (full path) of the stream layer filename. (This is probably
useless and is almost never different from <tt class="docutils literal">path</tt>.)</dd>
<dt><tt class="docutils literal"><span class="pre">stream-pos</span></tt></dt>
<dd>Raw byte position in source stream. Technically, this returns the position
of the most recent packet passed to a decoder.</dd>
<dt><tt class="docutils literal"><span class="pre">stream-end</span></tt></dt>
<dd>Raw end position in bytes in source stream.</dd>
<dt><tt class="docutils literal">duration</tt></dt>
<dd><p class="first">Duration of the current file in seconds. If the duration is unknown, the
property is unavailable. Note that the file duration is not always exactly
known, so this is an estimate.</p>
<p>This replaces the <tt class="docutils literal">length</tt> property, which was deprecated after the
mpv 0.9 release. (The semantics are the same.)</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">duration/full</tt></dt>
<dd><tt class="docutils literal">duration</tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">avsync</tt></dt>
<dd>Last A/V synchronization difference. Unavailable if audio or video is
disabled.</dd>
<dt><tt class="docutils literal"><span class="pre">total-avsync-change</span></tt></dt>
<dd>Total A-V sync correction done. Unavailable if audio or video is
disabled.</dd>
<dt><tt class="docutils literal"><span class="pre">decoder-frame-drop-count</span></tt></dt>
<dd>Video frames dropped by decoder, because video is too far behind audio (when
using <tt class="docutils literal"><span class="pre">--framedrop=decoder</span></tt>). Sometimes, this may be incremented in other
situations, e.g. when video packets are damaged, or the decoder doesn't
follow the usual rules. Unavailable if video is disabled.</dd>
<dt><tt class="docutils literal"><span class="pre">frame-drop-count</span></tt></dt>
<dd>Frames dropped by VO (when using <tt class="docutils literal"><span class="pre">--framedrop=vo</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">mistimed-frame-count</span></tt></dt>
<dd>Number of video frames that were not timed correctly in display-sync mode
for the sake of keeping A/V sync. This does not include external
circumstances, such as video rendering being too slow or the graphics
driver somehow skipping a vsync. It does not include rounding errors either
(which can happen especially with bad source timestamps). For example,
using the <tt class="docutils literal"><span class="pre">display-desync</span></tt> mode should never change this value from 0.</dd>
<dt><tt class="docutils literal"><span class="pre">vsync-ratio</span></tt></dt>
<dd>For how many vsyncs a frame is displayed on average. This is available if
display-sync is active only. For 30 FPS video on a 60 Hz screen, this will
be 2. This is the moving average of what actually has been scheduled, so
24 FPS on 60 Hz will never remain exactly on 2.5, but jitter depending on
the last frame displayed.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-delayed-frame-count</span></tt></dt>
<dd>Estimated number of frames delayed due to external circumstances in
display-sync mode. Note that in general, mpv has to guess that this is
happening, and the guess can be inaccurate.</dd>
<dt><tt class="docutils literal"><span class="pre">percent-pos</span></tt> (RW)</dt>
<dd>Position in current file (0-100). The advantage over using this instead of
calculating it out of other properties is that it properly falls back to
estimating the playback position from the byte position, if the file
duration is not known.</dd>
<dt><tt class="docutils literal"><span class="pre">time-pos</span></tt> (RW)</dt>
<dd><p class="first">Position in current file in seconds.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">time-pos/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">time-pos</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">time-start</span></tt></dt>
<dd>Deprecated. Always returns 0. Before mpv 0.14, this used to return the start
time of the file (could affect e.g. transport streams). See
<tt class="docutils literal"><span class="pre">--rebase-start-time</span></tt> option.</dd>
<dt><tt class="docutils literal"><span class="pre">time-remaining</span></tt></dt>
<dd><p class="first">Remaining length of the file in seconds. Note that the file duration is not
always exactly known, so this is an estimate.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">time-remaining/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">time-remaining</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">audio-pts</span></tt></dt>
<dd><p class="first">Current audio playback position in current file in seconds. Unlike <tt class="docutils literal"><span class="pre">time-pos</span></tt>,
this updates more often than once per frame. This is mostly equivalent to
<tt class="docutils literal"><span class="pre">time-pos</span></tt> for audio-only files however it also takes into account the audio
driver delay. This can lead to negative values in certain cases, so in
general you probably want to simply use <tt class="docutils literal"><span class="pre">time-pos</span></tt>.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">audio-pts/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">audio-pts</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">playtime-remaining</span></tt></dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">time-remaining</span></tt> scaled by the current <tt class="docutils literal">speed</tt>.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">playtime-remaining/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">playtime-remaining</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">playback-time</span></tt> (RW)</dt>
<dd><p class="first">Alias for <tt class="docutils literal"><span class="pre">time-pos</span></tt>.</p>
<p>Prior to mpv 0.39.0, <tt class="docutils literal"><span class="pre">time-pos</span></tt> and <tt class="docutils literal"><span class="pre">playback-time</span></tt> could report
different values in certain edge cases.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">playback-time/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">playback-time</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">remaining-file-loops</span></tt></dt>
<dd>How many more times the current file is going to be looped. This is
initialized from the value of <tt class="docutils literal"><span class="pre">--loop-file</span></tt>. This counts the number of
times it causes the player to seek to the beginning of the file, so it is 0
the last the time is played. -1 corresponds to infinity.</dd>
<dt><tt class="docutils literal"><span class="pre">remaining-ab-loops</span></tt></dt>
<dd>How many more times the current A-B loop is going to be looped, if one is
active. This is initialized from the value of <tt class="docutils literal"><span class="pre">--ab-loop-count</span></tt>. This
counts the number of times it causes the player to seek to <tt class="docutils literal"><span class="pre">--ab-loop-a</span></tt>,
so it is 0 the last the time the loop is played. -1 corresponds to infinity.</dd>
<dt><tt class="docutils literal">chapter</tt> (RW)</dt>
<dd>Current chapter number. The number of the first chapter is 0.</dd>
<dt><tt class="docutils literal">edition</tt> (RW)</dt>
<dd><p class="first">Current MKV edition number. Setting this property to a different value will
restart playback. The number of the first edition is 0.</p>
<p class="last">Before mpv 0.31.0, this showed the actual edition selected at runtime, if
you didn't set the option or property manually. With mpv 0.31.0 and later,
this strictly returns the user-set option or property value, and the
<tt class="docutils literal"><span class="pre">current-edition</span></tt> property was added to return the runtime selected
edition (this matters with <tt class="docutils literal"><span class="pre">--edition=auto</span></tt>, the default).</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">current-edition</span></tt></dt>
<dd>Currently selected edition. This property is unavailable if no file is
loaded, or the file has no editions. (Matroska files make a difference
between having no editions and a single edition, which will be reflected by
the property, although in practice it does not matter.)</dd>
<dt><tt class="docutils literal">chapters</tt></dt>
<dd>Number of chapters.</dd>
<dt><tt class="docutils literal">editions</tt></dt>
<dd>Number of MKV editions.</dd>
<dt><tt class="docutils literal"><span class="pre">edition-list</span></tt></dt>
<dd><p class="first">List of editions, current entry marked. Currently, the raw property value
is useless.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">N</tt> with the 0-based edition
index.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">edition-list/count</span></tt></dt>
<dd>Number of editions. If there are no editions, this can be 0 or 1 (1
if there's a useless dummy edition).</dd>
<dt><tt class="docutils literal"><span class="pre">edition-list/N/id</span></tt> (RW)</dt>
<dd>Edition ID as integer. Use this to set the <tt class="docutils literal">edition</tt> property.
Currently, this is the same as the edition index.</dd>
<dt><tt class="docutils literal"><span class="pre">edition-list/N/default</span></tt></dt>
<dd>Whether this is the default edition.</dd>
<dt><tt class="docutils literal"><span class="pre">edition-list/N/title</span></tt></dt>
<dd>Edition title as stored in the file. Not always available.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each edition)
        &quot;id&quot;                MPV_FORMAT_INT64
        &quot;title&quot;             MPV_FORMAT_STRING
        &quot;default&quot;           MPV_FORMAT_FLAG
</pre>
</dd>
<dt><tt class="docutils literal">metadata</tt></dt>
<dd><p class="first">Metadata key/value pairs.</p>
<p>If the property is accessed with Lua's <tt class="docutils literal">mp.get_property_native</tt>, this
returns a table with metadata keys mapping to metadata values. If it is
accessed with the client API, this returns a <tt class="docutils literal">MPV_FORMAT_NODE_MAP</tt>,
with tag keys mapping to tag values.</p>
<p>For OSD, it returns a formatted list. Trying to retrieve this property as
a raw string doesn't work.</p>
<p>This has a number of sub-properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">metadata/by-key/&lt;key&gt;</span></tt></dt>
<dd>Value of metadata entry <tt class="docutils literal">&lt;key&gt;</tt>.</dd>
<dt><tt class="docutils literal">metadata/list/count</tt></dt>
<dd>Number of metadata entries.</dd>
<dt><tt class="docutils literal">metadata/list/N/key</tt></dt>
<dd>Key name of the Nth metadata entry. (The first entry is <tt class="docutils literal">0</tt>).</dd>
<dt><tt class="docutils literal">metadata/list/N/value</tt></dt>
<dd>Value of the Nth metadata entry.</dd>
<dt><tt class="docutils literal"><span class="pre">metadata/&lt;key&gt;</span></tt></dt>
<dd>Old version of <tt class="docutils literal"><span class="pre">metadata/by-key/&lt;key&gt;</span></tt>. Use is discouraged, because
the metadata key string could conflict with other sub-properties.</dd>
</dl>
<p>The layout of this property might be subject to change. Suggestions are
welcome how exactly this property should work.</p>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_MAP
    (key and string value for each metadata entry)
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">filtered-metadata</span></tt></dt>
<dd>Like <tt class="docutils literal">metadata</tt>, but includes only fields listed in the <tt class="docutils literal"><span class="pre">--display-tags</span></tt>
option. This is the same set of tags that is printed to the terminal.</dd>
<dt><tt class="docutils literal"><span class="pre">chapter-metadata</span></tt></dt>
<dd><p class="first">Metadata of current chapter. Works similar to <tt class="docutils literal">metadata</tt> property. It
also allows the same access methods (using sub-properties).</p>
<p>Per-chapter metadata is very rare. Usually, only the chapter name
(<tt class="docutils literal">title</tt>) is set.</p>
<p class="last">For accessing other information, like chapter start, see the
<tt class="docutils literal"><span class="pre">chapter-list</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">vf-metadata/&lt;filter-label&gt;</span></tt></dt>
<dd><p class="first">Metadata added by video filters. Accessed by the filter label,
which, if not explicitly specified using the <tt class="docutils literal"><span class="pre">&#64;filter-label:</span></tt> syntax,
will be <tt class="docutils literal"><span class="pre">&lt;filter-name&gt;.NN</span></tt>.</p>
<p>Works similar to <tt class="docutils literal">metadata</tt> property. It allows the same access
methods (using sub-properties).</p>
<p class="last">An example of this kind of metadata are the cropping parameters
added by <tt class="docutils literal"><span class="pre">--vf=lavfi=cropdetect</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">af-metadata/&lt;filter-label&gt;</span></tt></dt>
<dd>Equivalent to <tt class="docutils literal"><span class="pre">vf-metadata/&lt;filter-label&gt;</span></tt>, but for audio filters.</dd>
<dt><tt class="docutils literal"><span class="pre">deinterlace-active</span></tt></dt>
<dd>Returns <tt class="docutils literal">yes</tt>/true if mpv's deinterlacing filter is active. Note that it
will not detect any manually inserted deinterlacing filters done via
<tt class="docutils literal"><span class="pre">--vf</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">idle-active</span></tt></dt>
<dd><p class="first">Returns <tt class="docutils literal">yes</tt>/true if no file is loaded, but the player is staying around
because of the <tt class="docutils literal"><span class="pre">--idle</span></tt> option.</p>
<p class="last">(Renamed from <tt class="docutils literal">idle</tt>.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">core-idle</span></tt></dt>
<dd><p class="first">Whether the playback core is paused. This can differ from <tt class="docutils literal">pause</tt> in
special situations, such as when the player pauses itself due to low
network cache.</p>
<p class="last">This also returns <tt class="docutils literal">yes</tt>/true if playback is restarting or if nothing is
playing at all. In other words, it's only <tt class="docutils literal">no</tt>/false if there's actually
video playing. (Behavior since mpv 0.7.0.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">cache-speed</span></tt></dt>
<dd><p class="first">Current I/O read speed between the cache and the lower layer (like network).
This gives the number bytes per seconds over a 1 second window (using
the type <tt class="docutils literal">MPV_FORMAT_INT64</tt> for the client API).</p>
<p class="last">This is the same as <tt class="docutils literal"><span class="pre">demuxer-cache-state/raw-input-rate</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-cache-duration</span></tt></dt>
<dd>Approximate duration of video buffered in the demuxer, in seconds. The
guess is very unreliable, and often the property will not be available
at all, even if data is buffered.</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-cache-time</span></tt></dt>
<dd>Approximate time of video buffered in the demuxer, in seconds. Same as
<tt class="docutils literal"><span class="pre">demuxer-cache-duration</span></tt> but returns the last timestamp of buffered
data in demuxer.</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-cache-idle</span></tt></dt>
<dd>Whether the demuxer is idle, which means that the demuxer cache is filled
to the requested amount, and is currently not reading more data.</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-cache-state</span></tt></dt>
<dd><p class="first">Each entry in <tt class="docutils literal"><span class="pre">seekable-ranges</span></tt> represents a region in the demuxer cache
that can be seeked to, with a <tt class="docutils literal">start</tt> and <tt class="docutils literal">end</tt> fields containing the
respective timestamps. If there are multiple demuxers active, this only
returns information about the &quot;main&quot; demuxer, but might be changed in
future to return unified information about all demuxers. The ranges are in
arbitrary order. Often, ranges will overlap for a bit, before being joined.
In broken corner cases, ranges may overlap all over the place.</p>
<p>The end of a seek range is usually smaller than the value returned by the
<tt class="docutils literal"><span class="pre">demuxer-cache-time</span></tt> property, because that property returns the guessed
buffering amount, while the seek ranges represent the buffered data that
can actually be used for cached seeking.</p>
<p><tt class="docutils literal"><span class="pre">bof-cached</span></tt> indicates whether the seek range with the lowest timestamp
points to the beginning of the stream (BOF). This implies you cannot seek
before this position at all. <tt class="docutils literal"><span class="pre">eof-cached</span></tt> indicates whether the seek range
with the highest timestamp points to the end of the stream (EOF). If both
<tt class="docutils literal"><span class="pre">bof-cached</span></tt> and <tt class="docutils literal"><span class="pre">eof-cached</span></tt> are true, and there's only 1 cache range,
the entire stream is cached.</p>
<p><tt class="docutils literal"><span class="pre">fw-bytes</span></tt> is the number of bytes of packets buffered in the range
starting from the current decoding position. This is a rough estimate
(may not account correctly for various overhead), and stops at the
demuxer position (it ignores seek ranges after it).</p>
<p><tt class="docutils literal"><span class="pre">file-cache-bytes</span></tt> is the number of bytes stored in the file cache. This
includes all overhead, and possibly unused data (like pruned data). This
member is missing if the file cache wasn't enabled with
<tt class="docutils literal"><span class="pre">--cache-on-disk=yes</span></tt>.</p>
<p><tt class="docutils literal"><span class="pre">cache-end</span></tt> is <tt class="docutils literal"><span class="pre">demuxer-cache-time</span></tt>. Missing if unavailable.</p>
<p><tt class="docutils literal"><span class="pre">reader-pts</span></tt> is the approximate timestamp of the start of the buffered
range. Missing if unavailable.</p>
<p><tt class="docutils literal"><span class="pre">cache-duration</span></tt> is <tt class="docutils literal"><span class="pre">demuxer-cache-duration</span></tt>. Missing if unavailable.</p>
<p><tt class="docutils literal"><span class="pre">raw-input-rate</span></tt> is the estimated input rate of the network layer (or any
other byte-oriented input layer) in bytes per second. May be inaccurate or
missing.</p>
<p><tt class="docutils literal"><span class="pre">ts-per-stream</span></tt> is an array containing an entry for each stream type: video,
audio, and subtitle. For each stream type, the details for the demuxer cache
for that stream type are available as <tt class="docutils literal"><span class="pre">cache-duration</span></tt>, <tt class="docutils literal"><span class="pre">reader-pts</span></tt> and
<tt class="docutils literal"><span class="pre">cache-end</span></tt>.</p>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="literal-block">
MPV_FORMAT_NODE_MAP
    &quot;seekable-ranges&quot;   MPV_FORMAT_NODE_ARRAY
        MPV_FORMAT_NODE_MAP
            &quot;start&quot;             MPV_FORMAT_DOUBLE
            &quot;end&quot;               MPV_FORMAT_DOUBLE
    &quot;bof-cached&quot;        MPV_FORMAT_FLAG
    &quot;eof-cached&quot;        MPV_FORMAT_FLAG
    &quot;fw-bytes&quot;          MPV_FORMAT_INT64
    &quot;file-cache-bytes&quot;  MPV_FORMAT_INT64
    &quot;cache-end&quot;         MPV_FORMAT_DOUBLE
    &quot;reader-pts&quot;        MPV_FORMAT_DOUBLE
    &quot;cache-duration&quot;    MPV_FORMAT_DOUBLE
    &quot;raw-input-rate&quot;    MPV_FORMAT_INT64
    &quot;ts-per-stream&quot;     MPV_FORMAT_NODE_ARRAY
        MPV_FORMAT_NODE_MAP
              &quot;type&quot;            MPV_FORMAT_STRING
              &quot;cache-duration&quot;  MPV_FORMAT_DOUBLE
              &quot;reader-pts&quot;      MPV_FORMAT_DOUBLE
              &quot;cache-end&quot;       MPV_FORMAT_DOUBLE
</pre>
<p>Other fields (might be changed or removed in the future):</p>
<dl class="last docutils">
<dt><tt class="docutils literal">eof</tt></dt>
<dd>Whether the reader thread has hit the end of the file.</dd>
<dt><tt class="docutils literal">underrun</tt></dt>
<dd>Whether the reader thread could not satisfy a decoder's request for a
new packet.</dd>
<dt><tt class="docutils literal">idle</tt></dt>
<dd>Whether the thread is currently not reading.</dd>
<dt><tt class="docutils literal"><span class="pre">total-bytes</span></tt></dt>
<dd>Sum of packet bytes (plus some overhead estimation) of the entire packet
queue, including cached seekable ranges.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-via-network</span></tt></dt>
<dd>Whether the stream demuxed via the main demuxer is most likely played via
network. What constitutes &quot;network&quot; is not always clear, might be used for
other types of untrusted streams, could be wrong in certain cases, and its
definition might be changing. Also, external files (like separate audio
files or streams) do not influence the value of this property (currently).</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-start-time</span></tt></dt>
<dd>The start time reported by the demuxer in fractional seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">paused-for-cache</span></tt></dt>
<dd>Whether playback is paused because of waiting for the cache.</dd>
<dt><tt class="docutils literal"><span class="pre">cache-buffering-state</span></tt></dt>
<dd>The percentage (0-100) of the cache fill status until the player will
unpause (related to <tt class="docutils literal"><span class="pre">paused-for-cache</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">eof-reached</span></tt></dt>
<dd>Whether the end of playback was reached. Note that this is usually
interesting only if <tt class="docutils literal"><span class="pre">--keep-open</span></tt> is enabled, since otherwise the player
will immediately play the next file (or exit or enter idle mode), and in
these cases the <tt class="docutils literal"><span class="pre">eof-reached</span></tt> property will logically be cleared
immediately after it's set.</dd>
<dt><tt class="docutils literal">seeking</tt></dt>
<dd>Whether the player is currently seeking, or otherwise trying to restart
playback. (It's possible that it returns <tt class="docutils literal">yes</tt>/true while a file is
loaded. This is because the same underlying code is used for seeking and
resyncing.)</dd>
<dt><tt class="docutils literal"><span class="pre">mixer-active</span></tt></dt>
<dd><p class="first">Whether the audio mixer is active.</p>
<p class="last">This option is relatively useless. Before mpv 0.18.1, it could be used to
infer behavior of the <tt class="docutils literal">volume</tt> property.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">ao-volume</span></tt> (RW)</dt>
<dd>System volume. This property is available only if mpv audio output is
currently active, and only if the underlying implementation supports volume
control. What this option does depends on the API. For example, on ALSA
this usually changes system-wide audio, while with PulseAudio this controls
per-application volume.</dd>
<dt><tt class="docutils literal"><span class="pre">ao-mute</span></tt> (RW)</dt>
<dd>Similar to <tt class="docutils literal"><span class="pre">ao-volume</span></tt>, but controls the mute state. May be unimplemented
even if <tt class="docutils literal"><span class="pre">ao-volume</span></tt> works.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-params</span></tt></dt>
<dd><p class="first">Audio format as output by the audio decoder.
This has a number of sub-properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">audio-params/format</span></tt></dt>
<dd>The sample format as string. This uses the same names as used in other
places of mpv.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-params/samplerate</span></tt></dt>
<dd>Samplerate.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-params/channels</span></tt></dt>
<dd>The channel layout as a string. This is similar to what the
<tt class="docutils literal"><span class="pre">--audio-channels</span></tt> accepts.</dd>
<dt><tt class="docutils literal"><span class="pre">audio-params/hr-channels</span></tt></dt>
<dd>As <tt class="docutils literal">channels</tt>, but instead of the possibly cryptic actual layout
sent to the audio device, return a hopefully more human readable form.
(Usually only <tt class="docutils literal"><span class="pre">audio-out-params/hr-channels</span></tt> makes sense.)</dd>
<dt><tt class="docutils literal"><span class="pre">audio-params/channel-count</span></tt></dt>
<dd>Number of audio channels. This is redundant to the <tt class="docutils literal">channels</tt> field
described above.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_MAP
    &quot;format&quot;            MPV_FORMAT_STRING
    &quot;samplerate&quot;        MPV_FORMAT_INT64
    &quot;channels&quot;          MPV_FORMAT_STRING
    &quot;channel-count&quot;     MPV_FORMAT_INT64
    &quot;hr-channels&quot;       MPV_FORMAT_STRING
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">audio-out-params</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">audio-params</span></tt>, but the format of the data written to the audio
API.</dd>
<dt><tt class="docutils literal">colormatrix</tt></dt>
<dd>Redirects to <tt class="docutils literal"><span class="pre">video-params/colormatrix</span></tt>. This parameter (as well as
similar ones) can be overridden with the <tt class="docutils literal">format</tt> video filter.</dd>
<dt><tt class="docutils literal"><span class="pre">colormatrix-input-range</span></tt></dt>
<dd>See <tt class="docutils literal">colormatrix</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">colormatrix-primaries</span></tt></dt>
<dd>See <tt class="docutils literal">colormatrix</tt>.</dd>
<dt><tt class="docutils literal">hwdec</tt> (RW)</dt>
<dd><p class="first">Reflects the <tt class="docutils literal"><span class="pre">--hwdec</span></tt> option.</p>
<p>Writing to it may change the currently used hardware decoder, if possible.
(Internally, the player may reinitialize the decoder, and will perform a
seek to refresh the video properly.) You can watch the other hwdec
properties to see whether this was successful.</p>
<p class="last">Unlike in mpv 0.9.x and before, this does not return the currently active
hardware decoder. Since mpv 0.18.0, <tt class="docutils literal"><span class="pre">hwdec-current</span></tt> is available for
this purpose.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">hwdec-current</span></tt></dt>
<dd>The current hardware decoding in use. If decoding is active, return one of
the values used by the <tt class="docutils literal">hwdec</tt> option/property. <tt class="docutils literal">no</tt>/false indicates
software decoding. If no decoder is loaded, the property is unavailable.</dd>
<dt><tt class="docutils literal"><span class="pre">hwdec-interop</span></tt></dt>
<dd><p class="first">This returns the currently loaded hardware decoding/output interop driver.
This is known only once the VO has opened (and possibly later). With some
VOs (like <tt class="docutils literal">gpu</tt>), this might be never known in advance, but only when
the decoder attempted to create the hw decoder successfully. (Using
<tt class="docutils literal"><span class="pre">--gpu-hwdec-interop</span></tt> can load it eagerly.) If there are multiple
drivers loaded, they will be separated by <tt class="docutils literal">,</tt>.</p>
<p>If no VO is active or no interop driver is known, this property is
unavailable.</p>
<p class="last">This does not necessarily use the same values as <tt class="docutils literal">hwdec</tt>. There can be
multiple interop drivers for the same hardware decoder, depending on
platform and VO.</p>
</dd>
<dt><tt class="docutils literal">width</tt>, <tt class="docutils literal">height</tt></dt>
<dd>Video size. This uses the size of the video as decoded, or if no video
frame has been decoded yet, the (possibly incorrect) container indicated
size.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params</span></tt></dt>
<dd><p class="first">Video parameters, as output by the decoder (with overrides like aspect
etc. applied). This has a number of sub-properties:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">video-params/pixelformat</span></tt></dt>
<dd>The pixel format as string. This uses the same names as used in other
places of mpv.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/hw-pixelformat</span></tt></dt>
<dd>The underlying pixel format as string. This is relevant for some cases
of hardware decoding and unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/average-bpp</span></tt></dt>
<dd>Average bits-per-pixel as integer. Subsampled planar formats use a
different resolution, which is the reason this value can sometimes be
odd or confusing. Can be unavailable with some formats.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/w</span></tt>, <tt class="docutils literal"><span class="pre">video-params/h</span></tt></dt>
<dd>Video size as integers, with no aspect correction applied.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/dw</span></tt>, <tt class="docutils literal"><span class="pre">video-params/dh</span></tt></dt>
<dd>Video size as integers, scaled for correct aspect ratio.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/crop-x</span></tt>, <tt class="docutils literal"><span class="pre">video-params/crop-y</span></tt></dt>
<dd>Crop offset of the source video frame.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/crop-w</span></tt>, <tt class="docutils literal"><span class="pre">video-params/crop-h</span></tt></dt>
<dd>Video size after cropping.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/aspect</span></tt></dt>
<dd>Display aspect ratio as float.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/aspect-name</span></tt></dt>
<dd>Display aspect ratio name as string. The name corresponds to motion
picture film format that introduced given aspect ratio in film.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/par</span></tt></dt>
<dd>Pixel aspect ratio.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/sar</span></tt></dt>
<dd>Storage aspect ratio.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/sar-name</span></tt></dt>
<dd>Storage aspect ratio name as string.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/colormatrix</span></tt></dt>
<dd>The colormatrix in use as string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/colorlevels</span></tt></dt>
<dd>The colorlevels as string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/primaries</span></tt></dt>
<dd>The primaries in use as string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/gamma</span></tt></dt>
<dd>The gamma function in use as string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/sig-peak</span></tt> (deprecated)</dt>
<dd>The video file's tagged signal peak as float.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/light</span></tt></dt>
<dd>The light type in use as a string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/chroma-location</span></tt></dt>
<dd>Chroma location as string. (Exact values subject to change.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/rotate</span></tt></dt>
<dd>Intended display rotation in degrees (clockwise).</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/stereo-in</span></tt></dt>
<dd>Source file stereo 3D mode. (See the <tt class="docutils literal">format</tt> video filter's
<tt class="docutils literal"><span class="pre">stereo-in</span></tt> option.)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/alpha</span></tt></dt>
<dd>Alpha type. If the format has no alpha channel, this will be unavailable
(but in future releases, it could change to <tt class="docutils literal">no</tt>). If alpha is
present, this is set to <tt class="docutils literal">straight</tt> or <tt class="docutils literal">premul</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/min-luma</span></tt></dt>
<dd>Minimum luminance, as reported by HDR10 metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/max-luma</span></tt></dt>
<dd>Maximum luminance, as reported by HDR10 metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/max-cll</span></tt></dt>
<dd>Maximum content light level, as reported by HDR10 metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/max-fall</span></tt></dt>
<dd>Maximum frame average light level, as reported by HDR10 metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/scene-max-r</span></tt></dt>
<dd>MaxRGB of a scene for R component, as reported by HDR10+ metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/scene-max-g</span></tt></dt>
<dd>MaxRGB of a scene for G component, as reported by HDR10+ metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/scene-max-b</span></tt></dt>
<dd>MaxRGB of a scene for B component, as reported by HDR10+ metadata (in cd/m²)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/max-pq-y</span></tt></dt>
<dd>Maximum PQ luminance of a frame, as reported by peak detection (in PQ, 0-1)</dd>
<dt><tt class="docutils literal"><span class="pre">video-params/avg-pq-y</span></tt></dt>
<dd>Average PQ luminance of a frame, as reported by peak detection (in PQ, 0-1)</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_MAP
    &quot;pixelformat&quot;       MPV_FORMAT_STRING
    &quot;hw-pixelformat&quot;    MPV_FORMAT_STRING
    &quot;w&quot;                 MPV_FORMAT_INT64
    &quot;h&quot;                 MPV_FORMAT_INT64
    &quot;dw&quot;                MPV_FORMAT_INT64
    &quot;dh&quot;                MPV_FORMAT_INT64
    &quot;aspect&quot;            MPV_FORMAT_DOUBLE
    &quot;par&quot;               MPV_FORMAT_DOUBLE
    &quot;colormatrix&quot;       MPV_FORMAT_STRING
    &quot;colorlevels&quot;       MPV_FORMAT_STRING
    &quot;primaries&quot;         MPV_FORMAT_STRING
    &quot;gamma&quot;             MPV_FORMAT_STRING
    &quot;sig-peak&quot;          MPV_FORMAT_DOUBLE
    &quot;light&quot;             MPV_FORMAT_STRING
    &quot;chroma-location&quot;   MPV_FORMAT_STRING
    &quot;rotate&quot;            MPV_FORMAT_INT64
    &quot;stereo-in&quot;         MPV_FORMAT_STRING
    &quot;average-bpp&quot;       MPV_FORMAT_INT64
    &quot;alpha&quot;             MPV_FORMAT_STRING
    &quot;min-luma&quot;          MPV_FORMAT_DOUBLE
    &quot;max-luma&quot;          MPV_FORMAT_DOUBLE
    &quot;max-cll&quot;           MPV_FORMAT_DOUBLE
    &quot;max-fall&quot;          MPV_FORMAT_DOUBLE
    &quot;scene-max-r&quot;       MPV_FORMAT_DOUBLE
    &quot;scene-max-g&quot;       MPV_FORMAT_DOUBLE
    &quot;scene-max-b&quot;       MPV_FORMAT_DOUBLE
    &quot;max-pq-y&quot;          MPV_FORMAT_DOUBLE
    &quot;avg-pq-y&quot;          MPV_FORMAT_DOUBLE
</pre>
</dd>
<dt><tt class="docutils literal">dwidth</tt>, <tt class="docutils literal">dheight</tt></dt>
<dd><p class="first">Video display size. This is the video size after filters and aspect scaling
have been applied. The actual video window size can still be different
from this, e.g. if the user resized the video window manually.</p>
<p class="last">These have the same values as <tt class="docutils literal"><span class="pre">video-out-params/dw</span></tt> and
<tt class="docutils literal"><span class="pre">video-out-params/dh</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">video-dec-params</span></tt></dt>
<dd>Exactly like <tt class="docutils literal"><span class="pre">video-params</span></tt>, but no overrides applied.</dd>
<dt><tt class="docutils literal"><span class="pre">video-out-params</span></tt></dt>
<dd><p class="first">Same as <tt class="docutils literal"><span class="pre">video-params</span></tt>, but after video filters have been applied. If
there are no video filters in use, this will contain the same values as
<tt class="docutils literal"><span class="pre">video-params</span></tt>. Note that this is still not necessarily what the video
window uses, since the user can change the window size, and all real VOs
do their own scaling independently from the filter chain.</p>
<p class="last">Has the same sub-properties as <tt class="docutils literal"><span class="pre">video-params</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">video-target-params</span></tt></dt>
<dd><p class="first">Same as <tt class="docutils literal"><span class="pre">video-params</span></tt>, but with the target properties that VO outputs to.</p>
<p class="last">Has the same sub-properties as <tt class="docutils literal"><span class="pre">video-params</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info</span></tt></dt>
<dd><p class="first">Approximate information of the current frame. Note that if any of these
are used on OSD, the information might be off by a few frames due to OSD
redrawing and frame display being somewhat disconnected, and you might
have to pause and force a redraw.</p>
<p>This has a number of sub-properties:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">video-frame-info/picture-type</span></tt></dt>
<dd>The type of the picture. It can be &quot;I&quot; (intra), &quot;P&quot; (predicted), &quot;B&quot;
(bi-dir predicted) or unavailable.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/interlaced</span></tt></dt>
<dd>Whether the content of the frame is interlaced.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/tff</span></tt></dt>
<dd>If the content is interlaced, whether the top field is displayed first.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/repeat</span></tt></dt>
<dd>Whether the frame must be delayed when decoding.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/gop-timecode</span></tt></dt>
<dd>String with the GOP timecode encoded in the frame.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/smpte-timecode</span></tt></dt>
<dd>String with the SMPTE timecode encoded in the frame.</dd>
<dt><tt class="docutils literal"><span class="pre">video-frame-info/estimated-smpte-timecode</span></tt></dt>
<dd>Estimated timecode based on the current playback position and frame count.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">container-fps</span></tt></dt>
<dd><p class="first">Container FPS. This can easily contain bogus values. For videos that use
modern container formats or video codecs, this will often be incorrect.</p>
<p class="last">(Renamed from <tt class="docutils literal">fps</tt>.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">estimated-vf-fps</span></tt></dt>
<dd>Estimated/measured FPS of the video filter chain output. (If no filters
are used, this corresponds to decoder output.) This uses the average of
the 10 past frame durations to calculate the FPS. It will be inaccurate
if frame-dropping is involved (such as when framedrop is explicitly
enabled, or after precise seeking). Files with imprecise timestamps (such
as Matroska) might lead to unstable results.</dd>
<dt><tt class="docutils literal"><span class="pre">current-window-scale</span></tt> (RW)</dt>
<dd><p class="first">The <tt class="docutils literal"><span class="pre">window-scale</span></tt> value calculated from the current window size. This
has the same value as <tt class="docutils literal"><span class="pre">window-scale</span></tt> if the window size was not changed
since setting the option, and the window size was not restricted in other
ways. If the window is fullscreened, this will return the scale value
calculated from the last non-fullscreen size of the window. The property
is unavailable if no video is active.</p>
<p class="last">It is also possible to write to this property. This has the same behavior as
writing <tt class="docutils literal"><span class="pre">window-scale</span></tt>. Note that writing to <tt class="docutils literal"><span class="pre">current-window-scale</span></tt> will
not affect the value of <tt class="docutils literal"><span class="pre">window-scale</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">focused</tt></dt>
<dd>Whether the window has focus. Might not be supported by all VOs.</dd>
<dt><tt class="docutils literal"><span class="pre">display-names</span></tt></dt>
<dd>Names of the displays that the mpv window covers. On X11, these
are the xrandr names (LVDS1, HDMI1, DP1, VGA1, etc.). On Windows, these
are the GDI names (\.DISPLAY1, \.DISPLAY2, etc.) and the first display
in the list will be the one that Windows considers associated with the
window (as determined by the MonitorFromWindow API.) On macOS these are the
Display Product Names as used in the System Information with a serial number
in brackets and only one display name is returned since a window can only be
on one screen. On Wayland, these are the wl_output names if protocol
version &gt;= 4 is used (LVDS-1, HDMI-A-1, X11-1, etc.), or the wl_output model
reported by the geometry event if protocol version &lt; 4 is used.</dd>
<dt><tt class="docutils literal"><span class="pre">display-fps</span></tt></dt>
<dd>The refresh rate of the current display. Currently, this is the lowest FPS
of any display covered by the video, as retrieved by the underlying system
APIs (e.g. xrandr on X11). It is not the measured FPS. It's not necessarily
available on all platforms. Note that any of the listed facts may change
any time without a warning.</dd>
<dt><tt class="docutils literal"><span class="pre">estimated-display-fps</span></tt></dt>
<dd>The actual rate at which display refreshes seem to occur, measured by
system time. Only available if display-sync mode (as selected by
<tt class="docutils literal"><span class="pre">--video-sync</span></tt>) is active.</dd>
<dt><tt class="docutils literal"><span class="pre">vsync-jitter</span></tt></dt>
<dd>Estimated deviation factor of the vsync duration.</dd>
<dt><tt class="docutils literal"><span class="pre">display-width</span></tt>, <tt class="docutils literal"><span class="pre">display-height</span></tt></dt>
<dd>The current display's horizontal and vertical resolution in pixels. Whether
or not these values update as the mpv window changes displays depends on
the windowing backend. It may not be available on all platforms.</dd>
<dt><tt class="docutils literal"><span class="pre">display-hidpi-scale</span></tt></dt>
<dd>The HiDPI scale factor as reported by the windowing backend. If no VO is
active, or if the VO does not report a value, this property is unavailable.
It may be saner to report an absolute DPI, however, this is the way HiDPI
support is implemented on most OS APIs. See also <tt class="docutils literal"><span class="pre">--hidpi-window-scale</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-width</span></tt>, <tt class="docutils literal"><span class="pre">osd-height</span></tt></dt>
<dd><p class="first">Last known OSD width (can be 0). This is needed if you want to use the
<tt class="docutils literal"><span class="pre">overlay-add</span></tt> command. It gives you the actual OSD/window size (not
including decorations drawn by the OS window manager).</p>
<p class="last">Alias to <tt class="docutils literal"><span class="pre">osd-dimensions/w</span></tt> and <tt class="docutils literal"><span class="pre">osd-dimensions/h</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">osd-par</span></tt></dt>
<dd><p class="first">Last known OSD display pixel aspect (can be 0).</p>
<p class="last">Alias to <tt class="docutils literal"><span class="pre">osd-dimensions/osd-par</span></tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">osd-dimensions</span></tt></dt>
<dd><p class="first">Last known OSD dimensions.</p>
<p>Has the following sub-properties (which can be read as <tt class="docutils literal">MPV_FORMAT_NODE</tt>
or Lua table with <tt class="docutils literal">mp.get_property_native</tt>):</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">osd-dimensions/w</span></tt></dt>
<dd>Size of the VO window in OSD render units (usually pixels, but may be
scaled pixels with VOs like <tt class="docutils literal">xv</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">osd-dimensions/h</span></tt></dt>
<dd>Size of the VO window in OSD render units,</dd>
<dt><tt class="docutils literal"><span class="pre">osd-dimensions/par</span></tt></dt>
<dd>Pixel aspect ratio of the OSD (usually 1).</dd>
<dt><tt class="docutils literal"><span class="pre">osd-dimensions/aspect</span></tt></dt>
<dd>Display aspect ratio of the VO window. (Computing from the properties
above.)</dd>
<dt><tt class="docutils literal"><span class="pre">osd-dimensions/mt</span></tt>, <tt class="docutils literal"><span class="pre">osd-dimensions/mb</span></tt>, <tt class="docutils literal"><span class="pre">osd-dimensions/ml</span></tt>, <tt class="docutils literal"><span class="pre">osd-dimensions/mr</span></tt></dt>
<dd>OSD to video margins (top, bottom, left, right). This describes the
area into which the video is rendered.</dd>
</dl>
<p class="last">Any of these properties may be unavailable or set to dummy values if the
VO window is not created or visible.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">term-size</span></tt></dt>
<dd><p class="first">The current terminal size.</p>
<p>This has two sub-properties.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">term-size/w</span></tt></dt>
<dd>width of the terminal in cells</dd>
<dt><tt class="docutils literal"><span class="pre">term-size/h</span></tt></dt>
<dd>height of the terminal in cells</dd>
</dl>
<p class="last">This property is not observable. Reacting to size changes requires
polling.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">window-id</span></tt></dt>
<dd>Read-only - mpv's window id. May not always be available, i.e due to window
not being opened yet or not being supported by the VO.</dd>
<dt><tt class="docutils literal"><span class="pre">mouse-pos</span></tt></dt>
<dd><p class="first">Read-only - last known mouse position, normalized to OSD dimensions.</p>
<p>Has the following sub-properties (which can be read as <tt class="docutils literal">MPV_FORMAT_NODE</tt>
or Lua table with <tt class="docutils literal">mp.get_property_native</tt>):</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">mouse-pos/x</span></tt>, <tt class="docutils literal"><span class="pre">mouse-pos/y</span></tt></dt>
<dd>Last known coordinates of the mouse pointer.</dd>
<dt><tt class="docutils literal"><span class="pre">mouse-pos/hover</span></tt></dt>
<dd>Boolean - whether the mouse pointer hovers the video window. The
coordinates should be ignored when this value is false, because the
video backends update them only when the pointer hovers the window.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">touch-pos</span></tt></dt>
<dd><p class="first">Read-only - last known touch point positions, normalized to OSD dimensions.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">N</tt> with the 0-based touch
point index. Whenever a new finger touches the screen, a new touch point is
added to the list of touch points with the smallest unused <tt class="docutils literal">N</tt> available.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">touch-pos/count</span></tt></dt>
<dd>Number of active touch points.</dd>
<dt><tt class="docutils literal"><span class="pre">touch-pos/N/x</span></tt>, <tt class="docutils literal"><span class="pre">touch-pos/N/y</span></tt></dt>
<dd>Position of the Nth touch point.</dd>
<dt><tt class="docutils literal"><span class="pre">touch-pos/N/id</span></tt></dt>
<dd>Unique identifier of the touch point. This can be used to identify
individual touch points when their indexes change.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each touch point)
        &quot;x&quot;        MPV_FORMAT_INT64
        &quot;y&quot;        MPV_FORMAT_INT64
        &quot;id&quot;       MPV_FORMAT_INT64
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-ass-extradata</span></tt></dt>
<dd>The current ASS subtitle track's extradata. There is no formatting done.
The extradata is returned as a string as-is. This property is not
available for non-ASS subtitle tracks.</dd>
<dt><tt class="docutils literal"><span class="pre">sub-text</span></tt></dt>
<dd><p class="first">The current subtitle text regardless of sub visibility. Formatting is
stripped. If the subtitle is not text-based (i.e. DVD/BD subtitles), an
empty string is returned.</p>
<p>This has sub-properties for different formats:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">sub-text/ass</span></tt></dt>
<dd><p class="first">Like <tt class="docutils literal"><span class="pre">sub-text</span></tt>, but return the text in ASS format. Text subtitles in
other formats are converted. For native ASS subtitles, events that do
not contain any text (but vector drawings etc.) are not filtered out. If
multiple events match with the current playback time, they are concatenated
with line breaks. Contains only the &quot;Text&quot; part of the events.</p>
<p class="last">This property is not enough to render ASS subtitles correctly, because ASS
header and per-event metadata are not returned. Use <tt class="docutils literal"><span class="pre">/ass-full</span></tt> for that.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-text/ass-full</span></tt></dt>
<dd>Like <tt class="docutils literal"><span class="pre">sub-text-ass</span></tt>, but return the full event with all fields, formatted as
lines in a .ass text file. Use with <tt class="docutils literal"><span class="pre">sub-ass-extradata</span></tt> for style information.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">sub-text-ass</span></tt> (deprecated)</dt>
<dd>Deprecated alias for <tt class="docutils literal"><span class="pre">sub-text/ass</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">secondary-sub-text</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">sub-text</span></tt> (with the same sub-properties), but for the secondary subtitles.</dd>
<dt><tt class="docutils literal"><span class="pre">sub-start</span></tt></dt>
<dd><p class="first">The current subtitle start time (in seconds). If there's multiple current
subtitles, returns the first start time. If no current subtitle is present
null is returned instead.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">sub-start/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">sub-start</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">secondary-sub-start</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">sub-start</span></tt>, but for the secondary subtitles.</dd>
<dt><tt class="docutils literal"><span class="pre">sub-end</span></tt></dt>
<dd><p class="first">The current subtitle end time (in seconds). If there's multiple current
subtitles, return the last end time. If no current subtitle is present, or
if it's present but has unknown or incorrect duration, null is returned
instead.</p>
<p>This has a sub-property:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">sub-end/full</span></tt></dt>
<dd><tt class="docutils literal"><span class="pre">sub-end</span></tt> with milliseconds.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">secondary-sub-end</span></tt></dt>
<dd>Same as <tt class="docutils literal"><span class="pre">sub-end</span></tt>, but for the secondary subtitles.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-pos</span></tt> (RW)</dt>
<dd><p class="first">Current position on playlist. The first entry is on position 0. Writing to
this property may start playback at the new position.</p>
<p>In some cases, this is not necessarily the currently playing file. See
explanation of <tt class="docutils literal">current</tt> and <tt class="docutils literal">playing</tt> flags in <tt class="docutils literal">playlist</tt>.</p>
<p>If there the playlist is empty, or if it's non-empty, but no entry is
&quot;current&quot;, this property returns -1. Likewise, writing -1 will put the
player into idle mode (or exit playback if idle mode is not enabled). If an
out of range index is written to the property, this behaves as if writing -1.
(Before mpv 0.33.0, instead of returning -1, this property was unavailable
if no playlist entry was current.)</p>
<p class="last">Writing the current value back to the property will have no effect.
Use <tt class="docutils literal"><span class="pre">playlist-play-index</span></tt> to restart the playback of the current entry if
desired.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-pos-1</span></tt> (RW)</dt>
<dd>Same as <tt class="docutils literal"><span class="pre">playlist-pos</span></tt>, but 1-based.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-current-pos</span></tt> (RW)</dt>
<dd><p class="first">Index of the &quot;current&quot; item on playlist. This usually, but not necessarily,
the currently playing item (see <tt class="docutils literal"><span class="pre">playlist-playing-pos</span></tt>). Depending on the
exact internal state of the player, it may refer to the playlist item to
play next, or the playlist item used to determine what to play next.</p>
<p>For reading, this is exactly the same as <tt class="docutils literal"><span class="pre">playlist-pos</span></tt>.</p>
<p>For writing, this <em>only</em> sets the position of the &quot;current&quot; item, without
stopping playback of the current file (or starting playback, if this is done
in idle mode). Use -1 to remove the current flag.</p>
<p class="last">This property is only vaguely useful. If set during playback, it will
typically cause the playlist entry <em>after</em> it to be played next. Another
possibly odd observable state is that if <tt class="docutils literal"><span class="pre">playlist-next</span></tt> is run during
playback, this property is set to the playlist entry to play next (unlike
the previous case). There is an internal flag that decides whether the
current playlist entry or the next one should be played, and this flag is
currently inaccessible for API users. (Whether this behavior will kept is
possibly subject to change.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-playing-pos</span></tt></dt>
<dd><p class="first">Index of the &quot;playing&quot; item on playlist. A playlist item is &quot;playing&quot; if
it's being loaded, actually playing, or being unloaded. This property is set
during the <tt class="docutils literal">MPV_EVENT_START_FILE</tt> (<tt class="docutils literal"><span class="pre">start-file</span></tt>) and the
<tt class="docutils literal">MPV_EVENT_START_END</tt> (<tt class="docutils literal"><span class="pre">end-file</span></tt>) events. Outside of that, it returns
-1. If the playlist entry was somehow removed during playback, but playback
hasn't stopped yet, or is in progress of being stopped, it also returns -1.
(This can happen at least during state transitions.)</p>
<p class="last">In the &quot;playing&quot; state, this is usually the same as <tt class="docutils literal"><span class="pre">playlist-pos</span></tt>, except
during state changes, or if <tt class="docutils literal"><span class="pre">playlist-current-pos</span></tt> was written explicitly.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-count</span></tt></dt>
<dd>Number of total playlist entries.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist-path</span></tt></dt>
<dd>The original path of the playlist for the current entry before mpv expanded
the entries. Unavailable if the file was not originally associated with a
playlist in some way.</dd>
<dt><tt class="docutils literal">playlist</tt></dt>
<dd><p class="first">Playlist, current entry marked. Currently, the raw property value is
useless.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">N</tt> with the 0-based playlist
entry index.</p>
<dl class="docutils">
<dt><tt class="docutils literal">playlist/count</tt></dt>
<dd>Number of playlist entries (same as <tt class="docutils literal"><span class="pre">playlist-count</span></tt>).</dd>
<dt><tt class="docutils literal">playlist/N/filename</tt></dt>
<dd>Filename of the Nth entry.</dd>
<dt><tt class="docutils literal">playlist/N/playing</tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the <tt class="docutils literal"><span class="pre">playlist-playing-pos</span></tt> property points to this
entry, <tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal">playlist/N/current</tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the <tt class="docutils literal"><span class="pre">playlist-current-pos</span></tt> property points to this
entry, <tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal">playlist/N/title</tt></dt>
<dd>Name of the Nth entry. Available if the playlist file contains
such fields and mpv's parser supports it for the given
playlist format, or if the playlist entry has been opened before and a
media-title other than filename has been acquired.</dd>
<dt><tt class="docutils literal">playlist/N/id</tt></dt>
<dd>Unique ID for this entry. This is an automatically assigned integer ID
that is unique for the entire life time of the current mpv core
instance. Other commands, events, etc. use this as <tt class="docutils literal">playlist_entry_id</tt>
fields.</dd>
<dt><tt class="docutils literal"><span class="pre">playlist/N/playlist-path</span></tt></dt>
<dd>The original path of the playlist for this entry before mpv expanded
it. Unavailable if the file was not originally associated with a playlist
in some way.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each playlist entry)
        &quot;filename&quot;  MPV_FORMAT_STRING
        &quot;current&quot;   MPV_FORMAT_FLAG (might be missing; since mpv 0.7.0)
        &quot;playing&quot;   MPV_FORMAT_FLAG (same)
        &quot;title&quot;     MPV_FORMAT_STRING (optional)
        &quot;id&quot;        MPV_FORMAT_INT64
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">track-list</span></tt></dt>
<dd><p class="first">List of audio/video/sub tracks, current entry marked. Currently, the raw
property value is useless.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">N</tt> with the 0-based track
index.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">track-list/count</span></tt></dt>
<dd>Total number of tracks.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/id</span></tt></dt>
<dd>The ID as it's used for <tt class="docutils literal"><span class="pre">--sid</span></tt>/<tt class="docutils literal"><span class="pre">--aid</span></tt>/<tt class="docutils literal"><span class="pre">--vid</span></tt>. This is unique
within tracks of the same type (sub/audio/video), but otherwise not.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/type</span></tt></dt>
<dd>String describing the media type. One of <tt class="docutils literal">audio</tt>, <tt class="docutils literal">video</tt>, <tt class="docutils literal">sub</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/src-id</span></tt></dt>
<dd>Track ID as used in the source file. Not always available. (It is
missing if the format has no native ID, if the track is a pseudo-track
that does not exist in this way in the actual file, or if the format
is handled by libavformat, and the format was not whitelisted as having
track IDs.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/title</span></tt></dt>
<dd>Track title as it is stored in the file. Not always available.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/lang</span></tt></dt>
<dd>Track language as identified by the file. Not always available.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/image</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if this is a video track that consists of a single
picture, <tt class="docutils literal">no</tt>/false or unavailable otherwise. The heuristic used to
determine if a stream is an image doesn't attempt to detect images in
codecs normally used for videos. Otherwise, it is reliable.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/albumart</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if this is an image embedded in an audio file or external
cover art, <tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/default</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track has the default flag set in the file,
<tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/forced</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track has the forced flag set in the file,
<tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/dependent</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track has the dependent flag set in the file,
<tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/visual-impaired</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track has the visual impaired flag set in the file,
<tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/hearing-impaired</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track has the hearing impaired flag set in the file,
<tt class="docutils literal">no</tt>/false or unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/hls-bitrate</span></tt></dt>
<dd>The bitrate of the HLS stream, if available.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/program-id</span></tt></dt>
<dd>The program ID of the HLS stream, if available.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/codec</span></tt></dt>
<dd>The codec name used by this track, for example <tt class="docutils literal">h264</tt>. Unavailable
in some rare cases.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/codec-desc</span></tt></dt>
<dd>The codec descriptive name used by this track.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/codec-profile</span></tt></dt>
<dd>The codec profile used by this track. Available only if the track has
been already decoded.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/external</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track is an external file, <tt class="docutils literal">no</tt>/false or
unavailable otherwise. This is set for separate subtitle files.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/external-filename</span></tt></dt>
<dd>The filename if the track is from an external file, unavailable
otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/selected</span></tt></dt>
<dd><tt class="docutils literal">yes</tt>/true if the track is currently decoded, <tt class="docutils literal">no</tt>/false or
unavailable otherwise.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/main-selection</span></tt></dt>
<dd>It indicates the selection order of tracks for the same type.
If a track is not selected, or is selected by the <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt>,
it is not available. For subtitle tracks, <tt class="docutils literal">0</tt> represents the <tt class="docutils literal">sid</tt>,
and <tt class="docutils literal">1</tt> represents the <tt class="docutils literal"><span class="pre">secondary-sid</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/ff-index</span></tt></dt>
<dd>The stream index as usually used by the FFmpeg utilities. Note that
this can be potentially wrong if a demuxer other than libavformat
(<tt class="docutils literal"><span class="pre">--demuxer=lavf</span></tt>) is used. For mkv files, the index will usually
match even if the default (builtin) demuxer is used, but there is
no hard guarantee.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/decoder</span></tt></dt>
<dd>If this track is being decoded, the short decoder name,</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/decoder-desc</span></tt></dt>
<dd>If this track is being decoded, the human-readable decoder name,</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-w</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/demux-h</span></tt></dt>
<dd>Video size hint as indicated by the container. (Not always accurate.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-crop-x</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/demux-crop-y</span></tt></dt>
<dd>Crop offset of the source video frame.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-crop-w</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/demux-crop-h</span></tt></dt>
<dd>Video size after cropping.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-channel-count</span></tt></dt>
<dd>Number of audio channels as indicated by the container. (Not always
accurate - in particular, the track could be decoded as a different
number of channels.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-channels</span></tt></dt>
<dd>Channel layout as indicated by the container. (Not always accurate.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-samplerate</span></tt></dt>
<dd>Audio sample rate as indicated by the container. (Not always accurate.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-fps</span></tt></dt>
<dd>Video FPS as indicated by the container. (Not always accurate.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-bitrate</span></tt></dt>
<dd>Audio average bitrate, in bits per second. (Not always accurate.)</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-rotation</span></tt></dt>
<dd>Video clockwise rotation metadata, in degrees.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/demux-par</span></tt></dt>
<dd>Pixel aspect ratio.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/format-name</span></tt></dt>
<dd>Short name for format from ffmpeg. If the track is audio, this will be
the name of the sample format. If the track is video, this will be the
name of the pixel format.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/audio-channels</span></tt> (deprecated)</dt>
<dd>Deprecated alias for <tt class="docutils literal"><span class="pre">track-list/N/demux-channel-count</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/replaygain-track-peak</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/replaygain-track-gain</span></tt></dt>
<dd>Per-track replaygain values. Only available for audio tracks with
corresponding information stored in the source file.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/replaygain-album-peak</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/replaygain-album-gain</span></tt></dt>
<dd>Per-album replaygain values. If the file has per-track but no per-album
information, the per-album values will be copied from the per-track
values currently. It's possible that future mpv versions will make
these properties unavailable instead in this case.</dd>
<dt><tt class="docutils literal"><span class="pre">track-list/N/dolby-vision-profile</span></tt>, <tt class="docutils literal"><span class="pre">track-list/N/dolby-vision-level</span></tt></dt>
<dd>Dolby Vision profile and level. May not be available if the container
does not provide this information.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each track)
        &quot;id&quot;                MPV_FORMAT_INT64
        &quot;type&quot;              MPV_FORMAT_STRING
        &quot;src-id&quot;            MPV_FORMAT_INT64
        &quot;title&quot;             MPV_FORMAT_STRING
        &quot;lang&quot;              MPV_FORMAT_STRING
        &quot;image&quot;             MPV_FORMAT_FLAG
        &quot;albumart&quot;          MPV_FORMAT_FLAG
        &quot;default&quot;           MPV_FORMAT_FLAG
        &quot;forced&quot;            MPV_FORMAT_FLAG
        &quot;dependent&quot;         MPV_FORMAT_FLAG
        &quot;visual-impaired&quot;   MPV_FORMAT_FLAG
        &quot;hearing-impaired&quot;  MPV_FORMAT_FLAG
        &quot;hls-bitrate&quot;       MPV_FORMAT_INT64
        &quot;program-id&quot;        MPV_FORMAT_INT64
        &quot;selected&quot;          MPV_FORMAT_FLAG
        &quot;main-selection&quot;    MPV_FORMAT_INT64
        &quot;external&quot;          MPV_FORMAT_FLAG
        &quot;external-filename&quot; MPV_FORMAT_STRING
        &quot;codec&quot;             MPV_FORMAT_STRING
        &quot;codec-desc&quot;        MPV_FORMAT_STRING
        &quot;codec-profile&quot;     MPV_FORMAT_STRING
        &quot;ff-index&quot;          MPV_FORMAT_INT64
        &quot;decoder&quot;           MPV_FORMAT_STRING
        &quot;decoder-desc&quot;      MPV_FORMAT_STRING
        &quot;demux-w&quot;           MPV_FORMAT_INT64
        &quot;demux-h&quot;           MPV_FORMAT_INT64
        &quot;demux-crop-x&quot;      MPV_FORMAT_INT64
        &quot;demux-crop-y&quot;      MPV_FORMAT_INT64
        &quot;demux-crop-w&quot;      MPV_FORMAT_INT64
        &quot;demux-crop-h&quot;      MPV_FORMAT_INT64
        &quot;demux-channel-count&quot; MPV_FORMAT_INT64
        &quot;demux-channels&quot;    MPV_FORMAT_STRING
        &quot;demux-samplerate&quot;  MPV_FORMAT_INT64
        &quot;demux-fps&quot;         MPV_FORMAT_DOUBLE
        &quot;demux-bitrate&quot;     MPV_FORMAT_INT64
        &quot;demux-rotation&quot;    MPV_FORMAT_INT64
        &quot;demux-par&quot;         MPV_FORMAT_DOUBLE
        &quot;format-name&quot;       MPV_FORMAT_STRING
        &quot;audio-channels&quot;    MPV_FORMAT_INT64
        &quot;replaygain-track-peak&quot; MPV_FORMAT_DOUBLE
        &quot;replaygain-track-gain&quot; MPV_FORMAT_DOUBLE
        &quot;replaygain-album-peak&quot; MPV_FORMAT_DOUBLE
        &quot;replaygain-album-gain&quot; MPV_FORMAT_DOUBLE
        &quot;dolby-vision-profile&quot; MPV_FORMAT_INT64
        &quot;dolby-vision-level&quot; MPV_FORMAT_INT64
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">current-tracks/...</span></tt></dt>
<dd><p class="first">This gives access to currently selected tracks. It redirects to the correct
entry in <tt class="docutils literal"><span class="pre">track-list</span></tt>.</p>
<p>The following sub-entries are defined: <tt class="docutils literal">video</tt>, <tt class="docutils literal">audio</tt>, <tt class="docutils literal">sub</tt>,
<tt class="docutils literal">sub2</tt></p>
<p>For example, <tt class="docutils literal"><span class="pre">current-tracks/audio/lang</span></tt> returns the current audio track's
language field (the same value as <tt class="docutils literal"><span class="pre">track-list/N/lang</span></tt>).</p>
<p class="last">If tracks of the requested type are selected via <tt class="docutils literal"><span class="pre">--lavfi-complex</span></tt>, the
first one is returned.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">chapter-list</span></tt> (RW)</dt>
<dd><p class="first">List of chapters, current entry marked. Currently, the raw property value
is useless.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">N</tt> with the 0-based chapter
index.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">chapter-list/count</span></tt></dt>
<dd>Number of chapters.</dd>
<dt><tt class="docutils literal"><span class="pre">chapter-list/N/title</span></tt></dt>
<dd>Chapter title as stored in the file. Not always available.</dd>
<dt><tt class="docutils literal"><span class="pre">chapter-list/N/time</span></tt></dt>
<dd>Chapter start time in seconds as float.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each chapter)
        &quot;title&quot; MPV_FORMAT_STRING
        &quot;time&quot;  MPV_FORMAT_DOUBLE
</pre>
</dd>
<dt><tt class="docutils literal">af</tt>, <tt class="docutils literal">vf</tt> (RW)</dt>
<dd><p class="first">See <tt class="docutils literal"><span class="pre">--vf</span></tt>/<tt class="docutils literal"><span class="pre">--af</span></tt> and the <tt class="docutils literal">vf</tt>/<tt class="docutils literal">af</tt> command.</p>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each filter entry)
        &quot;name&quot;      MPV_FORMAT_STRING
        &quot;label&quot;     MPV_FORMAT_STRING [optional]
        &quot;enabled&quot;   MPV_FORMAT_FLAG [optional]
        &quot;params&quot;    MPV_FORMAT_NODE_MAP [optional]
            &quot;key&quot;   MPV_FORMAT_STRING
            &quot;value&quot; MPV_FORMAT_STRING
</pre>
<p class="last">It's also possible to write the property using this format.</p>
</dd>
<dt><tt class="docutils literal">seekable</tt></dt>
<dd>Whether it's generally possible to seek in the current file.</dd>
<dt><tt class="docutils literal"><span class="pre">partially-seekable</span></tt></dt>
<dd><p class="first">Whether the current file is considered seekable, but only because the cache
is active. This means small relative seeks may be fine, but larger seeks
may fail anyway. Whether a seek will succeed or not is generally not known
in advance.</p>
<p class="last">If this property returns <tt class="docutils literal">yes</tt>/true, so will <tt class="docutils literal">seekable</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">playback-abort</span></tt></dt>
<dd>Whether playback is stopped or is to be stopped. (Useful in obscure
situations like during <tt class="docutils literal">on_load</tt> hook processing, when the user can stop
playback, but the script has to explicitly end processing.)</dd>
<dt><tt class="docutils literal"><span class="pre">cursor-autohide</span></tt> (RW)</dt>
<dd>See <tt class="docutils literal"><span class="pre">--cursor-autohide</span></tt>. Setting this to a new value will always update
the cursor, and reset the internal timer.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-sym-cc</span></tt></dt>
<dd>Inserts the current OSD symbol as opaque OSD control code (cc). This makes
sense only with the <tt class="docutils literal"><span class="pre">show-text</span></tt> command or options which set OSD messages.
The control code is implementation specific and is useless for anything else.</dd>
<dt><tt class="docutils literal"><span class="pre">osd-ass-cc</span></tt></dt>
<dd><p class="first"><tt class="docutils literal"><span class="pre">${osd-ass-cc/0}</span></tt> disables escaping ASS sequences of text in OSD,
<tt class="docutils literal"><span class="pre">${osd-ass-cc/1}</span></tt> enables it again. By default, ASS sequences are
escaped to avoid accidental formatting, and this property can disable
this behavior. Note that the properties return an opaque OSD control
code, which only makes sense for the <tt class="docutils literal"><span class="pre">show-text</span></tt> command or options
which set OSD messages.</p>
<div class="admonition admonition-example">
<p class="first admonition-title">Example</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">--osd-msg3='This</span> is <span class="pre">${osd-ass-cc/0}{\\b1}bold</span> text'</tt></li>
<li><tt class="docutils literal"><span class="pre">show-text</span> &quot;This is <span class="pre">${osd-ass-cc/0}{\\b1}bold</span> text&quot;</tt></li>
</ul>
</div>
<p>Any ASS override tags as understood by libass can be used.</p>
<p>Note that you need to escape the <tt class="docutils literal">\</tt> character, because the string is
processed for C escape sequences before passing it to the OSD code. See
<a class="reference internal" href="#flat-command-syntax">Flat command syntax</a> for details.</p>
<p class="last">A list of tags can be found here:
<a class="reference external" href="https://aegisub.org/docs/latest/ass_tags/">https://aegisub.org/docs/latest/ass_tags/</a></p>
</dd>
<dt><tt class="docutils literal"><span class="pre">vo-configured</span></tt></dt>
<dd>Whether the VO is configured right now. Usually this corresponds to whether
the video window is visible. If the <tt class="docutils literal"><span class="pre">--force-window</span></tt> option is used, this
usually always returns <tt class="docutils literal">yes</tt>/true.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes</span></tt></dt>
<dd><p class="first">Contains introspection about the VO's active render passes and their
execution times. Not implemented by all VOs.</p>
<p>This is further subdivided into two frame types, <tt class="docutils literal"><span class="pre">vo-passes/fresh</span></tt> for
fresh frames (which have to be uploaded, scaled, etc.) and
<tt class="docutils literal"><span class="pre">vo-passes/redraw</span></tt> for redrawn frames (which only have to be re-painted).
The number of passes for any given subtype can change from frame to frame,
and should not be relied upon.</p>
<p>Each frame type has a number of further sub-properties. Replace <tt class="docutils literal">TYPE</tt>
with the frame type, <tt class="docutils literal">N</tt> with the 0-based pass index, and <tt class="docutils literal">M</tt> with the
0-based sample index.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/count</span></tt></dt>
<dd>Number of passes.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/desc</span></tt></dt>
<dd>Human-friendy description of the pass.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/last</span></tt></dt>
<dd>Last measured execution time, in nanoseconds.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/avg</span></tt></dt>
<dd>Average execution time of this pass, in nanoseconds. The exact
timeframe varies, but it should generally be a handful of seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/peak</span></tt></dt>
<dd>The peak execution time (highest value) within this averaging range, in
nanoseconds.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/count</span></tt></dt>
<dd>The number of samples for this pass.</dd>
<dt><tt class="docutils literal"><span class="pre">vo-passes/TYPE/N/samples/M</span></tt></dt>
<dd>The raw execution time of a specific sample for this pass, in
nanoseconds.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="literal-block">
MPV_FORMAT_NODE_MAP
&quot;TYPE&quot; MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP
        &quot;desc&quot;    MPV_FORMAT_STRING
        &quot;last&quot;    MPV_FORMAT_INT64
        &quot;avg&quot;     MPV_FORMAT_INT64
        &quot;peak&quot;    MPV_FORMAT_INT64
        &quot;count&quot;   MPV_FORMAT_INT64
        &quot;samples&quot; MPV_FORMAT_NODE_ARRAY
             MP_FORMAT_INT64
</pre>
<p class="last">Note that directly accessing this structure via subkeys is not supported,
the only access is through aforementioned <tt class="docutils literal">MPV_FORMAT_NODE</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">perf-info</span></tt></dt>
<dd>Further performance data. Querying this property triggers internal
collection of some data, and may slow down the player. Each query will reset
some internal state. Property change notification doesn't and won't work.
All of this may change in the future, so don't use this. The builtin
<tt class="docutils literal">stats</tt> script is supposed to be the only user; since it's bundled and
built with the source code, it can use knowledge of mpv internal to render
the information properly. See <tt class="docutils literal">stats</tt> script description for some details.</dd>
<dt><tt class="docutils literal"><span class="pre">video-bitrate</span></tt>, <tt class="docutils literal"><span class="pre">audio-bitrate</span></tt>, <tt class="docutils literal"><span class="pre">sub-bitrate</span></tt></dt>
<dd><p class="first">Bitrate values calculated on the packet level. This works by dividing the
bit size of all packets between two keyframes by their presentation
timestamp distance. (This uses the timestamps are stored in the file, so
e.g. playback speed does not influence the returned values.) In particular,
the video bitrate will update only per keyframe, and show the &quot;past&quot;
bitrate. To make the property more UI friendly, updates to these properties
are throttled in a certain way.</p>
<p>The unit is bits per second. OSD formatting turns these values in kilobits
(or megabits, if appropriate), which can be prevented by using the
raw property value, e.g. with <tt class="docutils literal"><span class="pre">${=video-bitrate}</span></tt>.</p>
<p>Note that the accuracy of these properties is influenced by a few factors.
If the underlying demuxer rewrites the packets on demuxing (done for some
file formats), the bitrate might be slightly off. If timestamps are bad
or jittery (like in Matroska), even constant bitrate streams might show
fluctuating bitrate.</p>
<p>How exactly these values are calculated might change in the future.</p>
<p class="last">In earlier versions of mpv, these properties returned a static (but bad)
guess using a completely different method.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">audio-device-list</span></tt></dt>
<dd><p class="first">The list of discovered audio devices. This is mostly for use with the
client API, and reflects what <tt class="docutils literal"><span class="pre">--audio-device=help</span></tt> with the command line
player returns.</p>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each device entry)
        &quot;name&quot;          MPV_FORMAT_STRING
        &quot;description&quot;   MPV_FORMAT_STRING
</pre>
<p>The <tt class="docutils literal">name</tt> is what is to be passed to the <tt class="docutils literal"><span class="pre">--audio-device</span></tt> option (and
often a rather cryptic audio API-specific ID), while <tt class="docutils literal">description</tt> is
human readable free form text. The description is set to the device name
(minus mpv-specific <tt class="docutils literal">&lt;driver&gt;/</tt> prefix) if no description is available
or the description would have been an empty string.</p>
<p>The special entry with the name set to <tt class="docutils literal">auto</tt> selects the default audio
output driver and the default device.</p>
<p class="last">The property can be watched with the property observation mechanism in
the client API and in Lua scripts. (Technically, change notification is
enabled the first time this property is read.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">audio-device</span></tt> (RW)</dt>
<dd><p class="first">Set the audio device. This directly reads/writes the <tt class="docutils literal"><span class="pre">--audio-device</span></tt>
option, but on write accesses, the audio output will be scheduled for
reloading.</p>
<p>Writing this property while no audio output is active will not automatically
enable audio. (This is also true in the case when audio was disabled due to
reinitialization failure after a previous write access to <tt class="docutils literal"><span class="pre">audio-device</span></tt>.)</p>
<p>This property also doesn't tell you which audio device is actually in use.</p>
<p class="last">How these details are handled may change in the future.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">current-vo</span></tt></dt>
<dd>Current video output driver (name as used with <tt class="docutils literal"><span class="pre">--vo</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">current-gpu-context</span></tt></dt>
<dd>Current GPU context of video output driver (name as used with <tt class="docutils literal"><span class="pre">--gpu-context</span></tt>).
Valid for <tt class="docutils literal"><span class="pre">--vo=gpu</span></tt> and <tt class="docutils literal"><span class="pre">--vo=gpu-next</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">current-ao</span></tt></dt>
<dd>Current audio output driver (name as used with <tt class="docutils literal"><span class="pre">--ao</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">user-data</span></tt> (RW)</dt>
<dd><p class="first">This is a recursive key/value map of arbitrary nodes shared between clients for
general use (i.e. scripts, IPC clients, host applications, etc).
The player itself does not use any data in it (although some builtin scripts may).
The property is not preserved across player restarts.</p>
<p>The following sub-paths are reserved for internal uses or have special semantics:
<tt class="docutils literal"><span class="pre">user-data/osc</span></tt>, <tt class="docutils literal"><span class="pre">user-data/mpv</span></tt>. Unless noted otherwise, the semantics of
any properties under these sub-paths can change at any time and may not be relied
upon, and writing to these properties may prevent builtin scripts from working
properly.</p>
<p>Currently, the following properties have defined special semantics:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">user-data/osc/margins</span></tt></dt>
<dd>This property is written by an OSC implementation to indicate the margins that it
occupies. Its sub-properties <tt class="docutils literal">l</tt>, <tt class="docutils literal">r</tt>, <tt class="docutils literal">t</tt>, and <tt class="docutils literal">b</tt> should all be set to
the left, right, top, and bottom margins respectively.
Values are between 0.0 and 1.0, normalized to window width/height.</dd>
</dl>
<p>Sub-paths can be accessed directly; e.g. <tt class="docutils literal"><span class="pre">user-data/my-script/state/a</span></tt> can be
read, written, or observed.</p>
<p>The top-level object itself cannot be written directly; write to sub-paths instead.</p>
<p>Converting this property or its sub-properties to strings will give a JSON
representation. If converting a leaf-level object (i.e. not a map or array)
and not using raw mode, the underlying content will be given (e.g. strings will be
printed directly, rather than quoted and JSON-escaped).</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">user-data/mpv/ytdl</span></tt></dt>
<dd><p class="first">Data shared by the builtin ytdl hook script.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">user-data/mpv/ytdl/path</span></tt></dt>
<dd>Path to the ytdl executable, if found, or an empty string otherwise.
The property is not set until the script attempts to find the ytdl
executable, i.e. until an URL is being loaded by the script.</dd>
<dt><tt class="docutils literal"><span class="pre">user-data/mpv/ytdl/json-subprocess-result</span></tt></dt>
<dd>Result of executing ytdl to retrieve the JSON data of the URL being
loaded. The format is the same as <tt class="docutils literal">subprocess</tt>'s result, capturing
stdout and stderr.</dd>
</dl>
</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">menu-data</span></tt> (RW)</dt>
<dd><p class="first">This property stores the raw menu definition. See <a class="reference internal" href="#context-menu">Context Menu</a> section for details.</p>
<dl class="docutils">
<dt><tt class="docutils literal">type</tt></dt>
<dd>Menu item type. Can be: <tt class="docutils literal">separator</tt>, <tt class="docutils literal">submenu</tt>, or empty.</dd>
<dt><tt class="docutils literal">title</tt></dt>
<dd>Menu item title. Required if type is not <tt class="docutils literal">separator</tt>.</dd>
<dt><tt class="docutils literal">cmd</tt></dt>
<dd>Command to execute when the menu item is clicked.</dd>
<dt><tt class="docutils literal">shortcut</tt></dt>
<dd>Menu item shortcut key which appears to the right of the menu item.
A shortcut key does not have to be functional; it's just a visual hint.</dd>
<dt><tt class="docutils literal">state</tt></dt>
<dd>Menu item state. Can be: <tt class="docutils literal">checked</tt>, <tt class="docutils literal">disabled</tt>, <tt class="docutils literal">hidden</tt>, or empty.</dd>
<dt><tt class="docutils literal">submenu</tt></dt>
<dd>Submenu items, which is required if type is <tt class="docutils literal">submenu</tt>.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>, or with
Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with the following
contents:</p>
<pre class="literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (menu item)
        &quot;type&quot;           MPV_FORMAT_STRING
        &quot;title&quot;          MPV_FORMAT_STRING
        &quot;cmd&quot;            MPV_FORMAT_STRING
        &quot;shortcut&quot;       MPV_FORMAT_STRING
        &quot;state&quot;          MPV_FORMAT_NODE_ARRAY[MPV_FORMAT_STRING]
        &quot;submenu&quot;        MPV_FORMAT_NODE_ARRAY[menu item]
</pre>
<p class="last">Writing to this property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt> or with
Lua <tt class="docutils literal">mp.set_property_native</tt> will trigger an immediate update of the menu if
mpv video output is currently active. You may observe the <tt class="docutils literal"><span class="pre">current-vo</span></tt>
property to check if this is the case.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">working-directory</span></tt></dt>
<dd>The working directory of the mpv process. Can be useful for JSON IPC users,
because the command line player usually works with relative paths.</dd>
<dt><tt class="docutils literal"><span class="pre">protocol-list</span></tt></dt>
<dd>List of protocol prefixes potentially recognized by the player. They are
returned without trailing <tt class="docutils literal">://</tt> suffix (which is still always required).
In some cases, the protocol will not actually be supported (consider
<tt class="docutils literal">https</tt> if ffmpeg is not compiled with TLS support).</dd>
<dt><tt class="docutils literal"><span class="pre">decoder-list</span></tt></dt>
<dd><p class="first">List of decoders supported. This lists decoders which can be passed to
<tt class="docutils literal"><span class="pre">--vd</span></tt> and <tt class="docutils literal"><span class="pre">--ad</span></tt>.</p>
<dl class="docutils">
<dt><tt class="docutils literal">codec</tt></dt>
<dd>Canonical codec name, which identifies the format the decoder can
handle.</dd>
<dt><tt class="docutils literal">driver</tt></dt>
<dd>The name of the decoder itself. Often, this is the same as <tt class="docutils literal">codec</tt>.
Sometimes it can be different. It is used to distinguish multiple
decoders for the same codec.</dd>
<dt><tt class="docutils literal">description</tt></dt>
<dd>Human readable description of the decoder and codec.</dd>
</dl>
<p>When querying the property with the client API using <tt class="docutils literal">MPV_FORMAT_NODE</tt>,
or with Lua <tt class="docutils literal">mp.get_property_native</tt>, this will return a mpv_node with
the following contents:</p>
<pre class="last literal-block">
MPV_FORMAT_NODE_ARRAY
    MPV_FORMAT_NODE_MAP (for each decoder entry)
        &quot;codec&quot;         MPV_FORMAT_STRING
        &quot;driver&quot;        MPV_FORMAT_STRING
        &quot;description&quot;   MPV_FORMAT_STRING
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">encoder-list</span></tt></dt>
<dd>List of libavcodec encoders. This has the same format as <tt class="docutils literal"><span class="pre">decoder-list</span></tt>.
The encoder names (<tt class="docutils literal">driver</tt> entries) can be passed to <tt class="docutils literal"><span class="pre">--ovc</span></tt> and
<tt class="docutils literal"><span class="pre">--oac</span></tt> (without the <tt class="docutils literal">lavc:</tt> prefix required by <tt class="docutils literal"><span class="pre">--vd</span></tt> and <tt class="docutils literal"><span class="pre">--ad</span></tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">demuxer-lavf-list</span></tt></dt>
<dd>List of available libavformat demuxers' names. This can be used to check
for support for a specific format or use with <tt class="docutils literal"><span class="pre">--demuxer-lavf-format</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">input-key-list</span></tt></dt>
<dd>List of <a class="reference internal" href="#key-names">Key names</a>, same as output by <tt class="docutils literal"><span class="pre">--input-keylist</span></tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">mpv-version</span></tt></dt>
<dd>The mpv version/copyright string. Depending on how the binary was built, it
might contain either a release version, or just a git hash.</dd>
<dt><tt class="docutils literal"><span class="pre">mpv-configuration</span></tt></dt>
<dd>The configuration arguments that were passed to the build system. If the
meson version used to compile mpv is older than 1.1.0, then a hardcoded
string of a few, arbitrary options is displayed instead.</dd>
<dt><tt class="docutils literal"><span class="pre">ffmpeg-version</span></tt></dt>
<dd>The contents of the <tt class="docutils literal">av_version_info()</tt> API call. This is a string which
identifies the build in some way, either through a release version number,
or a git hash. This property is unavailable if mpv is linked against older
FFmpeg versions.</dd>
<dt><tt class="docutils literal"><span class="pre">libass-version</span></tt></dt>
<dd>The value of <tt class="docutils literal">ass_library_version()</tt>. This is an integer, encoded in a
somewhat weird form (apparently &quot;hex BCD&quot;), indicating the release version
of the libass library linked to mpv.</dd>
<dt><tt class="docutils literal">platform</tt></dt>
<dd>Returns a string describing what target platform mpv was built for. The value
of this is dependent on what the underlying build system detects. Some of the
most common values are: <tt class="docutils literal">windows</tt>, <tt class="docutils literal">darwin</tt> (macos or ios), <tt class="docutils literal">linux</tt>,
<tt class="docutils literal">android</tt>, and <tt class="docutils literal">freebsd</tt>. Note that this is not a complete listing.</dd>
<dt><tt class="docutils literal"><span class="pre">options/&lt;name&gt;</span></tt> (RW)</dt>
<dd><p class="first">The value of option <tt class="docutils literal"><span class="pre">--&lt;name&gt;</span></tt>. Most options can be changed at runtime by
writing to this property. Note that many options require reloading the file
for changes to take effect. If there is an equivalent property, prefer
setting the property instead.</p>
<p class="last">There shouldn't be any reason to access <tt class="docutils literal"><span class="pre">options/&lt;name&gt;</span></tt> instead of
<tt class="docutils literal">&lt;name&gt;</tt>, except in situations in which the properties have different
behavior or conflicting semantics.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">file-local-options/&lt;name&gt;</span></tt> (RW)</dt>
<dd><p class="first">Similar to <tt class="docutils literal"><span class="pre">options/&lt;name&gt;</span></tt>, but when setting an option through this
property, the option is reset to its old value once the current file has
stopped playing. Trying to write an option while no file is playing (or
is being loaded) results in an error.</p>
<p class="last">(Note that if an option is marked as file-local, even <tt class="docutils literal">options/</tt> will
access the local value, and the <tt class="docutils literal">old</tt> value, which will be restored on
end of playback, cannot be read or written until end of playback.)</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;</span></tt></dt>
<dd><p class="first">Additional per-option information.</p>
<p>This has a number of sub-properties. Replace <tt class="docutils literal">&lt;name&gt;</tt> with the name of
a top-level option. No guarantee of stability is given to any of these
sub-properties - they may change radically in the feature.</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/name</span></tt></dt>
<dd>The name of the option.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/type</span></tt></dt>
<dd>The name of the option type, like <tt class="docutils literal">String</tt> or <tt class="docutils literal">Integer</tt>. For many
complex types, this isn't very accurate.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/set-from-commandline</span></tt></dt>
<dd>Whether the option was set from the mpv command line. What this is set
to if the option is e.g. changed at runtime is left undefined (meaning
it could change in the future).</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/set-locally</span></tt></dt>
<dd>Whether the option was set per-file. This is the case with
automatically loaded profiles, file-dir configs, and other cases. It
means the option value will be restored to the value before playback
start when playback ends.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/expects-file</span></tt></dt>
<dd>Whether the option takes file paths as arguments.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/default-value</span></tt></dt>
<dd>The default value of the option. May not always be available.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/min</span></tt>, <tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/max</span></tt></dt>
<dd>Integer minimum and maximum values allowed for the option. Only
available if the options are numeric, and the minimum/maximum has been
set internally. It's also possible that only one of these is set.</dd>
<dt><tt class="docutils literal"><span class="pre">option-info/&lt;name&gt;/choices</span></tt></dt>
<dd>If the option is a choice option, the possible choices. Choices that
are integers may or may not be included (they can be implied by <tt class="docutils literal">min</tt>
and <tt class="docutils literal">max</tt>). Note that options which behave like choice options, but
are not actual choice options internally, may not have this info
available.</dd>
</dl>
</dd>
<dt><tt class="docutils literal"><span class="pre">property-list</span></tt></dt>
<dd>The list of top-level properties.</dd>
<dt><tt class="docutils literal"><span class="pre">profile-list</span></tt></dt>
<dd><p class="first">The list of profiles and their contents. This is highly
implementation-specific, and may change any time. Currently, it returns an
array of options for each profile. Each option has a name and a value, with
the value currently always being a string. Note that the options array is
not a map, as order matters and duplicate entries are possible. Recursive
profiles are not expanded, and show up as special <tt class="docutils literal">profile</tt> options.</p>
<p class="last">The <tt class="docutils literal"><span class="pre">profile-restore</span></tt> field is currently missing if it holds the default
value (either because it was not set, or set explicitly to <tt class="docutils literal">default</tt>),
but in the future it might hold the value <tt class="docutils literal">default</tt>.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">command-list</span></tt></dt>
<dd>The list of input commands. This returns an array of maps, where each map
node represents a command. This map currently only has a single entry:
<tt class="docutils literal">name</tt> for the name of the command. (This property is supposed to be a
replacement for <tt class="docutils literal"><span class="pre">--input-cmdlist</span></tt>. The option dumps some more
information, but it's a valid feature request to extend this property if
needed.)</dd>
<dt><tt class="docutils literal"><span class="pre">input-bindings</span></tt></dt>
<dd><p class="first">The list of current input key bindings. This returns an array of maps,
where each map node represents a binding for a single key/command. This map
has the following entries:</p>
<dl class="docutils">
<dt><tt class="docutils literal">key</tt></dt>
<dd>The key name. This is normalized and may look slightly different from
how it was specified in the source (e.g. in input.conf).</dd>
<dt><tt class="docutils literal">cmd</tt></dt>
<dd>The command mapped to the key. (Currently, this is exactly the same
string as specified in the source, other than stripping whitespace and
comments. It's possible that it will be normalized in the future.)</dd>
<dt><tt class="docutils literal">is_weak</tt></dt>
<dd>If set to true, any existing and active user bindings will take priority.</dd>
<dt><tt class="docutils literal">owner</tt></dt>
<dd>If this entry exists, the name of the script (or similar) which added
this binding.</dd>
<dt><tt class="docutils literal">section</tt></dt>
<dd>Name of the section this binding is part of. This is a rarely used
mechanism. This entry may be removed or change meaning in the future.</dd>
<dt><tt class="docutils literal">priority</tt></dt>
<dd>A number. Bindings with a higher value are preferred over bindings
with a lower value. If the value is negative, this binding is inactive
and will not be triggered by input. Note that mpv does not use this
value internally, and matching of bindings may work slightly differently
in some cases. In addition, this value is dynamic and can change around
at runtime.</dd>
<dt><tt class="docutils literal">comment</tt></dt>
<dd>If available, the comment following the command on the same line. (For
example, the input.conf entry <tt class="docutils literal">f cycle bla # toggle bla</tt> would
result in an entry with <tt class="docutils literal">comment = &quot;toggle bla&quot;, cmd = &quot;cycle bla&quot;</tt>.)</dd>
</dl>
<p class="last">This property is read-only, and change notification is not supported.
Currently, there is no mechanism to change key bindings at runtime, other
than scripts adding or removing their own bindings.</p>
</dd>
</dl>
</div>
<div class="section" id="inconsistencies-between-options-and-properties">
<h2>Inconsistencies between options and properties</h2>
<p>You can access (almost) all options as properties, though there are some
caveats with some properties (due to historical reasons):</p>
<dl class="docutils">
<dt><tt class="docutils literal">vid</tt>, <tt class="docutils literal">aid</tt>, <tt class="docutils literal">sid</tt></dt>
<dd><p class="first">While playback is active, these return the actually active tracks. For
example, if you set <tt class="docutils literal">aid=5</tt>, and the currently played file contains no
audio track with ID 5, the <tt class="docutils literal">aid</tt> property will return <tt class="docutils literal">no</tt>.</p>
<p class="last">Before mpv 0.31.0, you could set existing tracks at runtime only.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">display-fps</span></tt></dt>
<dd>This inconsistent behavior is deprecated. Post-deprecation, the reported
value and the option value are cleanly separated (<tt class="docutils literal"><span class="pre">override-display-fps</span></tt>
for the option value).</dd>
<dt><tt class="docutils literal">vf</tt>, <tt class="docutils literal">af</tt></dt>
<dd><p class="first">If you set the properties during playback, and the filter chain fails to
reinitialize, the option will be set, but the runtime filter chain does not
change. On the other hand, the next video to be played will fail, because
the initial filter chain cannot be created.</p>
<p class="last">This behavior changed in mpv 0.31.0. Before this, the new value was rejected
<em>iff</em> a video (for <tt class="docutils literal">vf</tt>) or an audio (for <tt class="docutils literal">af</tt>) track was active. If
playback was not active, the behavior was the same as the current one.</p>
</dd>
<dt><tt class="docutils literal">playlist</tt></dt>
<dd>The property is read-only and returns the current internal playlist. The
option is for loading playlist during command line parsing. For client API
uses, you should use the <tt class="docutils literal">loadlist</tt> command instead.</dd>
<dt><tt class="docutils literal">profile</tt>, <tt class="docutils literal">include</tt></dt>
<dd>These are write-only, and will perform actions as they are written to,
exactly as if they were used on the mpv CLI commandline. Their only use is
when using libmpv before <tt class="docutils literal">mpv_initialize()</tt>, which in turn is probably
only useful in encoding mode. Normal libmpv users should use other
mechanisms, such as the <tt class="docutils literal"><span class="pre">apply-profile</span></tt> command, and the
<tt class="docutils literal">mpv_load_config_file</tt> API function. Avoid these properties.</dd>
</dl>
</div>
<div class="section" id="property-expansion">
<h2>Property Expansion</h2>
<p>All string arguments to input commands as well as certain options (like
<tt class="docutils literal"><span class="pre">--term-playing-msg</span></tt>) are subject to property expansion. Note that property
expansion does not work in places where e.g. numeric parameters are expected.
(For example, the <tt class="docutils literal">add</tt> command does not do property expansion. The <tt class="docutils literal">set</tt>
command is an exception and not a general rule.)</p>
<div class="admonition admonition-example-for-input-conf">
<p class="first admonition-title">Example for input.conf</p>
<dl class="last docutils">
<dt><tt class="docutils literal">i <span class="pre">show-text</span> &quot;Filename: ${filename}&quot;</tt></dt>
<dd>shows the filename of the current file when pressing the <tt class="docutils literal">i</tt> key</dd>
</dl>
</div>
<p>Whether property expansion is enabled by default depends on which API is used
(see <a class="reference internal" href="#flat-command-syntax">Flat command syntax</a>, <a class="reference internal" href="#commands-specified-as-arrays">Commands specified as arrays</a> and <a class="reference internal" href="#named-arguments">Named
arguments</a>), but it can always be enabled with the <tt class="docutils literal"><span class="pre">expand-properties</span></tt>
prefix or disabled with the <tt class="docutils literal">raw</tt> prefix, as described in <a class="reference internal" href="#input-command-prefixes">Input Command
Prefixes</a>.</p>
<p>The following expansions are supported:</p>
<dl class="docutils">
<dt><tt class="docutils literal">${NAME}</tt></dt>
<dd>Expands to the value of the property <tt class="docutils literal">NAME</tt>. If retrieving the property
fails, expand to an error string. (Use <tt class="docutils literal">${NAME:}</tt> with a trailing
<tt class="docutils literal">:</tt> to expand to an empty string instead.)
If <tt class="docutils literal">NAME</tt> is prefixed with <tt class="docutils literal">=</tt>, expand to the raw value of the property
(see section below).</dd>
<dt><tt class="docutils literal">${NAME:STR}</tt></dt>
<dd>Expands to the value of the property <tt class="docutils literal">NAME</tt>, or <tt class="docutils literal">STR</tt> if the
property cannot be retrieved. <tt class="docutils literal">STR</tt> is expanded recursively.</dd>
<dt><tt class="docutils literal"><span class="pre">${?NAME:STR}</span></tt></dt>
<dd>Expands to <tt class="docutils literal">STR</tt> (recursively) if the property <tt class="docutils literal">NAME</tt> is available.</dd>
<dt><tt class="docutils literal"><span class="pre">${!NAME:STR}</span></tt></dt>
<dd>Expands to <tt class="docutils literal">STR</tt> (recursively) if the property <tt class="docutils literal">NAME</tt> cannot be
retrieved.</dd>
<dt><tt class="docutils literal"><span class="pre">${?NAME==VALUE:STR}</span></tt></dt>
<dd>Expands to <tt class="docutils literal">STR</tt> (recursively) if the property <tt class="docutils literal">NAME</tt> expands to a
string equal to <tt class="docutils literal">VALUE</tt>. You can prefix <tt class="docutils literal">NAME</tt> with <tt class="docutils literal">=</tt> in order to
compare the raw value of a property (see section below). If the property
is unavailable, or other errors happen when retrieving it, the value is
never considered equal.
Note that <tt class="docutils literal">VALUE</tt> can't contain any of the characters <tt class="docutils literal">:</tt> or <tt class="docutils literal">}</tt>.
Also, it is possible that escaping with <tt class="docutils literal">&quot;</tt> or <tt class="docutils literal">%</tt> might be added in
the future, should the need arise.</dd>
<dt><tt class="docutils literal"><span class="pre">${!NAME==VALUE:STR}</span></tt></dt>
<dd>Same as with the <tt class="docutils literal">?</tt> variant, but <tt class="docutils literal">STR</tt> is expanded if the value is
not equal. (Using the same semantics as with <tt class="docutils literal">?</tt>.)</dd>
<dt><tt class="docutils literal">$$</tt></dt>
<dd>Expands to <tt class="docutils literal">$</tt>.</dd>
<dt><tt class="docutils literal">$}</tt></dt>
<dd>Expands to <tt class="docutils literal">}</tt>. (To produce this character inside recursive
expansion.)</dd>
<dt><tt class="docutils literal">$&gt;</tt></dt>
<dd>Disable property expansion and special handling of <tt class="docutils literal">$</tt> for the rest
of the string.</dd>
</dl>
<p>In places where property expansion is allowed, C-style escapes are often
accepted as well. Example:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal">\n</tt> becomes a newline character</li>
<li><tt class="docutils literal">\\</tt> expands to <tt class="docutils literal">\</tt></li>
</ul>
</blockquote>
</div>
<div class="section" id="raw-and-formatted-properties">
<h2>Raw and Formatted Properties</h2>
<p>Normally, properties are formatted as human-readable text, meant to be
displayed on OSD or on the terminal. It is possible to retrieve an unformatted
(raw) value from a property by prefixing its name with <tt class="docutils literal">=</tt>. These raw values
can be parsed by other programs and follow the same conventions as the options
associated with the properties. Additionally, there is a <tt class="docutils literal">&gt;</tt> prefix to format
human-readable text, with fixed precision for floating-point values. This is
useful for printing values where a constant width is important.</p>
<div class="admonition admonition-examples">
<p class="first admonition-title">Examples</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">${time-pos}</span></tt> expands to <tt class="docutils literal">00:14:23</tt> (if playback position is at 14
minutes 23 seconds)</li>
<li><tt class="docutils literal"><span class="pre">${=time-pos}</span></tt> expands to <tt class="docutils literal">863.4</tt> (same time, plus 400 milliseconds -
milliseconds are normally not shown in the formatted case)</li>
<li><tt class="docutils literal">${avsync}</tt> expands to <tt class="docutils literal">+0.003</tt></li>
<li><tt class="docutils literal"><span class="pre">${&gt;avsync}</span></tt> expands to <tt class="docutils literal">+0.0030</tt></li>
<li><tt class="docutils literal"><span class="pre">${=avsync}</span></tt> expands to <tt class="docutils literal">0.003028</tt></li>
</ul>
</div>
<p>Sometimes, the difference in amount of information carried by raw and formatted
property values can be rather big. In some cases, raw values have more
information, like higher precision than seconds with <tt class="docutils literal"><span class="pre">time-pos</span></tt>. Sometimes
it is the other way around, e.g. <tt class="docutils literal">aid</tt> shows track title and language in the
formatted case, but only the track number if it is raw.</p>
</div>
</div>
<div class="section" id="on-screen-controller">
<h1>ON SCREEN CONTROLLER</h1>
<p>The On Screen Controller (short: OSC) is a minimal GUI integrated with mpv to
offer basic mouse-controllability. It is intended to make interaction easier
for new users and to enable precise and direct seeking.</p>
<p>The OSC is enabled by default if mpv was compiled with Lua support. It can be
disabled entirely using the <tt class="docutils literal"><span class="pre">--osc=no</span></tt> option.</p>
<div class="section" id="using-the-osc">
<h2>Using the OSC</h2>
<p>By default, the OSC will show up whenever the mouse is moved inside the
player window and will hide if the mouse is not moved outside the OSC for
0.5 seconds or if the mouse leaves the window.</p>
<div class="section" id="the-interface">
<h3>The Interface</h3>
<pre class="literal-block">
+---------+----------+------------------------------------------+----------+
| pl prev | pl next  |  title                                   |    cache |
+------+--+---+------+---------+-----------+------+-------+-----+-----+----+
| play | skip | skip | time    |  seekbar  | time | audio | sub | vol | fs |
|      | back | frwd | elapsed |           | left |       |     |     |    |
+------+------+------+---------+-----------+------+-------+-----+-----+----+
</pre>
<dl class="docutils">
<dt>pl prev</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>play previous file in playlist</td>
</tr>
<tr><td>right-click</td>
<td>show playlist</td>
</tr>
<tr><td>shift+L-click</td>
<td>show playlist</td>
</tr>
</tbody>
</table>
</dd>
<dt>pl next</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>play next file in playlist</td>
</tr>
<tr><td>right-click</td>
<td>show playlist</td>
</tr>
<tr><td>shift+L-click</td>
<td>show playlist</td>
</tr>
</tbody>
</table>
</dd>
<dt>title</dt>
<dd><div class="first line-block">
<div class="line">Displays current media-title, filename, custom title, or target chapter
name while hovering the seekbar.</div>
</div>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>show playlist position and length and full title</td>
</tr>
<tr><td>right-click</td>
<td>show filename</td>
</tr>
</tbody>
</table>
</dd>
<dt>cache</dt>
<dd><div class="first last line-block">
<div class="line">Shows current cache fill status</div>
</div>
</dd>
<dt>play</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>toggle play/pause</td>
</tr>
</tbody>
</table>
</dd>
<dt>skip back</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>go to beginning of chapter / previous chapter</td>
</tr>
<tr><td>right-click</td>
<td>show chapters</td>
</tr>
<tr><td>shift+L-click</td>
<td>show chapters</td>
</tr>
</tbody>
</table>
</dd>
<dt>skip frwd</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>go to next chapter</td>
</tr>
<tr><td>right-click</td>
<td>show chapters</td>
</tr>
<tr><td>shift+L-click</td>
<td>show chapters</td>
</tr>
</tbody>
</table>
</dd>
<dt>time elapsed</dt>
<dd><div class="first line-block">
<div class="line">Shows current playback position timestamp</div>
</div>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>toggle displaying timecodes with milliseconds</td>
</tr>
</tbody>
</table>
</dd>
<dt>seekbar</dt>
<dd><div class="first line-block">
<div class="line">Indicates current playback position and position of chapters</div>
</div>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>seek to position</td>
</tr>
<tr><td>mouse wheel</td>
<td>seek forward/backward</td>
</tr>
</tbody>
</table>
</dd>
<dt>time left</dt>
<dd><div class="first line-block">
<div class="line">Shows remaining playback time timestamp</div>
</div>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>toggle between total and remaining time</td>
</tr>
</tbody>
</table>
</dd>
<dt>audio and sub</dt>
<dd><div class="first line-block">
<div class="line">Displays selected track and amount of available tracks</div>
</div>
<table border="1" class="last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>cycle audio/sub tracks forward</td>
</tr>
<tr><td>right-click</td>
<td>cycle audio/sub tracks backwards</td>
</tr>
<tr><td>shift+L-click</td>
<td>show available audio/sub tracks</td>
</tr>
<tr><td>mouse wheel</td>
<td>cycle audio/sub tracks forward/backwards</td>
</tr>
</tbody>
</table>
</dd>
<dt>vol</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>toggle mute</td>
</tr>
<tr><td>mouse wheel</td>
<td>volume up/down</td>
</tr>
</tbody>
</table>
</dd>
<dt>fs</dt>
<dd><table border="1" class="first last docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<tbody valign="top">
<tr><td>left-click</td>
<td>toggle fullscreen</td>
</tr>
</tbody>
</table>
</dd>
</dl>
</div>
<div class="section" id="key-bindings">
<h3>Key Bindings</h3>
<p>These key bindings are active by default if nothing else is already bound to
these keys. In case of collision, the function needs to be bound to a
different key. See the <a class="reference internal" href="#script-commands">Script Commands</a> section.</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr><td>del</td>
<td>Cycles visibility between never / auto (mouse-move) / always</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="configuration">
<h2>Configuration</h2>
<p>This script can be customized through a config file <tt class="docutils literal"><span class="pre">script-opts/osc.conf</span></tt>
placed in mpv's user directory and through the <tt class="docutils literal"><span class="pre">--script-opts</span></tt> command-line
option. The configuration syntax is described in <a class="reference internal" href="#mp-options-functions">mp.options functions</a>.</p>
<div class="section" id="command-line-syntax">
<h3>Command-line Syntax</h3>
<p>To avoid collisions with other scripts, all options need to be prefixed with
<tt class="docutils literal">osc-</tt>.</p>
<p>Example:</p>
<pre class="literal-block">
--script-opts=osc-optionA=value1,osc-optionB=value2
</pre>
</div>
<div class="section" id="configurable-options">
<h3>Configurable Options</h3>
<dl class="docutils">
<dt><tt class="docutils literal">layout</tt></dt>
<dd><p class="first">Default: bottombar</p>
<p class="last">The layout for the OSC. Currently available are: box, slimbox,
bottombar and topbar. Default pre-0.21.0 was 'box'.</p>
</dd>
<dt><tt class="docutils literal">seekbarstyle</tt></dt>
<dd><p class="first">Default: bar</p>
<p class="last">Sets the style of the playback position marker and overall shape
of the seekbar: <tt class="docutils literal">bar</tt>, <tt class="docutils literal">diamond</tt> or <tt class="docutils literal">knob</tt>.</p>
</dd>
<dt><tt class="docutils literal">seekbarhandlesize</tt></dt>
<dd><p class="first">Default: 0.6</p>
<p class="last">Size ratio of the seek handle if <tt class="docutils literal">seekbarstyle</tt> is set to <tt class="docutils literal">diamond</tt>
or <tt class="docutils literal">knob</tt>. This is relative to the full height of the seekbar.</p>
</dd>
<dt><tt class="docutils literal">seekbarkeyframes</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Controls the mode used to seek when dragging the seekbar. If set to <tt class="docutils literal">yes</tt>,
default seeking mode is used (usually keyframes, but player defaults and
heuristics can change it to exact). If set to <tt class="docutils literal">no</tt>, exact seeking on
mouse drags will be used instead. Keyframes are preferred, but exact seeks
may be useful in cases where keyframes cannot be found. Note that using
exact seeks can potentially make mouse dragging much slower.</p>
</dd>
<dt><tt class="docutils literal">seekrangestyle</tt></dt>
<dd><p class="first">Default: inverted</p>
<p class="last">Display seekable ranges on the seekbar. <tt class="docutils literal">bar</tt> shows them on the full
height of the bar, <tt class="docutils literal">line</tt> as a thick line and <tt class="docutils literal">inverted</tt> as a thin
line that is inverted over playback position markers. <tt class="docutils literal">none</tt> will hide
them. Additionally, <tt class="docutils literal">slider</tt> will show a permanent handle inside the seekbar
with cached ranges marked inside. Note that these will look differently
based on the seekbarstyle option. Also, <tt class="docutils literal">slider</tt> does not work with
<tt class="docutils literal">seekbarstyle</tt> set to <tt class="docutils literal">bar</tt>.</p>
</dd>
<dt><tt class="docutils literal">seekrangeseparate</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Controls whether to show line-style seekable ranges on top of the
seekbar or separately if <tt class="docutils literal">seekbarstyle</tt> is set to <tt class="docutils literal">bar</tt>.</p>
</dd>
<dt><tt class="docutils literal">seekrangealpha</tt></dt>
<dd><p class="first">Default: 200</p>
<p class="last">Alpha of the seekable ranges, 0 (opaque) to 255 (fully transparent).</p>
</dd>
<dt><tt class="docutils literal">scrollcontrols</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">By default, going up or down with the mouse wheel can trigger certain
actions (such as seeking) if the mouse is hovering an OSC element.
Set to <tt class="docutils literal">no</tt> to disable any special mouse wheel behavior.</p>
</dd>
<dt><tt class="docutils literal">deadzonesize</tt></dt>
<dd><p class="first">Default: 0.5</p>
<p class="last">Size of the deadzone. The deadzone is an area that makes the mouse act
like leaving the window. Movement there won't make the OSC show up and
it will hide immediately if the mouse enters it. The deadzone starts
at the window border opposite to the OSC and the size controls how much
of the window it will span. Values between 0.0 and 1.0, where 0 means the
OSC will always popup with mouse movement in the window, and 1 means the
OSC will only show up when the mouse hovers it. Default pre-0.21.0 was 0.</p>
</dd>
<dt><tt class="docutils literal">minmousemove</tt></dt>
<dd><p class="first">Default: 0</p>
<p class="last">Minimum amount of pixels the mouse has to move between ticks to make
the OSC show up. Default pre-0.21.0 was 3.</p>
</dd>
<dt><tt class="docutils literal">showwindowed</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Enable the OSC when windowed</p>
</dd>
<dt><tt class="docutils literal">showfullscreen</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Enable the OSC when fullscreen</p>
</dd>
<dt><tt class="docutils literal">idlescreen</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Show the mpv logo and message when idle</p>
</dd>
<dt><tt class="docutils literal">scalewindowed</tt></dt>
<dd><p class="first">Default: 1.0</p>
<p class="last">Scale factor of the OSC when windowed.</p>
</dd>
<dt><tt class="docutils literal">scalefullscreen</tt></dt>
<dd><p class="first">Default: 1.0</p>
<p class="last">Scale factor of the OSC when fullscreen</p>
</dd>
<dt><tt class="docutils literal">vidscale</tt></dt>
<dd><p class="first">Default: auto</p>
<p class="last">Scale the OSC with the video.
<tt class="docutils literal">no</tt> tries to keep the OSC size constant as much as the window size allows.
<tt class="docutils literal">auto</tt> scales the OSC with the OSD, which is scaled with the window or kept at a
constant size, depending on the <tt class="docutils literal"><span class="pre">--osd-scale-by-window</span></tt> option.</p>
</dd>
<dt><tt class="docutils literal">valign</tt></dt>
<dd><p class="first">Default: 0.8</p>
<p class="last">Vertical alignment, -1 (top) to 1 (bottom)</p>
</dd>
<dt><tt class="docutils literal">halign</tt></dt>
<dd><p class="first">Default: 0.0</p>
<p class="last">Horizontal alignment, -1 (left) to 1 (right)</p>
</dd>
<dt><tt class="docutils literal">barmargin</tt></dt>
<dd><p class="first">Default: 0</p>
<p class="last">Margin from bottom (bottombar) or top (topbar), in pixels</p>
</dd>
<dt><tt class="docutils literal">boxalpha</tt></dt>
<dd><p class="first">Default: 80</p>
<p class="last">Alpha of the background box, 0 (opaque) to 255 (fully transparent)</p>
</dd>
<dt><tt class="docutils literal">hidetimeout</tt></dt>
<dd><p class="first">Default: 500</p>
<p class="last">Duration in ms until the OSC hides if no mouse movement, must not be
negative</p>
</dd>
<dt><tt class="docutils literal">fadeduration</tt></dt>
<dd><p class="first">Default: 200</p>
<p class="last">Duration of fade out in ms, 0 = no fade</p>
</dd>
<dt><tt class="docutils literal">title</tt></dt>
<dd><p class="first">Default: ${media-title}</p>
<p class="last">String that supports property expansion that will be displayed as
OSC title.
ASS tags are escaped and newlines are converted to spaces.</p>
</dd>
<dt><tt class="docutils literal">tooltipborder</tt></dt>
<dd><p class="first">Default: 1</p>
<p class="last">Size of the tooltip outline when using bottombar or topbar layouts</p>
</dd>
<dt><tt class="docutils literal">timetotal</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Show total time instead of time remaining</p>
</dd>
<dt><tt class="docutils literal">remaining_playtime</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Whether the time-remaining display takes speed into account.
<tt class="docutils literal">yes</tt> - how much playback time remains at the current speed.
<tt class="docutils literal">no</tt> - how much video-time remains.</p>
</dd>
<dt><tt class="docutils literal">timems</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Display timecodes with milliseconds</p>
</dd>
<dt><tt class="docutils literal">tcspace</tt></dt>
<dd><p class="first">Default: 100 (allowed: 50-200)</p>
<p class="last">Adjust space reserved for timecodes (current time and time remaining) in
the <tt class="docutils literal">bottombar</tt> and <tt class="docutils literal">topbar</tt> layouts. The timecode width depends on the
font, and with some fonts the spacing near the timecodes becomes too small.
Use values above 100 to increase that spacing, or below 100 to decrease it.</p>
</dd>
<dt><tt class="docutils literal">visibility</tt></dt>
<dd><p class="first">Default: auto (auto hide/show on mouse move)</p>
<p class="last">Also supports <tt class="docutils literal">never</tt> and <tt class="docutils literal">always</tt></p>
</dd>
<dt><tt class="docutils literal">boxmaxchars</tt></dt>
<dd><p class="first">Default: 80</p>
<p class="last">Max chars for the osc title at the box layout. mpv does not measure the
text width on screen and so it needs to limit it by number of chars. The
default is conservative to allow wide fonts to be used without overflow.
However, with many common fonts a bigger number can be used. YMMV.</p>
</dd>
<dt><tt class="docutils literal">boxvideo</tt></dt>
<dd><p class="first">Default: no</p>
<p>Whether to overlay the osc over the video (<tt class="docutils literal">no</tt>), or to box the video
within the areas not covered by the osc (<tt class="docutils literal">yes</tt>). If this option is set,
the osc may overwrite the <tt class="docutils literal"><span class="pre">--video-margin-ratio-*</span></tt> options, even if the
user has set them. (It will not overwrite them if all of them are set to
default values.) Additionally, <tt class="docutils literal">visibility</tt> must be set to <tt class="docutils literal">always</tt>.
Otherwise, this option does nothing.</p>
<p>Currently, this is supported for the <tt class="docutils literal">bottombar</tt> and <tt class="docutils literal">topbar</tt> layout
only. The other layouts do not change if this option is set. Separately,
if window controls are present (see below), they will be affected
regardless of which osc layout is in use.</p>
<p>The border is static and appears even if the OSC is configured to appear
only on mouse interaction. If the OSC is invisible, the border is simply
filled with the background color (black by default).</p>
<p>This currently still makes the OSC overlap with subtitles (if the
<tt class="docutils literal"><span class="pre">--sub-use-margins</span></tt> option is set to <tt class="docutils literal">yes</tt>, the default). This may be
fixed later.</p>
<p class="last">This does not work correctly with video outputs like <tt class="docutils literal"><span class="pre">--vo=xv</span></tt>, which
render OSD into the unscaled video.</p>
</dd>
<dt><tt class="docutils literal">windowcontrols</tt></dt>
<dd><p class="first">Default: auto (Show window controls if there is no window border)</p>
<p>Whether to show window management controls over the video, and if so,
which side of the window to place them. This may be desirable when the
window has no decorations, either because they have been explicitly
disabled (<tt class="docutils literal">border=no</tt>) or because the current platform doesn't support
them (eg: gnome-shell with wayland).</p>
<p class="last">The set of window controls is fixed, offering <tt class="docutils literal">minimize</tt>, <tt class="docutils literal">maximize</tt>,
and <tt class="docutils literal">quit</tt>. Not all platforms implement <tt class="docutils literal">minimize</tt> and <tt class="docutils literal">maximize</tt>,
but <tt class="docutils literal">quit</tt> will always work.</p>
</dd>
<dt><tt class="docutils literal">windowcontrols_alignment</tt></dt>
<dd><p class="first">Default: right</p>
<p>If window controls are shown, indicates which side should they be aligned
to.</p>
<p class="last">Supports <tt class="docutils literal">left</tt> and <tt class="docutils literal">right</tt> which will place the controls on those
respective sides.</p>
</dd>
<dt><tt class="docutils literal">windowcontrols_title</tt></dt>
<dd><p class="first">Default: ${media-title}</p>
<p class="last">String that supports property expansion that will be displayed as the
windowcontrols title.
ASS tags are escaped, and newlines and trailing slashes are stripped.</p>
</dd>
<dt><tt class="docutils literal">greenandgrumpy</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Set to <tt class="docutils literal">yes</tt> to reduce festivity (i.e. disable santa hat in December.)</p>
</dd>
<dt><tt class="docutils literal">livemarkers</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Update chapter markers positions on duration changes, e.g. live streams.
The updates are unoptimized - consider disabling it on very low-end systems.</p>
</dd>
<dt><tt class="docutils literal">chapters_osd</tt>, <tt class="docutils literal">playlist_osd</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Whether to display the chapters/playlist at the OSD when left-clicking the
next/previous OSC buttons, respectively.</p>
</dd>
<dt><tt class="docutils literal">chapter_fmt</tt></dt>
<dd><p class="first">Default: <tt class="docutils literal">Chapter: %s</tt></p>
<p class="last">Template for the chapter-name display when hovering the seekbar.
Use <tt class="docutils literal">no</tt> to disable chapter display on hover. Otherwise it's a lua
<tt class="docutils literal">string.format</tt> template and <tt class="docutils literal">%s</tt> is replaced with the actual name.</p>
</dd>
<dt><tt class="docutils literal">unicodeminus</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Use a Unicode minus sign instead of an ASCII hyphen when displaying
the remaining playback time.</p>
</dd>
<dt><tt class="docutils literal">background_color</tt></dt>
<dd><p class="first">Default: #000000</p>
<p class="last">Sets the background color of the OSC.</p>
</dd>
<dt><tt class="docutils literal">timecode_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the color of the timecode and seekbar, of the OSC.</p>
</dd>
<dt><tt class="docutils literal">title_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the color of the video title. Formatted as #RRGGBB.</p>
</dd>
<dt><tt class="docutils literal">time_pos_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the color of the timecode at hover position in the seekbar.</p>
</dd>
<dt><tt class="docutils literal">time_pos_outline_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the color of the timecode's outline at hover position in the seekbar.
Also affects the timecode in the slimbox layout.</p>
</dd>
<dt><tt class="docutils literal">buttons_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the colors of the big buttons.</p>
</dd>
<dt><tt class="docutils literal">top_buttons_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the colors of the top buttons.</p>
</dd>
<dt><tt class="docutils literal">small_buttonsL_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the colors of the small buttons on the left in the box layout.</p>
</dd>
<dt><tt class="docutils literal">small_buttonsR_color</tt></dt>
<dd><p class="first">Default: #FFFFFF</p>
<p class="last">Sets the colors of the small buttons on the right in the box layout.</p>
</dd>
<dt><tt class="docutils literal">held_element_color</tt></dt>
<dd><p class="first">Default: #999999</p>
<p class="last">Sets the colors of the elements that are being pressed or held down.</p>
</dd>
<dt><tt class="docutils literal">tick_delay</tt></dt>
<dd><p class="first">Default: 1/60</p>
<p>Sets the minimum interval between OSC redraws in seconds. This can be
decreased on fast systems to make OSC rendering smoother.</p>
<p class="last">Ignored if <tt class="docutils literal">tick_delay_follow_display_fps</tt> is set to yes and the VO
supports the <tt class="docutils literal"><span class="pre">display-fps</span></tt> property.</p>
</dd>
<dt><tt class="docutils literal">tick_delay_follow_display_fps</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Use display fps to calculate the interval between OSC redraws.</p>
</dd>
</dl>
</div>
<div class="section" id="script-commands">
<h3>Script Commands</h3>
<p>The OSC script listens to certain script commands. These commands can bound
in <tt class="docutils literal">input.conf</tt>, or sent by other scripts.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">osc-message</span></tt></dt>
<dd>Show a message on screen using the OSC. First argument is the message,
second the duration in seconds.</dd>
<dt><tt class="docutils literal"><span class="pre">osc-visibility</span></tt></dt>
<dd>Controls visibility mode <tt class="docutils literal">never</tt> / <tt class="docutils literal">auto</tt> (on mouse move) / <tt class="docutils literal">always</tt>
and also <tt class="docutils literal">cycle</tt> to cycle between the modes.</dd>
<dt><tt class="docutils literal"><span class="pre">osc-show</span></tt></dt>
<dd>Triggers the OSC to show up, just as if user moved mouse.</dd>
</dl>
<p>Example</p>
<p>You could put this into <tt class="docutils literal">input.conf</tt> to hide the OSC with the <tt class="docutils literal">a</tt> key and
to set auto mode (the default) with <tt class="docutils literal">b</tt>:</p>
<pre class="literal-block">
a script-message osc-visibility never
b script-message osc-visibility auto
</pre>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">osc-idlescreen</span></tt></dt>
<dd>Controls the visibility of the mpv logo on idle. Valid arguments are <tt class="docutils literal">yes</tt>,
<tt class="docutils literal">no</tt>, and <tt class="docutils literal">cycle</tt> to toggle between yes and no.</dd>
<dt><tt class="docutils literal"><span class="pre">osc-playlist</span></tt>, <tt class="docutils literal"><span class="pre">osc-chapterlist</span></tt>, <tt class="docutils literal"><span class="pre">osc-tracklist</span></tt></dt>
<dd>Shows a limited view of the respective type of list using the OSC. First
argument is duration in seconds.</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="stats">
<h1>STATS</h1>
<p>This builtin script displays information and statistics for the currently
played file. It is enabled by default if mpv was compiled with Lua support.
It can be disabled entirely using the <tt class="docutils literal"><span class="pre">--load-stats-overlay=no</span></tt> option.</p>
<div class="section" id="id1">
<h2>Usage</h2>
<p>The following key bindings are active by default unless something else is
already bound to them:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr><td>i</td>
<td>Show stats for a fixed duration</td>
</tr>
<tr><td>I</td>
<td>Toggle stats (shown until toggled again)</td>
</tr>
</tbody>
</table>
<p>While the stats are visible on screen the following key bindings are active,
regardless of existing bindings. They allow you to switch between <em>pages</em> of
stats:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<tbody valign="top">
<tr><td>1</td>
<td>Show usual stats</td>
</tr>
<tr><td>2</td>
<td>Show frame timings (scroll)</td>
</tr>
<tr><td>3</td>
<td>Input cache stats</td>
</tr>
<tr><td>4</td>
<td>Active key bindings (scroll)</td>
</tr>
<tr><td>5</td>
<td>Selected Tracks Info (scroll)</td>
</tr>
<tr><td>0</td>
<td>Internal stuff (scroll)</td>
</tr>
</tbody>
</table>
<p>On pages which support scroll, these key bindings are also active:</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr><td>UP</td>
<td>Scroll one line up</td>
</tr>
<tr><td>DOWN</td>
<td>Scroll one line down</td>
</tr>
</tbody>
</table>
<p>Page 4 also binds <tt class="docutils literal">/</tt> to search for input bindings by typing part of a binding
or command.</p>
</div>
<div class="section" id="id2">
<h2>Configuration</h2>
<p>This script can be customized through a config file <tt class="docutils literal"><span class="pre">script-opts/stats.conf</span></tt>
placed in mpv's user directory and through the <tt class="docutils literal"><span class="pre">--script-opts</span></tt> command-line
option. The configuration syntax is described in <a class="reference internal" href="#mp-options-functions">mp.options functions</a>.</p>
<div class="section" id="id3">
<h3>Configurable Options</h3>
<dl class="docutils">
<dt><tt class="docutils literal">key_page_1</tt></dt>
<dd>Default: 1</dd>
<dt><tt class="docutils literal">key_page_2</tt></dt>
<dd>Default: 2</dd>
<dt><tt class="docutils literal">key_page_3</tt></dt>
<dd>Default: 3</dd>
<dt><tt class="docutils literal">key_page_4</tt></dt>
<dd>Default: 4</dd>
<dt><tt class="docutils literal">key_page_5</tt></dt>
<dd>Default: 5</dd>
<dt><tt class="docutils literal">key_page_0</tt></dt>
<dd><p class="first">Default: 0</p>
<p class="last">Key bindings for page switching while stats are displayed.</p>
</dd>
<dt><tt class="docutils literal">key_scroll_up</tt></dt>
<dd>Default: UP</dd>
<dt><tt class="docutils literal">key_scroll_down</tt></dt>
<dd>Default: DOWN</dd>
<dt><tt class="docutils literal">key_scroll_search</tt></dt>
<dd>Default: /</dd>
<dt><tt class="docutils literal">scroll_lines</tt></dt>
<dd><p class="first">Default: 1</p>
<p class="last">Scroll key bindings and number of lines to scroll on pages which support it.</p>
</dd>
<dt><tt class="docutils literal">duration</tt></dt>
<dd><p class="first">Default: 4</p>
<p class="last">How long the stats are shown in seconds (oneshot).</p>
</dd>
<dt><tt class="docutils literal">redraw_delay</tt></dt>
<dd><p class="first">Default: 1</p>
<p class="last">How long it takes to refresh the displayed stats in seconds (toggling).</p>
</dd>
<dt><tt class="docutils literal">persistent_overlay</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">When <cite>no</cite>, other scripts printing text to the screen can overwrite the
displayed stats. When <cite>yes</cite>, displayed stats are persistently shown for the
respective duration. This can result in overlapping text when multiple
scripts decide to print text at the same time.</p>
</dd>
<dt><tt class="docutils literal">file_tag_max_length</tt></dt>
<dd><p class="first">Default: 128</p>
<p class="last">Only show file tags shorter than this length, in bytes.</p>
</dd>
<dt><tt class="docutils literal">file_tag_max_count</tt></dt>
<dd><p class="first">Default: 16</p>
<p class="last">Only show the first specified amount of file tags.</p>
</dd>
<dt><tt class="docutils literal">term_width_limit</tt></dt>
<dd><p class="first">Default: -1</p>
<p class="last">Sets the terminal width.
A value of 0 means the width is infinite, -1 means it's automatic.</p>
</dd>
<dt><tt class="docutils literal">term_height_limit</tt></dt>
<dd><p class="first">Default: -1</p>
<p class="last">Sets the terminal height.
A value of 0 means the height is infinite, -1 means it's automatic.</p>
</dd>
<dt><tt class="docutils literal">plot_perfdata</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Show graphs for performance data (page 2).</p>
</dd>
<dt><tt class="docutils literal">plot_vsync_ratio</tt></dt>
<dd>Default: yes</dd>
<dt><tt class="docutils literal">plot_vsync_jitter</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Show graphs for vsync and jitter values (page 1). Only when toggled.</p>
</dd>
<dt><tt class="docutils literal">plot_tonemapping_lut</tt></dt>
<dd><p class="first">Default: no</p>
<p class="last">Enable tone-mapping LUT visualization automatically. Only when toggled.</p>
</dd>
<dt><tt class="docutils literal">flush_graph_data</tt></dt>
<dd><p class="first">Default: yes</p>
<p class="last">Clear data buffers used for drawing graphs when toggling.</p>
</dd>
<dt><tt class="docutils literal">font</tt></dt>
<dd><p class="first">Default: same as <tt class="docutils literal"><span class="pre">osd-font</span></tt></p>
<p class="last">Font name. Should support as many font weights as possible for optimal
visual experience.</p>
</dd>
<dt><tt class="docutils literal">font_mono</tt></dt>
<dd><p class="first">Default: monospace</p>
<p class="last">Font name for parts where monospaced characters are necessary to align
text. Currently, monospaced digits are sufficient.</p>
</dd>
<dt><tt class="docutils literal">font_size</tt></dt>
<dd><p class="first">Default: 8</p>
<p class="last">Font size used to render text.</p>
</dd>
<dt><tt class="docutils literal">font_color</tt></dt>
<dd><p class="first">Default: same as <tt class="docutils literal"><span class="pre">osd-color</span></tt></p>
<p class="last">Color of the text.</p>
</dd>
<dt><tt class="docutils literal">border_size</tt></dt>
<dd><p class="first">Default: 0.8</p>
<p class="last">Size of border drawn around the font.</p>
</dd>
<dt><tt class="docutils literal">border_color</tt></dt>
<dd><p class="first">Default: same as <tt class="docutils literal"><span class="pre">osd-border-color</span></tt></p>
<p class="last">Color of the text border.</p>
</dd>
<dt><tt class="docutils literal">shadow_x_offset</tt></dt>
<dd><p class="first">Default: 0</p>
<p class="last">The horizontal distance from the text to position the shadow at.</p>
</dd>
<dt><tt class="docutils literal">shadow_y_offset</tt></dt>
<dd><p class="first">Default: 0</p>
<p class="last">The vertical distance from the text to position the shadow at.</p>
</dd>
<dt><tt class="docutils literal">shadow_color</tt></dt>
<dd><p class="first">Default: same as <tt class="docutils literal"><span class="pre">osd-shadow-color</span></tt></p>
<p class="last">Color of the text shadow.</p>
</dd>
<dt><tt class="docutils literal">alpha</tt></dt>
<dd><p class="first">Default: 11</p>
<p class="last">Transparency of text when <tt class="docutils literal">font_color</tt> is specified, of text borders when
<tt class="docutils literal">border_color</tt> is specified, and of text shadows when <tt class="docutils literal">shadow_color</tt> is
specified.</p>
</dd>
<dt><tt class="docutils literal">plot_bg_border_color</tt></dt>
<dd><p class="first">Default: 0000FF</p>
<p class="last">Border color used for drawing graphs.</p>
</dd>
<dt><tt class="docutils literal">plot_bg_border_width</tt></dt>
<dd><p class="first">Default: 0.5</p>
<p class="last">Border width used for drawing graphs.</p>
</dd>
<dt><tt class="docutils literal">plot_bg_color</tt></dt>
<dd><p class="first">Default: 262626</p>
<p class="last">Background color used for drawing graphs.</p>
</dd>
<dt><tt class="docutils literal">plot_color</tt></dt>
<dd><p class="first">Default: FFFFFF</p>
<p class="last">Color used for drawing graphs.</p>
</dd>
<dt><tt class="docutils literal">vidscale</tt></dt>
<dd><p class="first">Default: auto</p>
<p class="last">Scale the text and graphs with the video.
<tt class="docutils literal">no</tt> tries to keep the sizes constant.
<tt class="docutils literal">auto</tt> scales the text and graphs with the OSD, which is scaled with the
window or kept at a constant size, depending on the <tt class="docutils literal"><span class="pre">--osd-scale-by-window</span></tt> option.</p>
</dd>
</dl>
<p>Note: colors are given as hexadecimal values and use ASS tag order: BBGGRR
(blue green red).</p>
</div>
<div class="section" id="different-key-bindings">
<h3>Different key bindings</h3>
<p>Additional keys can be configured in <tt class="docutils literal">input.conf</tt> to display the stats:</p>
<pre class="literal-block">
e script-binding stats/display-stats
E script-binding stats/display-stats-toggle
</pre>
<p>And to display a certain page directly:</p>
<pre class="literal-block">
i script-binding stats/display-page-1
h script-binding stats/display-page-4-toggle
</pre>
</div>
<div class="section" id="active-key-bindings-page">
<h3>Active key bindings page</h3>
<p>Lists the active key bindings and the commands they're bound to, excluding the
interactive keys of the stats script itself. See also <tt class="docutils literal"><span class="pre">--input-test</span></tt> for more
detailed view of each binding.</p>
<p>The keys are grouped automatically using a simple analysis of the command
string, and one should not expect documentation-level grouping accuracy,
however, it should still be reasonably useful.</p>
<p>Using <tt class="docutils literal"><span class="pre">--idle</span> <span class="pre">--script-opts=stats-bindlist=yes</span></tt> will print the list to the
terminal and quit immediately. By default long lines are shortened to 79 chars,
and terminal escape sequences are enabled. A different length limit can be
set by changing <tt class="docutils literal">yes</tt> to a number (at least 40), and escape sequences can be
disabled by adding <tt class="docutils literal">-</tt> before the value, e.g. <tt class="docutils literal"><span class="pre">...=-yes</span></tt> or <tt class="docutils literal"><span class="pre">...=-120</span></tt>.</p>
<p>Like with <tt class="docutils literal"><span class="pre">--input-test</span></tt>, the list includes bindings from <tt class="docutils literal">input.conf</tt> and
from user scripts. Use <tt class="docutils literal"><span class="pre">--no-config</span></tt> to list only built-in bindings.</p>
</div>
<div class="section" id="internal-stuff-page">
<h3>Internal stuff page</h3>
<p>Most entries shown on this page have rather vague meaning. Likely none of this
is useful for you. Don't attempt to use it. Forget its existence.</p>
<p>Selecting this for the first time will start collecting some internal
performance data. That means performance will be slightly lower than normal for
the rest of the time the player is running (even if the stats page is closed).
Note that the stats page itself uses a lot of CPU and even GPU resources, and
may have a heavy impact on performance.</p>
<p>The displayed information is accumulated over the redraw delay (shown as
<tt class="docutils literal"><span class="pre">poll-time</span></tt> field).</p>
<p>This adds entries for each Lua script. If there are too many scripts running,
parts of the list will simply be out of the screen, but it can be scrolled.</p>
<p>If the underlying platform does not support pthread per thread times, the
displayed times will be 0 or something random (I suspect that at time of this
writing, only Linux provides the correct via pthread APIs for per thread times).</p>
<p>Most entries are added lazily and only during data collection, which is why
entries may pop up randomly after some time. It's also why the memory usage
entries for scripts that have been inactive since the start of data collection
are missing.</p>
<p>Memory usage is approximate and does not reflect internal fragmentation.</p>
<p>JS scripts memory reporting is disabled by default because collecting the data
at the JS side has an overhead and will increase memory usage. It can be
enabled by setting the <tt class="docutils literal"><span class="pre">--js-memory-report</span></tt> option before starting mpv.</p>
<p>If entries have <tt class="docutils literal">/time</tt> and <tt class="docutils literal">/cpu</tt> variants, the former gives the real time
(monotonic clock), while the latter the thread CPU time (only if the
corresponding pthread API works and is supported).</p>
</div>
</div>
</div>
<div class="section" id="console">
<h1>CONSOLE</h1>
<p>The console is a REPL for mpv input commands. It is displayed on the video
window. It also shows log messages. It can be disabled entirely using the
<tt class="docutils literal"><span class="pre">--load-osd-console=no</span></tt> option.</p>
<div class="section" id="keybindings">
<h2>Keybindings</h2>
<dl class="docutils">
<dt>`</dt>
<dd>Show the console.</dd>
<dt>ESC and Ctrl+[</dt>
<dd>Hide the console.</dd>
<dt>ENTER, Ctrl+j and Ctrl+m</dt>
<dd>Run the typed command.</dd>
<dt>Shift+ENTER</dt>
<dd>Type a literal newline character.</dd>
<dt>LEFT and Ctrl+b</dt>
<dd>Move the cursor to the previous character.</dd>
<dt>RIGHT and Ctrl+f</dt>
<dd>Move the cursor to the next character.</dd>
<dt>Ctrl+LEFT and Alt+b</dt>
<dd>Move the cursor to the beginning of the current word, or if between words,
to the beginning of the previous word.</dd>
<dt>Ctrl+RIGHT and Alt+f</dt>
<dd>Move the cursor to the end of the current word, or if between words, to the
end of the next word.</dd>
<dt>HOME and Ctrl+a</dt>
<dd>Move the cursor to the start of the current line.</dd>
<dt>END and Ctrl+e</dt>
<dd>Move the cursor to the end of the current line.</dd>
<dt>BACKSPACE and Ctrl+h</dt>
<dd>Delete the previous character.</dd>
<dt>Ctrl+d</dt>
<dd>Hide the console if the current line is empty, otherwise delete the next
character.</dd>
<dt>Ctrl+BACKSPACE and Ctrl+w</dt>
<dd>Delete text from the cursor to the beginning of the current word, or if
between words, to the beginning of the previous word.</dd>
<dt>Ctrl+DEL and Alt+d</dt>
<dd>Delete text from the cursor to the end of the current word, or if between
words, to the end of the next word.</dd>
<dt>Ctrl+u</dt>
<dd>Delete text from the cursor to the beginning of the current line.</dd>
<dt>Ctrl+k</dt>
<dd>Delete text from the cursor to the end of the current line.</dd>
<dt>Ctrl+c</dt>
<dd>Clear the current line.</dd>
<dt>UP and Ctrl+p</dt>
<dd>Move back in the command history.</dd>
<dt>DOWN and Ctrl+n</dt>
<dd>Move forward in the command history.</dd>
<dt>PGUP</dt>
<dd>Go to the first command in the history.</dd>
<dt>PGDN</dt>
<dd>Stop navigating the command history.</dd>
<dt>Ctrl+r</dt>
<dd>Search the command history.</dd>
<dt>INSERT</dt>
<dd>Toggle insert mode.</dd>
<dt>Ctrl+v</dt>
<dd>Paste text (uses the clipboard on X11 and Wayland).</dd>
<dt>Shift+INSERT</dt>
<dd>Paste text (uses the primary selection on X11 and Wayland).</dd>
<dt>TAB and Ctrl+i</dt>
<dd>Complete the text at the cursor. The first press inserts the longest common
prefix of the completions, and subsequent presses cycle through them.</dd>
<dt>Shift+TAB</dt>
<dd>Cycle through the completions backwards.</dd>
<dt>Ctrl+l</dt>
<dd>Clear all log messages from the console.</dd>
</dl>
</div>
<div class="section" id="commands">
<h2>Commands</h2>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">script-message-to</span> console type &lt;text&gt; [&lt;cursor_pos&gt;]</tt></dt>
<dd><p class="first">Show the console and pre-fill it with the provided text, optionally
specifying the initial cursor position as a positive integer starting from
1.</p>
<div class="admonition admonition-examples-for-input-conf last">
<p class="first admonition-title">Examples for input.conf</p>
<dl class="last docutils">
<dt><tt class="docutils literal">% <span class="pre">script-message-to</span> console type &quot;seek&nbsp; <span class="pre">absolute-percent;</span> keypress ESC&quot; 6</tt></dt>
<dd>Enter a percent position to seek to and close the console.</dd>
<dt><tt class="docutils literal">Ctrl+o <span class="pre">script-message-to</span> console type &quot;loadfile ''; keypress ESC&quot; 11</tt></dt>
<dd>Enter a file or URL to play. Tab completes paths in the filesystem.</dd>
</dl>
</div>
</dd>
</dl>
</div>
<div class="section" id="known-issues">
<h2>Known issues</h2>
<ul class="simple">
<li>Pasting text is slow on Windows</li>
<li>Non-ASCII keyboard input has restrictions</li>
<li>The cursor keys move between Unicode code-points, not grapheme clusters</li>
</ul>
</div>
<div class="section" id="id4">
<h2>Configuration</h2>
<p>This script can be customized through a config file <tt class="docutils literal"><span class="pre">script-opts/console.conf</span></tt>
placed in mpv's user directory and through the <tt class="docutils literal"><span class="pre">--script-opts</span></tt> command-line
option. The configuration syntax is described in <a class="reference internal" href="#mp-options-functions">mp.options functions</a>.</p>
<p>Key bindings can be changed in a standard way, see for example stats.lua
documentation.</p>
<div class="section" id="id5">
<h3>Configurable Options</h3>
<dl class="docutils">
<dt><tt class="docutils literal">font</tt></dt>
<dd><p class="first">Default: unset (picks a hardcoded font depending on detected platform)</p>
<p class="last">Set the font used for the REPL and the console.
This has to be a monospaced font for the completion suggestions to be
aligned correctly.</p>
</dd>
<dt><tt class="docutils literal">font_size</tt></dt>
<dd><p class="first">Default: 16</p>
<p class="last">Set the font size used for the REPL and the console. This will be
multiplied by <tt class="docutils literal"><span class="pre">display-hidpi-scale</span></tt>.</p>
</dd>
<dt><tt class="docutils literal">border_size</tt></dt>
<dd><p class="first">Default: 1</p>
<p class="last">Set the font border size used for the REPL and the console.</p>
</dd>
<dt><tt class="docutils literal">case_sensitive</tt></dt>
<dd><p class="first">Default: no on Windows, yes on other platforms.</p>
<p class="last">Whether Tab completion is case sensitive. Only works with ASCII characters.</p>
</dd>
<dt><tt class="docutils literal">history_dedup</tt></dt>
<dd><p class="first">Default: true</p>
<p class="last">Remove duplicate entries in history as to only keep the latest one.</p>
</dd>
<dt><tt class="docutils literal">font_hw_ratio</tt></dt>
<dd><p class="first">Default: auto</p>
<p class="last">The ratio of font height to font width.
Adjusts table width of completion suggestions.
Values in the range 1.8..2.5 make sense for common monospace fonts.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="section" id="lua-scripting">
<h1>LUA SCRIPTING</h1>
<p>mpv can load Lua scripts. (See <a class="reference internal" href="#script-location">Script location</a>.)</p>
<p>mpv provides the built-in module <tt class="docutils literal">mp</tt>, which contains functions to send
commands to the mpv core and to retrieve information about playback state, user
settings, file information, and so on.</p>
<p>These scripts can be used to control mpv in a similar way to slave mode.
Technically, the Lua code uses the client API internally.</p>
<div class="section" id="example">
<h2>Example</h2>
<p>A script which leaves fullscreen mode when the player is paused:</p>
<pre class="literal-block">
function on_pause_change(name, value)
    if value == true then
        mp.set_property(&quot;fullscreen&quot;, &quot;no&quot;)
    end
end
mp.observe_property(&quot;pause&quot;, &quot;bool&quot;, on_pause_change)
</pre>
</div>
<div class="section" id="script-location">
<h2>Script location</h2>
<p>Scripts can be passed to the <tt class="docutils literal"><span class="pre">--script</span></tt> option, and are automatically loaded
from the <tt class="docutils literal">scripts</tt> subdirectory of the mpv configuration directory (usually
<tt class="docutils literal"><span class="pre">~/.config/mpv/scripts/</span></tt>).</p>
<p>A script can be a single file. The file extension is used to select the
scripting backend to use for it. For Lua, it is <tt class="docutils literal">.lua</tt>. If the extension is
not recognized, an error is printed. (If an error happens, the extension is
either mistyped, or the backend was not compiled into your mpv binary.)</p>
<p>mpv internally loads the script's name by stripping the <tt class="docutils literal">.lua</tt> extension and
replacing all nonalphanumeric characters with <tt class="docutils literal">_</tt>. E.g., <tt class="docutils literal"><span class="pre">my-tools.lua</span></tt>
becomes <tt class="docutils literal">my_tools</tt>. If there are several scripts with the same name, it is
made unique by appending a number. This is the name returned by
<tt class="docutils literal">mp.get_script_name()</tt>.</p>
<p>Entries with <tt class="docutils literal">.disable</tt> extension are always ignored.</p>
<p>If a script is a directory (either if a directory is passed to <tt class="docutils literal"><span class="pre">--script</span></tt>,
or any sub-directories in the script directory, such as for example
<tt class="docutils literal"><span class="pre">~/.config/mpv/scripts/something/</span></tt>), then the directory represents a single
script. The player will try to load a file named <tt class="docutils literal">main.x</tt>, where <tt class="docutils literal">x</tt> is
replaced with the file extension. For example, if <tt class="docutils literal">main.lua</tt> exists, it is
loaded with the Lua scripting backend.</p>
<p>You must not put any other files or directories that start with <tt class="docutils literal">main.</tt> into
the script's top level directory. If the script directory contains for example
both <tt class="docutils literal">main.lua</tt> and <tt class="docutils literal">main.js</tt>, only one of them will be loaded (and which
one depends on mpv internals that may change any time). Likewise, if there is
for example <tt class="docutils literal">main.foo</tt>, your script will break as soon as mpv adds a backend
that uses the <tt class="docutils literal">.foo</tt> file extension.</p>
<p>mpv also appends the top level directory of the script to the start of Lua's
package path so you can import scripts from there too. Be aware that this will
shadow Lua libraries that use the same package path. (Single file scripts do not
include mpv specific directories in the Lua package path. This was silently
changed in mpv 0.32.0.)</p>
<p>Using a script directory is the recommended way to package a script that
consists of multiple source files, or requires other files (you can use
<tt class="docutils literal">mp.get_script_directory()</tt> to get the location and e.g. load data files).</p>
<p>Making a script a git repository, basically a repository which contains a
<tt class="docutils literal">main.lua</tt> file in the root directory, makes scripts easily updateable
(without the dangers of auto-updates). Another suggestion is to use git
submodules to share common files or libraries.</p>
</div>
<div class="section" id="details-on-the-script-initialization-and-lifecycle">
<h2>Details on the script initialization and lifecycle</h2>
<p>Your script will be loaded by the player at program start from the <tt class="docutils literal">scripts</tt>
configuration subdirectory, or from a path specified with the <tt class="docutils literal"><span class="pre">--script</span></tt>
option. Some scripts are loaded internally (like <tt class="docutils literal"><span class="pre">--osc</span></tt>). Each script runs in
its own thread. Your script is first run &quot;as is&quot;, and once that is done, the event loop
is entered. This event loop will dispatch events received by mpv and call your
own event handlers which you have registered with <tt class="docutils literal">mp.register_event</tt>, or
timers added with <tt class="docutils literal">mp.add_timeout</tt> or similar. Note that since the
script starts execution concurrently with player initialization, some properties
may not be populated with meaningful values until the relevant subsystems have
initialized.</p>
<p>When the player quits, all scripts will be asked to terminate. This happens via
a <tt class="docutils literal">shutdown</tt> event, which by default will make the event loop return. If your
script got into an endless loop, mpv will probably behave fine during playback,
but it won't terminate when quitting, because it's waiting on your script.</p>
<p>Internally, the C code will call the Lua function <tt class="docutils literal">mp_event_loop</tt> after
loading a Lua script. This function is normally defined by the default prelude
loaded before your script (see <tt class="docutils literal">player/lua/defaults.lua</tt> in the mpv sources).
The event loop will wait for events and dispatch events registered with
<tt class="docutils literal">mp.register_event</tt>. It will also handle timers added with <tt class="docutils literal">mp.add_timeout</tt>
and similar (by waiting with a timeout).</p>
<p>Since mpv 0.6.0, the player will wait until the script is fully loaded before
continuing normal operation. The player considers a script as fully loaded as
soon as it starts waiting for mpv events (or it exits). In practice this means
the player will more or less hang until the script returns from the main chunk
(and <tt class="docutils literal">mp_event_loop</tt> is called), or the script calls <tt class="docutils literal">mp_event_loop</tt> or
<tt class="docutils literal">mp.dispatch_events</tt> directly. This is done to make it possible for a script
to fully setup event handlers etc. before playback actually starts. In older
mpv versions, this happened asynchronously. With mpv 0.29.0, this changes
slightly, and it merely waits for scripts to be loaded in this manner before
starting playback as part of the player initialization phase. Scripts run though
initialization in parallel. This might change again.</p>
</div>
<div class="section" id="mp-functions">
<h2>mp functions</h2>
<p>The <tt class="docutils literal">mp</tt> module is preloaded, although it can be loaded manually with
<tt class="docutils literal">require 'mp'</tt>. It provides the core client API.</p>
<dl class="docutils">
<dt><tt class="docutils literal">mp.command(string)</tt></dt>
<dd><p class="first">Run the given command. This is similar to the commands used in input.conf.
See <a class="reference internal" href="#list-of-input-commands">List of Input Commands</a>.</p>
<p>By default, this will show something on the OSD (depending on the command),
as if it was used in <tt class="docutils literal">input.conf</tt>. See <a class="reference internal" href="#input-command-prefixes">Input Command Prefixes</a> how
to influence OSD usage per command.</p>
<p class="last">Returns <tt class="docutils literal">true</tt> on success, or <tt class="docutils literal">nil, error</tt> on error.</p>
</dd>
<dt><tt class="docutils literal">mp.commandv(arg1, arg2, <span class="pre">...)</span></tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.command</tt>, but pass each command argument as separate
parameter. This has the advantage that you don't have to care about
quoting and escaping in some cases.</p>
<p>Example:</p>
<pre class="literal-block">
mp.command(&quot;loadfile &quot; .. filename .. &quot; append&quot;)
mp.commandv(&quot;loadfile&quot;, filename, &quot;append&quot;)
</pre>
<p>These two commands are equivalent, except that the first version breaks
if the filename contains spaces or certain special characters.</p>
<p>Note that properties are <em>not</em> expanded.  You can use either <tt class="docutils literal">mp.command</tt>,
the <tt class="docutils literal"><span class="pre">expand-properties</span></tt> prefix, or the <tt class="docutils literal">mp.get_property</tt> family of
functions.</p>
<p class="last">Unlike <tt class="docutils literal">mp.command</tt>, this will not use OSD by default either (except
for some OSD-specific commands).</p>
</dd>
<dt><tt class="docutils literal">mp.command_native(table [,def])</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.commandv</tt>, but pass the argument list as table. This has
the advantage that in at least some cases, arguments can be passed as
native types. It also allows you to use named argument.</p>
<p>If the table is an array, each array item is like an argument in
<tt class="docutils literal">mp.commandv()</tt> (but can be a native type instead of a string).</p>
<p>If the table contains string keys, it's interpreted as command with named
arguments. This requires at least an entry with the key <tt class="docutils literal">name</tt> to be
present, which must be a string, and contains the command name. The special
entry <tt class="docutils literal">_flags</tt> is optional, and if present, must be an array of
<a class="reference internal" href="#input-command-prefixes">Input Command Prefixes</a> to apply. All other entries are interpreted as
arguments.</p>
<p class="last">Returns a result table on success (usually empty), or <tt class="docutils literal">def, error</tt> on
error. <tt class="docutils literal">def</tt> is the second parameter provided to the function, and is
nil if it's missing.</p>
</dd>
<dt><tt class="docutils literal">mp.command_native_async(table [,fn])</tt></dt>
<dd><p class="first">Like <tt class="docutils literal">mp.command_native()</tt>, but the command is ran asynchronously (as far
as possible), and upon completion, fn is called. fn has three arguments:
<tt class="docutils literal">fn(success, result, error)</tt>:</p>
<blockquote>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">success</tt></dt>
<dd>Always a Boolean and is true if the command was successful,
otherwise false.</dd>
</dl>
</blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">result</tt></dt>
<dd>The result value (can be nil) in case of success, nil otherwise (as
returned by <tt class="docutils literal">mp.command_native()</tt>).</dd>
<dt><tt class="docutils literal">error</tt></dt>
<dd>The error string in case of an error, nil otherwise.</dd>
</dl>
</blockquote>
<p>Returns a table with undefined contents, which can be used as argument for
<tt class="docutils literal">mp.abort_async_command</tt>.</p>
<p>If starting the command failed for some reason, <tt class="docutils literal">nil, error</tt> is returned,
and <tt class="docutils literal">fn</tt> is called indicating failure, using the same error value.</p>
<p class="last"><tt class="docutils literal">fn</tt> is always called asynchronously, even if the command failed to start.</p>
</dd>
<dt><tt class="docutils literal">mp.abort_async_command(t)</tt></dt>
<dd>Abort a <tt class="docutils literal">mp.command_native_async</tt> call. The argument is the return value
of that command (which starts asynchronous execution of the command).
Whether this works and how long it takes depends on the command and the
situation. The abort call itself is asynchronous. Does not return anything.</dd>
<dt><tt class="docutils literal">mp.del_property(name)</tt></dt>
<dd><p class="first">Delete the given property. See <tt class="docutils literal">mp.get_property</tt> and <a class="reference internal" href="#properties">Properties</a> for more
information about properties. Most properties cannot be deleted.</p>
<p class="last">Returns true on success, or <tt class="docutils literal">nil, error</tt> on error.</p>
</dd>
<dt><tt class="docutils literal">mp.get_property(name [,def])</tt></dt>
<dd><p class="first">Return the value of the given property as string. These are the same
properties as used in input.conf. See <a class="reference internal" href="#properties">Properties</a> for a list of
properties. The returned string is formatted similar to <tt class="docutils literal"><span class="pre">${=name}</span></tt>
(see <a class="reference internal" href="#property-expansion">Property Expansion</a>).</p>
<p class="last">Returns the string on success, or <tt class="docutils literal">def, error</tt> on error. <tt class="docutils literal">def</tt> is the
second parameter provided to the function, and is nil if it's missing.</p>
</dd>
<dt><tt class="docutils literal">mp.get_property_osd(name [,def])</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.get_property</tt>, but return the property value formatted for
OSD. This is the same string as printed with <tt class="docutils literal">${name}</tt> when used in
input.conf.</p>
<p class="last">Returns the string on success, or <tt class="docutils literal">def, error</tt> on error. <tt class="docutils literal">def</tt> is the
second parameter provided to the function, and is an empty string if it's
missing. Unlike <tt class="docutils literal">get_property()</tt>, assigning the return value to a variable
will always result in a string.</p>
</dd>
<dt><tt class="docutils literal">mp.get_property_bool(name [,def])</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.get_property</tt>, but return the property value as Boolean.</p>
<p class="last">Returns a Boolean on success, or <tt class="docutils literal">def, error</tt> on error.</p>
</dd>
<dt><tt class="docutils literal">mp.get_property_number(name [,def])</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.get_property</tt>, but return the property value as number.</p>
<p>Note that while Lua does not distinguish between integers and floats,
mpv internals do. This function simply request a double float from mpv,
and mpv will usually convert integer property values to float.</p>
<p class="last">Returns a number on success, or <tt class="docutils literal">def, error</tt> on error.</p>
</dd>
<dt><tt class="docutils literal">mp.get_property_native(name [,def])</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.get_property</tt>, but return the property value using the best
Lua type for the property. Most time, this will return a string, Boolean,
or number. Some properties (for example <tt class="docutils literal"><span class="pre">chapter-list</span></tt>) are returned as
tables.</p>
<p class="last">Returns a value on success, or <tt class="docutils literal">def, error</tt> on error. Note that <tt class="docutils literal">nil</tt>
might be a possible, valid value too in some corner cases.</p>
</dd>
<dt><tt class="docutils literal">mp.set_property(name, value)</tt></dt>
<dd><p class="first">Set the given property to the given string value. See <tt class="docutils literal">mp.get_property</tt>
and <a class="reference internal" href="#properties">Properties</a> for more information about properties.</p>
<p class="last">Returns true on success, or <tt class="docutils literal">nil, error</tt> on error.</p>
</dd>
<dt><tt class="docutils literal">mp.set_property_bool(name, value)</tt></dt>
<dd>Similar to <tt class="docutils literal">mp.set_property</tt>, but set the given property to the given
Boolean value.</dd>
<dt><tt class="docutils literal">mp.set_property_number(name, value)</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.set_property</tt>, but set the given property to the given
numeric value.</p>
<p class="last">Note that while Lua does not distinguish between integers and floats,
mpv internals do. This function will test whether the number can be
represented as integer, and if so, it will pass an integer value to mpv,
otherwise a double float.</p>
</dd>
<dt><tt class="docutils literal">mp.set_property_native(name, value)</tt></dt>
<dd><p class="first">Similar to <tt class="docutils literal">mp.set_property</tt>, but set the given property using its native
type.</p>
<p class="last">Since there are several data types which cannot represented natively in
Lua, this might not always work as expected. For example, while the Lua
wrapper can do some guesswork to decide whether a Lua table is an array
or a map, this would fail with empty tables. Also, there are not many
properties for which it makes sense to use this, instead of
<tt class="docutils literal">set_property</tt>, <tt class="docutils literal">set_property_bool</tt>, <tt class="docutils literal">set_property_number</tt>.
For these reasons, this function should probably be avoided for now, except
for properties that use tables natively.</p>
</dd>
<dt><tt class="docutils literal">mp.get_time()</tt></dt>
<dd>Return the current mpv internal time in seconds as a number. This is
basically the system time, with an arbitrary offset.</dd>
<dt><tt class="docutils literal">mp.add_key_binding(key, name|fn [,fn <span class="pre">[,flags]])</span></tt></dt>
<dd><p class="first">Register callback to be run on a key binding. The binding will be mapped to
the given <tt class="docutils literal">key</tt>, which is a string describing the physical key. This uses
the same key names as in input.conf, and also allows combinations
(e.g. <tt class="docutils literal">ctrl+a</tt>). If the key is empty or <tt class="docutils literal">nil</tt>, no physical key is
registered, but the user still can create own bindings (see below).</p>
<p>After calling this function, key presses will cause the function <tt class="docutils literal">fn</tt> to
be called (unless the user remapped the key with another binding).
However, if the key binding is canceled , the function will not be called,
unless <tt class="docutils literal">complex</tt> flag is set to <tt class="docutils literal">true</tt>, where the function will be
called with the <tt class="docutils literal">canceled</tt> entry set to <tt class="docutils literal">true</tt>.</p>
<p>For example, a canceled key binding can happen in the following situations:</p>
<ul class="simple">
<li>If key A is pressed while key B is being held down, key B is logically
released (&quot;canceled&quot; by key A), which stops the current autorepeat
action key B has.</li>
<li>If key A is pressed while a mouse button is being held down, the mouse
button is logically released, but the mouse button's action will not be
called, unless <tt class="docutils literal">complex</tt> flag is set to <tt class="docutils literal">true</tt>.</li>
</ul>
<p>The <tt class="docutils literal">name</tt> argument should be a short symbolic string. It allows the user
to remap the key binding via input.conf using the <tt class="docutils literal"><span class="pre">script-message</span></tt>
command, and the name of the key binding (see below for
an example). The name should be unique across other bindings in the same
script - if not, the previous binding with the same name will be
overwritten. You can omit the name, in which case a random name is generated
internally. (Omitting works as follows: either pass <tt class="docutils literal">nil</tt> for <tt class="docutils literal">name</tt>,
or pass the <tt class="docutils literal">fn</tt> argument in place of the name. The latter is not
recommended and is handled for compatibility only.)</p>
<p>The last argument is used for optional flags. This is a table, which can
have the following entries:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">repeatable</tt></dt>
<dd>If set to <tt class="docutils literal">true</tt>, enables key repeat for this specific binding.
This option only makes sense when <tt class="docutils literal">complex</tt> is not set to <tt class="docutils literal">true</tt>.</dd>
<dt><tt class="docutils literal">complex</tt></dt>
<dd><p class="first">If set to <tt class="docutils literal">true</tt>, then <tt class="docutils literal">fn</tt> is called on key down, repeat and up
events, with the first argument being a table. This table has the
following entries (and may contain undocumented ones):</p>
<blockquote class="last">
<dl class="docutils">
<dt><tt class="docutils literal">event</tt></dt>
<dd>Set to one of the strings <tt class="docutils literal">down</tt>, <tt class="docutils literal">repeat</tt>, <tt class="docutils literal">up</tt> or
<tt class="docutils literal">press</tt> (the latter if key up/down/repeat can't be
tracked), which indicates the key's logical state.</dd>
<dt><tt class="docutils literal">is_mouse</tt></dt>
<dd>Boolean: Whether the event was caused by a mouse button.</dd>
<dt><tt class="docutils literal">canceled</tt></dt>
<dd>Boolean: Whether the event was canceled.
Not all types of cancellations set this flag.</dd>
<dt><tt class="docutils literal">key_name</tt></dt>
<dd>The name of they key that triggered this, or <tt class="docutils literal">nil</tt> if
invoked artificially. If the key name is unknown, it's an
empty string.</dd>
<dt><tt class="docutils literal">key_text</tt></dt>
<dd>Text if triggered by a text key, otherwise <tt class="docutils literal">nil</tt>. See
description of <tt class="docutils literal"><span class="pre">script-binding</span></tt> command for details (this
field is equivalent to the 5th argument).</dd>
</dl>
</blockquote>
</dd>
</dl>
</blockquote>
<p>Internally, key bindings are dispatched via the <tt class="docutils literal"><span class="pre">script-message-to</span></tt> or
<tt class="docutils literal"><span class="pre">script-binding</span></tt> input commands and <tt class="docutils literal">mp.register_script_message</tt>.</p>
<p>Trying to map multiple commands to a key will essentially prefer a random
binding, while the other bindings are not called. It is guaranteed that
user defined bindings in the central input.conf are preferred over bindings
added with this function (but see <tt class="docutils literal">mp.add_forced_key_binding</tt>).</p>
<p>Example:</p>
<pre class="literal-block">
function something_handler()
    print(&quot;the key was pressed&quot;)
end
mp.add_key_binding(&quot;x&quot;, &quot;something&quot;, something_handler)
</pre>
<p>This will print the message <tt class="docutils literal">the key was pressed</tt> when <tt class="docutils literal">x</tt> was pressed.</p>
<p>The user can remap these key bindings. Then the user has to put the
following into their input.conf to remap the command to the <tt class="docutils literal">y</tt> key:</p>
<pre class="literal-block">
y script-binding something
</pre>
<p>This will print the message when the key <tt class="docutils literal">y</tt> is pressed. (<tt class="docutils literal">x</tt> will
still work, unless the user remaps it.)</p>
<p>You can also explicitly send a message to a named script only. Assume the
above script was using the filename <tt class="docutils literal">fooscript.lua</tt>:</p>
<pre class="last literal-block">
y script-binding fooscript/something
</pre>
</dd>
<dt><tt class="docutils literal"><span class="pre">mp.add_forced_key_binding(...)</span></tt></dt>
<dd>This works almost the same as <tt class="docutils literal">mp.add_key_binding</tt>, but registers the
key binding in a way that will overwrite the user's custom bindings in their
input.conf. (<tt class="docutils literal">mp.add_key_binding</tt> overwrites default key bindings only,
but not those by the user's input.conf.)</dd>
<dt><tt class="docutils literal">mp.remove_key_binding(name)</tt></dt>
<dd>Remove a key binding added with <tt class="docutils literal">mp.add_key_binding</tt> or
<tt class="docutils literal">mp.add_forced_key_binding</tt>. Use the same name as you used when adding
the bindings. It's not possible to remove bindings for which you omitted
the name.</dd>
<dt><tt class="docutils literal">mp.register_event(name, fn)</tt></dt>
<dd><p class="first">Call a specific function when an event happens. The event name is a string,
and the function fn is a Lua function value.</p>
<p>Some events have associated data. This is put into a Lua table and passed
as argument to fn. The Lua table by default contains a <tt class="docutils literal">name</tt> field,
which is a string containing the event name. If the event has an error
associated, the <tt class="docutils literal">error</tt> field is set to a string describing the error,
on success it's not set.</p>
<p>If multiple functions are registered for the same event, they are run in
registration order, which the first registered function running before all
the other ones.</p>
<p>Returns true if such an event exists, false otherwise.</p>
<p class="last">See <a class="reference internal" href="#events">Events</a> and <a class="reference internal" href="#list-of-events">List of events</a> for details.</p>
</dd>
<dt><tt class="docutils literal">mp.unregister_event(fn)</tt></dt>
<dd>Undo <tt class="docutils literal"><span class="pre">mp.register_event(...,</span> fn)</tt>. This removes all event handlers that
are equal to the <tt class="docutils literal">fn</tt> parameter. This uses normal Lua <tt class="docutils literal">==</tt> comparison,
so be careful when dealing with closures.</dd>
<dt><tt class="docutils literal">mp.observe_property(name, type, fn)</tt></dt>
<dd><p class="first">Watch a property for changes. If the property <tt class="docutils literal">name</tt> is changed, then
the function <tt class="docutils literal">fn(name)</tt> will be called. <tt class="docutils literal">type</tt> can be <tt class="docutils literal">nil</tt>, or be
set to one of <tt class="docutils literal">none</tt>, <tt class="docutils literal">native</tt>, <tt class="docutils literal">bool</tt>, <tt class="docutils literal">string</tt>, or <tt class="docutils literal">number</tt>.
<tt class="docutils literal">none</tt> is the same as <tt class="docutils literal">nil</tt>. For all other values, the new value of
the property will be passed as second argument to <tt class="docutils literal">fn</tt>, using
<tt class="docutils literal">mp.get_property_&lt;type&gt;</tt> to retrieve it. This means if <tt class="docutils literal">type</tt> is for
example <tt class="docutils literal">string</tt>, <tt class="docutils literal">fn</tt> is roughly called as in
<tt class="docutils literal">fn(name, mp.get_property_string(name))</tt>.</p>
<p>If possible, change events are coalesced. If a property is changed a bunch
of times in a row, only the last change triggers the change function. (The
exact behavior depends on timing and other things.)</p>
<p>If a property is unavailable, or on error, the value argument to <tt class="docutils literal">fn</tt> is
<tt class="docutils literal">nil</tt>. (The <tt class="docutils literal">observe_property()</tt> call always succeeds, even if a
property does not exist.)</p>
<p>In some cases the function is not called even if the property changes.
This depends on the property, and it's a valid feature request to ask for
better update handling of a specific property.</p>
<p>If the <tt class="docutils literal">type</tt> is <tt class="docutils literal">none</tt> or <tt class="docutils literal">nil</tt>, the change function <tt class="docutils literal">fn</tt> will be
called sporadically even if the property doesn't actually change. You should
therefore avoid using these types.</p>
<p class="last">You always get an initial change notification. This is meant to initialize
the user's state to the current value of the property.</p>
</dd>
<dt><tt class="docutils literal">mp.unobserve_property(fn)</tt></dt>
<dd>Undo <tt class="docutils literal"><span class="pre">mp.observe_property(...,</span> fn)</tt>. This removes all property handlers
that are equal to the <tt class="docutils literal">fn</tt> parameter. This uses normal Lua <tt class="docutils literal">==</tt>
comparison, so be careful when dealing with closures.</dd>
<dt><tt class="docutils literal">mp.add_timeout(seconds, fn [, disabled])</tt></dt>
<dd><p class="first">Call the given function fn when the given number of seconds has elapsed.
Note that the number of seconds can be fractional. For now, the timer's
resolution may be as low as 50 ms, although this will be improved in the
future.</p>
<p>If the <tt class="docutils literal">disabled</tt> argument is set to <tt class="docutils literal">true</tt> or a truthy value, the
timer will wait to be manually started with a call to its <tt class="docutils literal">resume()</tt>
method.</p>
<p>This is a one-shot timer: it will be removed when it's fired.</p>
<p class="last">Returns a timer object. See <tt class="docutils literal">mp.add_periodic_timer</tt> for details.</p>
</dd>
<dt><tt class="docutils literal">mp.add_periodic_timer(seconds, fn [, disabled])</tt></dt>
<dd><p class="first">Call the given function periodically. This is like <tt class="docutils literal">mp.add_timeout</tt>, but
the timer is re-added after the function fn is run.</p>
<dl class="docutils">
<dt>Returns a timer object. The timer object provides the following methods:</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal">stop()</tt></dt>
<dd>Disable the timer. Does nothing if the timer is already disabled.
This will remember the current elapsed time when stopping, so that
<tt class="docutils literal">resume()</tt> essentially unpauses the timer.</dd>
<dt><tt class="docutils literal">kill()</tt></dt>
<dd>Disable the timer. Resets the elapsed time. <tt class="docutils literal">resume()</tt> will
restart the timer.</dd>
<dt><tt class="docutils literal">resume()</tt></dt>
<dd>Restart the timer. If the timer was disabled with <tt class="docutils literal">stop()</tt>, this
will resume at the time it was stopped. If the timer was disabled
with <tt class="docutils literal">kill()</tt>, or if it's a previously fired one-shot timer (added
with <tt class="docutils literal">add_timeout()</tt>), this starts the timer from the beginning,
using the initially configured timeout.</dd>
<dt><tt class="docutils literal">is_enabled()</tt></dt>
<dd>Whether the timer is currently enabled or was previously disabled
(e.g. by <tt class="docutils literal">stop()</tt> or <tt class="docutils literal">kill()</tt>).</dd>
<dt><tt class="docutils literal">timeout</tt> (RW)</dt>
<dd><p class="first">This field contains the current timeout period. This value is not
updated as time progresses. It's only used to calculate when the
timer should fire next when the timer expires.</p>
<p class="last">If you write this, you can call <tt class="docutils literal">t:kill() ; t:resume()</tt> to reset
the current timeout to the new one. (<tt class="docutils literal">t:stop()</tt> won't use the
new timeout.)</p>
</dd>
<dt><tt class="docutils literal">oneshot</tt> (RW)</dt>
<dd>Whether the timer is periodic (<tt class="docutils literal">false</tt>) or fires just once
(<tt class="docutils literal">true</tt>). This value is used when the timer expires (but before
the timer callback function fn is run).</dd>
</dl>
</dd>
</dl>
<p>Note that these are methods, and you have to call them using <tt class="docutils literal">:</tt> instead
of <tt class="docutils literal">.</tt> (Refer to <a class="reference external" href="https://www.lua.org/manual/5.2/manual.html#3.4.9">https://www.lua.org/manual/5.2/manual.html#3.4.9</a> .)</p>
<p>Example:</p>
<pre class="last literal-block">
seconds = 0
timer = mp.add_periodic_timer(1, function()
    print(&quot;called every second&quot;)
    # stop it after 10 seconds
    seconds = seconds + 1
    if seconds &gt;= 10 then
        timer:kill()
    end
end)
</pre>
</dd>
<dt><tt class="docutils literal">mp.get_opt(key)</tt></dt>
<dd>Return a setting from the <tt class="docutils literal"><span class="pre">--script-opts</span></tt> option. It's up to the user and
the script how this mechanism is used. Currently, all scripts can access
this equally, so you should be careful about collisions.</dd>
<dt><tt class="docutils literal">mp.get_script_name()</tt></dt>
<dd><p class="first">Return the name of the current script. The name is usually made of the
filename of the script, with directory and file extension removed. If
there are several scripts which would have the same name, it's made unique
by appending a number. Any nonalphanumeric characters are replaced with <tt class="docutils literal">_</tt>.</p>
<div class="admonition admonition-example last">
<p class="first admonition-title">Example</p>
<p class="last">The script <tt class="docutils literal"><span class="pre">/path/to/foo-script.lua</span></tt> becomes <tt class="docutils literal">foo_script</tt>.</p>
</div>
</dd>
<dt><tt class="docutils literal">mp.get_script_directory()</tt></dt>
<dd>Return the directory if this is a script packaged as directory (see
<a class="reference internal" href="#script-location">Script location</a> for a description). Return nothing if this is a single
file script.</dd>
<dt><tt class="docutils literal">mp.osd_message(text [,duration])</tt></dt>
<dd>Show an OSD message on the screen. <tt class="docutils literal">duration</tt> is in seconds, and is
optional (uses <tt class="docutils literal"><span class="pre">--osd-duration</span></tt> by default).</dd>
</dl>
</div>
<div class="section" id="advanced-mp-functions">
<h2>Advanced mp functions</h2>
<p>These also live in the <tt class="docutils literal">mp</tt> module, but are documented separately as they
are useful only in special situations.</p>
<dl class="docutils">
<dt><tt class="docutils literal">mp.get_wakeup_pipe()</tt></dt>
<dd>Calls <tt class="docutils literal">mpv_get_wakeup_pipe()</tt> and returns the read end of the wakeup
pipe. This is deprecated, but still works. (See <tt class="docutils literal">client.h</tt> for details.)</dd>
<dt><tt class="docutils literal">mp.get_next_timeout()</tt></dt>
<dd>Return the relative time in seconds when the next timer (<tt class="docutils literal">mp.add_timeout</tt>
and similar) expires. If there is no timer, return <tt class="docutils literal">nil</tt>.</dd>
<dt><tt class="docutils literal"><span class="pre">mp.dispatch_events([allow_wait])</span></tt></dt>
<dd><p class="first">This can be used to run custom event loops. If you want to have direct
control what the Lua script does (instead of being called by the default
event loop), you can set the global variable <tt class="docutils literal">mp_event_loop</tt> to your
own function running the event loop. From your event loop, you should call
<tt class="docutils literal">mp.dispatch_events()</tt> to dequeue and dispatch mpv events.</p>
<p class="last">If the <tt class="docutils literal">allow_wait</tt> parameter is set to <tt class="docutils literal">true</tt>, the function will block
until the next event is received or the next timer expires. Otherwise (and
this is the default behavior), it returns as soon as the event loop is
emptied. It's strongly recommended to use <tt class="docutils literal">mp.get_next_timeout()</tt> and
<tt class="docutils literal">mp.get_wakeup_pipe()</tt> if you're interested in properly working
notification of new events and working timers.</p>
</dd>
<dt><tt class="docutils literal">mp.register_idle(fn)</tt></dt>
<dd>Register an event loop idle handler. Idle handlers are called before the
script goes to sleep after handling all new events. This can be used for
example to delay processing of property change events: if you're observing
multiple properties at once, you might not want to act on each property
change, but only when all change notifications have been received.</dd>
<dt><tt class="docutils literal">mp.unregister_idle(fn)</tt></dt>
<dd>Undo <tt class="docutils literal">mp.register_idle(fn)</tt>. This removes all idle handlers that
are equal to the <tt class="docutils literal">fn</tt> parameter. This uses normal Lua <tt class="docutils literal">==</tt> comparison,
so be careful when dealing with closures.</dd>
<dt><tt class="docutils literal">mp.enable_messages(level)</tt></dt>
<dd>Set the minimum log level of which mpv message output to receive. These
messages are normally printed to the terminal. By calling this function,
you can set the minimum log level of messages which should be received with
the <tt class="docutils literal"><span class="pre">log-message</span></tt> event. See the description of this event for details.
The level is a string, see <tt class="docutils literal">msg.log</tt> for allowed log levels.</dd>
<dt><tt class="docutils literal">mp.register_script_message(name, fn)</tt></dt>
<dd><p class="first">This is a helper to dispatch <tt class="docutils literal"><span class="pre">script-message</span></tt> or <tt class="docutils literal"><span class="pre">script-message-to</span></tt>
invocations to Lua functions. <tt class="docutils literal">fn</tt> is called if <tt class="docutils literal"><span class="pre">script-message</span></tt> or
<tt class="docutils literal"><span class="pre">script-message-to</span></tt> (with this script as destination) is run
with <tt class="docutils literal">name</tt> as first parameter. The other parameters are passed to <tt class="docutils literal">fn</tt>.
If a message with the given name is already registered, it's overwritten.</p>
<p class="last">Used by <tt class="docutils literal">mp.add_key_binding</tt>, so be careful about name collisions.</p>
</dd>
<dt><tt class="docutils literal">mp.unregister_script_message(name)</tt></dt>
<dd>Undo a previous registration with <tt class="docutils literal">mp.register_script_message</tt>. Does
nothing if the <tt class="docutils literal">name</tt> wasn't registered.</dd>
<dt><tt class="docutils literal">mp.create_osd_overlay(format)</tt></dt>
<dd><p class="first">Create an OSD overlay. This is a very thin wrapper around the <tt class="docutils literal"><span class="pre">osd-overlay</span></tt>
command. The function returns a table, which mostly contains fields that
will be passed to <tt class="docutils literal"><span class="pre">osd-overlay</span></tt>. The <tt class="docutils literal">format</tt> parameter is used to
initialize the <tt class="docutils literal">format</tt> field. The <tt class="docutils literal">data</tt> field contains the text to
be used as overlay. For details, see the <tt class="docutils literal"><span class="pre">osd-overlay</span></tt> command.</p>
<p>In addition, it provides the following methods:</p>
<dl class="docutils">
<dt><tt class="docutils literal">update()</tt></dt>
<dd>Commit the OSD overlay to the screen, or in other words, run the
<tt class="docutils literal"><span class="pre">osd-overlay</span></tt> command with the current fields of the overlay table.
Returns the result of the <tt class="docutils literal"><span class="pre">osd-overlay</span></tt> command itself.</dd>
<dt><tt class="docutils literal">remove()</tt></dt>
<dd>Remove the overlay from the screen. A <tt class="docutils literal">update()</tt> call will add it
again.</dd>
</dl>
<p>Example:</p>
<pre class="literal-block">
ov = mp.create_osd_overlay(&quot;ass-events&quot;)
ov.data = &quot;{\\an5}{\\b1}hello world!&quot;
ov:update()
</pre>
<p class="last">The advantage of using this wrapper (as opposed to running <tt class="docutils literal"><span class="pre">osd-overlay</span></tt>
directly) is that the <tt class="docutils literal">id</tt> field is allocated automatically.</p>
</dd>
<dt><tt class="docutils literal">mp.get_osd_size()</tt></dt>
<dd><p class="first">Returns a tuple of <tt class="docutils literal">osd_width, osd_height, osd_par</tt>. The first two give
the size of the OSD in pixels (for video outputs like <tt class="docutils literal"><span class="pre">--vo=xv</span></tt>, this may
be &quot;scaled&quot; pixels). The third is the display pixel aspect ratio.</p>
<p class="last">May return invalid/nonsense values if OSD is not initialized yet.</p>
</dd>
</dl>
</div>
<div class="section" id="mp-msg-functions">
<h2>mp.msg functions</h2>
<p>This module allows outputting messages to the terminal, and can be loaded
with <tt class="docutils literal">require 'mp.msg'</tt>.</p>
<dl class="docutils">
<dt><tt class="docutils literal">msg.log(level, <span class="pre">...)</span></tt></dt>
<dd><p class="first">The level parameter is the message priority. It's a string and one of
<tt class="docutils literal">fatal</tt>, <tt class="docutils literal">error</tt>, <tt class="docutils literal">warn</tt>, <tt class="docutils literal">info</tt>, <tt class="docutils literal">v</tt>, <tt class="docutils literal">debug</tt>, <tt class="docutils literal">trace</tt>. The
user's settings will determine which of these messages will be
visible. Normally, all messages are visible, except <tt class="docutils literal">v</tt>, <tt class="docutils literal">debug</tt> and
<tt class="docutils literal">trace</tt>.</p>
<p>The parameters after that are all converted to strings. Spaces are inserted
to separate multiple parameters.</p>
<p class="last">You don't need to add newlines.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">msg.fatal(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.error(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.warn(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.info(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.verbose(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.debug(...)</span></tt>, <tt class="docutils literal"><span class="pre">msg.trace(...)</span></tt></dt>
<dd>All of these are shortcuts and equivalent to the corresponding
<tt class="docutils literal">msg.log(level, <span class="pre">...)</span></tt> call.</dd>
</dl>
</div>
<div class="section" id="mp-options-functions">
<h2>mp.options functions</h2>
<p>mpv comes with a built-in module to manage options from config-files and the
command-line. All you have to do is to supply a table with default options to
the read_options function. The function will overwrite the default values
with values found in the config-file and the command-line (in that order).</p>
<dl class="docutils">
<dt><tt class="docutils literal">options.read_options(table [, identifier [, <span class="pre">on_update]])</span></tt></dt>
<dd><p class="first">A <tt class="docutils literal">table</tt> with key-value pairs. The type of the default values is
important for converting the values read from the config file or
command-line back. Do not use <tt class="docutils literal">nil</tt> as a default value!</p>
<p>The <tt class="docutils literal">identifier</tt> is used to identify the config-file and the command-line
options. These needs to unique to avoid collisions with other scripts.
Defaults to <tt class="docutils literal">mp.get_script_name()</tt> if the parameter is <tt class="docutils literal">nil</tt> or missing.</p>
<p class="last">The <tt class="docutils literal">on_update</tt> parameter enables run-time updates of all matching option
values via the <tt class="docutils literal"><span class="pre">script-opts</span></tt> option/property. If any of the matching
options changes, the values in the <tt class="docutils literal">table</tt> (which was originally passed to
the function) are changed, and <tt class="docutils literal">on_update(list)</tt> is called. <tt class="docutils literal">list</tt> is
a table where each updated option has a <tt class="docutils literal">list[option_name] = true</tt> entry.
There is no initial <tt class="docutils literal">on_update()</tt> call. This never re-reads the config file.
<tt class="docutils literal"><span class="pre">script-opts</span></tt> is always applied on the original config file, ignoring
previous <tt class="docutils literal"><span class="pre">script-opts</span></tt> values (for example, if an option is removed from
<tt class="docutils literal"><span class="pre">script-opts</span></tt> at runtime, the option will have the value in the config
file). <tt class="docutils literal">table</tt> entries are only written for option values whose values
effectively change (this is important if the script changes <tt class="docutils literal">table</tt>
entries independently).</p>
</dd>
</dl>
<p>Example implementation:</p>
<pre class="literal-block">
local options = {
    optionA = &quot;defaultvalueA&quot;,
    optionB = -0.5,
    optionC = true,
}

require &quot;mp.options&quot;.read_options(options, &quot;myscript&quot;)
print(options.optionA)
</pre>
<p>The config file will be stored in <tt class="docutils literal"><span class="pre">script-opts/identifier.conf</span></tt> in mpv's user
folder. Comment lines can be started with # and stray spaces are not removed.
Boolean values will be represented with yes/no.</p>
<p>Example config:</p>
<pre class="literal-block">
# comment
optionA=Hello World
optionB=9999
optionC=no
</pre>
<p>Command-line options are read from the <tt class="docutils literal"><span class="pre">--script-opts</span></tt> parameter. To avoid
collisions, all keys have to be prefixed with <tt class="docutils literal">identifier-</tt>.</p>
<p>Example command-line:</p>
<pre class="literal-block">
--script-opts=myscript-optionA=TEST,myscript-optionB=0,myscript-optionC=yes
</pre>
</div>
<div class="section" id="mp-utils-functions">
<h2>mp.utils functions</h2>
<p>This built-in module provides generic helper functions for Lua, and have
strictly speaking nothing to do with mpv or video/audio playback. They are
provided for convenience. Most compensate for Lua's scarce standard library.</p>
<p>Be warned that any of these functions might disappear any time. They are not
strictly part of the guaranteed API.</p>
<dl class="docutils">
<dt><tt class="docutils literal">utils.getcwd()</tt></dt>
<dd>Returns the directory that mpv was launched from. On error, <tt class="docutils literal">nil, error</tt>
is returned.</dd>
<dt><tt class="docutils literal">utils.readdir(path [, filter])</tt></dt>
<dd><p class="first">Enumerate all entries at the given path on the filesystem, and return them
as array. Each entry is a directory entry (without the path).
The list is unsorted (in whatever order the operating system returns it).</p>
<p>If the <tt class="docutils literal">filter</tt> argument is given, it must be one of the following
strings:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">files</tt></dt>
<dd>List regular files only. This excludes directories, special files
(like UNIX device files or FIFOs), and dead symlinks. It includes
UNIX symlinks to regular files.</dd>
<dt><tt class="docutils literal">dirs</tt></dt>
<dd>List directories only, or symlinks to directories. <tt class="docutils literal">.</tt> and <tt class="docutils literal">..</tt>
are not included.</dd>
<dt><tt class="docutils literal">normal</tt></dt>
<dd>Include the results of both <tt class="docutils literal">files</tt> and <tt class="docutils literal">dirs</tt>. (This is the
default.)</dd>
<dt><tt class="docutils literal">all</tt></dt>
<dd>List all entries, even device files, dead symlinks, FIFOs, and the
<tt class="docutils literal">.</tt> and <tt class="docutils literal">..</tt> entries.</dd>
</dl>
</blockquote>
<p class="last">On error, <tt class="docutils literal">nil, error</tt> is returned.</p>
</dd>
<dt><tt class="docutils literal">utils.file_info(path)</tt></dt>
<dd><p class="first">Stats the given path for information and returns a table with the
following entries:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">mode</tt></dt>
<dd>protection bits (on Windows, always 755 (octal) for directories
and 644 (octal) for files)</dd>
<dt><tt class="docutils literal">size</tt></dt>
<dd>size in bytes</dd>
<dt><tt class="docutils literal">atime</tt></dt>
<dd>time of last access</dd>
<dt><tt class="docutils literal">mtime</tt></dt>
<dd>time of last modification</dd>
<dt><tt class="docutils literal">ctime</tt></dt>
<dd>time of last metadata change</dd>
<dt><tt class="docutils literal">is_file</tt></dt>
<dd>Whether <tt class="docutils literal">path</tt> is a regular file (boolean)</dd>
<dt><tt class="docutils literal">is_dir</tt></dt>
<dd>Whether <tt class="docutils literal">path</tt> is a directory (boolean)</dd>
</dl>
</blockquote>
<p><tt class="docutils literal">mode</tt> and <tt class="docutils literal">size</tt> are integers.
Timestamps (<tt class="docutils literal">atime</tt>, <tt class="docutils literal">mtime</tt> and <tt class="docutils literal">ctime</tt>) are integer seconds since
the Unix epoch (Unix time).
The booleans <tt class="docutils literal">is_file</tt> and <tt class="docutils literal">is_dir</tt> are provided as a convenience;
they can be and are derived from <tt class="docutils literal">mode</tt>.</p>
<p class="last">On error (e.g. path does not exist), <tt class="docutils literal">nil, error</tt> is returned.</p>
</dd>
<dt><tt class="docutils literal">utils.split_path(path)</tt></dt>
<dd>Split a path into directory component and filename component, and return
them. The first return value is always the directory. The second return
value is the trailing part of the path, the directory entry.</dd>
<dt><tt class="docutils literal">utils.join_path(p1, p2)</tt></dt>
<dd>Return the concatenation of the 2 paths. Tries to be clever. For example,
if <tt class="docutils literal">p2</tt> is an absolute path, <tt class="docutils literal">p2</tt> is returned without change.</dd>
<dt><tt class="docutils literal">utils.subprocess(t)</tt></dt>
<dd><p class="first">Runs an external process and waits until it exits. Returns process status
and the captured output. This is a legacy wrapper around calling the
<tt class="docutils literal">subprocess</tt> command with <tt class="docutils literal">mp.command_native</tt>. It does the following
things:</p>
<ul class="simple">
<li>copy the table <tt class="docutils literal">t</tt></li>
<li>rename <tt class="docutils literal">cancellable</tt> field to <tt class="docutils literal">playback_only</tt></li>
<li>rename <tt class="docutils literal">max_size</tt> to <tt class="docutils literal">capture_size</tt></li>
<li>set <tt class="docutils literal">capture_stdout</tt> field to <tt class="docutils literal">true</tt> if unset</li>
<li>set <tt class="docutils literal">name</tt> field to <tt class="docutils literal">subprocess</tt></li>
<li>call <tt class="docutils literal">mp.command_native(copied_t)</tt></li>
<li>if the command failed, create a dummy result table</li>
<li>copy <tt class="docutils literal">error_string</tt> to <tt class="docutils literal">error</tt> field if the string is non-empty</li>
<li>return the result table</li>
</ul>
<p>It is recommended to use <tt class="docutils literal">mp.command_native</tt> or <tt class="docutils literal">mp.command_native_async</tt>
directly, instead of calling this legacy wrapper. It is for compatibility
only.</p>
<p class="last">See the <tt class="docutils literal">subprocess</tt> documentation for semantics and further parameters.</p>
</dd>
<dt><tt class="docutils literal">utils.subprocess_detached(t)</tt></dt>
<dd><p class="first">Runs an external process and detaches it from mpv's control.</p>
<p>The parameter <tt class="docutils literal">t</tt> is a table. The function reads the following entries:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">args</tt></dt>
<dd>Array of strings of the same semantics as the <tt class="docutils literal">args</tt> used in the
<tt class="docutils literal">subprocess</tt> function.</dd>
</dl>
</blockquote>
<p>The function returns <tt class="docutils literal">nil</tt>.</p>
<p class="last">This is a legacy wrapper around calling the <tt class="docutils literal">run</tt> command with
<tt class="docutils literal">mp.commandv</tt> and other functions.</p>
</dd>
<dt><tt class="docutils literal">utils.getpid()</tt></dt>
<dd>Returns the process ID of the running mpv process. This can be used to identify
the calling mpv when launching (detached) subprocesses.</dd>
<dt><tt class="docutils literal">utils.get_env_list()</tt></dt>
<dd>Returns the C environment as a list of strings. (Do not confuse this with
the Lua &quot;environment&quot;, which is an unrelated concept.)</dd>
<dt><tt class="docutils literal">utils.parse_json(str [, trail])</tt></dt>
<dd><p class="first">Parses the given string argument as JSON, and returns it as a Lua table. On
error, returns <tt class="docutils literal">nil, error</tt>. (Currently, <tt class="docutils literal">error</tt> is just a string
reading <tt class="docutils literal">error</tt>, because there is no fine-grained error reporting of any
kind.)</p>
<p>The returned value uses similar conventions as <tt class="docutils literal">mp.get_property_native()</tt>
to distinguish empty objects and arrays.</p>
<p class="last">If the <tt class="docutils literal">trail</tt> parameter is <tt class="docutils literal">true</tt> (or any value equal to <tt class="docutils literal">true</tt>),
then trailing non-whitespace text is tolerated by the function, and the
trailing text is returned as 3rd return value. (The 3rd return value is
always there, but with <tt class="docutils literal">trail</tt> set, no error is raised.)</p>
</dd>
<dt><tt class="docutils literal">utils.format_json(v)</tt></dt>
<dd><p class="first">Format the given Lua table (or value) as a JSON string and return it. On
error, returns <tt class="docutils literal">nil, error</tt>. (Errors usually only happen on value types
incompatible with JSON.)</p>
<p class="last">The argument value uses similar conventions as <tt class="docutils literal">mp.set_property_native()</tt>
to distinguish empty objects and arrays.</p>
</dd>
<dt><tt class="docutils literal">utils.to_string(v)</tt></dt>
<dd>Turn the given value into a string. Formats tables and their contents. This
doesn't do anything special; it is only needed because Lua is terrible.</dd>
</dl>
</div>
<div class="section" id="mp-input-functions">
<h2>mp.input functions</h2>
<p>This module lets scripts get textual input from the user using the console
REPL.</p>
<dl class="docutils">
<dt><tt class="docutils literal">input.get(table)</tt></dt>
<dd><p class="first">Show the console to let the user enter text.</p>
<p>The following entries of <tt class="docutils literal">table</tt> are read:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">prompt</tt></dt>
<dd>The string to be displayed before the input field.</dd>
<dt><tt class="docutils literal">submit</tt></dt>
<dd>A callback invoked when the user presses Enter. The first argument is
the text in the console. You can close the console from within the
callback by calling <tt class="docutils literal">input.terminate()</tt>. If you don't, the console
stays open and the user can input more text.</dd>
<dt><tt class="docutils literal">opened</tt></dt>
<dd>A callback invoked when the console is shown. This can be used to
present a list of options with <tt class="docutils literal">input.set_log()</tt>.</dd>
<dt><tt class="docutils literal">edited</tt></dt>
<dd>A callback invoked when the text changes. The first argument is the text
in the console.</dd>
<dt><tt class="docutils literal">complete</tt></dt>
<dd>A callback invoked when the user presses TAB. The first argument is the
text before the cursor. The callback should return a table of the string
candidate completion values and the 1-based cursor position from which
the completion starts. console.lua will filter the suggestions beginning
with the the text between this position and the cursor, sort them
alphabetically, insert their longest common prefix, and show them when
there are multiple ones.</dd>
<dt><tt class="docutils literal">closed</tt></dt>
<dd>A callback invoked when the console is hidden, either because
<tt class="docutils literal">input.terminate()</tt> was invoked from the other callbacks, or because
the user closed it with a key binding. The first argument is the text in
the console, and the second argument is the cursor position.</dd>
<dt><tt class="docutils literal">default_text</tt></dt>
<dd>A string to pre-fill the input field with.</dd>
<dt><tt class="docutils literal">cursor_position</tt></dt>
<dd>The initial cursor position, starting from 1.</dd>
<dt><tt class="docutils literal">id</tt></dt>
<dd>An identifier that determines which input history and log buffer to use
among the ones stored for <tt class="docutils literal">input.get()</tt> calls. The input histories
and logs are stored in memory and do not persist across different mpv
invocations. Defaults to the calling script name with <tt class="docutils literal">prompt</tt>
appended.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">input.terminate()</tt></dt>
<dd>Close the console.</dd>
<dt><tt class="docutils literal">input.log(message, style, terminal_style)</tt></dt>
<dd>Add a line to the log buffer. <tt class="docutils literal">style</tt> can contain additional ASS tags to
apply to <tt class="docutils literal">message</tt>, and <tt class="docutils literal">terminal_style</tt> can contain escape sequences
that are used when the console is displayed in the terminal.</dd>
<dt><tt class="docutils literal">input.log_error(message)</tt></dt>
<dd>Helper to add a line to the log buffer with the same color as the one the
console uses for errors. Useful when the user submits invalid input.</dd>
<dt><tt class="docutils literal">input.set_log(log)</tt></dt>
<dd><p class="first">Replace the entire log buffer.</p>
<p><tt class="docutils literal">log</tt> is a table of strings, or tables with <tt class="docutils literal">text</tt>, <tt class="docutils literal">style</tt> and
<tt class="docutils literal">terminal_style</tt> keys.</p>
<p>Example:</p>
<pre class="last literal-block">
input.set_log({
    &quot;regular text&quot;,
    {
        text = &quot;error text&quot;,
        style = &quot;{\\c&amp;H7a77f2&amp;}&quot;,
        terminal_style = &quot;\027[31m&quot;,
    }
})
</pre>
</dd>
<dt><tt class="docutils literal">input.select(table)</tt></dt>
<dd><p class="first">Specify a list of items that are presented to the user for selection. The
user can type part of the desired item and/or navigate them with
keybindings: <tt class="docutils literal">Down</tt> and <tt class="docutils literal">Ctrl+n</tt> go down, <tt class="docutils literal">Up</tt> and <tt class="docutils literal">Ctrl+p</tt> go up,
<tt class="docutils literal">Page down</tt> and <tt class="docutils literal">Ctrl+f</tt> scroll down one page, and <tt class="docutils literal">Page up</tt> and
<tt class="docutils literal">Ctrl+b</tt> scroll up one page.</p>
<p>The following entries of <tt class="docutils literal">table</tt> are read:</p>
<dl class="docutils">
<dt><tt class="docutils literal">prompt</tt></dt>
<dd>The string to be displayed before the input field.</dd>
<dt><tt class="docutils literal">items</tt></dt>
<dd>The table of the entries to choose from.</dd>
<dt><tt class="docutils literal">default_item</tt></dt>
<dd>The 1-based integer index of the preselected item.</dd>
<dt><tt class="docutils literal">submit</tt></dt>
<dd>The callback invoked when the user presses Enter. The first argument is
the 1-based index of the selected item. Unlike with <tt class="docutils literal">input.get()</tt>, the
console is automatically closed on submit without having to call
<tt class="docutils literal">input.terminate()</tt>.</dd>
</dl>
<p>Example:</p>
<blockquote class="last">
<pre class="literal-block">
input.select({
    items = {
        &quot;First playlist entry&quot;,
        &quot;Second playlist entry&quot;,
    },
    submit = function (id)
        mp.commandv(&quot;playlist-play-index&quot;, id - 1)
    end,
})
</pre>
</blockquote>
</dd>
</dl>
</div>
<div class="section" id="events">
<h2>Events</h2>
<p>Events are notifications from player core to scripts. You can register an
event handler with <tt class="docutils literal">mp.register_event</tt>.</p>
<p>Note that all scripts (and other parts of the player) receive events equally,
and there's no such thing as blocking other scripts from receiving events.</p>
<p>Example:</p>
<pre class="literal-block">
function my_fn(event)
    print(&quot;start of playback!&quot;)
end

mp.register_event(&quot;file-loaded&quot;, my_fn)
</pre>
<p>For the existing event types, see <a class="reference internal" href="#list-of-events">List of events</a>.</p>
</div>
<div class="section" id="extras">
<h2>Extras</h2>
<p>This documents experimental features, or features that are &quot;too special&quot; to
guarantee a stable interface.</p>
<dl class="docutils">
<dt><tt class="docutils literal">mp.add_hook(type, priority, fn)</tt></dt>
<dd><p class="first">Add a hook callback for <tt class="docutils literal">type</tt> (a string identifying a certain kind of
hook). These hooks allow the player to call script functions and wait for
their result (normally, the Lua scripting interface is asynchronous from
the point of view of the player core). <tt class="docutils literal">priority</tt> is an arbitrary integer
that allows ordering among hooks of the same kind. Using the value 50 is
recommended as neutral default value.</p>
<p><tt class="docutils literal">fn(hook)</tt> is the function that will be called during execution of the
hook. The parameter passed to it (<tt class="docutils literal">hook</tt>) is a Lua object that can control
further aspects about the currently invoked hook. It provides the following
methods:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal">defer()</tt></dt>
<dd>Returning from the hook function should not automatically continue
the hook. Instead, the API user wants to call <tt class="docutils literal">hook:cont()</tt> on its
own at a later point in time (before or after the function has
returned).</dd>
<dt><tt class="docutils literal">cont()</tt></dt>
<dd>Continue the hook. Doesn't need to be called unless <tt class="docutils literal">defer()</tt> was
called.</dd>
</dl>
</blockquote>
<p class="last">See <a class="reference internal" href="#hooks">Hooks</a> for currently existing hooks and what they do - only the hook
list is interesting; handling hook execution is done by the Lua script
function automatically.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="javascript">
<h1>JAVASCRIPT</h1>
<p>JavaScript support in mpv is near identical to its Lua support. Use this section
as reference on differences and availability of APIs, but otherwise you should
refer to the Lua documentation for API details and general scripting in mpv.</p>
<div class="section" id="id6">
<h2>Example</h2>
<p>JavaScript code which leaves fullscreen mode when the player is paused:</p>
<pre class="literal-block">
function on_pause_change(name, value) {
    if (value == true)
        mp.set_property(&quot;fullscreen&quot;, &quot;no&quot;);
}
mp.observe_property(&quot;pause&quot;, &quot;bool&quot;, on_pause_change);
</pre>
</div>
<div class="section" id="similarities-with-lua">
<h2>Similarities with Lua</h2>
<p>mpv tries to load a script file as JavaScript if it has a <tt class="docutils literal">.js</tt> extension, but
otherwise, the documented Lua options, script directories, loading, etc apply to
JavaScript files too.</p>
<p>Script initialization and lifecycle is the same as with Lua, and most of the Lua
functions in the modules <tt class="docutils literal">mp</tt>, <tt class="docutils literal">mp.utils</tt>, <tt class="docutils literal">mp.msg</tt>, <tt class="docutils literal">mp.options</tt> and
<tt class="docutils literal">mp.input</tt> are available to JavaScript with identical APIs - including running
commands, getting/setting properties, registering events/key-bindings/hooks,
etc.</p>
</div>
<div class="section" id="differences-from-lua">
<h2>Differences from Lua</h2>
<p>No need to load modules. <tt class="docutils literal">mp</tt>, <tt class="docutils literal">mp.utils</tt>,  <tt class="docutils literal">mp.msg</tt>, <tt class="docutils literal">mp.options</tt> and
<tt class="docutils literal">mp.input</tt> are preloaded, and you can use e.g. <tt class="docutils literal">var cwd =
<span class="pre">mp.utils.getcwd();</span></tt> without prior setup.</p>
<p>Errors are slightly different. Where the Lua APIs return <tt class="docutils literal">nil</tt> for error,
the JavaScript ones return <tt class="docutils literal">undefined</tt>. Where Lua returns <tt class="docutils literal">something, error</tt>
JavaScript returns only <tt class="docutils literal">something</tt> - and makes <tt class="docutils literal">error</tt> available via
<tt class="docutils literal">mp.last_error()</tt>. Note that only some of the functions have this additional
<tt class="docutils literal">error</tt> value - typically the same ones which have it in Lua.</p>
<p>Standard APIs are preferred. For instance <tt class="docutils literal">setTimeout</tt> and <tt class="docutils literal">JSON.stringify</tt>
are available, but <tt class="docutils literal">mp.add_timeout</tt> and <tt class="docutils literal">mp.utils.format_json</tt> are not.</p>
<p>No standard library. This means that interaction with anything outside of mpv is
limited to the available APIs, typically via <tt class="docutils literal">mp.utils</tt>. However, some file
functions were added, and CommonJS <tt class="docutils literal">require</tt> is available too - where the
loaded modules have the same privileges as normal scripts.</p>
</div>
<div class="section" id="language-features-ecmascript-5">
<h2>Language features - ECMAScript 5</h2>
<p>The scripting backend which mpv currently uses is MuJS - a compatible minimal
ES5 interpreter. As such, <tt class="docutils literal">String.substring</tt> is implemented for instance,
while the common but non-standard <tt class="docutils literal">String.substr</tt> is not. Please consult the
MuJS pages on language features and platform support - <a class="reference external" href="https://mujs.com">https://mujs.com</a> .</p>
</div>
<div class="section" id="unsupported-lua-apis-and-their-js-alternatives">
<h2>Unsupported Lua APIs and their JS alternatives</h2>
<p><tt class="docutils literal">mp.add_timeout(seconds, fn)</tt>  JS: <tt class="docutils literal">id = setTimeout(fn, ms)</tt></p>
<p><tt class="docutils literal">mp.add_periodic_timer(seconds, fn)</tt>  JS: <tt class="docutils literal">id = setInterval(fn, ms)</tt></p>
<p><tt class="docutils literal">utils.parse_json(str [, trail])</tt>  JS: <tt class="docutils literal">JSON.parse(str)</tt></p>
<p><tt class="docutils literal">utils.format_json(v)</tt>  JS: <tt class="docutils literal">JSON.stringify(v)</tt></p>
<p><tt class="docutils literal">utils.to_string(v)</tt>  see <tt class="docutils literal">dump</tt> below.</p>
<p><tt class="docutils literal">mp.get_next_timeout()</tt> see event loop below.</p>
<p><tt class="docutils literal"><span class="pre">mp.dispatch_events([allow_wait])</span></tt> see event loop below.</p>
</div>
<div class="section" id="scripting-apis-identical-to-lua">
<h2>Scripting APIs - identical to Lua</h2>
<p>(LE) - Last-Error, indicates that <tt class="docutils literal">mp.last_error()</tt> can be used after the
call to test for success (empty string) or failure (non empty reason string).
Where the Lua APIs use <tt class="docutils literal">nil</tt> to indicate error, JS APIs use <tt class="docutils literal">undefined</tt>.</p>
<p><tt class="docutils literal">mp.command(string)</tt> (LE)</p>
<p><tt class="docutils literal">mp.commandv(arg1, arg2, <span class="pre">...)</span></tt> (LE)</p>
<p><tt class="docutils literal">mp.command_native(table [,def])</tt> (LE)</p>
<p><tt class="docutils literal">id = mp.command_native_async(table [,fn])</tt> (LE) Notes: <tt class="docutils literal">id</tt> is true-thy on
success, <tt class="docutils literal">error</tt> is empty string on success.</p>
<p><tt class="docutils literal">mp.abort_async_command(id)</tt></p>
<p><tt class="docutils literal">mp.del_property(name)</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_property(name [,def])</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_property_osd(name [,def])</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_property_bool(name [,def])</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_property_number(name [,def])</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_property_native(name [,def])</tt> (LE)</p>
<p><tt class="docutils literal">mp.set_property(name, value)</tt> (LE)</p>
<p><tt class="docutils literal">mp.set_property_bool(name, value)</tt> (LE)</p>
<p><tt class="docutils literal">mp.set_property_number(name, value)</tt> (LE)</p>
<p><tt class="docutils literal">mp.set_property_native(name, value)</tt> (LE)</p>
<p><tt class="docutils literal">mp.get_time()</tt></p>
<p><tt class="docutils literal">mp.add_key_binding(key, name|fn [,fn <span class="pre">[,flags]])</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.add_forced_key_binding(...)</span></tt></p>
<p><tt class="docutils literal">mp.remove_key_binding(name)</tt></p>
<p><tt class="docutils literal">mp.register_event(name, fn)</tt></p>
<p><tt class="docutils literal">mp.unregister_event(fn)</tt></p>
<p><tt class="docutils literal">mp.observe_property(name, type, fn)</tt></p>
<p><tt class="docutils literal">mp.unobserve_property(fn)</tt></p>
<p><tt class="docutils literal">mp.get_opt(key)</tt></p>
<p><tt class="docutils literal">mp.get_script_name()</tt></p>
<p><tt class="docutils literal">mp.get_script_directory()</tt></p>
<p><tt class="docutils literal">mp.osd_message(text [,duration])</tt></p>
<p><tt class="docutils literal">mp.get_wakeup_pipe()</tt></p>
<p><tt class="docutils literal">mp.register_idle(fn)</tt></p>
<p><tt class="docutils literal">mp.unregister_idle(fn)</tt></p>
<p><tt class="docutils literal">mp.enable_messages(level)</tt></p>
<p><tt class="docutils literal">mp.register_script_message(name, fn)</tt></p>
<p><tt class="docutils literal">mp.unregister_script_message(name)</tt></p>
<p><tt class="docutils literal">mp.create_osd_overlay(format)</tt></p>
<p><tt class="docutils literal">mp.get_osd_size()</tt>  (returned object has properties: width, height, aspect)</p>
<p><tt class="docutils literal">mp.msg.log(level, <span class="pre">...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.fatal(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.error(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.warn(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.info(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.verbose(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.debug(...)</span></tt></p>
<p><tt class="docutils literal"><span class="pre">mp.msg.trace(...)</span></tt></p>
<p><tt class="docutils literal">mp.utils.getcwd()</tt> (LE)</p>
<p><tt class="docutils literal">mp.utils.readdir(path [, filter])</tt> (LE)</p>
<p><tt class="docutils literal">mp.utils.file_info(path)</tt> (LE) Note: like lua - this does NOT expand
meta-paths like <tt class="docutils literal"><span class="pre">~~/foo</span></tt> (other JS file functions do expand meta paths).</p>
<p><tt class="docutils literal">mp.utils.split_path(path)</tt></p>
<p><tt class="docutils literal">mp.utils.join_path(p1, p2)</tt></p>
<p><tt class="docutils literal">mp.utils.subprocess(t)</tt></p>
<p><tt class="docutils literal">mp.utils.subprocess_detached(t)</tt></p>
<p><tt class="docutils literal">mp.utils.get_env_list()</tt></p>
<p><tt class="docutils literal">mp.utils.getpid()</tt> (LE)</p>
<p><tt class="docutils literal">mp.add_hook(type, priority, fn(hook))</tt></p>
<p><tt class="docutils literal">mp.options.read_options(obj [, identifier [, <span class="pre">on_update]])</span></tt> (types:
string/boolean/number)</p>
<p><tt class="docutils literal">mp.input.get(obj)</tt></p>
<p><tt class="docutils literal">mp.input.select(obj)</tt></p>
<p><tt class="docutils literal">mp.input.terminate()</tt></p>
<p><tt class="docutils literal">mp.input.log(message, style)</tt></p>
<p><tt class="docutils literal">mp.input.log_error(message)</tt></p>
<p><tt class="docutils literal">mp.input.set_log(log)</tt></p>
</div>
<div class="section" id="additional-utilities">
<h2>Additional utilities</h2>
<dl class="docutils">
<dt><tt class="docutils literal">mp.last_error()</tt></dt>
<dd>If used after an API call which updates last error, returns an empty string
if the API call succeeded, or a non-empty error reason string otherwise.</dd>
<dt><tt class="docutils literal">Error.stack</tt> (string)</dt>
<dd>When using <tt class="docutils literal">try { ... } catch(e) { ... }</tt>, then <tt class="docutils literal">e.stack</tt> is the stack
trace of the error - if it was created using the <tt class="docutils literal"><span class="pre">Error(...)</span></tt> constructor.</dd>
<dt><tt class="docutils literal">print</tt> (global)</dt>
<dd>A convenient alias to <tt class="docutils literal">mp.msg.info</tt>.</dd>
<dt><tt class="docutils literal">dump</tt> (global)</dt>
<dd>Like <tt class="docutils literal">print</tt> but also expands objects and arrays recursively.</dd>
<dt><tt class="docutils literal">mp.utils.getenv(name)</tt></dt>
<dd>Returns the value of the host environment variable <tt class="docutils literal">name</tt>, or
<tt class="docutils literal">undefined</tt> if the variable is not defined.</dd>
<dt><tt class="docutils literal">mp.utils.get_user_path(path)</tt></dt>
<dd>Trivial wrapper of the <tt class="docutils literal"><span class="pre">expand-path</span></tt> mpv command, returns a string.
<tt class="docutils literal">read_file</tt>, <tt class="docutils literal">write_file</tt>, <tt class="docutils literal">append_file</tt> and <tt class="docutils literal">require</tt> already
expand the path internally and accept mpv meta-paths like <tt class="docutils literal">~~desktop/foo</tt>.</dd>
<dt><tt class="docutils literal">mp.utils.read_file(fname [,max])</tt></dt>
<dd>Returns the content of file <tt class="docutils literal">fname</tt> as string. If <tt class="docutils literal">max</tt> is provided and
not negative, limit the read to <tt class="docutils literal">max</tt> bytes.</dd>
<dt><tt class="docutils literal">mp.utils.write_file(fname, str)</tt></dt>
<dd>(Over)write file <tt class="docutils literal">fname</tt> with text content <tt class="docutils literal">str</tt>. <tt class="docutils literal">fname</tt> must be
prefixed with <tt class="docutils literal"><span class="pre">file://</span></tt> as simple protection against accidental arguments
switch, e.g. <tt class="docutils literal"><span class="pre">mp.utils.write_file(&quot;file://~/abc.txt&quot;,</span> &quot;hello world&quot;)</tt>.</dd>
<dt><tt class="docutils literal">mp.utils.append_file(fname, str)</tt></dt>
<dd>Same as <tt class="docutils literal">mp.utils.write_file</tt> if the file <tt class="docutils literal">fname</tt> does not exist. If it
does exist then append instead of overwrite.</dd>
</dl>
<p>Note: <tt class="docutils literal">read_file</tt>, <tt class="docutils literal">write_file</tt> and <tt class="docutils literal">append_file</tt> throw on errors, allow
text content only.</p>
<dl class="docutils">
<dt><tt class="docutils literal">mp.get_time_ms()</tt></dt>
<dd>Same as <tt class="docutils literal">mp.get_time()</tt> but in ms instead of seconds.</dd>
<dt><tt class="docutils literal">mp.get_script_file()</tt></dt>
<dd>Returns the file name of the current script.</dd>
<dt><tt class="docutils literal">exit()</tt> (global)</dt>
<dd>Make the script exit at the end of the current event loop iteration.
Note: please remove added key bindings before calling <tt class="docutils literal">exit()</tt>.</dd>
<dt><tt class="docutils literal">mp.utils.compile_js(fname, content_str)</tt></dt>
<dd>Compiles the JS code <tt class="docutils literal">content_str</tt> as file name <tt class="docutils literal">fname</tt> (without loading
anything from the filesystem), and returns it as a function. Very similar
to a <tt class="docutils literal">Function</tt> constructor, but shows at stack traces as <tt class="docutils literal">fname</tt>.</dd>
<dt><tt class="docutils literal">mp.module_paths</tt></dt>
<dd>Global modules search paths array for the <tt class="docutils literal">require</tt> function (see below).</dd>
</dl>
</div>
<div class="section" id="timers-global">
<h2>Timers (global)</h2>
<p>The standard HTML/node.js timers are available:</p>
<p><tt class="docutils literal">id = setTimeout(fn [,duration [,arg1 <span class="pre">[,arg2...]]])</span></tt></p>
<p><tt class="docutils literal">id = setTimeout(code_string [,duration])</tt></p>
<p><tt class="docutils literal">clearTimeout(id)</tt></p>
<p><tt class="docutils literal">id = setInterval(fn [,duration [,arg1 <span class="pre">[,arg2...]]])</span></tt></p>
<p><tt class="docutils literal">id = setInterval(code_string [,duration])</tt></p>
<p><tt class="docutils literal">clearInterval(id)</tt></p>
<p><tt class="docutils literal">setTimeout</tt> and <tt class="docutils literal">setInterval</tt> return id, and later call <tt class="docutils literal">fn</tt> (or execute
<tt class="docutils literal">code_string</tt>) after <tt class="docutils literal">duration</tt> ms. Interval also repeat every <tt class="docutils literal">duration</tt>.</p>
<p><tt class="docutils literal">duration</tt> has a minimum and default value of 0, <tt class="docutils literal">code_string</tt> is
a plain string which is evaluated as JS code, and <tt class="docutils literal">[,arg1 <span class="pre">[,arg2..]]</span></tt> are used
as arguments (if provided) when calling back <tt class="docutils literal">fn</tt>.</p>
<p>The <tt class="docutils literal"><span class="pre">clear...(id)</span></tt> functions cancel timer <tt class="docutils literal">id</tt>, and are irreversible.</p>
<p>Note: timers always call back asynchronously, e.g. <tt class="docutils literal">setTimeout(fn)</tt> will never
call <tt class="docutils literal">fn</tt> before returning. <tt class="docutils literal">fn</tt> will be called either at the end of this
event loop iteration or at a later event loop iteration. This is true also for
intervals - which also never call back twice at the same event loop iteration.</p>
<p>Additionally, timers are processed after the event queue is empty, so it's valid
to use <tt class="docutils literal">setTimeout(fn)</tt> as a one-time idle observer.</p>
</div>
<div class="section" id="commonjs-modules-and-require-id">
<h2>CommonJS modules and <tt class="docutils literal">require(id)</tt></h2>
<p>CommonJS Modules are a standard system where scripts can export common functions
for use by other scripts. Specifically, a module is a script which adds
properties (functions, etc) to its pre-existing <tt class="docutils literal">exports</tt> object, which
another script can access with <tt class="docutils literal"><span class="pre">require(module-id)</span></tt>. This runs the module and
returns its <tt class="docutils literal">exports</tt> object. Further calls to <tt class="docutils literal">require</tt> for the same module
will return its cached <tt class="docutils literal">exports</tt> object without running the module again.</p>
<p>Modules and <tt class="docutils literal">require</tt> are supported, standard compliant, and generally similar
to node.js. However, most node.js modules won't run due to missing modules such
as <tt class="docutils literal">fs</tt>, <tt class="docutils literal">process</tt>, etc, but some node.js modules with minimal dependencies
do work. In general, this is for mpv modules and not a node.js replacement.</p>
<p>A <tt class="docutils literal">.js</tt> file extension is always added to <tt class="docutils literal">id</tt>, e.g. <tt class="docutils literal"><span class="pre">require(&quot;./foo&quot;)</span></tt>
will load the file <tt class="docutils literal">./foo.js</tt> and return its <tt class="docutils literal">exports</tt> object.</p>
<p>An id which starts with <tt class="docutils literal">./</tt> or <tt class="docutils literal">../</tt> is relative to the script or module
which <tt class="docutils literal">require</tt> it. Otherwise it's considered a top-level id (CommonJS term).</p>
<p>Top-level id is evaluated as absolute filesystem path if possible, e.g. <tt class="docutils literal">/x/y</tt>
or <tt class="docutils literal">~/x</tt>. Otherwise it's considered a global module id and searched according
to <tt class="docutils literal">mp.module_paths</tt> in normal array order, e.g. <tt class="docutils literal"><span class="pre">require(&quot;x&quot;)</span></tt> tries to
load <tt class="docutils literal">x.js</tt> at one of the array paths, and id <tt class="docutils literal">foo/x</tt> tries to load <tt class="docutils literal">x.js</tt>
inside dir <tt class="docutils literal">foo</tt> at one of the paths.</p>
<p>The <tt class="docutils literal">mp.module_paths</tt> array is empty by default except for scripts which are
loaded as a directory where it contains one item - <tt class="docutils literal"><span class="pre">&lt;directory&gt;/modules/</span></tt> .
The array may be updated from a script (or using custom init - see below) which
will affect future calls to <tt class="docutils literal">require</tt> for global module id's which are not
already loaded/cached.</p>
<p>No <tt class="docutils literal">global</tt> variable, but a module's <tt class="docutils literal">this</tt> at its top lexical scope is the
global object - also in strict mode. If you have a module which needs <tt class="docutils literal">global</tt>
as the global object, you could do <tt class="docutils literal">this.global = this;</tt> before <tt class="docutils literal">require</tt>.</p>
<p>Functions and variables declared at a module don't pollute the global object.</p>
</div>
<div class="section" id="custom-initialization">
<h2>Custom initialization</h2>
<p>After mpv initializes the JavaScript environment for a script but before it
loads the script - it tries to run the file <tt class="docutils literal">init.js</tt> at the root of the mpv
configuration directory. Code at this file can update the environment further
for all scripts. E.g. if it contains <tt class="docutils literal"><span class="pre">mp.module_paths.push(&quot;/foo&quot;)</span></tt> then
<tt class="docutils literal">require</tt> at all scripts will search global module id's also at <tt class="docutils literal">/foo</tt>
(do NOT do <tt class="docutils literal">mp.module_paths = <span class="pre">[&quot;/foo&quot;];</span></tt> because this will remove existing
paths - like <tt class="docutils literal"><span class="pre">&lt;script-dir&gt;/modules</span></tt> for scripts which load from a directory).</p>
<p>The custom-init file is ignored if mpv is invoked with <tt class="docutils literal"><span class="pre">--no-config</span></tt>.</p>
<p>Before mpv 0.34, the file name was <tt class="docutils literal">.init.js</tt> (with dot) at the same dir.</p>
</div>
<div class="section" id="the-event-loop">
<h2>The event loop</h2>
<p>The event loop poll/dispatch mpv events as long as the queue is not empty, then
processes the timers, then waits for the next event, and repeats this forever.</p>
<p>You could put this code at your script to replace the built-in event loop, and
also print every event which mpv sends to your script:</p>
<pre class="literal-block">
function mp_event_loop() {
    var wait = 0;
    do {
        var e = mp.wait_event(wait);
        dump(e);  // there could be a lot of prints...
        if (e.event != &quot;none&quot;) {
            mp.dispatch_event(e);
            wait = 0;
        } else {
            wait = mp.process_timers() / 1000;
            if (wait != 0) {
                mp.notify_idle_observers();
                wait = mp.peek_timers_wait() / 1000;
            }
        }
    } while (mp.keep_running);
}
</pre>
<p><tt class="docutils literal">mp_event_loop</tt> is a name which mpv tries to call after the script loads.
The internal implementation is similar to this (without <tt class="docutils literal">dump</tt> though..).</p>
<p><tt class="docutils literal">e = mp.wait_event(wait)</tt> returns when the next mpv event arrives, or after
<tt class="docutils literal">wait</tt> seconds if positive and no mpv events arrived. <tt class="docutils literal">wait</tt> value of 0
returns immediately (with <tt class="docutils literal">e.event == &quot;none&quot;</tt> if the queue is empty).</p>
<p><tt class="docutils literal">mp.dispatch_event(e)</tt> calls back the handlers registered for <tt class="docutils literal">e.event</tt>,
if there are such (event handlers, property observers, script messages, etc).</p>
<p><tt class="docutils literal">mp.process_timers()</tt> calls back the already-added, non-canceled due timers,
and returns the duration in ms till the next due timer (possibly 0), or -1 if
there are no pending timers. Must not be called recursively.</p>
<p><tt class="docutils literal">mp.notify_idle_observers()</tt> calls back the idle observers, which we do when
we're about to sleep (wait != 0), but the observers may add timers or take
non-negligible duration to complete, so we re-calculate <tt class="docutils literal">wait</tt> afterwards.</p>
<p><tt class="docutils literal">mp.peek_timers_wait()</tt> returns the same values as <tt class="docutils literal">mp.process_timers()</tt>
but without doing anything. Invalid result if called from a timer callback.</p>
<p>Note: <tt class="docutils literal">exit()</tt> is also registered for the <tt class="docutils literal">shutdown</tt> event, and its
implementation is a simple <tt class="docutils literal">mp.keep_running = false</tt>.</p>
</div>
</div>
<div class="section" id="json-ipc">
<h1>JSON IPC</h1>
<p>mpv can be controlled by external programs using the JSON-based IPC protocol.
It can be enabled by specifying the path to a unix socket or a named pipe using
the option <tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt>, or the file descriptor number of a unix socket
or a named pipe using <tt class="docutils literal"><span class="pre">--input-ipc-client</span></tt>.
Clients can connect to this socket and send commands to the player or receive
events from it.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This is not intended to be a secure network protocol. It is explicitly
insecure: there is no authentication, no encryption, and the commands
themselves are insecure too. For example, the <tt class="docutils literal">run</tt> command is exposed,
which can run arbitrary system commands. The use-case is controlling the
player locally. This is not different from the MPlayer slave protocol.</p>
</div>
<div class="section" id="socat-example">
<h2>Socat example</h2>
<p>You can use the <tt class="docutils literal">socat</tt> tool to send commands (and receive replies) from the
shell. Assuming mpv was started with:</p>
<pre class="literal-block">
mpv file.mkv --input-ipc-server=/tmp/mpvsocket
</pre>
<p>Then you can control it using socat:</p>
<pre class="literal-block">
&gt; echo '{ &quot;command&quot;: [&quot;get_property&quot;, &quot;playback-time&quot;] }' | socat - /tmp/mpvsocket
{&quot;data&quot;:190.482000,&quot;error&quot;:&quot;success&quot;}
</pre>
<p>In this case, socat copies data between stdin/stdout and the mpv socket
connection.</p>
<p>See the <tt class="docutils literal"><span class="pre">--idle</span></tt> option how to make mpv start without exiting immediately or
playing a file.</p>
<p>It's also possible to send input.conf style text-only commands:</p>
<pre class="literal-block">
&gt; echo 'show-text ${playback-time}' | socat - /tmp/mpvsocket
</pre>
<p>But you won't get a reply over the socket. (This particular command shows the
playback time on the player's OSD.)</p>
</div>
<div class="section" id="command-prompt-example">
<h2>Command Prompt example</h2>
<p>Unfortunately, it's not as easy to test the IPC protocol on Windows, since
Windows ports of socat (in Cygwin and MSYS2) don't understand named pipes. In
the absence of a simple tool to send and receive from bidirectional pipes, the
<tt class="docutils literal">echo</tt> command can be used to send commands, but not receive replies from the
command prompt.</p>
<p>Assuming mpv was started with:</p>
<pre class="literal-block">
mpv file.mkv --input-ipc-server=\\.\pipe\mpvsocket
</pre>
<p>You can send commands from a command prompt:</p>
<pre class="literal-block">
echo show-text ${playback-time} &gt;\\.\pipe\mpvsocket
</pre>
<p>To be able to simultaneously read and write from the IPC pipe, like on Linux,
it's necessary to write an external program that uses overlapped file I/O (or
some wrapper like .NET's NamedPipeClientStream.)</p>
<p>You can open the pipe in PuTTY as &quot;serial&quot; device. This is not very
comfortable, but gives a way to test interactively without having to write code.</p>
</div>
<div class="section" id="protocol">
<h2>Protocol</h2>
<p>The protocol uses UTF-8-only JSON as defined by RFC-8259. Unlike standard JSON,
&quot;u&quot; escape sequences are not allowed to construct surrogate pairs. To avoid
getting conflicts, encode all text characters including and above codepoint
U+0020 as UTF-8. mpv might output broken UTF-8 in corner cases (see &quot;UTF-8&quot;
section below).</p>
<p>Clients can execute commands on the player by sending JSON messages of the
following form:</p>
<pre class="literal-block">
{ &quot;command&quot;: [&quot;command_name&quot;, &quot;param1&quot;, &quot;param2&quot;, ...] }
</pre>
<p>where <tt class="docutils literal">command_name</tt> is the name of the command to be executed, followed by a
list of parameters. Parameters must be formatted as native JSON values
(integers, strings, booleans, ...). Every message <strong>must</strong> be terminated with
<tt class="docutils literal">\n</tt>. Additionally, <tt class="docutils literal">\n</tt> must not appear anywhere inside the message. In
practice this means that messages should be minified before being sent to mpv.</p>
<p>mpv will then send back a reply indicating whether the command was run
correctly, and an additional field holding the command-specific return data (it
can also be null).</p>
<pre class="literal-block">
{ &quot;error&quot;: &quot;success&quot;, &quot;data&quot;: null }
</pre>
<p>mpv will also send events to clients with JSON messages of the following form:</p>
<pre class="literal-block">
{ &quot;event&quot;: &quot;event_name&quot; }
</pre>
<p>where <tt class="docutils literal">event_name</tt> is the name of the event. Additional event-specific fields
can also be present. See <a class="reference internal" href="#list-of-events">List of events</a> for a list of all supported events.</p>
<p>Because events can occur at any time, it may be difficult at times to determine
which response goes with which command. Commands may optionally include a
<tt class="docutils literal">request_id</tt> which, if provided in the command request, will be copied
verbatim into the response. mpv does not interpret the <tt class="docutils literal">request_id</tt> in any
way; it is solely for the use of the requester. The only requirement is that
the <tt class="docutils literal">request_id</tt> field must be an integer (a number without fractional parts
in the range <tt class="docutils literal"><span class="pre">-2^63..2^63-1</span></tt>). Using other types is deprecated and will
currently show a warning. In the future, this will raise an error.</p>
<p>For example, this request:</p>
<pre class="literal-block">
{ &quot;command&quot;: [&quot;get_property&quot;, &quot;time-pos&quot;], &quot;request_id&quot;: 100 }
</pre>
<p>Would generate this response:</p>
<pre class="literal-block">
{ &quot;error&quot;: &quot;success&quot;, &quot;data&quot;: 1.468135, &quot;request_id&quot;: 100 }
</pre>
<p>If you don't specify a <tt class="docutils literal">request_id</tt>, command replies will set it to 0.</p>
<p>All commands, replies, and events are separated from each other with a line
break character (<tt class="docutils literal">\n</tt>).</p>
<p>If the first character (after skipping whitespace) is not <tt class="docutils literal">{</tt>, the command
will be interpreted as non-JSON text command, as they are used in input.conf
(or <tt class="docutils literal">mpv_command_string()</tt> in the client API). Additionally, lines starting
with <tt class="docutils literal">#</tt> and empty lines are ignored.</p>
<p>Currently, embedded 0 bytes terminate the current line, but you should not
rely on this.</p>
</div>
<div class="section" id="data-flow">
<h2>Data flow</h2>
<p>Currently, the mpv-side IPC implementation does not service the socket while a
command is executed and the reply is written. It is for example not possible
that other events, that happened during the execution of the command, are
written to the socket before the reply is written.</p>
<p>This might change in the future. The only guarantee is that replies to IPC
messages are sent in sequence.</p>
<p>Also, since socket I/O is inherently asynchronous, it is possible that you read
unrelated event messages from the socket, before you read the reply to the
previous command you sent. In this case, these events were queued by the mpv
side before it read and started processing your command message.</p>
<p>If the mpv-side IPC implementation switches away from blocking writes and
blocking command execution, it may attempt to send events at any time.</p>
<p>You can also use asynchronous commands, which can return in any order, and
which do not block IPC protocol interaction at all while the command is
executed in the background.</p>
</div>
<div class="section" id="asynchronous-commands">
<h2>Asynchronous commands</h2>
<p>Command can be run asynchronously. This behaves exactly as with normal command
execution, except that execution is not blocking. Other commands can be sent
while it's executing, and command completion can be arbitrarily reordered.</p>
<p>The <tt class="docutils literal">async</tt> field controls this. If present, it must be a boolean. If missing,
<tt class="docutils literal">false</tt> is assumed.</p>
<p>For example, this initiates an asynchronous command:</p>
<pre class="literal-block">
{ &quot;command&quot;: [&quot;screenshot&quot;], &quot;request_id&quot;: 123, &quot;async&quot;: true }
</pre>
<p>And this is the completion:</p>
<pre class="literal-block">
{&quot;request_id&quot;:123,&quot;error&quot;:&quot;success&quot;,&quot;data&quot;:null}
</pre>
<p>By design, you will not get a confirmation that the command was started. If a
command is long running, sending the message will not lead to any reply until
much later when the command finishes.</p>
<p>Some commands execute synchronously, but these will behave like asynchronous
commands that finished execution immediately.</p>
<p>Cancellation of asynchronous commands is available in the libmpv API, but has
not yet been implemented in the IPC protocol.</p>
</div>
<div class="section" id="commands-with-named-arguments">
<h2>Commands with named arguments</h2>
<p>If the <tt class="docutils literal">command</tt> field is a JSON object, named arguments are expected. This
is described in the C API <tt class="docutils literal">mpv_command_node()</tt> documentation (the
<tt class="docutils literal">MPV_FORMAT_NODE_MAP</tt> case). In some cases, this may make commands more
readable, while some obscure commands basically require using named arguments.</p>
<p>Currently, only &quot;proper&quot; commands (as listed by <a class="reference internal" href="#list-of-input-commands">List of Input Commands</a>)
support named arguments.</p>
</div>
<div class="section" id="id7">
<h2>Commands</h2>
<p>In addition to the commands described in <a class="reference internal" href="#list-of-input-commands">List of Input Commands</a>, a few
extra commands can also be used as part of the protocol:</p>
<dl class="docutils">
<dt><tt class="docutils literal">client_name</tt></dt>
<dd>Return the name of the client as string. This is the string <tt class="docutils literal"><span class="pre">ipc-N</span></tt> with
N being an integer number.</dd>
<dt><tt class="docutils literal">get_time_us</tt></dt>
<dd>Return the current mpv internal time in microseconds as a number. This is
basically the system time, with an arbitrary offset.</dd>
<dt><tt class="docutils literal">get_property</tt></dt>
<dd><p class="first">Return the value of the given property. The value will be sent in the data
field of the replay message.</p>
<p>Example:</p>
<pre class="last literal-block">
{ &quot;command&quot;: [&quot;get_property&quot;, &quot;volume&quot;] }
{ &quot;data&quot;: 50.0, &quot;error&quot;: &quot;success&quot; }
</pre>
</dd>
<dt><tt class="docutils literal">get_property_string</tt></dt>
<dd><p class="first">Like <tt class="docutils literal">get_property</tt>, but the resulting data will always be a string.</p>
<p>Example:</p>
<pre class="last literal-block">
{ &quot;command&quot;: [&quot;get_property_string&quot;, &quot;volume&quot;] }
{ &quot;data&quot;: &quot;50.000000&quot;, &quot;error&quot;: &quot;success&quot; }
</pre>
</dd>
<dt><tt class="docutils literal">set_property</tt></dt>
<dd><p class="first">Set the given property to the given value. See <a class="reference internal" href="#properties">Properties</a> for more
information about properties.</p>
<p>Example:</p>
<pre class="last literal-block">
{ &quot;command&quot;: [&quot;set_property&quot;, &quot;pause&quot;, true] }
{ &quot;error&quot;: &quot;success&quot; }
</pre>
</dd>
<dt><tt class="docutils literal">set_property_string</tt></dt>
<dd>Alias for <tt class="docutils literal">set_property</tt>. Both commands accept native values and strings.</dd>
<dt><tt class="docutils literal">observe_property</tt></dt>
<dd><p class="first">Watch a property for changes. If the given property is changed, then an
event of type <tt class="docutils literal"><span class="pre">property-change</span></tt> will be generated</p>
<p>Example:</p>
<pre class="literal-block">
{ &quot;command&quot;: [&quot;observe_property&quot;, 1, &quot;volume&quot;] }
{ &quot;error&quot;: &quot;success&quot; }
{ &quot;event&quot;: &quot;property-change&quot;, &quot;id&quot;: 1, &quot;data&quot;: 52.0, &quot;name&quot;: &quot;volume&quot; }
</pre>
<div class="admonition warning last">
<p class="first admonition-title">Warning</p>
<p class="last">If the connection is closed, the IPC client is destroyed internally,
and the observed properties are unregistered. This happens for example
when sending commands to a socket with separate <tt class="docutils literal">socat</tt> invocations.
This can make it seem like property observation does not work. You must
keep the IPC connection open to make it work.</p>
</div>
</dd>
<dt><tt class="docutils literal">observe_property_string</tt></dt>
<dd><p class="first">Like <tt class="docutils literal">observe_property</tt>, but the resulting data will always be a string.</p>
<p>Example:</p>
<pre class="last literal-block">
{ &quot;command&quot;: [&quot;observe_property_string&quot;, 1, &quot;volume&quot;] }
{ &quot;error&quot;: &quot;success&quot; }
{ &quot;event&quot;: &quot;property-change&quot;, &quot;id&quot;: 1, &quot;data&quot;: &quot;52.000000&quot;, &quot;name&quot;: &quot;volume&quot; }
</pre>
</dd>
<dt><tt class="docutils literal">unobserve_property</tt></dt>
<dd><p class="first">Undo <tt class="docutils literal">observe_property</tt> or <tt class="docutils literal">observe_property_string</tt>. This requires the
numeric id passed to the observed command as argument.</p>
<p>Example:</p>
<pre class="last literal-block">
{ &quot;command&quot;: [&quot;unobserve_property&quot;, 1] }
{ &quot;error&quot;: &quot;success&quot; }
</pre>
</dd>
<dt><tt class="docutils literal">request_log_messages</tt></dt>
<dd><p class="first">Enable output of mpv log messages. They will be received as events. The
parameter to this command is the log-level (see <tt class="docutils literal">mpv_request_log_messages</tt>
C API function).</p>
<p class="last">Log message output is meant for humans only (mostly for debugging).
Attempting to retrieve information by parsing these messages will just
lead to breakages with future mpv releases. Instead, make a feature request,
and ask for a proper event that returns the information you need.</p>
</dd>
<dt><tt class="docutils literal">enable_event</tt>, <tt class="docutils literal">disable_event</tt></dt>
<dd><p class="first">Enables or disables the named event. Mirrors the <tt class="docutils literal">mpv_request_event</tt> C
API function. If the string <tt class="docutils literal">all</tt> is used instead of an event name, all
events are enabled or disabled.</p>
<p class="last">By default, most events are enabled, and there is not much use for this
command.</p>
</dd>
<dt><tt class="docutils literal">get_version</tt></dt>
<dd><p class="first">Returns the client API version the C API of the remote mpv instance
provides.</p>
<p class="last">See also: <tt class="docutils literal"><span class="pre">DOCS/client-api-changes.rst</span></tt>.</p>
</dd>
</dl>
</div>
<div class="section" id="utf-8">
<h2>UTF-8</h2>
<p>Normally, all strings are in UTF-8. Sometimes it can happen that strings are
in some broken encoding (often happens with file tags and such, and filenames
on many Unixes are not required to be in UTF-8 either). This means that mpv
sometimes sends invalid JSON. If that is a problem for the client application's
parser, it should filter the raw data for invalid UTF-8 sequences and perform
the desired replacement, before feeding the data to its JSON parser.</p>
<p>mpv will not attempt to construct invalid UTF-8 with broken &quot;u&quot; escape
sequences. This includes surrogate pairs.</p>
</div>
<div class="section" id="json-extensions">
<h2>JSON extensions</h2>
<p>The following non-standard extensions are supported:</p>
<blockquote>
<ul class="simple">
<li>a list or object item can have a trailing &quot;,&quot;</li>
<li>object syntax accepts &quot;=&quot; in addition of &quot;:&quot;</li>
<li>object keys can be unquoted, if they start with a character in &quot;A-Za-z_&quot;
and contain only characters in &quot;A-Za-z0-9_&quot;</li>
<li>byte escapes with &quot;xAB&quot; are allowed (with AB being a 2 digit hex number)</li>
</ul>
</blockquote>
<p>Example:</p>
<pre class="literal-block">
{ objkey = &quot;value\x0A&quot; }
</pre>
<p>Is equivalent to:</p>
<pre class="literal-block">
{ &quot;objkey&quot;: &quot;value\n&quot; }
</pre>
</div>
<div class="section" id="alternative-ways-of-starting-clients">
<h2>Alternative ways of starting clients</h2>
<p>You can create an anonymous IPC connection without having to set
<tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt>. This is achieved through a mpv pseudo scripting backend
that starts processes.</p>
<p>You can put <tt class="docutils literal">.run</tt> file extension in the mpv scripts directory in its  config
directory (see the <a class="reference internal" href="#files">FILES</a> section for details), or load them through other
means (see <a class="reference internal" href="#script-location">Script location</a>). These scripts are simply executed with the OS
native mechanism (as if you ran them in the shell). They must have a proper
shebang and have the executable bit set.</p>
<p>When executed, a socket (the IPC connection) is passed to them through file
descriptor inheritance. The file descriptor is indicated as the special command
line argument <tt class="docutils literal"><span class="pre">--mpv-ipc-fd=N</span></tt>, where <tt class="docutils literal">N</tt> is the numeric file descriptor.</p>
<p>The rest is the same as with a normal <tt class="docutils literal"><span class="pre">--input-ipc-server</span></tt> IPC connection. mpv
does not attempt to observe or other interact with the started script process.</p>
<p>This does not work in Windows yet.</p>
</div>
</div>
<div class="section" id="changelog">
<h1>CHANGELOG</h1>
<p>There is no real changelog, but you can look at the following things:</p>
<ul>
<li><p class="first">The release changelog, which should contain most user-visible changes,
including new features and bug fixes:</p>
<p><a class="reference external" href="https://github.com/mpv-player/mpv/releases">https://github.com/mpv-player/mpv/releases</a></p>
</li>
<li><p class="first">The git log, which is the &quot;real&quot; changelog</p>
</li>
<li><p class="first">The file <a class="reference external" href="https://github.com/mpv-player/mpv/blob/master/DOCS/interface-changes.rst">https://github.com/mpv-player/mpv/blob/master/DOCS/interface-changes.rst</a>
documents changes to the command and user interface, such as options and
properties.</p>
</li>
<li><p class="first">C API changes are listed in
<a class="reference external" href="https://github.com/mpv-player/mpv/blob/master/DOCS/client-api-changes.rst">https://github.com/mpv-player/mpv/blob/master/DOCS/client-api-changes.rst</a></p>
</li>
<li><p class="first">The file <tt class="docutils literal"><span class="pre">mplayer-changes.rst</span></tt> in the <tt class="docutils literal">DOCS</tt> sub directory on the git
repository, which used to be in place of this section. It documents some
changes that happened since mplayer2 forked off MPlayer. (Not updated
anymore.)</p>
</li>
</ul>
</div>
<div class="section" id="embedding-into-other-programs-libmpv">
<h1>EMBEDDING INTO OTHER PROGRAMS (LIBMPV)</h1>
<p>mpv can be embedded into other programs as video/audio playback backend. The
recommended way to do so is using libmpv. See <tt class="docutils literal">libmpv/client.h</tt> in the mpv
source code repository. This provides a C API. Bindings for other languages
might be available (see wiki).</p>
<p>Since libmpv merely allows access to underlying mechanisms that can control
mpv, further documentation is spread over a few places:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/mpv-player/mpv/blob/master/libmpv/client.h">https://github.com/mpv-player/mpv/blob/master/libmpv/client.h</a></li>
<li><a class="reference external" href="https://mpv.io/manual/master/#options">https://mpv.io/manual/master/#options</a></li>
<li><a class="reference external" href="https://mpv.io/manual/master/#list-of-input-commands">https://mpv.io/manual/master/#list-of-input-commands</a></li>
<li><a class="reference external" href="https://mpv.io/manual/master/#properties">https://mpv.io/manual/master/#properties</a></li>
<li><a class="reference external" href="https://github.com/mpv-player/mpv-examples/tree/master/libmpv">https://github.com/mpv-player/mpv-examples/tree/master/libmpv</a></li>
</ul>
</div>
<div class="section" id="c-plugins">
<h1>C PLUGINS</h1>
<p>You can write C plugins for mpv. These use the libmpv API, although they do not
use the libmpv library itself.</p>
<p>They are enabled by default if compiler supports linking with the <tt class="docutils literal"><span class="pre">-rdynamic</span></tt>
flag on Linux/BSD platforms. On Windows the are always enabled.</p>
<div class="section" id="c-plugins-location">
<h2>C plugins location</h2>
<p>C plugins are put into the mpv scripts directory in its config directory
(see the <a class="reference internal" href="#files">FILES</a> section for details). They must have a <tt class="docutils literal">.so</tt> or <tt class="docutils literal">.dll</tt>
file extension. They can also be explicitly loaded with the <tt class="docutils literal"><span class="pre">--script</span></tt> option.</p>
</div>
<div class="section" id="api">
<h2>API</h2>
<p>A C plugin must export the following function:</p>
<pre class="literal-block">
int mpv_open_cplugin(mpv_handle *handle)
</pre>
<p>The plugin function will be called on loading time. This function does not
return as long as your plugin is loaded (it runs in its own thread). The
<tt class="docutils literal">handle</tt> will be deallocated as soon as the plugin function returns.</p>
<p>The return value is interpreted as error status. A value of <tt class="docutils literal">0</tt> is
interpreted as success, while <tt class="docutils literal"><span class="pre">-1</span></tt> signals an error. In the latter case,
the player prints an uninformative error message that loading failed.</p>
<p>Return values other than <tt class="docutils literal">0</tt> and <tt class="docutils literal"><span class="pre">-1</span></tt> are reserved, and trigger undefined
behavior.</p>
<p>Within the plugin function, you can call libmpv API functions. The <tt class="docutils literal">handle</tt>
is created by <tt class="docutils literal">mpv_create_client()</tt> (or actually an internal equivalent),
and belongs to you. You can call <tt class="docutils literal">mpv_wait_event()</tt> to wait for things
happening, and so on.</p>
<p>Note that the player might block until your plugin calls <tt class="docutils literal">mpv_wait_event()</tt>
for the first time. This gives you a chance to install initial hooks etc.
before playback begins.</p>
<p>The details are quite similar to Lua scripts.</p>
</div>
<div class="section" id="linkage-to-libmpv">
<h2>Linkage to libmpv</h2>
<p>The current implementation requires that your plugins are <strong>not</strong> linked against
libmpv. What your plugins use are not symbols from a libmpv binary, but
symbols from the mpv host binary.</p>
<p>On Windows to make symbols from the host binary available, you have to define
MPV_CPLUGIN_DYNAMIC_SYM when compiling cplugin. This will load symbols
dynamically, before calling <tt class="docutils literal">mpv_open_cplugin()</tt>.</p>
</div>
<div class="section" id="examples">
<h2>Examples</h2>
<p>See:</p>
<ul class="simple">
<li><a class="reference external" href="https://github.com/mpv-player/mpv-examples/tree/master/cplugins">https://github.com/mpv-player/mpv-examples/tree/master/cplugins</a></li>
</ul>
</div>
</div>
<div class="section" id="environment-variables">
<h1>ENVIRONMENT VARIABLES</h1>
<p>There are a number of environment variables that can be used to control the
behavior of mpv.</p>
<dl class="docutils">
<dt><tt class="docutils literal">HOME</tt>, <tt class="docutils literal">XDG_CONFIG_HOME</tt></dt>
<dd><p class="first">Used to determine mpv config directory. If <tt class="docutils literal">XDG_CONFIG_HOME</tt> is not set,
<tt class="docutils literal"><span class="pre">$HOME/.config/mpv</span></tt> is used.</p>
<p class="last"><tt class="docutils literal"><span class="pre">$HOME/.mpv</span></tt> is always added to the list of config search paths with a
lower priority.</p>
</dd>
<dt><tt class="docutils literal">MPV_HOME</tt></dt>
<dd>Directory where mpv looks for user settings. Overrides <tt class="docutils literal">HOME</tt>, and mpv
will try to load the config file as <tt class="docutils literal">$MPV_HOME/mpv.conf</tt>.</dd>
<dt><tt class="docutils literal">MPV_VERBOSE</tt> (see also <tt class="docutils literal"><span class="pre">-v</span></tt> and <tt class="docutils literal"><span class="pre">--msg-level</span></tt>)</dt>
<dd>Set the initial verbosity level across all message modules (default: 0).
This is an integer, and the resulting verbosity corresponds to the number
of <tt class="docutils literal"><span class="pre">--v</span></tt> options passed to the command line.</dd>
<dt><tt class="docutils literal">MPV_LEAK_REPORT</tt></dt>
<dd>If set to <tt class="docutils literal">1</tt>, enable internal talloc leak reporting. If set to another
value, disable leak reporting. If unset, use the default, which normally is
<tt class="docutils literal">0</tt>. If mpv was built with <tt class="docutils literal"><span class="pre">--enable-ta-leak-report</span></tt>, the default is
<tt class="docutils literal">1</tt>. If leak reporting was disabled at compile time (<tt class="docutils literal">NDEBUG</tt> in
custom <tt class="docutils literal">CFLAGS</tt>), this environment variable is ignored.</dd>
<dt><tt class="docutils literal">LADSPA_PATH</tt></dt>
<dd>Specifies the search path for LADSPA plugins. If it is unset, fully
qualified path names must be used.</dd>
<dt><tt class="docutils literal">DISPLAY</tt></dt>
<dd>Standard X11 display name to use.</dd>
<dt>FFmpeg:</dt>
<dd><p class="first">This library accesses various environment variables. However, they are not
centrally documented, and documenting them is not our job. Therefore, this
list is incomplete.</p>
<p>Notable environment variables:</p>
<dl class="last docutils">
<dt><tt class="docutils literal">http_proxy</tt></dt>
<dd>URL to proxy for <tt class="docutils literal"><span class="pre">http://</span></tt> and <tt class="docutils literal"><span class="pre">https://</span></tt> URLs.</dd>
<dt><tt class="docutils literal">no_proxy</tt></dt>
<dd>List of domain patterns for which no proxy should be used.
List entries are separated by <tt class="docutils literal">,</tt>. Patterns can include <tt class="docutils literal">*</tt>.</dd>
</dl>
</dd>
<dt>libdvdcss:</dt>
<dd><dl class="first last docutils">
<dt><tt class="docutils literal">DVDCSS_CACHE</tt></dt>
<dd>Specify a directory in which to store title key values. This will
speed up descrambling of DVDs which are in the cache. The
<tt class="docutils literal">DVDCSS_CACHE</tt> directory is created if it does not exist, and a
subdirectory is created named after the DVD's title or manufacturing
date. If <tt class="docutils literal">DVDCSS_CACHE</tt> is not set or is empty, libdvdcss will use
the default value which is <tt class="docutils literal"><span class="pre">${HOME}/.dvdcss/</span></tt> under Unix and
the roaming application data directory (<tt class="docutils literal">%APPDATA%</tt>) under
Windows. The special value &quot;off&quot; disables caching.</dd>
<dt><tt class="docutils literal">DVDCSS_METHOD</tt></dt>
<dd><p class="first">Sets the authentication and decryption method that libdvdcss will use
to read scrambled discs. Can be one of <tt class="docutils literal">title</tt>, <tt class="docutils literal">key</tt> or <tt class="docutils literal">disc</tt>.</p>
<dl class="last docutils">
<dt>key</dt>
<dd>is the default method. libdvdcss will use a set of calculated
player keys to try to get the disc key. This can fail if the drive
does not recognize any of the player keys.</dd>
<dt>disc</dt>
<dd>is a fallback method when key has failed. Instead of using player
keys, libdvdcss will crack the disc key using a brute force
algorithm. This process is CPU intensive and requires 64 MB of
memory to store temporary data.</dd>
<dt>title</dt>
<dd>is the fallback when all other methods have failed. It does not
rely on a key exchange with the DVD drive, but rather uses a crypto
attack to guess the title key. On rare cases this may fail because
there is not enough encrypted data on the disc to perform a
statistical attack, but on the other hand it is the only way to
decrypt a DVD stored on a hard disc, or a DVD with the wrong region
on an RPC2 drive.</dd>
</dl>
</dd>
<dt><tt class="docutils literal">DVDCSS_RAW_DEVICE</tt></dt>
<dd>Specify the raw device to use. Exact usage will depend on your
operating system, the Linux utility to set up raw devices is raw(8)
for instance. Please note that on most operating systems, using a raw
device requires highly aligned buffers: Linux requires a 2048 bytes
alignment (which is the size of a DVD sector).</dd>
<dt><tt class="docutils literal">DVDCSS_VERBOSE</tt></dt>
<dd><p class="first">Sets the libdvdcss verbosity level.</p>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">0:</th><td class="field-body">Outputs no messages at all.</td>
</tr>
<tr class="field"><th class="field-name">1:</th><td class="field-body">Outputs error messages to stderr.</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">Outputs error messages and debug messages to stderr.</td>
</tr>
</tbody>
</table>
</dd>
<dt><tt class="docutils literal">DVDREAD_NOKEYS</tt></dt>
<dd>Skip retrieving all keys on startup. Currently disabled.</dd>
<dt><tt class="docutils literal">HOME</tt></dt>
<dd>FIXME: Document this.</dd>
</dl>
</dd>
</dl>
</div>
<div class="section" id="exit-codes">
<h1>EXIT CODES</h1>
<p>Normally <strong>mpv</strong> returns 0 as exit code after finishing playback successfully.
If errors happen, the following exit codes can be returned:</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">1:</th><td class="field-body">Error initializing mpv. This is also returned if unknown options are
passed to mpv.</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">The file passed to mpv couldn't be played. This is somewhat fuzzy:
currently, playback of a file is considered to be successful if
initialization was mostly successful, even if playback fails
immediately after initialization.</td>
</tr>
<tr class="field"><th class="field-name">3:</th><td class="field-body">There were some files that could be played, and some files which
couldn't (using the definition of success from above).</td>
</tr>
<tr class="field"><th class="field-name">4:</th><td class="field-body">Quit due to a signal, Ctrl+c in a VO window (by default), or from the
default quit key bindings in encoding mode.</td>
</tr>
</tbody>
</table>
</blockquote>
<p>Note that quitting the player manually will always lead to exit code 0,
overriding the exit code that would be returned normally. Also, the <tt class="docutils literal">quit</tt>
input command can take an exit code: in this case, that exit code is returned.</p>
</div>
<div class="section" id="files">
<h1>FILES</h1>
<p>Note that this section assumes Linux/BSD. On other platforms the paths may be different.
For Windows-specifics, see <a class="reference internal" href="#files-on-windows">FILES ON WINDOWS</a> section.</p>
<p>All configuration files should be encoded in UTF-8.</p>
<dl class="docutils">
<dt><tt class="docutils literal">/usr/local/etc/mpv/mpv.conf</tt></dt>
<dd>mpv system-wide settings (depends on <tt class="docutils literal"><span class="pre">--prefix</span></tt> passed to configure - mpv
in default configuration will use <tt class="docutils literal">/usr/local/etc/mpv/</tt> as config
directory, while most Linux distributions will set it to <tt class="docutils literal">/etc/mpv/</tt>).</dd>
<dt><tt class="docutils literal"><span class="pre">~/.cache/mpv</span></tt></dt>
<dd><p class="first">The standard cache directory. Certain options within mpv may cause it to write
cache files to disk. This can be overridden by environment variables, in
ascending order:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">1:</th><td class="field-body">If <tt class="docutils literal">$XDG_CACHE_HOME</tt> is set, then the derived cache directory
will be <tt class="docutils literal">$XDG_CACHE_HOME/mpv</tt>.</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">If <tt class="docutils literal">$MPV_HOME</tt> is set, then the derived cache directory will be
<tt class="docutils literal">$MPV_HOME</tt>.</td>
</tr>
</tbody>
</table>
<p class="last">If the directory does not exist, mpv will try to create it automatically.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv</span></tt></dt>
<dd><p class="first">The standard configuration directory. This can be overridden by environment
variables, in ascending order:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">1:</th><td class="field-body">If <tt class="docutils literal">$XDG_CONFIG_HOME</tt> is set, then the derived configuration directory
will be <tt class="docutils literal">$XDG_CONFIG_HOME/mpv</tt>.</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">If <tt class="docutils literal">$MPV_HOME</tt> is set, then the derived configuration directory will be
<tt class="docutils literal">$MPV_HOME</tt>.</td>
</tr>
</tbody>
</table>
<p class="last">If this directory, nor the original configuration directory (see below) do
not exist, mpv tries to create this directory automatically.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.mpv/</span></tt></dt>
<dd><p class="first">The original (pre 0.5.0) configuration directory. It will continue to be
read if present. If this directory is present and the standard configuration
directory is not present, then cache files and watch later config files will
also be written to this directory.</p>
<p class="last">If both this directory and the standard configuration directory are
present, configuration will be read from both with the standard
configuration directory content taking precedence. However, you should
fully migrate to the standard directory and a warning will be shown in
this situation.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/mpv.conf</span></tt></dt>
<dd>mpv user settings (see <a class="reference internal" href="#configuration-files">CONFIGURATION FILES</a> section)</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/input.conf</span></tt></dt>
<dd>key bindings (see <a class="reference internal" href="#input-conf">INPUT.CONF</a> section)</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/fonts.conf</span></tt></dt>
<dd><p class="first">Fontconfig fonts.conf that is customized for mpv. You should include system
fonts.conf in this file or mpv would not know about fonts that you already
have in the system.</p>
<p class="last">Only available when libass is built with fontconfig.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/subfont.ttf</span></tt></dt>
<dd>fallback subtitle font</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/fonts/</span></tt></dt>
<dd>Default location for <tt class="docutils literal"><span class="pre">--sub-fonts-dir</span></tt> (see <a class="reference internal" href="#subtitles">Subtitles</a>) and
<tt class="docutils literal"><span class="pre">--osd-fonts-dir</span></tt> (see <a class="reference internal" href="#osd">OSD</a>).</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/scripts/</span></tt></dt>
<dd><p class="first">All files in this directory are loaded as if they were passed to the
<tt class="docutils literal"><span class="pre">--script</span></tt> option. They are loaded in alphabetical order.</p>
<p>The <tt class="docutils literal"><span class="pre">--load-scripts=no</span></tt> option disables loading these files.</p>
<p class="last">See <a class="reference internal" href="#script-location">Script location</a> for details.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.local/state/mpv/watch_later/</span></tt></dt>
<dd><p class="first">Contains temporary config files needed for resuming playback of files with
the watch later feature. See for example the <tt class="docutils literal">Q</tt> key binding, or the
<tt class="docutils literal"><span class="pre">quit-watch-later</span></tt> input command.</p>
<p>This can be overridden by environment variables, in ascending order:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">1:</th><td class="field-body">If <tt class="docutils literal">$XDG_STATE_HOME</tt> is set, then the derived watch later directory
will be <tt class="docutils literal">$XDG_STATE_HOME/mpv/watch_later</tt>.</td>
</tr>
<tr class="field"><th class="field-name">2:</th><td class="field-body">If <tt class="docutils literal">$MPV_HOME</tt> is set, then the derived watch later directory will be
<tt class="docutils literal">$MPV_HOME/watch_later</tt>.</td>
</tr>
</tbody>
</table>
<p class="last">Each file is a small config file which is loaded if the corresponding media
file is loaded. It contains the playback position and some (not necessarily
all) settings that were changed during playback. The filenames are hashed
from the full paths of the media files. It's in general not possible to
extract the media filename from this hash. However, you can set the
<tt class="docutils literal"><span class="pre">--write-filename-in-watch-later-config</span></tt> option, and the player will
add the media filename to the contents of the resume config file.</p>
</dd>
<dt><tt class="docutils literal"><span class="pre">~/.config/mpv/script-opts/osc.conf</span></tt></dt>
<dd><p class="first">This is loaded by the OSC script. See the <a class="reference internal" href="#on-screen-controller">ON SCREEN CONTROLLER</a> docs
for details.</p>
<p class="last">Other files in this directory are specific to the corresponding scripts
as well, and the mpv core doesn't touch them.</p>
</dd>
</dl>
</div>
<div class="section" id="files-on-windows">
<h1>FILES ON WINDOWS</h1>
<p>On win32 (if compiled with MinGW, but not Cygwin), the default config file
locations are different. They are generally located under <tt class="docutils literal"><span class="pre">%APPDATA%/mpv/</span></tt>.
For example, the path to mpv.conf is <tt class="docutils literal"><span class="pre">%APPDATA%/mpv/mpv.conf</span></tt>, which maps to
a system and user-specific path, for example</p>
<blockquote>
<tt class="docutils literal"><span class="pre">C:\users\USERNAME\AppData\Roaming\mpv\mpv.conf</span></tt></blockquote>
<p>You can find the exact path by running <tt class="docutils literal">echo <span class="pre">%APPDATA%\mpv\mpv.conf</span></tt> in cmd.exe.</p>
<p>Other config files (such as <tt class="docutils literal">input.conf</tt>) are in the same directory. See the
<a class="reference internal" href="#files">FILES</a> section above.</p>
<p>The cache directory is located at <tt class="docutils literal"><span class="pre">%LOCALAPPDATA%/mpv/cache</span></tt>.</p>
<p>The watch_later directory is located at <tt class="docutils literal"><span class="pre">%LOCALAPPDATA%/mpv/watch_later</span></tt>.</p>
<p>The environment variable <tt class="docutils literal">$MPV_HOME</tt> completely overrides these, like on
UNIX.</p>
<p>If a directory named <tt class="docutils literal">portable_config</tt> next to the mpv.exe exists, all
config will be loaded from this directory only. Watch later config files and
cache files are written to this directory as well. (This exists on Windows
only and is redundant with <tt class="docutils literal">$MPV_HOME</tt>. However, since Windows is very
scripting unfriendly, a wrapper script just setting <tt class="docutils literal">$MPV_HOME</tt>, like you
could do it on other systems, won't work. <tt class="docutils literal">portable_config</tt> is provided for
convenience to get around this restriction.)</p>
<p>Config files located in the same directory as <tt class="docutils literal">mpv.exe</tt> are loaded with
lower priority. Some config files are loaded only once, which means that
e.g. of 2 <tt class="docutils literal">input.conf</tt> files located in two config directories, only the
one from the directory with higher priority will be loaded.</p>
<p>A third config directory with the lowest priority is the directory named <tt class="docutils literal">mpv</tt>
in the same directory as <tt class="docutils literal">mpv.exe</tt>. This used to be the directory with the
highest priority, but is now discouraged to use and might be removed in the
future.</p>
<p>Note that mpv likes to mix <tt class="docutils literal">/</tt> and <tt class="docutils literal">\</tt> path separators for simplicity.
kernel32.dll accepts this, but cmd.exe does not.</p>
</div>
<div class="section" id="files-on-macos">
<h1>FILES ON MACOS</h1>
<p>On macOS the watch later directory is located at <tt class="docutils literal"><span class="pre">~/.config/mpv/watch_later/</span></tt>
and the cache directory is set to <tt class="docutils literal">~/Library/Caches/io.mpv/</tt>. These directories
can't be overwritten by environment variables.
Everything else is the same as <a class="reference internal" href="#files">FILES</a>.</p>
</div>

</div>
</div>
</div>
</div>

<footer>
<div class='container'>
<small class='pull-left text-muted copyright'>
&copy; 2012-2024 mpv.io
</small>
<div class='social-icons pull-right'>
<a href="https://github.com/mpv-player/mpv" target="_blank"><i class='fa fa-github-alt'></i>
</a><a href="https://twitter.com/mpv_player" target="_blank"><i class='fa fa-twitter'></i>
</a></div>
</div>
</footer>
</body>
</html>
